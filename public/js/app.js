/*! For license information please see app.js.LICENSE.txt */
(self.webpackChunk=self.webpackChunk||[]).push([[773],{3752:(t,e,r)=>{var n=r(9755);if(void 0===n)throw new Error("AdminLTE requires jQuery");!function(t){"use strict";function e(e,r){if(this.element=e,this.options=r,this.$overlay=t(r.overlayTemplate),""===r.source)throw new Error("Source url was not defined. Please specify a url in your BoxRefresh source option.");this._setUpListeners(),this.load()}var r="lte.boxrefresh",n={source:"",params:{},trigger:".refresh-btn",content:".box-body",loadInContent:!0,responseType:"",overlayTemplate:'<div class="overlay"><div class="fa fa-refresh fa-spin"></div></div>',onLoadStart:function(){},onLoadDone:function(t){return t}};function o(o){return this.each((function(){var i=t(this),a=i.data(r);if(!a){var s=t.extend({},n,i.data(),"object"==typeof o&&o);i.data(r,a=new e(i,s))}if("string"==typeof a){if(void 0===a[o])throw new Error("No method named "+o);a[o]()}}))}e.prototype.load=function(){this._addOverlay(),this.options.onLoadStart.call(t(this)),t.get(this.options.source,this.options.params,function(e){this.options.loadInContent&&t(this.element).find(this.options.content).html(e),this.options.onLoadDone.call(t(this),e),this._removeOverlay()}.bind(this),""!==this.options.responseType&&this.options.responseType)},e.prototype._setUpListeners=function(){t(this.element).on("click",this.options.trigger,function(t){t&&t.preventDefault(),this.load()}.bind(this))},e.prototype._addOverlay=function(){t(this.element).append(this.$overlay)},e.prototype._removeOverlay=function(){t(this.$overlay).remove()};var i=t.fn.boxRefresh;t.fn.boxRefresh=o,t.fn.boxRefresh.Constructor=e,t.fn.boxRefresh.noConflict=function(){return t.fn.boxRefresh=i,this},t(window).on("load",(function(){t('[data-widget="box-refresh"]').each((function(){o.call(t(this))}))}))}(n),function(t){"use strict";function e(t,e){this.element=t,this.options=e,this._setUpListeners()}var r="lte.boxwidget",n={animationSpeed:500,collapseTrigger:'[data-widget="collapse"]',removeTrigger:'[data-widget="remove"]',collapseIcon:"fa-minus",expandIcon:"fa-plus",removeIcon:"fa-times"},o=".box-header",i=".box-body",a=".box-footer",s=".box-tools",c="collapsed-box";function l(o){return this.each((function(){var i=t(this),a=i.data(r);if(!a){var s=t.extend({},n,i.data(),"object"==typeof o&&o);i.data(r,a=new e(i,s))}if("string"==typeof o){if(void 0===a[o])throw new Error("No method named "+o);a[o]()}}))}e.prototype.toggle=function(){t(this.element).is(".collapsed-box")?this.expand():this.collapse()},e.prototype.expand=function(){var e=t.Event("expanded.boxwidget"),r=t.Event("expanding.boxwidget"),n=this.options.collapseIcon,l=this.options.expandIcon;t(this.element).removeClass(c),t(this.element).children(o+", "+i+", "+a).children(s).find("."+l).removeClass(l).addClass(n),t(this.element).children(i+", "+a).slideDown(this.options.animationSpeed,function(){t(this.element).trigger(e)}.bind(this)).trigger(r)},e.prototype.collapse=function(){var e=t.Event("collapsed.boxwidget"),r=t.Event("collapsing.boxwidget"),n=this.options.collapseIcon,l=this.options.expandIcon;t(this.element).children(o+", "+i+", "+a).children(s).find("."+n).removeClass(n).addClass(l),t(this.element).children(i+", "+a).slideUp(this.options.animationSpeed,function(){t(this.element).addClass(c),t(this.element).trigger(e)}.bind(this)).trigger(r)},e.prototype.remove=function(){var e=t.Event("removed.boxwidget"),r=t.Event("removing.boxwidget");t(this.element).slideUp(this.options.animationSpeed,function(){t(this.element).trigger(e),t(this.element).remove()}.bind(this)).trigger(r)},e.prototype._setUpListeners=function(){var e=this;t(this.element).on("click",this.options.collapseTrigger,(function(r){return r&&r.preventDefault(),e.toggle(t(this)),!1})),t(this.element).on("click",this.options.removeTrigger,(function(r){return r&&r.preventDefault(),e.remove(t(this)),!1}))};var u=t.fn.boxWidget;t.fn.boxWidget=l,t.fn.boxWidget.Constructor=e,t.fn.boxWidget.noConflict=function(){return t.fn.boxWidget=u,this},t(window).on("load",(function(){t(".box").each((function(){l.call(t(this))}))}))}(n),function(t){"use strict";function e(t,e){this.element=t,this.options=e,this.hasBindedResize=!1,this.init()}var r="lte.controlsidebar",n={controlsidebarSlide:!0},o=".control-sidebar",i='[data-toggle="control-sidebar"]',a=".control-sidebar-open",s="control-sidebar-open",c="control-sidebar-hold-transition";function l(o){return this.each((function(){var i=t(this),a=i.data(r);if(!a){var s=t.extend({},n,i.data(),"object"==typeof o&&o);i.data(r,a=new e(i,s))}"string"==typeof o&&a.toggle()}))}e.prototype.init=function(){t(this.element).is(i)||t(this).on("click",this.toggle),this.fix(),t(window).resize(function(){this.fix()}.bind(this))},e.prototype.toggle=function(e){e&&e.preventDefault(),this.fix(),t(o).is(a)||t("body").is(a)?this.collapse():this.expand()},e.prototype.expand=function(){t(o).show(),this.options.controlsidebarSlide?t(o).addClass(s):t("body").addClass(c).addClass(s).delay(50).queue((function(){t("body").removeClass(c),t(this).dequeue()})),t(this.element).trigger(t.Event("expanded.controlsidebar"))},e.prototype.collapse=function(){this.options.controlsidebarSlide?t(o).removeClass(s):t("body").addClass(c).removeClass(s).delay(50).queue((function(){t("body").removeClass(c),t(this).dequeue()})),t(o).fadeOut(),t(this.element).trigger(t.Event("collapsed.controlsidebar"))},e.prototype.fix=function(){t("body").is(".layout-boxed")&&this._fixForBoxed(t(".control-sidebar-bg"))},e.prototype._fixForBoxed=function(e){e.css({position:"absolute",height:t(".wrapper").height()})};var u=t.fn.controlSidebar;t.fn.controlSidebar=l,t.fn.controlSidebar.Constructor=e,t.fn.controlSidebar.noConflict=function(){return t.fn.controlSidebar=u,this},t(document).on("click",i,(function(e){e&&e.preventDefault(),l.call(t(this),"toggle")}))}(n),function(t){"use strict";function e(t){this.element=t}var r="lte.directchat";function n(n){return this.each((function(){var o=t(this),i=o.data(r);i||o.data(r,i=new e(o)),"string"==typeof n&&i.toggle(o)}))}e.prototype.toggle=function(t){t.parents(".direct-chat").first().toggleClass("direct-chat-contacts-open")};var o=t.fn.directChat;t.fn.directChat=n,t.fn.directChat.Constructor=e,t.fn.directChat.noConflict=function(){return t.fn.directChat=o,this},t(document).on("click",'[data-widget="chat-pane-toggle"]',(function(e){e&&e.preventDefault(),n.call(t(this),"toggle")}))}(n),function(t){"use strict";function e(t){this.options=t,this.init()}var r="lte.pushmenu",n={collapseScreenSize:767,expandOnHover:!1,expandTransitionDelay:200},o='[data-toggle="push-menu"]',i=".sidebar-mini",a="sidebar-collapse",s="sidebar-open",c="sidebar-expanded-on-hover",l="expanded.pushMenu",u="collapsed.pushMenu";function d(o){return this.each((function(){var i=t(this),a=i.data(r);if(!a){var s=t.extend({},n,i.data(),"object"==typeof o&&o);i.data(r,a=new e(s))}"toggle"===o&&a.toggle()}))}e.prototype.init=function(){(this.options.expandOnHover||t("body").is(i+".fixed"))&&(this.expandOnHover(),t("body").addClass("sidebar-mini-expand-feature")),t(".content-wrapper").click(function(){t(window).width()<=this.options.collapseScreenSize&&t("body").hasClass(s)&&this.close()}.bind(this)),t(".sidebar-form .form-control").click((function(t){t.stopPropagation()}))},e.prototype.toggle=function(){var e=t(window).width(),r=!t("body").hasClass(a);e<=this.options.collapseScreenSize&&(r=t("body").hasClass(s)),r?this.close():this.open()},e.prototype.open=function(){t(window).width()>this.options.collapseScreenSize?t("body").removeClass(a).trigger(t.Event(l)):t("body").addClass(s).trigger(t.Event(l))},e.prototype.close=function(){t(window).width()>this.options.collapseScreenSize?t("body").addClass(a).trigger(t.Event(u)):t("body").removeClass(s+" "+a).trigger(t.Event(u))},e.prototype.expandOnHover=function(){t(".main-sidebar").hover(function(){t("body").is(i+".sidebar-collapse")&&t(window).width()>this.options.collapseScreenSize&&this.expand()}.bind(this),function(){t("body").is(".sidebar-expanded-on-hover")&&this.collapse()}.bind(this))},e.prototype.expand=function(){setTimeout((function(){t("body").removeClass(a).addClass(c)}),this.options.expandTransitionDelay)},e.prototype.collapse=function(){setTimeout((function(){t("body").removeClass(c).addClass(a)}),this.options.expandTransitionDelay)};var h=t.fn.pushMenu;t.fn.pushMenu=d,t.fn.pushMenu.Constructor=e,t.fn.pushMenu.noConflict=function(){return t.fn.pushMenu=h,this},t(document).on("click",o,(function(e){e.preventDefault(),d.call(t(this),"toggle")})),t(window).on("load",(function(){d.call(t(o))}))}(n),function(t){"use strict";function e(t,e){this.element=t,this.options=e,this._setUpListeners()}var r="lte.todolist",n={onCheck:function(t){return t},onUnCheck:function(t){return t}},o={data:'[data-widget="todo-list"]'};function i(o){return this.each((function(){var i=t(this),a=i.data(r);if(!a){var s=t.extend({},n,i.data(),"object"==typeof o&&o);i.data(r,a=new e(i,s))}if("string"==typeof a){if(void 0===a[o])throw new Error("No method named "+o);a[o]()}}))}e.prototype.toggle=function(t){t.parents(o.li).first().toggleClass("done"),t.prop("checked")?this.check(t):this.unCheck(t)},e.prototype.check=function(t){this.options.onCheck.call(t)},e.prototype.unCheck=function(t){this.options.onUnCheck.call(t)},e.prototype._setUpListeners=function(){var e=this;t(this.element).on("change ifChanged","input:checkbox",(function(){e.toggle(t(this))}))};var a=t.fn.todoList;t.fn.todoList=i,t.fn.todoList.Constructor=e,t.fn.todoList.noConflict=function(){return t.fn.todoList=a,this},t(window).on("load",(function(){t(o.data).each((function(){i.call(t(this))}))}))}(n),function(t){"use strict";function e(e,r){this.element=e,this.options=r,t(this.element).addClass(c),t(o+a,this.element).addClass(s),this._setUpListeners()}var r="lte.tree",n={animationSpeed:500,accordion:!0,followLink:!1,trigger:".treeview a"},o=".treeview",i=".treeview-menu",a=".active",s="menu-open",c="tree";function l(o){return this.each((function(){var i=t(this);if(!i.data(r)){var a=t.extend({},n,i.data(),"object"==typeof o&&o);i.data(r,new e(i,a))}}))}e.prototype.toggle=function(t,e){var r=t.next(i),n=t.parent(),a=n.hasClass(s);n.is(o)&&(this.options.followLink&&"#"!==t.attr("href")||e.preventDefault(),a?this.collapse(r,n):this.expand(r,n))},e.prototype.expand=function(e,r){var n=t.Event("expanded.tree");if(this.options.accordion){var o=r.siblings(".menu-open, .active"),a=o.children(i);this.collapse(a,o)}r.addClass(s),e.stop().slideDown(this.options.animationSpeed,function(){t(this.element).trigger(n),r.height("auto")}.bind(this))},e.prototype.collapse=function(e,r){var n=t.Event("collapsed.tree");r.removeClass(s),e.stop().slideUp(this.options.animationSpeed,function(){t(this.element).trigger(n),r.find(o).removeClass(s).find(i).hide()}.bind(this))},e.prototype._setUpListeners=function(){var e=this;t(this.element).on("click",this.options.trigger,(function(r){e.toggle(t(this),r)}))};var u=t.fn.tree;t.fn.tree=l,t.fn.tree.Constructor=e,t.fn.tree.noConflict=function(){return t.fn.tree=u,this},t(window).on("load",(function(){t('[data-widget="tree"]').each((function(){l.call(t(this))}))}))}(n),function(t){"use strict";function e(t){this.options=t,this.bindedResize=!1,this.activate()}var r="lte.layout",n={slimscroll:!0,resetHeight:!0},o=".wrapper",i=".content-wrapper",a=".main-header",s=".sidebar",c=".sidebar-menu",l="fixed";function u(o){return this.each((function(){var i=t(this),a=i.data(r);if(!a){var s=t.extend({},n,i.data(),"object"==typeof o&&o);i.data(r,a=new e(s))}if("string"==typeof o){if(void 0===a[o])throw new Error("No method named "+o);a[o]()}}))}e.prototype.activate=function(){this.fix(),this.fixSidebar(),t("body").removeClass("hold-transition"),this.options.resetHeight&&t("body, html, "+o).css({height:"auto","min-height":"100%"}),this.bindedResize||(t(window).resize(function(){this.fix(),this.fixSidebar(),t(".main-header .logo, "+s).one("webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend",function(){this.fix(),this.fixSidebar()}.bind(this))}.bind(this)),this.bindedResize=!0),t(c).on("expanded.tree",function(){this.fix(),this.fixSidebar()}.bind(this)),t(c).on("collapsed.tree",function(){this.fix(),this.fixSidebar()}.bind(this))},e.prototype.fix=function(){t(".layout-boxed > "+o).css("overflow","hidden");var e=t(".main-footer").outerHeight()||0,r=t(a).outerHeight()||0,n=r+e,c=t(window).height(),u=t(s).outerHeight()||0;if(t("body").hasClass(l))t(i).css("min-height",c-e);else{var d;d=u+r<=c?(t(i).css("min-height",c-n),c-n):(t(i).css("min-height",u),u);var h=t(".control-sidebar");void 0!==h&&h.height()>d&&t(i).css("min-height",h.height())}},e.prototype.fixSidebar=function(){t("body").hasClass(l)?this.options.slimscroll&&void 0!==t.fn.slimScroll&&0===t(".main-sidebar").find("slimScrollDiv").length&&t(s).slimScroll({height:t(window).height()-t(a).height()+"px"}):void 0!==t.fn.slimScroll&&t(s).slimScroll({destroy:!0}).height("auto")};var d=t.fn.layout;t.fn.layout=u,t.fn.layout.Constuctor=e,t.fn.layout.noConflict=function(){return t.fn.layout=d,this},t(window).on("load",(function(){u.call(t("body"))}))}(n)},7696:(t,e,r)=>{"use strict";var n=r(538),o=r(5330),i=r(8345);const a=[{path:"/",component:r(2001).Z,meta:{guest:!0},children:[{path:"",component:r(7238).Z}]},{path:"/",component:r(9936).Z,meta:{auth:!0,history:!0},children:[{path:"users",component:r(3071).Z},{path:"vehicleMgmts",component:r(7099).Z,props:{showEditBtn:!0}},{path:"objectMgmts",component:r(2679).Z},{path:"regionMgmts",component:r(8472).Z},{path:"events",component:r(5554).Z},{path:"parkingLotMgmts",component:r(5868).Z,props:{showEditBtn:!0,showCreateBtn:!0,titleText:"停車位管理"}},{path:"projects",component:r(4911).Z},{path:"acceptanceGrades",component:r(9464).Z},{path:"microOrganisms",component:r(3968).Z},{path:"scheduledMissions",component:r(2273).Z},{path:"floorRegionMgmts/:id",component:r(3486).Z},{path:"regionMgmts/:id",component:r(8682).Z},{path:"dashboard",component:r(7450).Z},{path:"devices",component:r(3799).Z},{path:"mirStatuses",component:r(4687).Z},{path:"missions",component:r(4726).Z},{path:"missionQueues/history",component:r(1848).Z,props:{viewMode:1}},{path:"missionQueues/current",component:r(1848).Z,props:{viewMode:0}},{path:"maps",component:r(9916).Z},{path:"hookStatuses",component:r(1303).Z},{path:"missionBookings",component:r(5672).Z},{path:"missionQueues/sample",component:r(9028).Z},{path:"remoteManagementSystemStatuses",component:r(1434).Z}]},{path:"/vehicleMgmts/window",meta:{auth:!0},component:r(7099).Z,props:{tableFontSize:16,showStatus:!0}},{path:"/parkingLotMgmts/window",meta:{auth:!0},component:r(5868).Z,props:{tableFontSize:16}},{path:"/cleanAreas/window",meta:{auth:!0},component:r(6768).Z},{path:"/elevatorMgmts/window",meta:{auth:!0},component:r(1453).Z,props:{viewType:"status"}},{path:"/mqttCommands/window",meta:{auth:!0},component:r(129).Z},{path:"*",redirect:"/floorRegionMgmts/1"}];var s=r(7037);function c(t){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},c(t)}function l(){l=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function u(t,e,r,n){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new L(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return E()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var s=w(a,r);if(s){if(s===h)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=d(t,e,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===h)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}(t,r,a),i}function d(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var h={};function f(){}function p(){}function m(){}var v={};s(v,o,(function(){return this}));var g=Object.getPrototypeOf,y=g&&g(g(S([])));y&&y!==e&&r.call(y,o)&&(v=y);var _=m.prototype=f.prototype=Object.create(v);function b(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function x(t,e){function n(o,i,a,s){var l=d(t[o],t,i);if("throw"!==l.type){var u=l.arg,h=u.value;return h&&"object"==c(h)&&r.call(h,"__await")?e.resolve(h.__await).then((function(t){n("next",t,a,s)}),(function(t){n("throw",t,a,s)})):e.resolve(h).then((function(t){u.value=t,a(u)}),(function(t){return n("throw",t,a,s)}))}s(l.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return h;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return h}var n=d(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,h;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,h):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,h)}function C(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function k(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function L(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(C,this),this.reset(!0)}function S(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:E}}function E(){return{value:void 0,done:!0}}return p.prototype=m,s(_,"constructor",m),s(m,"constructor",p),p.displayName=s(m,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,m):(t.__proto__=m,s(t,a,"GeneratorFunction")),t.prototype=Object.create(_),t},t.awrap=function(t){return{__await:t}},b(x.prototype),s(x.prototype,i,(function(){return this})),t.AsyncIterator=x,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new x(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},b(_),s(_,a,"Generator"),s(_,o,(function(){return this})),s(_,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=S,L.prototype={constructor:L,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(k),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=r.call(i,"catchLoc"),c=r.call(i,"finallyLoc");if(s&&c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,h):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),k(r),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;k(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:S(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),h}},t}function u(t,e,r,n,o,i,a){try{var s=t[i](a),c=s.value}catch(t){return void r(t)}s.done?e(c):Promise.resolve(c).then(n,o)}const d=function(){var t,e=(t=l().mark((function t(e,r,n){var i,a,c,u,d,f,p,m,v,g,y,b;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o.Z.commit("UPDATE_PAGE_LOADING",!0),t.next=3,s.Z.syncUser();case 3:if(i=o.Z.getters["user/isLogin"],a=o.Z.getters["user/roles"],c=r.query.region_mgmt_id,o.Z.commit("UPDATE_PAGE_LOADING",!1),c&&(window.Echo.leave("regionMgmts.presence.".concat(c)),window.Echo.leave("regionMgmts.".concat(c)),o.Z.commit("UPDATE_REGION_MGMT_ID",null)),e.matched.some((function(t){return t.meta.auth})))if(i){for(u=o.Z.getters["user/permissions"],d=0;d<e.matched.length;d++)void 0===(f=e.matched[d].meta).permissions&&void 0===f.roles||(p=[],m=[],void 0!==f.permissions&&(p=f.permissions),void 0!==f.roles&&(m=f.roles),(p.length>0||m.length>0)&&(u.contains(p)||a.contains(m)||((v=_.compact(_.map(e.matched,"meta.redirect"))).length>0?(g=v[v.length-1],n(g)):n("/")))),d==e.matched.length-1&&n();h(e)&&(localStorage.redirect=e.fullPath)}else(y=_.compact(_.map(e.matched,"meta.redirect"))).length>0?(b=y[y.length-1],n(b)):n("/");else e.matched.some((function(t){return t.meta.guest}))&&i?n("/regionMgmts?is_deploy=1"):n();case 9:case"end":return t.stop()}}),t)})),function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){u(i,n,o,a,s,"next",t)}function s(t){u(i,n,o,a,s,"throw",t)}a(void 0)}))});return function(t,r,n){return e.apply(this,arguments)}}();function h(t){for(var e=t.matched.length-1;e>=0;e--){var r=t.matched[e].meta;if(void 0!==r.history)return r.history}return!1}n.default.use(i.Z);var f=new i.Z({mode:"history",base:"/",routes:a});f.beforeEach(d);const p=f;const m={name:"App"};const v=(0,r(1900).Z)(m,(function(){var t=this.$createElement;return(this._self._c||t)("router-view")}),[],!1,null,null,null).exports;var g=r(7152);const y=JSON.parse('{"langZh":"繁體中文 (台灣)","langEn":"英文","language":"語言","logOut":"登出","AAPM":"帳戶權限管理","GDC":"圖資資料建構","SR":"系統運行","VM":"載具管理","other":"其他","amdrManagement":"AMDR管理","parkingManagement":"停車位管理","troubleShooting":"異常排除","createUser":"創建使用者","id":"編號","account":"帳號","name":"姓名","role":"身份","enable":"啟用狀態","enabled":"已啟用","disabled":"未啟用","createdAt":"創建時間","updatedAt":"更新時間","operate":"操作","editData":"修改個資","editPassword":"修改密碼","delete":"刪除","all":"全部","search":"搜尋","PEATITSF":"搜尋欄位輸入後請按Enter鍵","locked":"已鎖定","unlocked":"未鎖定","taskTransferCommand":"任務命令 / 搬運命令","projectManagement":"專案管理","elevatorManagement":"電梯點管理"}'),b=JSON.parse('{"langZh":"Chinese (zh-TW)","langEn":"English","language":"Language","logOut":"LogOut","AAPM":"Account and Permission Management","GDC":"Graphic Data Construction","SR":"System Running","VM":"Object Management","other":"Other","amdrManagement":"AMDR Management","parkingManagement":"Parking Management","troubleShooting":"Trouble Shooting","createUser":"Create User","id":"ID","account":"Account","name":"Name","role":"Role","enable":"Enable","enabled":"Enabled","disabled":"Disabled","createdAt":"Created At","updatedAt":"Updated At","operate":"Operate","editData":"Edit Data","editPassword":"Edit Password","delete":"Delete","all":"All","search":"Search","PEATITSF":"Press the enter key after typing in the search field.","locked":"Locked","unlocked":"Unlocked","taskTransferCommand":"Task Command / Transfer Command","projectManagement":"Project Management","elevatorManagement":"Elevator Management"}');n.default.use(g.Z);var x="zh-TW";localStorage.getItem("local-lang")?(x=localStorage.getItem("local-lang"),o.Z.commit("UPDATE_LANG",x)):o.Z.commit("UPDATE_LANG",x);const w=new g.Z({locale:x,messages:{"zh-TW":y,en:b}});r(862),new n.default({router:p,store:o.Z,i18n:w,components:{App:v}}).$mount("#app")},862:(t,e,r)=>{"use strict";r.r(e);var n=r(538),o=r(9669),i=r.n(o),a=r(5330),s=document.head.querySelector('meta[name="csrf-token"]');i().defaults.headers.common["X-Requested-With"]="XMLHttpRequest",s?i().defaults.headers.common["X-CSRF-TOKEN"]=s.content:console.error("CSRF token not found: https://laravel.com/docs/csrf#csrf-x-csrf-token"),i().interceptors.response.use(null,(function(t){return t.config&&t.response&&419==t.response.status?i().get("/refreshCsrfToken").then((function(e){var r=e.data.data.csrfToken;return i().defaults.headers.common["X-CSRF-TOKEN"]=r,t.config.headers["X-CSRF-TOKEN"]=r,a.Z.commit("UPDATE_TOKEN",r),i().request(t.config)})):Promise.reject(t)}));r(7037);var c=r(6486),l=r.n(c),u=r(381),d=r.n(u),h=r(9755);Array.prototype.contains=function(t){for(var e=this.length;e--;){if(Array.isArray(t))return 0!=t.length&&l().intersection(this,t).length>0;if(this[e]==t)return!0}return!1},Array.prototype.equal=function(t){if(this===t)return!0;if(null==this||null==t)return!1;if(this.length!==t.length)return!1;for(var e=0;e<this.length;++e)if(this[e]!==t[e])return!1;return!0},String.prototype.contains=function(t){return-1!=this.indexOf(t)},n.default.filter("paragraph",(function(t){if(t)return(t=h(t).text().replaceAll(" ","")).length>50?"".concat(t.substring(0,50),"..."):void 0})),n.default.filter("text",(function(t){if(t)return h(t).text().replaceAll(" ","")})),n.default.filter("datetime",(function(t){return t?d()(String(t)).format("YYYY/MM/DD HH:mm:ss"):null})),n.default.filter("date",(function(t){return t&&d()(t).isValid()?d()(t).format("YYYY/MM/DD"):null})),n.default.filter("time",(function(t){return t?d()(String(t)).format("HH:mm"):null})),n.default.filter("integer",(function(t){return t?Math.round(t):null})),n.default.filter("withComma",(function(t){return t.toString().replace(/\B(?<!\.\d*)(?=(\d{3})+(?!\d))/g,",")})),window.mobileAndTabletCheck=function(){var t,e=!1;return t=navigator.userAgent||navigator.vendor||window.opera,(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4)))&&(e=!0),e};var f=r(3823),p=r.n(f),m=r(2954),v=r(1444);r(3752),r(686),r(7285),r(6709);function g(){if(document.querySelector(".context-menu-box")){document.querySelector(".context-menu-box").remove()}}const y={name:"context-menu",props:{width:{type:String,default:""},offset:{type:Object,default:null},mode:{type:String,default:"contextmenu"}},data:()=>({modeList:["contextmenu","click","all"]}),computed:{trigger:function(){return this.modeList.find((t=>t==this.mode))?this.mode:"contextmenu"}},mounted(){this.$nextTick((()=>{let t=this.$el,e=this.$el.parentElement,r=this.$refs.menu,n=this.offset;if(e){this.width&&(r.style.width=this.width),e.removeChild(t),e.addEventListener("click",(t=>{"contextmenu"==this.trigger&&g()})),r.addEventListener("contextmenu",(t=>{t.preventDefault()}));const o=function(o){o.preventDefault(),o.stopPropagation(),g(),document.body.insertBefore(t,document.body.firstChild);let i=0,a=0;if(!n||isNaN(n.x)||isNaN(n.y))i=document.body.offsetWidth-r.offsetWidth<=o.clientX?o.clientX-r.offsetWidth:o.clientX,a=0,a=document.body.offsetHeight-r.offsetHeight<=o.clientY?o.clientY-r.offsetHeight:o.clientY,a<0&&document.body.offsetHeight>r.offsetHeight&&(a=(document.body.offsetHeight-r.offsetHeight)/2);else{let t=function(t){let e={left:0,top:0},r=t.offsetParent;for(e.left+=t.offsetLeft,e.top+=t.offsetTop;null!==r;)e.left+=r.offsetLeft,e.top+=r.offsetTop,r=r.offsetParent;return e}(e);i=t.left+n.x,a=t.top+n.y}r.style.left=i+"px",r.style.top=a+"px"};switch(this.trigger){case"contextmenu":default:e.addEventListener("contextmenu",o);break;case"click":e.addEventListener("click",o);break;case"all":e.addEventListener("contextmenu",o),e.addEventListener("click",o)}document.addEventListener("click",(t=>{g()}),!0),document.addEventListener("contextmenu",(t=>{t.path.find((t=>"DIV"===t.tagName&&"context-menu-box"===t.className))||g()}),!0)}}))},methods:{emptyClick(t){t.stopPropagation()}}};var _=r(3379),b=r.n(_),x=r(8201),w={insert:"head",singleton:!1};b()(x.Z,w);x.Z.locals;var C=r(1900);const k=(0,C.Z)(y,(function(){var t=this,e=t.$createElement;t._self._c;return t._m(1)}),[function(){var t=this,e=t.$createElement,r=t._self._c||e;return t._t("default",(function(){return[r("li",{staticClass:"empty-text",staticStyle:{width:"120px"},on:{click:t.emptyClick}},[t._v("\n        空菜单\n      ")])]}))},function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{key:"context_menu",staticClass:"context-menu-box",staticStyle:{display:"block","z-index":"9999","pointer-events":"visible"}},[r("ul",{ref:"menu",staticClass:"list-context-menu-wrapper",staticStyle:{left:"-100px",top:"-100px"},attrs:{"data-hide-modal":"0"}},[t._m(0)],2)])}],!1,null,null,null).exports;const L={name:"context-menu-item",props:{label:{type:String,default:""}},computed:{isEmpty:function(){return!(!this.label&&!this.$slots.default)}},created(){},methods:{menuClick(){this.label&&this.$emit("click")}}};const S=(0,C.Z)(L,(function(){var t=this,e=t.$createElement;return(t._self._c||e)("li",{class:t.isEmpty?"menu-item menu-item-space":"seperator",attrs:{"aria-label":t.label,tabindex:"1"},on:{click:t.menuClick}},[t._t("default",(function(){return[t._v(t._s(t.label))]}))],2)}),[],!1,null,null,null).exports,E=(t,e)=>{t.component(e.name||k.name,k),t.component(e.itemName||S.name,S)};"undefined"!=typeof window&&window.Vue&&E(window.Vue);const M={install:E,contextMenu:k,contextMenuItem:S};function O(t){return O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},O(t)}function P(){P=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function c(t,e,r,n){var o=e&&e.prototype instanceof d?e:d,i=Object.create(o.prototype),a=new C(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return L()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var s=b(a,r);if(s){if(s===u)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=l(t,e,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===u)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}(t,r,a),i}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var u={};function d(){}function h(){}function f(){}var p={};s(p,o,(function(){return this}));var m=Object.getPrototypeOf,v=m&&m(m(k([])));v&&v!==e&&r.call(v,o)&&(p=v);var g=f.prototype=d.prototype=Object.create(p);function y(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function _(t,e){function n(o,i,a,s){var c=l(t[o],t,i);if("throw"!==c.type){var u=c.arg,d=u.value;return d&&"object"==O(d)&&r.call(d,"__await")?e.resolve(d.__await).then((function(t){n("next",t,a,s)}),(function(t){n("throw",t,a,s)})):e.resolve(d).then((function(t){u.value=t,a(u)}),(function(t){return n("throw",t,a,s)}))}s(c.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function b(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,b(t,e),"throw"===e.method))return u;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var n=l(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,u;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,u):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,u)}function x(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function w(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function C(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(x,this),this.reset(!0)}function k(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:L}}function L(){return{value:void 0,done:!0}}return h.prototype=f,s(g,"constructor",f),s(f,"constructor",h),h.displayName=s(f,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===h||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,f):(t.__proto__=f,s(t,a,"GeneratorFunction")),t.prototype=Object.create(g),t},t.awrap=function(t){return{__await:t}},y(_.prototype),s(_.prototype,i,(function(){return this})),t.AsyncIterator=_,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new _(c(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},y(g),s(g,a,"Generator"),s(g,o,(function(){return this})),s(g,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=k,C.prototype={constructor:C,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(w),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=r.call(i,"catchLoc"),c=r.call(i,"finallyLoc");if(s&&c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,u):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),u},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),w(r),u}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;w(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:k(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),u}},t}function j(t,e,r,n,o,i,a){try{var s=t[i](a),c=s.value}catch(t){return void r(t)}s.done?e(c):Promise.resolve(c).then(n,o)}function N(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){j(i,n,o,a,s,"next",t)}function s(t){j(i,n,o,a,s,"throw",t)}a(void 0)}))}}var T,$,I,D,A,F,q;function R(t){return!isNaN(t)&&parseInt(Number(t))==t&&!isNaN(parseInt(t,10))}m.cX.extend("vertex_duplicate",{validate:(T=N(P().mark((function t(e,r){var n,o,s,c;return P().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=a.Z.getters["vertex/vertices"],o=r.id,n=l().filter(n,(function(t){return t.id!=o})),!l().find(n,(function(t){return t.name==e}))){t.next=6;break}return t.abrupt("return",!1);case 6:if(s={name:e,region_mgmt:{id:r.region_mgmt_id},check_status:-9},R(o)){t.next=13;break}return t.next=10,i().post("/api/vertices",s);case 10:c=t.sent,t.next=16;break;case 13:return t.next=15,i().patch("/api/vertices/".concat(o),s);case 15:c=t.sent;case 16:return c=c.data,t.abrupt("return",-9!=c.status);case 18:case"end":return t.stop()}}),t)}))),function(t,e){return T.apply(this,arguments)})}),m.cX.extend("edge_duplicate",{validate:($=N(P().mark((function t(e,r){var n,o,s,c;return P().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=a.Z.getters["edge/edges"],o=r.id,n=l().filter(n,(function(t){return t.id!=o})),!l().find(n,(function(t){return t.name==e}))){t.next=6;break}return t.abrupt("return",!1);case 6:if(s={name:e,region_mgmt:{id:r.region_mgmt_id},check_status:-7},c=null,R(o)){t.next=14;break}return t.next=11,i().post("/api/edges",s);case 11:c=t.sent,t.next=17;break;case 14:return t.next=16,i().patch("/api/edges/".concat(o),s);case 16:c=t.sent;case 17:return c=c.data,t.abrupt("return",-7!=c.status);case 19:case"end":return t.stop()}}),t)}))),function(t,e){return $.apply(this,arguments)})}),m.cX.extend("location_duplicate",{validate:(I=N(P().mark((function t(e,r){var n,o,s,c;return P().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=a.Z.getters["location/locations"],o=r.id,n=l().filter(n,(function(t){return t.id!=o})),!l().find(n,(function(t){return t.device_name==e}))){t.next=6;break}return t.abrupt("return",!1);case 6:if(s={device_name:e,room:r.room},R(o)){t.next=13;break}return t.next=10,i().post("/api/locations",s);case 10:c=t.sent,t.next=16;break;case 13:return t.next=15,i().patch("/api/locations/".concat(o),s);case 15:c=t.sent;case 16:return c=c.data,t.abrupt("return",-7!=c.status);case 18:case"end":return t.stop()}}),t)}))),function(t,e){return I.apply(this,arguments)})}),m.cX.extend("vertex_deploy",{validate:(D=N(P().mark((function t(e,r){var n,o,a;return P().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=r.id,o={check_status:-16},t.next=4,i().patch("/api/vertices/".concat(n),o);case 4:return a=(a=t.sent).data,t.abrupt("return",16!=a.status);case 7:case"end":return t.stop()}}),t)}))),function(t,e){return D.apply(this,arguments)})}),m.cX.extend("edge_deploy",{validate:(A=N(P().mark((function t(e,r){var n,o,a;return P().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=r.id,o={check_status:-16},t.next=4,i().patch("/api/edges/".concat(n),o);case 4:return a=(a=t.sent).data,t.abrupt("return",-16!=a.status);case 7:case"end":return t.stop()}}),t)}))),function(t,e){return A.apply(this,arguments)})}),m.cX.extend("vehicle_route_not_found",{validate:(F=N(P().mark((function t(e,r){var n;return P().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=r.id,t.prev=1,t.next=4,i().get("/api/vehicleRoutes/".concat(n));case 4:t.next=9;break;case 6:return t.prev=6,t.t0=t.catch(1),t.abrupt("return",!1);case 9:return t.abrupt("return",!0);case 10:case"end":return t.stop()}}),t,null,[[1,6]])}))),function(t,e){return F.apply(this,arguments)})}),m.cX.extend("vehicle_route_background_not_found",{validate:(q=N(P().mark((function t(e,r){var n;return P().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=r.id,t.prev=1,t.next=4,i().get("/api/vehicleRoutes/".concat(n,"?status=-17"));case 4:if(-17!=t.sent.data.status){t.next=8;break}return t.abrupt("return",!1);case 8:t.next=12;break;case 10:t.prev=10,t.t0=t.catch(1);case 12:return t.abrupt("return",!0);case 13:case"end":return t.stop()}}),t,null,[[1,10]])}))),function(t,e){return q.apply(this,arguments)})});var G=r(4554);r(9755);window._=r(6486);try{window.$=r(9755),r(3002)}catch(t){}n.default.use(p(),{position:"top center",timeOut:5e3,showMethod:"slideInUp",hideMethod:"slideOutUp"}),n.default.use(m.ZP,{inject:!1}),n.default.use(v),n.default.use(M,{name:"contextMenu",itemName:"contextMenuItem"}),window.Echo=new G.Z({broadcaster:"socket.io",host:"".concat(window.location.hostname,":").concat(window.echoPort)})},7037:(t,e,r)=>{"use strict";r.d(e,{Z:()=>y});var n=r(5330),o=r(629),i=r(9669),a=r.n(i),s=r(538),c=r(6486),l=r.n(c),u=r(9755);function d(t){return d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},d(t)}function h(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function f(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function p(){p=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function c(t,e,r,n){var o=e&&e.prototype instanceof h?e:h,i=Object.create(o.prototype),a=new L(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return E()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var s=w(a,r);if(s){if(s===u)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=l(t,e,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===u)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}(t,r,a),i}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var u={};function h(){}function f(){}function m(){}var v={};s(v,o,(function(){return this}));var g=Object.getPrototypeOf,y=g&&g(g(S([])));y&&y!==e&&r.call(y,o)&&(v=y);var _=m.prototype=h.prototype=Object.create(v);function b(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function x(t,e){function n(o,i,a,s){var c=l(t[o],t,i);if("throw"!==c.type){var u=c.arg,h=u.value;return h&&"object"==d(h)&&r.call(h,"__await")?e.resolve(h.__await).then((function(t){n("next",t,a,s)}),(function(t){n("throw",t,a,s)})):e.resolve(h).then((function(t){u.value=t,a(u)}),(function(t){return n("throw",t,a,s)}))}s(c.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return u;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var n=l(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,u;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,u):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,u)}function C(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function k(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function L(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(C,this),this.reset(!0)}function S(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:E}}function E(){return{value:void 0,done:!0}}return f.prototype=m,s(_,"constructor",m),s(m,"constructor",f),f.displayName=s(m,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===f||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,m):(t.__proto__=m,s(t,a,"GeneratorFunction")),t.prototype=Object.create(_),t},t.awrap=function(t){return{__await:t}},b(x.prototype),s(x.prototype,i,(function(){return this})),t.AsyncIterator=x,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new x(c(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},b(_),s(_,a,"Generator"),s(_,o,(function(){return this})),s(_,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=S,L.prototype={constructor:L,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(k),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=r.call(i,"catchLoc"),c=r.call(i,"finallyLoc");if(s&&c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,u):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),u},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),k(r),u}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;k(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:S(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),u}},t}function m(t,e,r,n,o,i,a){try{var s=t[i](a),c=s.value}catch(t){return void r(t)}s.done?e(c):Promise.resolve(c).then(n,o)}function v(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){m(i,n,o,a,s,"next",t)}function s(t){m(i,n,o,a,s,"throw",t)}a(void 0)}))}}var g={guestRedirectHome:function(t){var e=this;return v(p().mark((function r(){var n;return p().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:void 0===t.response?"Network Error"==t.message?e.$toast.error({title:"錯誤訊息",message:"請檢查網路狀況"}):e.$toast.error({title:"錯誤訊息",message:t.message}):(n=t.response.status,e.isLogin?401==n||422==n?(e.$toast.error({title:"錯誤訊息",message:"請重新登入"}),e.$router.push("/login")):403==n?e.$toast.error({title:"錯誤訊息",message:"您沒有權限操作！"}):429==n?e.$toast.error({title:"錯誤訊息",message:"嘗試太多次，請稍後再試！"}):461==n?e.$toast.error({title:"錯誤訊息",message:"目前系統尚未安裝RabbitMQ。"}):462==n?e.$toast.error({title:"錯誤訊息",message:"請先登入RabbitMQ，並創建佇列名稱「work_queue_to_AMR_UI」。"}):463==n?e.$toast.error({title:"錯誤訊息",message:"無法發送請求，請檢查RabbitMQ的連線IP。"}):e.$toast.error({title:"錯誤訊息",message:"連線異常，請通知系統管理員"}):422==t.response.status&&e.$toast.error({title:"錯誤訊息",message:"登入失敗"}));case 1:case"end":return r.stop()}}),r)})))()},validate:function(){var t=this;return v(p().mark((function e(){var r,n;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$validator.validateAll();case 2:return r=e.sent,n=t.$validator.errors.items,t.$nextTick(v(p().mark((function e(){return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!=n.length){e.next=2;break}return e.abrupt("return");case 2:t.scrollTo(n[0].field);case 3:case"end":return e.stop()}}),e)})))),e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})))()},scrollTo:function(t){var e=u("html, body"),r=u('[name="'.concat(t,'"]'));e.animate({scrollTop:r.offset().top-247},500,(function(){r.focus()}))},syncUser:function(){var t=this;return v(p().mark((function e(){var r,o,i;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=null,r=void 0!==t.$store?t.$store:n.Z,e.prev=2,e.next=5,a().get("/api/user");case 5:0==(o=(o=e.sent).data).status?(i=o.data,r.commit("user/UPDATE_USER",i.user),r.commit("device/UPDATE_DEVICE",i.device)):(r.commit("user/UPDATE_USER",null),r.commit("device/UPDATE_DEVICE",null)),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(2),r.commit("user/UPDATE_USER",null),r.commit("device/UPDATE_DEVICE",null);case 14:case"end":return e.stop()}}),e,null,[[2,10]])})))()},syncCsrfToken:function(){var t=this;return v(p().mark((function e(){var r,o,i,s;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=null,r=void 0!==t.$store?t.$store:n.Z,e.next=4,a().get("/refreshCsrfToken");case 4:o=(o=e.sent).data,i=o.data,s=i.csrfToken,a().defaults.headers.common["X-CSRF-TOKEN"]=s,r.commit("UPDATE_TOKEN",s);case 10:case"end":return e.stop()}}),e)})))()},isInt:function(t){return!isNaN(t)&&parseInt(Number(t))==t&&!isNaN(parseInt(t,10))},resetFormValidate:function(){var t=this;this.$validator.pause(),this.$nextTick((function(){t.$validator.errors.clear(),t.$validator.fields.items.forEach((function(t){return t.reset()})),t.$validator.fields.items.forEach((function(e){return t.errors.remove(e)})),t.$validator.resume()}))},abs:function(t){return Math.abs(t)},calculateDegrees:function(t,e,r,n){var o=r-t,i=n-e;return 180*Math.atan2(i,o)/Math.PI},generateUUID:function(){var t=Date.now();return"undefined"!=typeof performance&&"function"==typeof performance.now&&(t+=performance.now()),"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var r=(t+16*Math.random())%16|0;return t=Math.floor(t/16),("x"===e?r:3&r|8).toString(16)}))},generateRandomID:function(t){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r="",n=e.length,o=0;o<t;o++)r+=e.charAt(Math.floor(Math.random()*n));return r},imgCoordToQuadrantCoordX:function(t,e,r){return e*t+r},imgCoordToQuadrantCoordY:function(t,e,r,n,o){return 1==o?(r-e)*t+n:e*t+n},quadrantCoordToImgCoordX:function(t,e,r){return(e-r)/t},quadrantCoordToImgCoordY:function(t,e,r,n){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1;return 1==o?r-(e-n)/t:(e-n)/t},getPureForm:function(t){var e={};return l().forOwn(t,(function(t,r){e[r]=!t&&0!==t||l().isObject(t)&&l().isEmpty(t)||l().isArray(t)&&0===t.length?null:t})),l().omitBy(e,l().isNil)},generateColor:function(){for(var t="#",e=0;e<6;e++)t+="0123456789ABCDEF"[Math.floor(16*Math.random())];return t}};s.default.mixin({computed:function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?h(Object(r),!0).forEach((function(e){f(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):h(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({},(0,o.Se)({isLogin:"user/isLogin"})),methods:g});const y=g},5330:(t,e,r)=>{"use strict";r.d(e,{Z:()=>d});var n,o=r(538),i=r(629),a=r(6486),s=r.n(a);function c(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}o.default.use(i.ZP);var l=document.head.querySelector('meta[name="csrf-token"]'),u=new i.ZP.Store({state:{pageLoading:!1,token:l.content,lang:null,regionMgmtId:null},mutations:(n={},c(n,"UPDATE_PAGE_LOADING",(function(t,e){t.pageLoading=e})),c(n,"UPDATE_TOKEN",(function(t,e){t.token=e})),c(n,"UPDATE_LANG",(function(t,e){t.lang=e})),c(n,"UPDATE_REGION_MGMT_ID",(function(t,e){t.regionMgmtId=e})),n),getters:{token:function(t){return t.token},region:function(t){return t.region}},modules:{user:{namespaced:!0,state:{user:{}},getters:{isLogin:function(t){return void 0!==t.user.id},user:function(t){return t.user},permissions:function(t,e){if(!e.isLogin)return[];for(var r=t.user.roles,n=[],o=0;o<r.length;o++){var i=r[o];n=n.concat(s().map(i.permissions,"name"))}return n},roles:function(t,e){return e.isLogin?s().map(t.user.roles,"name"):[]},deviceId:function(t,e){return e.isLogin&&t.user.device?t.user.device.id:null}},mutations:c({},"UPDATE_USER",(function(t,e){t.user=e||{}}))},vertex:{namespaced:!0,state:{vertices:[]},getters:{vertices:function(t){return t.vertices}},mutations:c({},"UPDATE_VERTICES",(function(t,e){t.vertices=e}))},edge:{namespaced:!0,state:{edges:[]},getters:{edges:function(t){return t.edges}},mutations:c({},"UPDATE_EDGES",(function(t,e){t.edges=e}))},location:{namespaced:!0,state:{locations:[]},getters:{locations:function(t){return t.locations}},mutations:c({},"UPDATE_LOCATIONS",(function(t,e){t.locations=e}))},device:{namespaced:!0,state:{device:null},getters:{device:function(t){return t.device}},mutations:c({},"UPDATE_DEVICE",(function(t,e){t.device=e||null}))}}});const d=u},3002:(t,e,r)=>{var n=r(9755);if(void 0===n)throw new Error("Bootstrap's JavaScript requires jQuery");!function(t){"use strict";var e=t.fn.jquery.split(" ")[0].split(".");if(e[0]<2&&e[1]<9||1==e[0]&&9==e[1]&&e[2]<1||e[0]>3)throw new Error("Bootstrap's JavaScript requires jQuery version 1.9.1 or higher, but lower than version 4")}(n),function(t){"use strict";t.fn.emulateTransitionEnd=function(e){var r=!1,n=this;t(this).one("bsTransitionEnd",(function(){r=!0}));return setTimeout((function(){r||t(n).trigger(t.support.transition.end)}),e),this},t((function(){t.support.transition=function(){var t=document.createElement("bootstrap"),e={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var r in e)if(void 0!==t.style[r])return{end:e[r]};return!1}(),t.support.transition&&(t.event.special.bsTransitionEnd={bindType:t.support.transition.end,delegateType:t.support.transition.end,handle:function(e){if(t(e.target).is(this))return e.handleObj.handler.apply(this,arguments)}})}))}(n),function(t){"use strict";var e='[data-dismiss="alert"]',r=function(r){t(r).on("click",e,this.close)};r.VERSION="3.4.1",r.TRANSITION_DURATION=150,r.prototype.close=function(e){var n=t(this),o=n.attr("data-target");o||(o=(o=n.attr("href"))&&o.replace(/.*(?=#[^\s]*$)/,"")),o="#"===o?[]:o;var i=t(document).find(o);function a(){i.detach().trigger("closed.bs.alert").remove()}e&&e.preventDefault(),i.length||(i=n.closest(".alert")),i.trigger(e=t.Event("close.bs.alert")),e.isDefaultPrevented()||(i.removeClass("in"),t.support.transition&&i.hasClass("fade")?i.one("bsTransitionEnd",a).emulateTransitionEnd(r.TRANSITION_DURATION):a())};var n=t.fn.alert;t.fn.alert=function(e){return this.each((function(){var n=t(this),o=n.data("bs.alert");o||n.data("bs.alert",o=new r(this)),"string"==typeof e&&o[e].call(n)}))},t.fn.alert.Constructor=r,t.fn.alert.noConflict=function(){return t.fn.alert=n,this},t(document).on("click.bs.alert.data-api",e,r.prototype.close)}(n),function(t){"use strict";var e=function(r,n){this.$element=t(r),this.options=t.extend({},e.DEFAULTS,n),this.isLoading=!1};function r(r){return this.each((function(){var n=t(this),o=n.data("bs.button"),i="object"==typeof r&&r;o||n.data("bs.button",o=new e(this,i)),"toggle"==r?o.toggle():r&&o.setState(r)}))}e.VERSION="3.4.1",e.DEFAULTS={loadingText:"loading..."},e.prototype.setState=function(e){var r="disabled",n=this.$element,o=n.is("input")?"val":"html",i=n.data();e+="Text",null==i.resetText&&n.data("resetText",n[o]()),setTimeout(t.proxy((function(){n[o](null==i[e]?this.options[e]:i[e]),"loadingText"==e?(this.isLoading=!0,n.addClass(r).attr(r,r).prop(r,!0)):this.isLoading&&(this.isLoading=!1,n.removeClass(r).removeAttr(r).prop(r,!1))}),this),0)},e.prototype.toggle=function(){var t=!0,e=this.$element.closest('[data-toggle="buttons"]');if(e.length){var r=this.$element.find("input");"radio"==r.prop("type")?(r.prop("checked")&&(t=!1),e.find(".active").removeClass("active"),this.$element.addClass("active")):"checkbox"==r.prop("type")&&(r.prop("checked")!==this.$element.hasClass("active")&&(t=!1),this.$element.toggleClass("active")),r.prop("checked",this.$element.hasClass("active")),t&&r.trigger("change")}else this.$element.attr("aria-pressed",!this.$element.hasClass("active")),this.$element.toggleClass("active")};var n=t.fn.button;t.fn.button=r,t.fn.button.Constructor=e,t.fn.button.noConflict=function(){return t.fn.button=n,this},t(document).on("click.bs.button.data-api",'[data-toggle^="button"]',(function(e){var n=t(e.target).closest(".btn");r.call(n,"toggle"),t(e.target).is('input[type="radio"], input[type="checkbox"]')||(e.preventDefault(),n.is("input,button")?n.trigger("focus"):n.find("input:visible,button:visible").first().trigger("focus"))})).on("focus.bs.button.data-api blur.bs.button.data-api",'[data-toggle^="button"]',(function(e){t(e.target).closest(".btn").toggleClass("focus",/^focus(in)?$/.test(e.type))}))}(n),function(t){"use strict";var e=function(e,r){this.$element=t(e),this.$indicators=this.$element.find(".carousel-indicators"),this.options=r,this.paused=null,this.sliding=null,this.interval=null,this.$active=null,this.$items=null,this.options.keyboard&&this.$element.on("keydown.bs.carousel",t.proxy(this.keydown,this)),"hover"==this.options.pause&&!("ontouchstart"in document.documentElement)&&this.$element.on("mouseenter.bs.carousel",t.proxy(this.pause,this)).on("mouseleave.bs.carousel",t.proxy(this.cycle,this))};function r(r){return this.each((function(){var n=t(this),o=n.data("bs.carousel"),i=t.extend({},e.DEFAULTS,n.data(),"object"==typeof r&&r),a="string"==typeof r?r:i.slide;o||n.data("bs.carousel",o=new e(this,i)),"number"==typeof r?o.to(r):a?o[a]():i.interval&&o.pause().cycle()}))}e.VERSION="3.4.1",e.TRANSITION_DURATION=600,e.DEFAULTS={interval:5e3,pause:"hover",wrap:!0,keyboard:!0},e.prototype.keydown=function(t){if(!/input|textarea/i.test(t.target.tagName)){switch(t.which){case 37:this.prev();break;case 39:this.next();break;default:return}t.preventDefault()}},e.prototype.cycle=function(e){return e||(this.paused=!1),this.interval&&clearInterval(this.interval),this.options.interval&&!this.paused&&(this.interval=setInterval(t.proxy(this.next,this),this.options.interval)),this},e.prototype.getItemIndex=function(t){return this.$items=t.parent().children(".item"),this.$items.index(t||this.$active)},e.prototype.getItemForDirection=function(t,e){var r=this.getItemIndex(e);if(("prev"==t&&0===r||"next"==t&&r==this.$items.length-1)&&!this.options.wrap)return e;var n=(r+("prev"==t?-1:1))%this.$items.length;return this.$items.eq(n)},e.prototype.to=function(t){var e=this,r=this.getItemIndex(this.$active=this.$element.find(".item.active"));if(!(t>this.$items.length-1||t<0))return this.sliding?this.$element.one("slid.bs.carousel",(function(){e.to(t)})):r==t?this.pause().cycle():this.slide(t>r?"next":"prev",this.$items.eq(t))},e.prototype.pause=function(e){return e||(this.paused=!0),this.$element.find(".next, .prev").length&&t.support.transition&&(this.$element.trigger(t.support.transition.end),this.cycle(!0)),this.interval=clearInterval(this.interval),this},e.prototype.next=function(){if(!this.sliding)return this.slide("next")},e.prototype.prev=function(){if(!this.sliding)return this.slide("prev")},e.prototype.slide=function(r,n){var o=this.$element.find(".item.active"),i=n||this.getItemForDirection(r,o),a=this.interval,s="next"==r?"left":"right",c=this;if(i.hasClass("active"))return this.sliding=!1;var l=i[0],u=t.Event("slide.bs.carousel",{relatedTarget:l,direction:s});if(this.$element.trigger(u),!u.isDefaultPrevented()){if(this.sliding=!0,a&&this.pause(),this.$indicators.length){this.$indicators.find(".active").removeClass("active");var d=t(this.$indicators.children()[this.getItemIndex(i)]);d&&d.addClass("active")}var h=t.Event("slid.bs.carousel",{relatedTarget:l,direction:s});return t.support.transition&&this.$element.hasClass("slide")?(i.addClass(r),"object"==typeof i&&i.length&&i[0].offsetWidth,o.addClass(s),i.addClass(s),o.one("bsTransitionEnd",(function(){i.removeClass([r,s].join(" ")).addClass("active"),o.removeClass(["active",s].join(" ")),c.sliding=!1,setTimeout((function(){c.$element.trigger(h)}),0)})).emulateTransitionEnd(e.TRANSITION_DURATION)):(o.removeClass("active"),i.addClass("active"),this.sliding=!1,this.$element.trigger(h)),a&&this.cycle(),this}};var n=t.fn.carousel;t.fn.carousel=r,t.fn.carousel.Constructor=e,t.fn.carousel.noConflict=function(){return t.fn.carousel=n,this};var o=function(e){var n=t(this),o=n.attr("href");o&&(o=o.replace(/.*(?=#[^\s]+$)/,""));var i=n.attr("data-target")||o,a=t(document).find(i);if(a.hasClass("carousel")){var s=t.extend({},a.data(),n.data()),c=n.attr("data-slide-to");c&&(s.interval=!1),r.call(a,s),c&&a.data("bs.carousel").to(c),e.preventDefault()}};t(document).on("click.bs.carousel.data-api","[data-slide]",o).on("click.bs.carousel.data-api","[data-slide-to]",o),t(window).on("load",(function(){t('[data-ride="carousel"]').each((function(){var e=t(this);r.call(e,e.data())}))}))}(n),function(t){"use strict";var e=function(r,n){this.$element=t(r),this.options=t.extend({},e.DEFAULTS,n),this.$trigger=t('[data-toggle="collapse"][href="#'+r.id+'"],[data-toggle="collapse"][data-target="#'+r.id+'"]'),this.transitioning=null,this.options.parent?this.$parent=this.getParent():this.addAriaAndCollapsedClass(this.$element,this.$trigger),this.options.toggle&&this.toggle()};function r(e){var r,n=e.attr("data-target")||(r=e.attr("href"))&&r.replace(/.*(?=#[^\s]+$)/,"");return t(document).find(n)}function n(r){return this.each((function(){var n=t(this),o=n.data("bs.collapse"),i=t.extend({},e.DEFAULTS,n.data(),"object"==typeof r&&r);!o&&i.toggle&&/show|hide/.test(r)&&(i.toggle=!1),o||n.data("bs.collapse",o=new e(this,i)),"string"==typeof r&&o[r]()}))}e.VERSION="3.4.1",e.TRANSITION_DURATION=350,e.DEFAULTS={toggle:!0},e.prototype.dimension=function(){return this.$element.hasClass("width")?"width":"height"},e.prototype.show=function(){if(!this.transitioning&&!this.$element.hasClass("in")){var r,o=this.$parent&&this.$parent.children(".panel").children(".in, .collapsing");if(!(o&&o.length&&(r=o.data("bs.collapse"))&&r.transitioning)){var i=t.Event("show.bs.collapse");if(this.$element.trigger(i),!i.isDefaultPrevented()){o&&o.length&&(n.call(o,"hide"),r||o.data("bs.collapse",null));var a=this.dimension();this.$element.removeClass("collapse").addClass("collapsing")[a](0).attr("aria-expanded",!0),this.$trigger.removeClass("collapsed").attr("aria-expanded",!0),this.transitioning=1;var s=function(){this.$element.removeClass("collapsing").addClass("collapse in")[a](""),this.transitioning=0,this.$element.trigger("shown.bs.collapse")};if(!t.support.transition)return s.call(this);var c=t.camelCase(["scroll",a].join("-"));this.$element.one("bsTransitionEnd",t.proxy(s,this)).emulateTransitionEnd(e.TRANSITION_DURATION)[a](this.$element[0][c])}}}},e.prototype.hide=function(){if(!this.transitioning&&this.$element.hasClass("in")){var r=t.Event("hide.bs.collapse");if(this.$element.trigger(r),!r.isDefaultPrevented()){var n=this.dimension();this.$element[n](this.$element[n]())[0].offsetHeight,this.$element.addClass("collapsing").removeClass("collapse in").attr("aria-expanded",!1),this.$trigger.addClass("collapsed").attr("aria-expanded",!1),this.transitioning=1;var o=function(){this.transitioning=0,this.$element.removeClass("collapsing").addClass("collapse").trigger("hidden.bs.collapse")};if(!t.support.transition)return o.call(this);this.$element[n](0).one("bsTransitionEnd",t.proxy(o,this)).emulateTransitionEnd(e.TRANSITION_DURATION)}}},e.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()},e.prototype.getParent=function(){return t(document).find(this.options.parent).find('[data-toggle="collapse"][data-parent="'+this.options.parent+'"]').each(t.proxy((function(e,n){var o=t(n);this.addAriaAndCollapsedClass(r(o),o)}),this)).end()},e.prototype.addAriaAndCollapsedClass=function(t,e){var r=t.hasClass("in");t.attr("aria-expanded",r),e.toggleClass("collapsed",!r).attr("aria-expanded",r)};var o=t.fn.collapse;t.fn.collapse=n,t.fn.collapse.Constructor=e,t.fn.collapse.noConflict=function(){return t.fn.collapse=o,this},t(document).on("click.bs.collapse.data-api",'[data-toggle="collapse"]',(function(e){var o=t(this);o.attr("data-target")||e.preventDefault();var i=r(o),a=i.data("bs.collapse")?"toggle":o.data();n.call(i,a)}))}(n),function(t){"use strict";var e='[data-toggle="dropdown"]',r=function(e){t(e).on("click.bs.dropdown",this.toggle)};function n(e){var r=e.attr("data-target");r||(r=(r=e.attr("href"))&&/#[A-Za-z]/.test(r)&&r.replace(/.*(?=#[^\s]*$)/,""));var n="#"!==r?t(document).find(r):null;return n&&n.length?n:e.parent()}function o(r){r&&3===r.which||(t(".dropdown-backdrop").remove(),t(e).each((function(){var e=t(this),o=n(e),i={relatedTarget:this};o.hasClass("open")&&(r&&"click"==r.type&&/input|textarea/i.test(r.target.tagName)&&t.contains(o[0],r.target)||(o.trigger(r=t.Event("hide.bs.dropdown",i)),r.isDefaultPrevented()||(e.attr("aria-expanded","false"),o.removeClass("open").trigger(t.Event("hidden.bs.dropdown",i)))))})))}r.VERSION="3.4.1",r.prototype.toggle=function(e){var r=t(this);if(!r.is(".disabled, :disabled")){var i=n(r),a=i.hasClass("open");if(o(),!a){"ontouchstart"in document.documentElement&&!i.closest(".navbar-nav").length&&t(document.createElement("div")).addClass("dropdown-backdrop").insertAfter(t(this)).on("click",o);var s={relatedTarget:this};if(i.trigger(e=t.Event("show.bs.dropdown",s)),e.isDefaultPrevented())return;r.trigger("focus").attr("aria-expanded","true"),i.toggleClass("open").trigger(t.Event("shown.bs.dropdown",s))}return!1}},r.prototype.keydown=function(r){if(/(38|40|27|32)/.test(r.which)&&!/input|textarea/i.test(r.target.tagName)){var o=t(this);if(r.preventDefault(),r.stopPropagation(),!o.is(".disabled, :disabled")){var i=n(o),a=i.hasClass("open");if(!a&&27!=r.which||a&&27==r.which)return 27==r.which&&i.find(e).trigger("focus"),o.trigger("click");var s=i.find(".dropdown-menu li:not(.disabled):visible a");if(s.length){var c=s.index(r.target);38==r.which&&c>0&&c--,40==r.which&&c<s.length-1&&c++,~c||(c=0),s.eq(c).trigger("focus")}}}};var i=t.fn.dropdown;t.fn.dropdown=function(e){return this.each((function(){var n=t(this),o=n.data("bs.dropdown");o||n.data("bs.dropdown",o=new r(this)),"string"==typeof e&&o[e].call(n)}))},t.fn.dropdown.Constructor=r,t.fn.dropdown.noConflict=function(){return t.fn.dropdown=i,this},t(document).on("click.bs.dropdown.data-api",o).on("click.bs.dropdown.data-api",".dropdown form",(function(t){t.stopPropagation()})).on("click.bs.dropdown.data-api",e,r.prototype.toggle).on("keydown.bs.dropdown.data-api",e,r.prototype.keydown).on("keydown.bs.dropdown.data-api",".dropdown-menu",r.prototype.keydown)}(n),function(t){"use strict";var e=function(e,r){this.options=r,this.$body=t(document.body),this.$element=t(e),this.$dialog=this.$element.find(".modal-dialog"),this.$backdrop=null,this.isShown=null,this.originalBodyPad=null,this.scrollbarWidth=0,this.ignoreBackdropClick=!1,this.fixedContent=".navbar-fixed-top, .navbar-fixed-bottom",this.options.remote&&this.$element.find(".modal-content").load(this.options.remote,t.proxy((function(){this.$element.trigger("loaded.bs.modal")}),this))};function r(r,n){return this.each((function(){var o=t(this),i=o.data("bs.modal"),a=t.extend({},e.DEFAULTS,o.data(),"object"==typeof r&&r);i||o.data("bs.modal",i=new e(this,a)),"string"==typeof r?i[r](n):a.show&&i.show(n)}))}e.VERSION="3.4.1",e.TRANSITION_DURATION=300,e.BACKDROP_TRANSITION_DURATION=150,e.DEFAULTS={backdrop:!0,keyboard:!0,show:!0},e.prototype.toggle=function(t){return this.isShown?this.hide():this.show(t)},e.prototype.show=function(r){var n=this,o=t.Event("show.bs.modal",{relatedTarget:r});this.$element.trigger(o),this.isShown||o.isDefaultPrevented()||(this.isShown=!0,this.checkScrollbar(),this.setScrollbar(),this.$body.addClass("modal-open"),this.escape(),this.resize(),this.$element.on("click.dismiss.bs.modal",'[data-dismiss="modal"]',t.proxy(this.hide,this)),this.$dialog.on("mousedown.dismiss.bs.modal",(function(){n.$element.one("mouseup.dismiss.bs.modal",(function(e){t(e.target).is(n.$element)&&(n.ignoreBackdropClick=!0)}))})),this.backdrop((function(){var o=t.support.transition&&n.$element.hasClass("fade");n.$element.parent().length||n.$element.appendTo(n.$body),n.$element.show().scrollTop(0),n.adjustDialog(),o&&n.$element[0].offsetWidth,n.$element.addClass("in"),n.enforceFocus();var i=t.Event("shown.bs.modal",{relatedTarget:r});o?n.$dialog.one("bsTransitionEnd",(function(){n.$element.trigger("focus").trigger(i)})).emulateTransitionEnd(e.TRANSITION_DURATION):n.$element.trigger("focus").trigger(i)})))},e.prototype.hide=function(r){r&&r.preventDefault(),r=t.Event("hide.bs.modal"),this.$element.trigger(r),this.isShown&&!r.isDefaultPrevented()&&(this.isShown=!1,this.escape(),this.resize(),t(document).off("focusin.bs.modal"),this.$element.removeClass("in").off("click.dismiss.bs.modal").off("mouseup.dismiss.bs.modal"),this.$dialog.off("mousedown.dismiss.bs.modal"),t.support.transition&&this.$element.hasClass("fade")?this.$element.one("bsTransitionEnd",t.proxy(this.hideModal,this)).emulateTransitionEnd(e.TRANSITION_DURATION):this.hideModal())},e.prototype.enforceFocus=function(){t(document).off("focusin.bs.modal").on("focusin.bs.modal",t.proxy((function(t){document===t.target||this.$element[0]===t.target||this.$element.has(t.target).length||this.$element.trigger("focus")}),this))},e.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on("keydown.dismiss.bs.modal",t.proxy((function(t){27==t.which&&this.hide()}),this)):this.isShown||this.$element.off("keydown.dismiss.bs.modal")},e.prototype.resize=function(){this.isShown?t(window).on("resize.bs.modal",t.proxy(this.handleUpdate,this)):t(window).off("resize.bs.modal")},e.prototype.hideModal=function(){var t=this;this.$element.hide(),this.backdrop((function(){t.$body.removeClass("modal-open"),t.resetAdjustments(),t.resetScrollbar(),t.$element.trigger("hidden.bs.modal")}))},e.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},e.prototype.backdrop=function(r){var n=this,o=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var i=t.support.transition&&o;if(this.$backdrop=t(document.createElement("div")).addClass("modal-backdrop "+o).appendTo(this.$body),this.$element.on("click.dismiss.bs.modal",t.proxy((function(t){this.ignoreBackdropClick?this.ignoreBackdropClick=!1:t.target===t.currentTarget&&("static"==this.options.backdrop?this.$element[0].focus():this.hide())}),this)),i&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!r)return;i?this.$backdrop.one("bsTransitionEnd",r).emulateTransitionEnd(e.BACKDROP_TRANSITION_DURATION):r()}else if(!this.isShown&&this.$backdrop){this.$backdrop.removeClass("in");var a=function(){n.removeBackdrop(),r&&r()};t.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one("bsTransitionEnd",a).emulateTransitionEnd(e.BACKDROP_TRANSITION_DURATION):a()}else r&&r()},e.prototype.handleUpdate=function(){this.adjustDialog()},e.prototype.adjustDialog=function(){var t=this.$element[0].scrollHeight>document.documentElement.clientHeight;this.$element.css({paddingLeft:!this.bodyIsOverflowing&&t?this.scrollbarWidth:"",paddingRight:this.bodyIsOverflowing&&!t?this.scrollbarWidth:""})},e.prototype.resetAdjustments=function(){this.$element.css({paddingLeft:"",paddingRight:""})},e.prototype.checkScrollbar=function(){var t=window.innerWidth;if(!t){var e=document.documentElement.getBoundingClientRect();t=e.right-Math.abs(e.left)}this.bodyIsOverflowing=document.body.clientWidth<t,this.scrollbarWidth=this.measureScrollbar()},e.prototype.setScrollbar=function(){var e=parseInt(this.$body.css("padding-right")||0,10);this.originalBodyPad=document.body.style.paddingRight||"";var r=this.scrollbarWidth;this.bodyIsOverflowing&&(this.$body.css("padding-right",e+r),t(this.fixedContent).each((function(e,n){var o=n.style.paddingRight,i=t(n).css("padding-right");t(n).data("padding-right",o).css("padding-right",parseFloat(i)+r+"px")})))},e.prototype.resetScrollbar=function(){this.$body.css("padding-right",this.originalBodyPad),t(this.fixedContent).each((function(e,r){var n=t(r).data("padding-right");t(r).removeData("padding-right"),r.style.paddingRight=n||""}))},e.prototype.measureScrollbar=function(){var t=document.createElement("div");t.className="modal-scrollbar-measure",this.$body.append(t);var e=t.offsetWidth-t.clientWidth;return this.$body[0].removeChild(t),e};var n=t.fn.modal;t.fn.modal=r,t.fn.modal.Constructor=e,t.fn.modal.noConflict=function(){return t.fn.modal=n,this},t(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',(function(e){var n=t(this),o=n.attr("href"),i=n.attr("data-target")||o&&o.replace(/.*(?=#[^\s]+$)/,""),a=t(document).find(i),s=a.data("bs.modal")?"toggle":t.extend({remote:!/#/.test(o)&&o},a.data(),n.data());n.is("a")&&e.preventDefault(),a.one("show.bs.modal",(function(t){t.isDefaultPrevented()||a.one("hidden.bs.modal",(function(){n.is(":visible")&&n.trigger("focus")}))})),r.call(a,s,this)}))}(n),function(t){"use strict";var e=["sanitize","whiteList","sanitizeFn"],r=["background","cite","href","itemtype","longdesc","poster","src","xlink:href"],n={"*":["class","dir","id","lang","role",/^aria-[\w-]*$/i],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],div:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]},o=/^(?:(?:https?|mailto|ftp|tel|file):|[^&:/?#]*(?:[/?#]|$))/gi,i=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+/]+=*$/i;function a(e,n){var a=e.nodeName.toLowerCase();if(-1!==t.inArray(a,n))return-1===t.inArray(a,r)||Boolean(e.nodeValue.match(o)||e.nodeValue.match(i));for(var s=t(n).filter((function(t,e){return e instanceof RegExp})),c=0,l=s.length;c<l;c++)if(a.match(s[c]))return!0;return!1}function s(e,r,n){if(0===e.length)return e;if(n&&"function"==typeof n)return n(e);if(!document.implementation||!document.implementation.createHTMLDocument)return e;var o=document.implementation.createHTMLDocument("sanitization");o.body.innerHTML=e;for(var i=t.map(r,(function(t,e){return e})),s=t(o.body).find("*"),c=0,l=s.length;c<l;c++){var u=s[c],d=u.nodeName.toLowerCase();if(-1!==t.inArray(d,i))for(var h=t.map(u.attributes,(function(t){return t})),f=[].concat(r["*"]||[],r[d]||[]),p=0,m=h.length;p<m;p++)a(h[p],f)||u.removeAttribute(h[p].nodeName);else u.parentNode.removeChild(u)}return o.body.innerHTML}var c=function(t,e){this.type=null,this.options=null,this.enabled=null,this.timeout=null,this.hoverState=null,this.$element=null,this.inState=null,this.init("tooltip",t,e)};c.VERSION="3.4.1",c.TRANSITION_DURATION=150,c.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1,viewport:{selector:"body",padding:0},sanitize:!0,sanitizeFn:null,whiteList:n},c.prototype.init=function(e,r,n){if(this.enabled=!0,this.type=e,this.$element=t(r),this.options=this.getOptions(n),this.$viewport=this.options.viewport&&t(document).find(t.isFunction(this.options.viewport)?this.options.viewport.call(this,this.$element):this.options.viewport.selector||this.options.viewport),this.inState={click:!1,hover:!1,focus:!1},this.$element[0]instanceof document.constructor&&!this.options.selector)throw new Error("`selector` option must be specified when initializing "+this.type+" on the window.document object!");for(var o=this.options.trigger.split(" "),i=o.length;i--;){var a=o[i];if("click"==a)this.$element.on("click."+this.type,this.options.selector,t.proxy(this.toggle,this));else if("manual"!=a){var s="hover"==a?"mouseenter":"focusin",c="hover"==a?"mouseleave":"focusout";this.$element.on(s+"."+this.type,this.options.selector,t.proxy(this.enter,this)),this.$element.on(c+"."+this.type,this.options.selector,t.proxy(this.leave,this))}}this.options.selector?this._options=t.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},c.prototype.getDefaults=function(){return c.DEFAULTS},c.prototype.getOptions=function(r){var n=this.$element.data();for(var o in n)n.hasOwnProperty(o)&&-1!==t.inArray(o,e)&&delete n[o];return(r=t.extend({},this.getDefaults(),n,r)).delay&&"number"==typeof r.delay&&(r.delay={show:r.delay,hide:r.delay}),r.sanitize&&(r.template=s(r.template,r.whiteList,r.sanitizeFn)),r},c.prototype.getDelegateOptions=function(){var e={},r=this.getDefaults();return this._options&&t.each(this._options,(function(t,n){r[t]!=n&&(e[t]=n)})),e},c.prototype.enter=function(e){var r=e instanceof this.constructor?e:t(e.currentTarget).data("bs."+this.type);if(r||(r=new this.constructor(e.currentTarget,this.getDelegateOptions()),t(e.currentTarget).data("bs."+this.type,r)),e instanceof t.Event&&(r.inState["focusin"==e.type?"focus":"hover"]=!0),r.tip().hasClass("in")||"in"==r.hoverState)r.hoverState="in";else{if(clearTimeout(r.timeout),r.hoverState="in",!r.options.delay||!r.options.delay.show)return r.show();r.timeout=setTimeout((function(){"in"==r.hoverState&&r.show()}),r.options.delay.show)}},c.prototype.isInStateTrue=function(){for(var t in this.inState)if(this.inState[t])return!0;return!1},c.prototype.leave=function(e){var r=e instanceof this.constructor?e:t(e.currentTarget).data("bs."+this.type);if(r||(r=new this.constructor(e.currentTarget,this.getDelegateOptions()),t(e.currentTarget).data("bs."+this.type,r)),e instanceof t.Event&&(r.inState["focusout"==e.type?"focus":"hover"]=!1),!r.isInStateTrue()){if(clearTimeout(r.timeout),r.hoverState="out",!r.options.delay||!r.options.delay.hide)return r.hide();r.timeout=setTimeout((function(){"out"==r.hoverState&&r.hide()}),r.options.delay.hide)}},c.prototype.show=function(){var e=t.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){this.$element.trigger(e);var r=t.contains(this.$element[0].ownerDocument.documentElement,this.$element[0]);if(e.isDefaultPrevented()||!r)return;var n=this,o=this.tip(),i=this.getUID(this.type);this.setContent(),o.attr("id",i),this.$element.attr("aria-describedby",i),this.options.animation&&o.addClass("fade");var a="function"==typeof this.options.placement?this.options.placement.call(this,o[0],this.$element[0]):this.options.placement,s=/\s?auto?\s?/i,l=s.test(a);l&&(a=a.replace(s,"")||"top"),o.detach().css({top:0,left:0,display:"block"}).addClass(a).data("bs."+this.type,this),this.options.container?o.appendTo(t(document).find(this.options.container)):o.insertAfter(this.$element),this.$element.trigger("inserted.bs."+this.type);var u=this.getPosition(),d=o[0].offsetWidth,h=o[0].offsetHeight;if(l){var f=a,p=this.getPosition(this.$viewport);a="bottom"==a&&u.bottom+h>p.bottom?"top":"top"==a&&u.top-h<p.top?"bottom":"right"==a&&u.right+d>p.width?"left":"left"==a&&u.left-d<p.left?"right":a,o.removeClass(f).addClass(a)}var m=this.getCalculatedOffset(a,u,d,h);this.applyPlacement(m,a);var v=function(){var t=n.hoverState;n.$element.trigger("shown.bs."+n.type),n.hoverState=null,"out"==t&&n.leave(n)};t.support.transition&&this.$tip.hasClass("fade")?o.one("bsTransitionEnd",v).emulateTransitionEnd(c.TRANSITION_DURATION):v()}},c.prototype.applyPlacement=function(e,r){var n=this.tip(),o=n[0].offsetWidth,i=n[0].offsetHeight,a=parseInt(n.css("margin-top"),10),s=parseInt(n.css("margin-left"),10);isNaN(a)&&(a=0),isNaN(s)&&(s=0),e.top+=a,e.left+=s,t.offset.setOffset(n[0],t.extend({using:function(t){n.css({top:Math.round(t.top),left:Math.round(t.left)})}},e),0),n.addClass("in");var c=n[0].offsetWidth,l=n[0].offsetHeight;"top"==r&&l!=i&&(e.top=e.top+i-l);var u=this.getViewportAdjustedDelta(r,e,c,l);u.left?e.left+=u.left:e.top+=u.top;var d=/top|bottom/.test(r),h=d?2*u.left-o+c:2*u.top-i+l,f=d?"offsetWidth":"offsetHeight";n.offset(e),this.replaceArrow(h,n[0][f],d)},c.prototype.replaceArrow=function(t,e,r){this.arrow().css(r?"left":"top",50*(1-t/e)+"%").css(r?"top":"left","")},c.prototype.setContent=function(){var t=this.tip(),e=this.getTitle();this.options.html?(this.options.sanitize&&(e=s(e,this.options.whiteList,this.options.sanitizeFn)),t.find(".tooltip-inner").html(e)):t.find(".tooltip-inner").text(e),t.removeClass("fade in top bottom left right")},c.prototype.hide=function(e){var r=this,n=t(this.$tip),o=t.Event("hide.bs."+this.type);function i(){"in"!=r.hoverState&&n.detach(),r.$element&&r.$element.removeAttr("aria-describedby").trigger("hidden.bs."+r.type),e&&e()}if(this.$element.trigger(o),!o.isDefaultPrevented())return n.removeClass("in"),t.support.transition&&n.hasClass("fade")?n.one("bsTransitionEnd",i).emulateTransitionEnd(c.TRANSITION_DURATION):i(),this.hoverState=null,this},c.prototype.fixTitle=function(){var t=this.$element;(t.attr("title")||"string"!=typeof t.attr("data-original-title"))&&t.attr("data-original-title",t.attr("title")||"").attr("title","")},c.prototype.hasContent=function(){return this.getTitle()},c.prototype.getPosition=function(e){var r=(e=e||this.$element)[0],n="BODY"==r.tagName,o=r.getBoundingClientRect();null==o.width&&(o=t.extend({},o,{width:o.right-o.left,height:o.bottom-o.top}));var i=window.SVGElement&&r instanceof window.SVGElement,a=n?{top:0,left:0}:i?null:e.offset(),s={scroll:n?document.documentElement.scrollTop||document.body.scrollTop:e.scrollTop()},c=n?{width:t(window).width(),height:t(window).height()}:null;return t.extend({},o,s,c,a)},c.prototype.getCalculatedOffset=function(t,e,r,n){return"bottom"==t?{top:e.top+e.height,left:e.left+e.width/2-r/2}:"top"==t?{top:e.top-n,left:e.left+e.width/2-r/2}:"left"==t?{top:e.top+e.height/2-n/2,left:e.left-r}:{top:e.top+e.height/2-n/2,left:e.left+e.width}},c.prototype.getViewportAdjustedDelta=function(t,e,r,n){var o={top:0,left:0};if(!this.$viewport)return o;var i=this.options.viewport&&this.options.viewport.padding||0,a=this.getPosition(this.$viewport);if(/right|left/.test(t)){var s=e.top-i-a.scroll,c=e.top+i-a.scroll+n;s<a.top?o.top=a.top-s:c>a.top+a.height&&(o.top=a.top+a.height-c)}else{var l=e.left-i,u=e.left+i+r;l<a.left?o.left=a.left-l:u>a.right&&(o.left=a.left+a.width-u)}return o},c.prototype.getTitle=function(){var t=this.$element,e=this.options;return t.attr("data-original-title")||("function"==typeof e.title?e.title.call(t[0]):e.title)},c.prototype.getUID=function(t){do{t+=~~(1e6*Math.random())}while(document.getElementById(t));return t},c.prototype.tip=function(){if(!this.$tip&&(this.$tip=t(this.options.template),1!=this.$tip.length))throw new Error(this.type+" `template` option must consist of exactly 1 top-level element!");return this.$tip},c.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},c.prototype.enable=function(){this.enabled=!0},c.prototype.disable=function(){this.enabled=!1},c.prototype.toggleEnabled=function(){this.enabled=!this.enabled},c.prototype.toggle=function(e){var r=this;e&&((r=t(e.currentTarget).data("bs."+this.type))||(r=new this.constructor(e.currentTarget,this.getDelegateOptions()),t(e.currentTarget).data("bs."+this.type,r))),e?(r.inState.click=!r.inState.click,r.isInStateTrue()?r.enter(r):r.leave(r)):r.tip().hasClass("in")?r.leave(r):r.enter(r)},c.prototype.destroy=function(){var t=this;clearTimeout(this.timeout),this.hide((function(){t.$element.off("."+t.type).removeData("bs."+t.type),t.$tip&&t.$tip.detach(),t.$tip=null,t.$arrow=null,t.$viewport=null,t.$element=null}))},c.prototype.sanitizeHtml=function(t){return s(t,this.options.whiteList,this.options.sanitizeFn)};var l=t.fn.tooltip;t.fn.tooltip=function(e){return this.each((function(){var r=t(this),n=r.data("bs.tooltip"),o="object"==typeof e&&e;!n&&/destroy|hide/.test(e)||(n||r.data("bs.tooltip",n=new c(this,o)),"string"==typeof e&&n[e]())}))},t.fn.tooltip.Constructor=c,t.fn.tooltip.noConflict=function(){return t.fn.tooltip=l,this}}(n),function(t){"use strict";var e=function(t,e){this.init("popover",t,e)};if(!t.fn.tooltip)throw new Error("Popover requires tooltip.js");e.VERSION="3.4.1",e.DEFAULTS=t.extend({},t.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),(e.prototype=t.extend({},t.fn.tooltip.Constructor.prototype)).constructor=e,e.prototype.getDefaults=function(){return e.DEFAULTS},e.prototype.setContent=function(){var t=this.tip(),e=this.getTitle(),r=this.getContent();if(this.options.html){var n=typeof r;this.options.sanitize&&(e=this.sanitizeHtml(e),"string"===n&&(r=this.sanitizeHtml(r))),t.find(".popover-title").html(e),t.find(".popover-content").children().detach().end()["string"===n?"html":"append"](r)}else t.find(".popover-title").text(e),t.find(".popover-content").children().detach().end().text(r);t.removeClass("fade top bottom left right in"),t.find(".popover-title").html()||t.find(".popover-title").hide()},e.prototype.hasContent=function(){return this.getTitle()||this.getContent()},e.prototype.getContent=function(){var t=this.$element,e=this.options;return t.attr("data-content")||("function"==typeof e.content?e.content.call(t[0]):e.content)},e.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")};var r=t.fn.popover;t.fn.popover=function(r){return this.each((function(){var n=t(this),o=n.data("bs.popover"),i="object"==typeof r&&r;!o&&/destroy|hide/.test(r)||(o||n.data("bs.popover",o=new e(this,i)),"string"==typeof r&&o[r]())}))},t.fn.popover.Constructor=e,t.fn.popover.noConflict=function(){return t.fn.popover=r,this}}(n),function(t){"use strict";function e(r,n){this.$body=t(document.body),this.$scrollElement=t(r).is(document.body)?t(window):t(r),this.options=t.extend({},e.DEFAULTS,n),this.selector=(this.options.target||"")+" .nav li > a",this.offsets=[],this.targets=[],this.activeTarget=null,this.scrollHeight=0,this.$scrollElement.on("scroll.bs.scrollspy",t.proxy(this.process,this)),this.refresh(),this.process()}function r(r){return this.each((function(){var n=t(this),o=n.data("bs.scrollspy"),i="object"==typeof r&&r;o||n.data("bs.scrollspy",o=new e(this,i)),"string"==typeof r&&o[r]()}))}e.VERSION="3.4.1",e.DEFAULTS={offset:10},e.prototype.getScrollHeight=function(){return this.$scrollElement[0].scrollHeight||Math.max(this.$body[0].scrollHeight,document.documentElement.scrollHeight)},e.prototype.refresh=function(){var e=this,r="offset",n=0;this.offsets=[],this.targets=[],this.scrollHeight=this.getScrollHeight(),t.isWindow(this.$scrollElement[0])||(r="position",n=this.$scrollElement.scrollTop()),this.$body.find(this.selector).map((function(){var e=t(this),o=e.data("target")||e.attr("href"),i=/^#./.test(o)&&t(o);return i&&i.length&&i.is(":visible")&&[[i[r]().top+n,o]]||null})).sort((function(t,e){return t[0]-e[0]})).each((function(){e.offsets.push(this[0]),e.targets.push(this[1])}))},e.prototype.process=function(){var t,e=this.$scrollElement.scrollTop()+this.options.offset,r=this.getScrollHeight(),n=this.options.offset+r-this.$scrollElement.height(),o=this.offsets,i=this.targets,a=this.activeTarget;if(this.scrollHeight!=r&&this.refresh(),e>=n)return a!=(t=i[i.length-1])&&this.activate(t);if(a&&e<o[0])return this.activeTarget=null,this.clear();for(t=o.length;t--;)a!=i[t]&&e>=o[t]&&(void 0===o[t+1]||e<o[t+1])&&this.activate(i[t])},e.prototype.activate=function(e){this.activeTarget=e,this.clear();var r=this.selector+'[data-target="'+e+'"],'+this.selector+'[href="'+e+'"]',n=t(r).parents("li").addClass("active");n.parent(".dropdown-menu").length&&(n=n.closest("li.dropdown").addClass("active")),n.trigger("activate.bs.scrollspy")},e.prototype.clear=function(){t(this.selector).parentsUntil(this.options.target,".active").removeClass("active")};var n=t.fn.scrollspy;t.fn.scrollspy=r,t.fn.scrollspy.Constructor=e,t.fn.scrollspy.noConflict=function(){return t.fn.scrollspy=n,this},t(window).on("load.bs.scrollspy.data-api",(function(){t('[data-spy="scroll"]').each((function(){var e=t(this);r.call(e,e.data())}))}))}(n),function(t){"use strict";var e=function(e){this.element=t(e)};function r(r){return this.each((function(){var n=t(this),o=n.data("bs.tab");o||n.data("bs.tab",o=new e(this)),"string"==typeof r&&o[r]()}))}e.VERSION="3.4.1",e.TRANSITION_DURATION=150,e.prototype.show=function(){var e=this.element,r=e.closest("ul:not(.dropdown-menu)"),n=e.data("target");if(n||(n=(n=e.attr("href"))&&n.replace(/.*(?=#[^\s]*$)/,"")),!e.parent("li").hasClass("active")){var o=r.find(".active:last a"),i=t.Event("hide.bs.tab",{relatedTarget:e[0]}),a=t.Event("show.bs.tab",{relatedTarget:o[0]});if(o.trigger(i),e.trigger(a),!a.isDefaultPrevented()&&!i.isDefaultPrevented()){var s=t(document).find(n);this.activate(e.closest("li"),r),this.activate(s,s.parent(),(function(){o.trigger({type:"hidden.bs.tab",relatedTarget:e[0]}),e.trigger({type:"shown.bs.tab",relatedTarget:o[0]})}))}}},e.prototype.activate=function(r,n,o){var i=n.find("> .active"),a=o&&t.support.transition&&(i.length&&i.hasClass("fade")||!!n.find("> .fade").length);function s(){i.removeClass("active").find("> .dropdown-menu > .active").removeClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!1),r.addClass("active").find('[data-toggle="tab"]').attr("aria-expanded",!0),a?(r[0].offsetWidth,r.addClass("in")):r.removeClass("fade"),r.parent(".dropdown-menu").length&&r.closest("li.dropdown").addClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!0),o&&o()}i.length&&a?i.one("bsTransitionEnd",s).emulateTransitionEnd(e.TRANSITION_DURATION):s(),i.removeClass("in")};var n=t.fn.tab;t.fn.tab=r,t.fn.tab.Constructor=e,t.fn.tab.noConflict=function(){return t.fn.tab=n,this};var o=function(e){e.preventDefault(),r.call(t(this),"show")};t(document).on("click.bs.tab.data-api",'[data-toggle="tab"]',o).on("click.bs.tab.data-api",'[data-toggle="pill"]',o)}(n),function(t){"use strict";var e=function(r,n){this.options=t.extend({},e.DEFAULTS,n);var o=this.options.target===e.DEFAULTS.target?t(this.options.target):t(document).find(this.options.target);this.$target=o.on("scroll.bs.affix.data-api",t.proxy(this.checkPosition,this)).on("click.bs.affix.data-api",t.proxy(this.checkPositionWithEventLoop,this)),this.$element=t(r),this.affixed=null,this.unpin=null,this.pinnedOffset=null,this.checkPosition()};function r(r){return this.each((function(){var n=t(this),o=n.data("bs.affix"),i="object"==typeof r&&r;o||n.data("bs.affix",o=new e(this,i)),"string"==typeof r&&o[r]()}))}e.VERSION="3.4.1",e.RESET="affix affix-top affix-bottom",e.DEFAULTS={offset:0,target:window},e.prototype.getState=function(t,e,r,n){var o=this.$target.scrollTop(),i=this.$element.offset(),a=this.$target.height();if(null!=r&&"top"==this.affixed)return o<r&&"top";if("bottom"==this.affixed)return null!=r?!(o+this.unpin<=i.top)&&"bottom":!(o+a<=t-n)&&"bottom";var s=null==this.affixed,c=s?o:i.top;return null!=r&&o<=r?"top":null!=n&&c+(s?a:e)>=t-n&&"bottom"},e.prototype.getPinnedOffset=function(){if(this.pinnedOffset)return this.pinnedOffset;this.$element.removeClass(e.RESET).addClass("affix");var t=this.$target.scrollTop(),r=this.$element.offset();return this.pinnedOffset=r.top-t},e.prototype.checkPositionWithEventLoop=function(){setTimeout(t.proxy(this.checkPosition,this),1)},e.prototype.checkPosition=function(){if(this.$element.is(":visible")){var r=this.$element.height(),n=this.options.offset,o=n.top,i=n.bottom,a=Math.max(t(document).height(),t(document.body).height());"object"!=typeof n&&(i=o=n),"function"==typeof o&&(o=n.top(this.$element)),"function"==typeof i&&(i=n.bottom(this.$element));var s=this.getState(a,r,o,i);if(this.affixed!=s){null!=this.unpin&&this.$element.css("top","");var c="affix"+(s?"-"+s:""),l=t.Event(c+".bs.affix");if(this.$element.trigger(l),l.isDefaultPrevented())return;this.affixed=s,this.unpin="bottom"==s?this.getPinnedOffset():null,this.$element.removeClass(e.RESET).addClass(c).trigger(c.replace("affix","affixed")+".bs.affix")}"bottom"==s&&this.$element.offset({top:a-r-i})}};var n=t.fn.affix;t.fn.affix=r,t.fn.affix.Constructor=e,t.fn.affix.noConflict=function(){return t.fn.affix=n,this},t(window).on("load",(function(){t('[data-spy="affix"]').each((function(){var e=t(this),n=e.data();n.offset=n.offset||{},null!=n.offsetBottom&&(n.offset.bottom=n.offsetBottom),null!=n.offsetTop&&(n.offset.top=n.offsetTop),r.call(e,n)}))}))}(n)},7757:function(t,e,r){t.exports=function(t){"use strict";function e(t,e){return t(e={exports:{}},e.exports),e.exports}function r(t){return t&&t.default||t}t=t&&t.hasOwnProperty("default")?t.default:t;var n={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},o=e((function(t){var e={};for(var r in n)n.hasOwnProperty(r)&&(e[n[r]]=r);var o=t.exports={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},lch:{channels:3,labels:"lch"},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}};for(var i in o)if(o.hasOwnProperty(i)){if(!("channels"in o[i]))throw new Error("missing channels property: "+i);if(!("labels"in o[i]))throw new Error("missing channel labels property: "+i);if(o[i].labels.length!==o[i].channels)throw new Error("channel and label counts mismatch: "+i);var a=o[i].channels,s=o[i].labels;delete o[i].channels,delete o[i].labels,Object.defineProperty(o[i],"channels",{value:a}),Object.defineProperty(o[i],"labels",{value:s})}function c(t,e){return Math.pow(t[0]-e[0],2)+Math.pow(t[1]-e[1],2)+Math.pow(t[2]-e[2],2)}o.rgb.hsl=function(t){var e,r,n=t[0]/255,o=t[1]/255,i=t[2]/255,a=Math.min(n,o,i),s=Math.max(n,o,i),c=s-a;return s===a?e=0:n===s?e=(o-i)/c:o===s?e=2+(i-n)/c:i===s&&(e=4+(n-o)/c),(e=Math.min(60*e,360))<0&&(e+=360),r=(a+s)/2,[e,100*(s===a?0:r<=.5?c/(s+a):c/(2-s-a)),100*r]},o.rgb.hsv=function(t){var e,r,n,o,i,a=t[0]/255,s=t[1]/255,c=t[2]/255,l=Math.max(a,s,c),u=l-Math.min(a,s,c),d=function(t){return(l-t)/6/u+.5};return 0===u?o=i=0:(i=u/l,e=d(a),r=d(s),n=d(c),a===l?o=n-r:s===l?o=1/3+e-n:c===l&&(o=2/3+r-e),o<0?o+=1:o>1&&(o-=1)),[360*o,100*i,100*l]},o.rgb.hwb=function(t){var e=t[0],r=t[1],n=t[2];return[o.rgb.hsl(t)[0],1/255*Math.min(e,Math.min(r,n))*100,100*(n=1-1/255*Math.max(e,Math.max(r,n)))]},o.rgb.cmyk=function(t){var e,r=t[0]/255,n=t[1]/255,o=t[2]/255;return[100*((1-r-(e=Math.min(1-r,1-n,1-o)))/(1-e)||0),100*((1-n-e)/(1-e)||0),100*((1-o-e)/(1-e)||0),100*e]},o.rgb.keyword=function(t){var r=e[t];if(r)return r;var o,i=1/0;for(var a in n)if(n.hasOwnProperty(a)){var s=c(t,n[a]);s<i&&(i=s,o=a)}return o},o.keyword.rgb=function(t){return n[t]},o.rgb.xyz=function(t){var e=t[0]/255,r=t[1]/255,n=t[2]/255;return[100*(.4124*(e=e>.04045?Math.pow((e+.055)/1.055,2.4):e/12.92)+.3576*(r=r>.04045?Math.pow((r+.055)/1.055,2.4):r/12.92)+.1805*(n=n>.04045?Math.pow((n+.055)/1.055,2.4):n/12.92)),100*(.2126*e+.7152*r+.0722*n),100*(.0193*e+.1192*r+.9505*n)]},o.rgb.lab=function(t){var e=o.rgb.xyz(t),r=e[0],n=e[1],i=e[2];return n/=100,i/=108.883,r=(r/=95.047)>.008856?Math.pow(r,1/3):7.787*r+16/116,[116*(n=n>.008856?Math.pow(n,1/3):7.787*n+16/116)-16,500*(r-n),200*(n-(i=i>.008856?Math.pow(i,1/3):7.787*i+16/116))]},o.hsl.rgb=function(t){var e,r,n,o,i,a=t[0]/360,s=t[1]/100,c=t[2]/100;if(0===s)return[i=255*c,i,i];e=2*c-(r=c<.5?c*(1+s):c+s-c*s),o=[0,0,0];for(var l=0;l<3;l++)(n=a+1/3*-(l-1))<0&&n++,n>1&&n--,i=6*n<1?e+6*(r-e)*n:2*n<1?r:3*n<2?e+(r-e)*(2/3-n)*6:e,o[l]=255*i;return o},o.hsl.hsv=function(t){var e=t[0],r=t[1]/100,n=t[2]/100,o=r,i=Math.max(n,.01);return r*=(n*=2)<=1?n:2-n,o*=i<=1?i:2-i,[e,100*(0===n?2*o/(i+o):2*r/(n+r)),(n+r)/2*100]},o.hsv.rgb=function(t){var e=t[0]/60,r=t[1]/100,n=t[2]/100,o=Math.floor(e)%6,i=e-Math.floor(e),a=255*n*(1-r),s=255*n*(1-r*i),c=255*n*(1-r*(1-i));switch(n*=255,o){case 0:return[n,c,a];case 1:return[s,n,a];case 2:return[a,n,c];case 3:return[a,s,n];case 4:return[c,a,n];case 5:return[n,a,s]}},o.hsv.hsl=function(t){var e,r,n,o=t[0],i=t[1]/100,a=t[2]/100,s=Math.max(a,.01);return n=(2-i)*a,r=i*s,[o,100*(r=(r/=(e=(2-i)*s)<=1?e:2-e)||0),100*(n/=2)]},o.hwb.rgb=function(t){var e,r,n,o,i,a,s,c=t[0]/360,l=t[1]/100,u=t[2]/100,d=l+u;switch(d>1&&(l/=d,u/=d),n=6*c-(e=Math.floor(6*c)),0!=(1&e)&&(n=1-n),o=l+n*((r=1-u)-l),e){default:case 6:case 0:i=r,a=o,s=l;break;case 1:i=o,a=r,s=l;break;case 2:i=l,a=r,s=o;break;case 3:i=l,a=o,s=r;break;case 4:i=o,a=l,s=r;break;case 5:i=r,a=l,s=o}return[255*i,255*a,255*s]},o.cmyk.rgb=function(t){var e=t[0]/100,r=t[1]/100,n=t[2]/100,o=t[3]/100;return[255*(1-Math.min(1,e*(1-o)+o)),255*(1-Math.min(1,r*(1-o)+o)),255*(1-Math.min(1,n*(1-o)+o))]},o.xyz.rgb=function(t){var e,r,n,o=t[0]/100,i=t[1]/100,a=t[2]/100;return r=-.9689*o+1.8758*i+.0415*a,n=.0557*o+-.204*i+1.057*a,e=(e=3.2406*o+-1.5372*i+-.4986*a)>.0031308?1.055*Math.pow(e,1/2.4)-.055:12.92*e,r=r>.0031308?1.055*Math.pow(r,1/2.4)-.055:12.92*r,n=n>.0031308?1.055*Math.pow(n,1/2.4)-.055:12.92*n,[255*(e=Math.min(Math.max(0,e),1)),255*(r=Math.min(Math.max(0,r),1)),255*(n=Math.min(Math.max(0,n),1))]},o.xyz.lab=function(t){var e=t[0],r=t[1],n=t[2];return r/=100,n/=108.883,e=(e/=95.047)>.008856?Math.pow(e,1/3):7.787*e+16/116,[116*(r=r>.008856?Math.pow(r,1/3):7.787*r+16/116)-16,500*(e-r),200*(r-(n=n>.008856?Math.pow(n,1/3):7.787*n+16/116))]},o.lab.xyz=function(t){var e,r,n,o=t[0];e=t[1]/500+(r=(o+16)/116),n=r-t[2]/200;var i=Math.pow(r,3),a=Math.pow(e,3),s=Math.pow(n,3);return r=i>.008856?i:(r-16/116)/7.787,e=a>.008856?a:(e-16/116)/7.787,n=s>.008856?s:(n-16/116)/7.787,[e*=95.047,r*=100,n*=108.883]},o.lab.lch=function(t){var e,r=t[0],n=t[1],o=t[2];return(e=360*Math.atan2(o,n)/2/Math.PI)<0&&(e+=360),[r,Math.sqrt(n*n+o*o),e]},o.lch.lab=function(t){var e,r=t[0],n=t[1];return e=t[2]/360*2*Math.PI,[r,n*Math.cos(e),n*Math.sin(e)]},o.rgb.ansi16=function(t){var e=t[0],r=t[1],n=t[2],i=1 in arguments?arguments[1]:o.rgb.hsv(t)[2];if(0===(i=Math.round(i/50)))return 30;var a=30+(Math.round(n/255)<<2|Math.round(r/255)<<1|Math.round(e/255));return 2===i&&(a+=60),a},o.hsv.ansi16=function(t){return o.rgb.ansi16(o.hsv.rgb(t),t[2])},o.rgb.ansi256=function(t){var e=t[0],r=t[1],n=t[2];return e===r&&r===n?e<8?16:e>248?231:Math.round((e-8)/247*24)+232:16+36*Math.round(e/255*5)+6*Math.round(r/255*5)+Math.round(n/255*5)},o.ansi16.rgb=function(t){var e=t%10;if(0===e||7===e)return t>50&&(e+=3.5),[e=e/10.5*255,e,e];var r=.5*(1+~~(t>50));return[(1&e)*r*255,(e>>1&1)*r*255,(e>>2&1)*r*255]},o.ansi256.rgb=function(t){if(t>=232){var e=10*(t-232)+8;return[e,e,e]}var r;return t-=16,[Math.floor(t/36)/5*255,Math.floor((r=t%36)/6)/5*255,r%6/5*255]},o.rgb.hex=function(t){var e=(((255&Math.round(t[0]))<<16)+((255&Math.round(t[1]))<<8)+(255&Math.round(t[2]))).toString(16).toUpperCase();return"000000".substring(e.length)+e},o.hex.rgb=function(t){var e=t.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i);if(!e)return[0,0,0];var r=e[0];3===e[0].length&&(r=r.split("").map((function(t){return t+t})).join(""));var n=parseInt(r,16);return[n>>16&255,n>>8&255,255&n]},o.rgb.hcg=function(t){var e,r=t[0]/255,n=t[1]/255,o=t[2]/255,i=Math.max(Math.max(r,n),o),a=Math.min(Math.min(r,n),o),s=i-a;return e=s<=0?0:i===r?(n-o)/s%6:i===n?2+(o-r)/s:4+(r-n)/s+4,e/=6,[360*(e%=1),100*s,100*(s<1?a/(1-s):0)]},o.hsl.hcg=function(t){var e=t[1]/100,r=t[2]/100,n=1,o=0;return(n=r<.5?2*e*r:2*e*(1-r))<1&&(o=(r-.5*n)/(1-n)),[t[0],100*n,100*o]},o.hsv.hcg=function(t){var e=t[1]/100,r=t[2]/100,n=e*r,o=0;return n<1&&(o=(r-n)/(1-n)),[t[0],100*n,100*o]},o.hcg.rgb=function(t){var e=t[0]/360,r=t[1]/100,n=t[2]/100;if(0===r)return[255*n,255*n,255*n];var o=[0,0,0],i=e%1*6,a=i%1,s=1-a,c=0;switch(Math.floor(i)){case 0:o[0]=1,o[1]=a,o[2]=0;break;case 1:o[0]=s,o[1]=1,o[2]=0;break;case 2:o[0]=0,o[1]=1,o[2]=a;break;case 3:o[0]=0,o[1]=s,o[2]=1;break;case 4:o[0]=a,o[1]=0,o[2]=1;break;default:o[0]=1,o[1]=0,o[2]=s}return c=(1-r)*n,[255*(r*o[0]+c),255*(r*o[1]+c),255*(r*o[2]+c)]},o.hcg.hsv=function(t){var e=t[1]/100,r=e+t[2]/100*(1-e),n=0;return r>0&&(n=e/r),[t[0],100*n,100*r]},o.hcg.hsl=function(t){var e=t[1]/100,r=t[2]/100*(1-e)+.5*e,n=0;return r>0&&r<.5?n=e/(2*r):r>=.5&&r<1&&(n=e/(2*(1-r))),[t[0],100*n,100*r]},o.hcg.hwb=function(t){var e=t[1]/100,r=e+t[2]/100*(1-e);return[t[0],100*(r-e),100*(1-r)]},o.hwb.hcg=function(t){var e=t[1]/100,r=1-t[2]/100,n=r-e,o=0;return n<1&&(o=(r-n)/(1-n)),[t[0],100*n,100*o]},o.apple.rgb=function(t){return[t[0]/65535*255,t[1]/65535*255,t[2]/65535*255]},o.rgb.apple=function(t){return[t[0]/255*65535,t[1]/255*65535,t[2]/255*65535]},o.gray.rgb=function(t){return[t[0]/100*255,t[0]/100*255,t[0]/100*255]},o.gray.hsl=o.gray.hsv=function(t){return[0,0,t[0]]},o.gray.hwb=function(t){return[0,100,t[0]]},o.gray.cmyk=function(t){return[0,0,0,t[0]]},o.gray.lab=function(t){return[t[0],0,0]},o.gray.hex=function(t){var e=255&Math.round(t[0]/100*255),r=((e<<16)+(e<<8)+e).toString(16).toUpperCase();return"000000".substring(r.length)+r},o.rgb.gray=function(t){return[(t[0]+t[1]+t[2])/3/255*100]}}));function i(){for(var t={},e=Object.keys(o),r=e.length,n=0;n<r;n++)t[e[n]]={distance:-1,parent:null};return t}function a(t){var e=i(),r=[t];for(e[t].distance=0;r.length;)for(var n=r.pop(),a=Object.keys(o[n]),s=a.length,c=0;c<s;c++){var l=a[c],u=e[l];-1===u.distance&&(u.distance=e[n].distance+1,u.parent=n,r.unshift(l))}return e}function s(t,e){return function(r){return e(t(r))}}function c(t,e){for(var r=[e[t].parent,t],n=o[e[t].parent][t],i=e[t].parent;e[i].parent;)r.unshift(e[i].parent),n=s(o[e[i].parent][i],n),i=e[i].parent;return n.conversion=r,n}o.rgb,o.hsl,o.hsv,o.hwb,o.cmyk,o.xyz,o.lab,o.lch,o.hex,o.keyword,o.ansi16,o.ansi256,o.hcg,o.apple,o.gray;var l=function(t){for(var e=a(t),r={},n=Object.keys(e),o=n.length,i=0;i<o;i++){var s=n[i];null!==e[s].parent&&(r[s]=c(s,e))}return r},u={};function d(t){var e=function(e){return null==e?e:(arguments.length>1&&(e=Array.prototype.slice.call(arguments)),t(e))};return"conversion"in t&&(e.conversion=t.conversion),e}function h(t){var e=function(e){if(null==e)return e;arguments.length>1&&(e=Array.prototype.slice.call(arguments));var r=t(e);if("object"==typeof r)for(var n=r.length,o=0;o<n;o++)r[o]=Math.round(r[o]);return r};return"conversion"in t&&(e.conversion=t.conversion),e}Object.keys(o).forEach((function(t){u[t]={},Object.defineProperty(u[t],"channels",{value:o[t].channels}),Object.defineProperty(u[t],"labels",{value:o[t].labels});var e=l(t);Object.keys(e).forEach((function(r){var n=e[r];u[t][r]=h(n),u[t][r].raw=d(n)}))}));var f=u,p={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},m={getRgba:v,getHsla:g,getRgb:_,getHsl:b,getHwb:y,getAlpha:x,hexString:w,rgbString:C,rgbaString:k,percentString:L,percentaString:S,hslString:E,hslaString:M,hwbString:O,keyword:P};function v(t){if(t){var e=/^#([a-fA-F0-9]{3,4})$/i,r=/^#([a-fA-F0-9]{6}([a-fA-F0-9]{2})?)$/i,n=/^rgba?\(\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/i,o=/^rgba?\(\s*([+-]?[\d\.]+)\%\s*,\s*([+-]?[\d\.]+)\%\s*,\s*([+-]?[\d\.]+)\%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/i,i=/(\w+)/,a=[0,0,0],s=1,c=t.match(e),l="";if(c){l=(c=c[1])[3];for(var u=0;u<a.length;u++)a[u]=parseInt(c[u]+c[u],16);l&&(s=Math.round(parseInt(l+l,16)/255*100)/100)}else if(c=t.match(r)){for(l=c[2],c=c[1],u=0;u<a.length;u++)a[u]=parseInt(c.slice(2*u,2*u+2),16);l&&(s=Math.round(parseInt(l,16)/255*100)/100)}else if(c=t.match(n)){for(u=0;u<a.length;u++)a[u]=parseInt(c[u+1]);s=parseFloat(c[4])}else if(c=t.match(o)){for(u=0;u<a.length;u++)a[u]=Math.round(2.55*parseFloat(c[u+1]));s=parseFloat(c[4])}else if(c=t.match(i)){if("transparent"==c[1])return[0,0,0,0];if(!(a=p[c[1]]))return}for(u=0;u<a.length;u++)a[u]=j(a[u],0,255);return s=s||0==s?j(s,0,1):1,a[3]=s,a}}function g(t){if(t){var e=/^hsla?\(\s*([+-]?\d+)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)/,r=t.match(e);if(r){var n=parseFloat(r[4]);return[j(parseInt(r[1]),0,360),j(parseFloat(r[2]),0,100),j(parseFloat(r[3]),0,100),j(isNaN(n)?1:n,0,1)]}}}function y(t){if(t){var e=/^hwb\(\s*([+-]?\d+)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)/,r=t.match(e);if(r){var n=parseFloat(r[4]);return[j(parseInt(r[1]),0,360),j(parseFloat(r[2]),0,100),j(parseFloat(r[3]),0,100),j(isNaN(n)?1:n,0,1)]}}}function _(t){var e=v(t);return e&&e.slice(0,3)}function b(t){var e=g(t);return e&&e.slice(0,3)}function x(t){var e=v(t);return e||(e=g(t))||(e=y(t))?e[3]:void 0}function w(t,e){return e=void 0!==e&&3===t.length?e:t[3],"#"+N(t[0])+N(t[1])+N(t[2])+(e>=0&&e<1?N(Math.round(255*e)):"")}function C(t,e){return e<1||t[3]&&t[3]<1?k(t,e):"rgb("+t[0]+", "+t[1]+", "+t[2]+")"}function k(t,e){return void 0===e&&(e=void 0!==t[3]?t[3]:1),"rgba("+t[0]+", "+t[1]+", "+t[2]+", "+e+")"}function L(t,e){return e<1||t[3]&&t[3]<1?S(t,e):"rgb("+Math.round(t[0]/255*100)+"%, "+Math.round(t[1]/255*100)+"%, "+Math.round(t[2]/255*100)+"%)"}function S(t,e){return"rgba("+Math.round(t[0]/255*100)+"%, "+Math.round(t[1]/255*100)+"%, "+Math.round(t[2]/255*100)+"%, "+(e||t[3]||1)+")"}function E(t,e){return e<1||t[3]&&t[3]<1?M(t,e):"hsl("+t[0]+", "+t[1]+"%, "+t[2]+"%)"}function M(t,e){return void 0===e&&(e=void 0!==t[3]?t[3]:1),"hsla("+t[0]+", "+t[1]+"%, "+t[2]+"%, "+e+")"}function O(t,e){return void 0===e&&(e=void 0!==t[3]?t[3]:1),"hwb("+t[0]+", "+t[1]+"%, "+t[2]+"%"+(void 0!==e&&1!==e?", "+e:"")+")"}function P(t){return T[t.slice(0,3)]}function j(t,e,r){return Math.min(Math.max(e,t),r)}function N(t){var e=t.toString(16).toUpperCase();return e.length<2?"0"+e:e}var T={};for(var $ in p)T[p[$]]=$;var I=function(t){return t instanceof I?t:this instanceof I?(this.valid=!1,this.values={rgb:[0,0,0],hsl:[0,0,0],hsv:[0,0,0],hwb:[0,0,0],cmyk:[0,0,0,0],alpha:1},void("string"==typeof t?(e=m.getRgba(t))?this.setValues("rgb",e):(e=m.getHsla(t))?this.setValues("hsl",e):(e=m.getHwb(t))&&this.setValues("hwb",e):"object"==typeof t&&(void 0!==(e=t).r||void 0!==e.red?this.setValues("rgb",e):void 0!==e.l||void 0!==e.lightness?this.setValues("hsl",e):void 0!==e.v||void 0!==e.value?this.setValues("hsv",e):void 0!==e.w||void 0!==e.whiteness?this.setValues("hwb",e):void 0===e.c&&void 0===e.cyan||this.setValues("cmyk",e)))):new I(t);var e};I.prototype={isValid:function(){return this.valid},rgb:function(){return this.setSpace("rgb",arguments)},hsl:function(){return this.setSpace("hsl",arguments)},hsv:function(){return this.setSpace("hsv",arguments)},hwb:function(){return this.setSpace("hwb",arguments)},cmyk:function(){return this.setSpace("cmyk",arguments)},rgbArray:function(){return this.values.rgb},hslArray:function(){return this.values.hsl},hsvArray:function(){return this.values.hsv},hwbArray:function(){var t=this.values;return 1!==t.alpha?t.hwb.concat([t.alpha]):t.hwb},cmykArray:function(){return this.values.cmyk},rgbaArray:function(){var t=this.values;return t.rgb.concat([t.alpha])},hslaArray:function(){var t=this.values;return t.hsl.concat([t.alpha])},alpha:function(t){return void 0===t?this.values.alpha:(this.setValues("alpha",t),this)},red:function(t){return this.setChannel("rgb",0,t)},green:function(t){return this.setChannel("rgb",1,t)},blue:function(t){return this.setChannel("rgb",2,t)},hue:function(t){return t&&(t=(t%=360)<0?360+t:t),this.setChannel("hsl",0,t)},saturation:function(t){return this.setChannel("hsl",1,t)},lightness:function(t){return this.setChannel("hsl",2,t)},saturationv:function(t){return this.setChannel("hsv",1,t)},whiteness:function(t){return this.setChannel("hwb",1,t)},blackness:function(t){return this.setChannel("hwb",2,t)},value:function(t){return this.setChannel("hsv",2,t)},cyan:function(t){return this.setChannel("cmyk",0,t)},magenta:function(t){return this.setChannel("cmyk",1,t)},yellow:function(t){return this.setChannel("cmyk",2,t)},black:function(t){return this.setChannel("cmyk",3,t)},hexString:function(){return m.hexString(this.values.rgb)},rgbString:function(){return m.rgbString(this.values.rgb,this.values.alpha)},rgbaString:function(){return m.rgbaString(this.values.rgb,this.values.alpha)},percentString:function(){return m.percentString(this.values.rgb,this.values.alpha)},hslString:function(){return m.hslString(this.values.hsl,this.values.alpha)},hslaString:function(){return m.hslaString(this.values.hsl,this.values.alpha)},hwbString:function(){return m.hwbString(this.values.hwb,this.values.alpha)},keyword:function(){return m.keyword(this.values.rgb,this.values.alpha)},rgbNumber:function(){var t=this.values.rgb;return t[0]<<16|t[1]<<8|t[2]},luminosity:function(){for(var t=this.values.rgb,e=[],r=0;r<t.length;r++){var n=t[r]/255;e[r]=n<=.03928?n/12.92:Math.pow((n+.055)/1.055,2.4)}return.2126*e[0]+.7152*e[1]+.0722*e[2]},contrast:function(t){var e=this.luminosity(),r=t.luminosity();return e>r?(e+.05)/(r+.05):(r+.05)/(e+.05)},level:function(t){var e=this.contrast(t);return e>=7.1?"AAA":e>=4.5?"AA":""},dark:function(){var t=this.values.rgb;return(299*t[0]+587*t[1]+114*t[2])/1e3<128},light:function(){return!this.dark()},negate:function(){for(var t=[],e=0;e<3;e++)t[e]=255-this.values.rgb[e];return this.setValues("rgb",t),this},lighten:function(t){var e=this.values.hsl;return e[2]+=e[2]*t,this.setValues("hsl",e),this},darken:function(t){var e=this.values.hsl;return e[2]-=e[2]*t,this.setValues("hsl",e),this},saturate:function(t){var e=this.values.hsl;return e[1]+=e[1]*t,this.setValues("hsl",e),this},desaturate:function(t){var e=this.values.hsl;return e[1]-=e[1]*t,this.setValues("hsl",e),this},whiten:function(t){var e=this.values.hwb;return e[1]+=e[1]*t,this.setValues("hwb",e),this},blacken:function(t){var e=this.values.hwb;return e[2]+=e[2]*t,this.setValues("hwb",e),this},greyscale:function(){var t=this.values.rgb,e=.3*t[0]+.59*t[1]+.11*t[2];return this.setValues("rgb",[e,e,e]),this},clearer:function(t){var e=this.values.alpha;return this.setValues("alpha",e-e*t),this},opaquer:function(t){var e=this.values.alpha;return this.setValues("alpha",e+e*t),this},rotate:function(t){var e=this.values.hsl,r=(e[0]+t)%360;return e[0]=r<0?360+r:r,this.setValues("hsl",e),this},mix:function(t,e){var r=this,n=t,o=void 0===e?.5:e,i=2*o-1,a=r.alpha()-n.alpha(),s=((i*a==-1?i:(i+a)/(1+i*a))+1)/2,c=1-s;return this.rgb(s*r.red()+c*n.red(),s*r.green()+c*n.green(),s*r.blue()+c*n.blue()).alpha(r.alpha()*o+n.alpha()*(1-o))},toJSON:function(){return this.rgb()},clone:function(){var t,e,r=new I,n=this.values,o=r.values;for(var i in n)n.hasOwnProperty(i)&&(t=n[i],"[object Array]"===(e={}.toString.call(t))?o[i]=t.slice(0):"[object Number]"===e?o[i]=t:console.error("unexpected color value:",t));return r}},I.prototype.spaces={rgb:["red","green","blue"],hsl:["hue","saturation","lightness"],hsv:["hue","saturation","value"],hwb:["hue","whiteness","blackness"],cmyk:["cyan","magenta","yellow","black"]},I.prototype.maxes={rgb:[255,255,255],hsl:[360,100,100],hsv:[360,100,100],hwb:[360,100,100],cmyk:[100,100,100,100]},I.prototype.getValues=function(t){for(var e=this.values,r={},n=0;n<t.length;n++)r[t.charAt(n)]=e[t][n];return 1!==e.alpha&&(r.a=e.alpha),r},I.prototype.setValues=function(t,e){var r,n,o=this.values,i=this.spaces,a=this.maxes,s=1;if(this.valid=!0,"alpha"===t)s=e;else if(e.length)o[t]=e.slice(0,t.length),s=e[t.length];else if(void 0!==e[t.charAt(0)]){for(r=0;r<t.length;r++)o[t][r]=e[t.charAt(r)];s=e.a}else if(void 0!==e[i[t][0]]){var c=i[t];for(r=0;r<t.length;r++)o[t][r]=e[c[r]];s=e.alpha}if(o.alpha=Math.max(0,Math.min(1,void 0===s?o.alpha:s)),"alpha"===t)return!1;for(r=0;r<t.length;r++)n=Math.max(0,Math.min(a[t][r],o[t][r])),o[t][r]=Math.round(n);for(var l in i)l!==t&&(o[l]=f[t][l](o[t]));return!0},I.prototype.setSpace=function(t,e){var r=e[0];return void 0===r?this.getValues(t):("number"==typeof r&&(r=Array.prototype.slice.call(e)),this.setValues(t,r),this)},I.prototype.setChannel=function(t,e,r){var n=this.values[t];return void 0===r?n[e]:(r===n[e]||(n[e]=r,this.setValues(t,n)),this)},"undefined"!=typeof window&&(window.Color=I);var D=I;function A(t){return-1===["__proto__","prototype","constructor"].indexOf(t)}var F,q={noop:function(){},uid:(F=0,function(){return F++}),isNullOrUndef:function(t){return null==t},isArray:function(t){if(Array.isArray&&Array.isArray(t))return!0;var e=Object.prototype.toString.call(t);return"[object"===e.substr(0,7)&&"Array]"===e.substr(-6)},isObject:function(t){return null!==t&&"[object Object]"===Object.prototype.toString.call(t)},isFinite:function(t){return("number"==typeof t||t instanceof Number)&&isFinite(t)},valueOrDefault:function(t,e){return void 0===t?e:t},valueAtIndexOrDefault:function(t,e,r){return q.valueOrDefault(q.isArray(t)?t[e]:t,r)},callback:function(t,e,r){if(t&&"function"==typeof t.call)return t.apply(r,e)},each:function(t,e,r,n){var o,i,a;if(q.isArray(t))if(i=t.length,n)for(o=i-1;o>=0;o--)e.call(r,t[o],o);else for(o=0;o<i;o++)e.call(r,t[o],o);else if(q.isObject(t))for(i=(a=Object.keys(t)).length,o=0;o<i;o++)e.call(r,t[a[o]],a[o])},arrayEquals:function(t,e){var r,n,o,i;if(!t||!e||t.length!==e.length)return!1;for(r=0,n=t.length;r<n;++r)if(o=t[r],i=e[r],o instanceof Array&&i instanceof Array){if(!q.arrayEquals(o,i))return!1}else if(o!==i)return!1;return!0},clone:function(t){if(q.isArray(t))return t.map(q.clone);if(q.isObject(t)){for(var e=Object.create(t),r=Object.keys(t),n=r.length,o=0;o<n;++o)e[r[o]]=q.clone(t[r[o]]);return e}return t},_merger:function(t,e,r,n){if(A(t)){var o=e[t],i=r[t];q.isObject(o)&&q.isObject(i)?q.merge(o,i,n):e[t]=q.clone(i)}},_mergerIf:function(t,e,r){if(A(t)){var n=e[t],o=r[t];q.isObject(n)&&q.isObject(o)?q.mergeIf(n,o):e.hasOwnProperty(t)||(e[t]=q.clone(o))}},merge:function(t,e,r){var n,o,i,a,s,c=q.isArray(e)?e:[e],l=c.length;if(!q.isObject(t))return t;for(n=(r=r||{}).merger||q._merger,o=0;o<l;++o)if(e=c[o],q.isObject(e))for(s=0,a=(i=Object.keys(e)).length;s<a;++s)n(i[s],t,e,r);return t},mergeIf:function(t,e){return q.merge(t,e,{merger:q._mergerIf})},extend:Object.assign||function(t){return q.merge(t,[].slice.call(arguments,1),{merger:function(t,e,r){e[t]=r[t]}})},inherits:function(t){var e=this,r=t&&t.hasOwnProperty("constructor")?t.constructor:function(){return e.apply(this,arguments)},n=function(){this.constructor=r};return n.prototype=e.prototype,r.prototype=new n,r.extend=q.inherits,t&&q.extend(r.prototype,t),r.__super__=e.prototype,r},_deprecated:function(t,e,r,n){void 0!==e&&console.warn(t+': "'+r+'" is deprecated. Please use "'+n+'" instead')}},R=q;q.callCallback=q.callback,q.indexOf=function(t,e,r){return Array.prototype.indexOf.call(t,e,r)},q.getValueOrDefault=q.valueOrDefault,q.getValueAtIndexOrDefault=q.valueAtIndexOrDefault;var G={linear:function(t){return t},easeInQuad:function(t){return t*t},easeOutQuad:function(t){return-t*(t-2)},easeInOutQuad:function(t){return(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1)},easeInCubic:function(t){return t*t*t},easeOutCubic:function(t){return(t-=1)*t*t+1},easeInOutCubic:function(t){return(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2)},easeInQuart:function(t){return t*t*t*t},easeOutQuart:function(t){return-((t-=1)*t*t*t-1)},easeInOutQuart:function(t){return(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)},easeInQuint:function(t){return t*t*t*t*t},easeOutQuint:function(t){return(t-=1)*t*t*t*t+1},easeInOutQuint:function(t){return(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)},easeInSine:function(t){return 1-Math.cos(t*(Math.PI/2))},easeOutSine:function(t){return Math.sin(t*(Math.PI/2))},easeInOutSine:function(t){return-.5*(Math.cos(Math.PI*t)-1)},easeInExpo:function(t){return 0===t?0:Math.pow(2,10*(t-1))},easeOutExpo:function(t){return 1===t?1:1-Math.pow(2,-10*t)},easeInOutExpo:function(t){return 0===t?0:1===t?1:(t/=.5)<1?.5*Math.pow(2,10*(t-1)):.5*(2-Math.pow(2,-10*--t))},easeInCirc:function(t){return t>=1?t:-(Math.sqrt(1-t*t)-1)},easeOutCirc:function(t){return Math.sqrt(1-(t-=1)*t)},easeInOutCirc:function(t){return(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)},easeInElastic:function(t){var e=1.70158,r=0,n=1;return 0===t?0:1===t?1:(r||(r=.3),n<1?(n=1,e=r/4):e=r/(2*Math.PI)*Math.asin(1/n),-n*Math.pow(2,10*(t-=1))*Math.sin((t-e)*(2*Math.PI)/r))},easeOutElastic:function(t){var e=1.70158,r=0,n=1;return 0===t?0:1===t?1:(r||(r=.3),n<1?(n=1,e=r/4):e=r/(2*Math.PI)*Math.asin(1/n),n*Math.pow(2,-10*t)*Math.sin((t-e)*(2*Math.PI)/r)+1)},easeInOutElastic:function(t){var e=1.70158,r=0,n=1;return 0===t?0:2==(t/=.5)?1:(r||(r=.45),n<1?(n=1,e=r/4):e=r/(2*Math.PI)*Math.asin(1/n),t<1?n*Math.pow(2,10*(t-=1))*Math.sin((t-e)*(2*Math.PI)/r)*-.5:n*Math.pow(2,-10*(t-=1))*Math.sin((t-e)*(2*Math.PI)/r)*.5+1)},easeInBack:function(t){var e=1.70158;return t*t*((e+1)*t-e)},easeOutBack:function(t){var e=1.70158;return(t-=1)*t*((e+1)*t+e)+1},easeInOutBack:function(t){var e=1.70158;return(t/=.5)<1?t*t*((1+(e*=1.525))*t-e)*.5:.5*((t-=2)*t*((1+(e*=1.525))*t+e)+2)},easeInBounce:function(t){return 1-G.easeOutBounce(1-t)},easeOutBounce:function(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},easeInOutBounce:function(t){return t<.5?.5*G.easeInBounce(2*t):.5*G.easeOutBounce(2*t-1)+.5}},z={effects:G};R.easingEffects=G;var V=Math.PI,Z=V/180,B=2*V,H=V/2,U=V/4,Y=2*V/3,W={clear:function(t){t.ctx.clearRect(0,0,t.width,t.height)},roundedRect:function(t,e,r,n,o,i){if(i){var a=Math.min(i,o/2,n/2),s=e+a,c=r+a,l=e+n-a,u=r+o-a;t.moveTo(e,c),s<l&&c<u?(t.arc(s,c,a,-V,-H),t.arc(l,c,a,-H,0),t.arc(l,u,a,0,H),t.arc(s,u,a,H,V)):s<l?(t.moveTo(s,r),t.arc(l,c,a,-H,H),t.arc(s,c,a,H,V+H)):c<u?(t.arc(s,c,a,-V,0),t.arc(s,u,a,0,V)):t.arc(s,c,a,-V,V),t.closePath(),t.moveTo(e,r)}else t.rect(e,r,n,o)},drawPoint:function(t,e,r,n,o,i){var a,s,c,l,u,d=(i||0)*Z;if(e&&"object"==typeof e&&("[object HTMLImageElement]"===(a=e.toString())||"[object HTMLCanvasElement]"===a))return t.save(),t.translate(n,o),t.rotate(d),t.drawImage(e,-e.width/2,-e.height/2,e.width,e.height),void t.restore();if(!(isNaN(r)||r<=0)){switch(t.beginPath(),e){default:t.arc(n,o,r,0,B),t.closePath();break;case"triangle":t.moveTo(n+Math.sin(d)*r,o-Math.cos(d)*r),d+=Y,t.lineTo(n+Math.sin(d)*r,o-Math.cos(d)*r),d+=Y,t.lineTo(n+Math.sin(d)*r,o-Math.cos(d)*r),t.closePath();break;case"rectRounded":l=r-(u=.516*r),s=Math.cos(d+U)*l,c=Math.sin(d+U)*l,t.arc(n-s,o-c,u,d-V,d-H),t.arc(n+c,o-s,u,d-H,d),t.arc(n+s,o+c,u,d,d+H),t.arc(n-c,o+s,u,d+H,d+V),t.closePath();break;case"rect":if(!i){l=Math.SQRT1_2*r,t.rect(n-l,o-l,2*l,2*l);break}d+=U;case"rectRot":s=Math.cos(d)*r,c=Math.sin(d)*r,t.moveTo(n-s,o-c),t.lineTo(n+c,o-s),t.lineTo(n+s,o+c),t.lineTo(n-c,o+s),t.closePath();break;case"crossRot":d+=U;case"cross":s=Math.cos(d)*r,c=Math.sin(d)*r,t.moveTo(n-s,o-c),t.lineTo(n+s,o+c),t.moveTo(n+c,o-s),t.lineTo(n-c,o+s);break;case"star":s=Math.cos(d)*r,c=Math.sin(d)*r,t.moveTo(n-s,o-c),t.lineTo(n+s,o+c),t.moveTo(n+c,o-s),t.lineTo(n-c,o+s),d+=U,s=Math.cos(d)*r,c=Math.sin(d)*r,t.moveTo(n-s,o-c),t.lineTo(n+s,o+c),t.moveTo(n+c,o-s),t.lineTo(n-c,o+s);break;case"line":s=Math.cos(d)*r,c=Math.sin(d)*r,t.moveTo(n-s,o-c),t.lineTo(n+s,o+c);break;case"dash":t.moveTo(n,o),t.lineTo(n+Math.cos(d)*r,o+Math.sin(d)*r)}t.fill(),t.stroke()}},_isPointInArea:function(t,e){var r=1e-6;return t.x>e.left-r&&t.x<e.right+r&&t.y>e.top-r&&t.y<e.bottom+r},clipArea:function(t,e){t.save(),t.beginPath(),t.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),t.clip()},unclipArea:function(t){t.restore()},lineTo:function(t,e,r,n){var o=r.steppedLine;if(o){if("middle"===o){var i=(e.x+r.x)/2;t.lineTo(i,n?r.y:e.y),t.lineTo(i,n?e.y:r.y)}else"after"===o&&!n||"after"!==o&&n?t.lineTo(e.x,r.y):t.lineTo(r.x,e.y);t.lineTo(r.x,r.y)}else r.tension?t.bezierCurveTo(n?e.controlPointPreviousX:e.controlPointNextX,n?e.controlPointPreviousY:e.controlPointNextY,n?r.controlPointNextX:r.controlPointPreviousX,n?r.controlPointNextY:r.controlPointPreviousY,r.x,r.y):t.lineTo(r.x,r.y)}},X=W;R.clear=W.clear,R.drawRoundedRectangle=function(t){t.beginPath(),W.roundedRect.apply(W,arguments)};var Q={_set:function(t,e){return R.merge(this[t]||(this[t]={}),e)}};Q._set("global",{defaultColor:"rgba(0,0,0,0.1)",defaultFontColor:"#666",defaultFontFamily:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",defaultFontSize:12,defaultFontStyle:"normal",defaultLineHeight:1.2,showLines:!0});var K=Q,J=R.valueOrDefault;function tt(t){return!t||R.isNullOrUndef(t.size)||R.isNullOrUndef(t.family)?null:(t.style?t.style+" ":"")+(t.weight?t.weight+" ":"")+t.size+"px "+t.family}var et={toLineHeight:function(t,e){var r=(""+t).match(/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/);if(!r||"normal"===r[1])return 1.2*e;switch(t=+r[2],r[3]){case"px":return t;case"%":t/=100}return e*t},toPadding:function(t){var e,r,n,o;return R.isObject(t)?(e=+t.top||0,r=+t.right||0,n=+t.bottom||0,o=+t.left||0):e=r=n=o=+t||0,{top:e,right:r,bottom:n,left:o,height:e+n,width:o+r}},_parseFont:function(t){var e=K.global,r=J(t.fontSize,e.defaultFontSize),n={family:J(t.fontFamily,e.defaultFontFamily),lineHeight:R.options.toLineHeight(J(t.lineHeight,e.defaultLineHeight),r),size:r,style:J(t.fontStyle,e.defaultFontStyle),weight:null,string:""};return n.string=tt(n),n},resolve:function(t,e,r,n){var o,i,a,s=!0;for(o=0,i=t.length;o<i;++o)if(void 0!==(a=t[o])&&(void 0!==e&&"function"==typeof a&&(a=a(e),s=!1),void 0!==r&&R.isArray(a)&&(a=a[r],s=!1),void 0!==a))return n&&!s&&(n.cacheable=!1),a}},rt={_factorize:function(t){var e,r=[],n=Math.sqrt(t);for(e=1;e<n;e++)t%e==0&&(r.push(e),r.push(t/e));return n===(0|n)&&r.push(n),r.sort((function(t,e){return t-e})).pop(),r},log10:Math.log10||function(t){var e=Math.log(t)*Math.LOG10E,r=Math.round(e);return t===Math.pow(10,r)?r:e}},nt=rt;R.log10=rt.log10;var ot=function(t,e){return{x:function(r){return t+t+e-r},setWidth:function(t){e=t},textAlign:function(t){return"center"===t?t:"right"===t?"left":"right"},xPlus:function(t,e){return t-e},leftForLtr:function(t,e){return t-e}}},it=function(){return{x:function(t){return t},setWidth:function(t){},textAlign:function(t){return t},xPlus:function(t,e){return t+e},leftForLtr:function(t,e){return t}}},at=function(t,e,r){return t?ot(e,r):it()},st=R,ct=z,lt=X,ut=et,dt=nt,ht={getRtlAdapter:at,overrideTextDirection:function(t,e){var r,n;"ltr"!==e&&"rtl"!==e||(n=[(r=t.canvas.style).getPropertyValue("direction"),r.getPropertyPriority("direction")],r.setProperty("direction",e,"important"),t.prevTextDirection=n)},restoreTextDirection:function(t){var e=t.prevTextDirection;void 0!==e&&(delete t.prevTextDirection,t.canvas.style.setProperty("direction",e[0],e[1]))}};function ft(t,e,r,n){var o,i,a,s,c,l,u,d,h,f=Object.keys(r);for(o=0,i=f.length;o<i;++o)if(l=r[a=f[o]],e.hasOwnProperty(a)||(e[a]=l),(s=e[a])!==l&&"_"!==a[0]){if(t.hasOwnProperty(a)||(t[a]=s),(u=typeof l)==typeof(c=t[a]))if("string"===u){if((d=D(c)).valid&&(h=D(l)).valid){e[a]=h.mix(d,n).rgbString();continue}}else if(st.isFinite(c)&&st.isFinite(l)){e[a]=c+(l-c)*n;continue}e[a]=l}}st.easing=ct,st.canvas=lt,st.options=ut,st.math=dt,st.rtl=ht;var pt=function(t){st.extend(this,t),this.initialize.apply(this,arguments)};st.extend(pt.prototype,{_type:void 0,initialize:function(){this.hidden=!1},pivot:function(){var t=this;return t._view||(t._view=st.extend({},t._model)),t._start={},t},transition:function(t){var e=this,r=e._model,n=e._start,o=e._view;return r&&1!==t?(o||(o=e._view={}),n||(n=e._start={}),ft(n,o,r,t),e):(e._view=st.extend({},r),e._start=null,e)},tooltipPosition:function(){return{x:this._model.x,y:this._model.y}},hasValue:function(){return st.isNumber(this._model.x)&&st.isNumber(this._model.y)}}),pt.extend=st.inherits;var mt=pt,vt=mt.extend({chart:null,currentStep:0,numSteps:60,easing:"",render:null,onAnimationProgress:null,onAnimationComplete:null}),gt=vt;Object.defineProperty(vt.prototype,"animationObject",{get:function(){return this}}),Object.defineProperty(vt.prototype,"chartInstance",{get:function(){return this.chart},set:function(t){this.chart=t}}),K._set("global",{animation:{duration:1e3,easing:"easeOutQuart",onProgress:st.noop,onComplete:st.noop}});var yt={animations:[],request:null,addAnimation:function(t,e,r,n){var o,i,a=this.animations;for(e.chart=t,e.startTime=Date.now(),e.duration=r,n||(t.animating=!0),o=0,i=a.length;o<i;++o)if(a[o].chart===t)return void(a[o]=e);a.push(e),1===a.length&&this.requestAnimationFrame()},cancelAnimation:function(t){var e=st.findIndex(this.animations,(function(e){return e.chart===t}));-1!==e&&(this.animations.splice(e,1),t.animating=!1)},requestAnimationFrame:function(){var t=this;null===t.request&&(t.request=st.requestAnimFrame.call(window,(function(){t.request=null,t.startDigest()})))},startDigest:function(){var t=this;t.advance(),t.animations.length>0&&t.requestAnimationFrame()},advance:function(){for(var t,e,r,n,o=this.animations,i=0;i<o.length;)e=(t=o[i]).chart,r=t.numSteps,n=Math.floor((Date.now()-t.startTime)/t.duration*r)+1,t.currentStep=Math.min(n,r),st.callback(t.render,[e,t],e),st.callback(t.onAnimationProgress,[t],e),t.currentStep>=r?(st.callback(t.onAnimationComplete,[t],e),e.animating=!1,o.splice(i,1)):++i}},_t=st.options.resolve,bt=["push","pop","shift","splice","unshift"];function xt(t,e){t._chartjs?t._chartjs.listeners.push(e):(Object.defineProperty(t,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),bt.forEach((function(e){var r="onData"+e.charAt(0).toUpperCase()+e.slice(1),n=t[e];Object.defineProperty(t,e,{configurable:!0,enumerable:!1,value:function(){var e=Array.prototype.slice.call(arguments),o=n.apply(this,e);return st.each(t._chartjs.listeners,(function(t){"function"==typeof t[r]&&t[r].apply(t,e)})),o}})})))}function wt(t,e){var r=t._chartjs;if(r){var n=r.listeners,o=n.indexOf(e);-1!==o&&n.splice(o,1),n.length>0||(bt.forEach((function(e){delete t[e]})),delete t._chartjs)}}var Ct=function(t,e){this.initialize(t,e)};st.extend(Ct.prototype,{datasetElementType:null,dataElementType:null,_datasetElementOptions:["backgroundColor","borderCapStyle","borderColor","borderDash","borderDashOffset","borderJoinStyle","borderWidth"],_dataElementOptions:["backgroundColor","borderColor","borderWidth","pointStyle"],initialize:function(t,e){var r=this;r.chart=t,r.index=e,r.linkScales(),r.addElements(),r._type=r.getMeta().type},updateIndex:function(t){this.index=t},linkScales:function(){var t=this,e=t.getMeta(),r=t.chart,n=r.scales,o=t.getDataset(),i=r.options.scales;null!==e.xAxisID&&e.xAxisID in n&&!o.xAxisID||(e.xAxisID=o.xAxisID||i.xAxes[0].id),null!==e.yAxisID&&e.yAxisID in n&&!o.yAxisID||(e.yAxisID=o.yAxisID||i.yAxes[0].id)},getDataset:function(){return this.chart.data.datasets[this.index]},getMeta:function(){return this.chart.getDatasetMeta(this.index)},getScaleForId:function(t){return this.chart.scales[t]},_getValueScaleId:function(){return this.getMeta().yAxisID},_getIndexScaleId:function(){return this.getMeta().xAxisID},_getValueScale:function(){return this.getScaleForId(this._getValueScaleId())},_getIndexScale:function(){return this.getScaleForId(this._getIndexScaleId())},reset:function(){this._update(!0)},destroy:function(){this._data&&wt(this._data,this)},createMetaDataset:function(){var t=this,e=t.datasetElementType;return e&&new e({_chart:t.chart,_datasetIndex:t.index})},createMetaData:function(t){var e=this,r=e.dataElementType;return r&&new r({_chart:e.chart,_datasetIndex:e.index,_index:t})},addElements:function(){var t,e,r=this,n=r.getMeta(),o=r.getDataset().data||[],i=n.data;for(t=0,e=o.length;t<e;++t)i[t]=i[t]||r.createMetaData(t);n.dataset=n.dataset||r.createMetaDataset()},addElementAndReset:function(t){var e=this.createMetaData(t);this.getMeta().data.splice(t,0,e),this.updateElement(e,t,!0)},buildOrUpdateElements:function(){var t=this,e=t.getDataset(),r=e.data||(e.data=[]);t._data!==r&&(t._data&&wt(t._data,t),r&&Object.isExtensible(r)&&xt(r,t),t._data=r),t.resyncElements()},_configure:function(){var t=this;t._config=st.merge(Object.create(null),[t.chart.options.datasets[t._type],t.getDataset()],{merger:function(t,e,r){"_meta"!==t&&"data"!==t&&st._merger(t,e,r)}})},_update:function(t){var e=this;e._configure(),e._cachedDataOpts=null,e.update(t)},update:st.noop,transition:function(t){for(var e=this.getMeta(),r=e.data||[],n=r.length,o=0;o<n;++o)r[o].transition(t);e.dataset&&e.dataset.transition(t)},draw:function(){var t=this.getMeta(),e=t.data||[],r=e.length,n=0;for(t.dataset&&t.dataset.draw();n<r;++n)e[n].draw()},getStyle:function(t){var e,r=this,n=r.getMeta(),o=n.dataset;return r._configure(),o&&void 0===t?e=r._resolveDatasetElementOptions(o||{}):(t=t||0,e=r._resolveDataElementOptions(n.data[t]||{},t)),!1!==e.fill&&null!==e.fill||(e.backgroundColor=e.borderColor),e},_resolveDatasetElementOptions:function(t,e){var r,n,o,i,a=this,s=a.chart,c=a._config,l=t.custom||{},u=s.options.elements[a.datasetElementType.prototype._type]||{},d=a._datasetElementOptions,h={},f={chart:s,dataset:a.getDataset(),datasetIndex:a.index,hover:e};for(r=0,n=d.length;r<n;++r)o=d[r],i=e?"hover"+o.charAt(0).toUpperCase()+o.slice(1):o,h[o]=_t([l[i],c[i],u[i]],f);return h},_resolveDataElementOptions:function(t,e){var r=this,n=t&&t.custom,o=r._cachedDataOpts;if(o&&!n)return o;var i,a,s,c,l=r.chart,u=r._config,d=l.options.elements[r.dataElementType.prototype._type]||{},h=r._dataElementOptions,f={},p={chart:l,dataIndex:e,dataset:r.getDataset(),datasetIndex:r.index},m={cacheable:!n};if(n=n||{},st.isArray(h))for(a=0,s=h.length;a<s;++a)f[c=h[a]]=_t([n[c],u[c],d[c]],p,e,m);else for(a=0,s=(i=Object.keys(h)).length;a<s;++a)f[c=i[a]]=_t([n[c],u[h[c]],u[c],d[c]],p,e,m);return m.cacheable&&(r._cachedDataOpts=Object.freeze(f)),f},removeHoverStyle:function(t){st.merge(t._model,t.$previousStyle||{}),delete t.$previousStyle},setHoverStyle:function(t){var e=this.chart.data.datasets[t._datasetIndex],r=t._index,n=t.custom||{},o=t._model,i=st.getHoverColor;t.$previousStyle={backgroundColor:o.backgroundColor,borderColor:o.borderColor,borderWidth:o.borderWidth},o.backgroundColor=_t([n.hoverBackgroundColor,e.hoverBackgroundColor,i(o.backgroundColor)],void 0,r),o.borderColor=_t([n.hoverBorderColor,e.hoverBorderColor,i(o.borderColor)],void 0,r),o.borderWidth=_t([n.hoverBorderWidth,e.hoverBorderWidth,o.borderWidth],void 0,r)},_removeDatasetHoverStyle:function(){var t=this.getMeta().dataset;t&&this.removeHoverStyle(t)},_setDatasetHoverStyle:function(){var t,e,r,n,o,i,a=this.getMeta().dataset,s={};if(a){for(i=a._model,o=this._resolveDatasetElementOptions(a,!0),t=0,e=(n=Object.keys(o)).length;t<e;++t)s[r=n[t]]=i[r],i[r]=o[r];a.$previousStyle=s}},resyncElements:function(){var t=this,e=t.getMeta(),r=t.getDataset().data,n=e.data.length,o=r.length;o<n?e.data.splice(o,n-o):o>n&&t.insertElements(n,o-n)},insertElements:function(t,e){for(var r=0;r<e;++r)this.addElementAndReset(t+r)},onDataPush:function(){var t=arguments.length;this.insertElements(this.getDataset().data.length-t,t)},onDataPop:function(){this.getMeta().data.pop()},onDataShift:function(){this.getMeta().data.shift()},onDataSplice:function(t,e){this.getMeta().data.splice(t,e),this.insertElements(t,arguments.length-2)},onDataUnshift:function(){this.insertElements(0,arguments.length)}}),Ct.extend=st.inherits;var kt=Ct,Lt=2*Math.PI;function St(t,e){var r=e.startAngle,n=e.endAngle,o=e.pixelMargin,i=o/e.outerRadius,a=e.x,s=e.y;t.beginPath(),t.arc(a,s,e.outerRadius,r-i,n+i),e.innerRadius>o?(i=o/e.innerRadius,t.arc(a,s,e.innerRadius-o,n+i,r-i,!0)):t.arc(a,s,o,n+Math.PI/2,r-Math.PI/2),t.closePath(),t.clip()}function Et(t,e,r,n){var o,i=r.endAngle;for(n&&(r.endAngle=r.startAngle+Lt,St(t,r),r.endAngle=i,r.endAngle===r.startAngle&&r.fullCircles&&(r.endAngle+=Lt,r.fullCircles--)),t.beginPath(),t.arc(r.x,r.y,r.innerRadius,r.startAngle+Lt,r.startAngle,!0),o=0;o<r.fullCircles;++o)t.stroke();for(t.beginPath(),t.arc(r.x,r.y,e.outerRadius,r.startAngle,r.startAngle+Lt),o=0;o<r.fullCircles;++o)t.stroke()}function Mt(t,e,r){var n="inner"===e.borderAlign;n?(t.lineWidth=2*e.borderWidth,t.lineJoin="round"):(t.lineWidth=e.borderWidth,t.lineJoin="bevel"),r.fullCircles&&Et(t,e,r,n),n&&St(t,r),t.beginPath(),t.arc(r.x,r.y,e.outerRadius,r.startAngle,r.endAngle),t.arc(r.x,r.y,r.innerRadius,r.endAngle,r.startAngle,!0),t.closePath(),t.stroke()}K._set("global",{elements:{arc:{backgroundColor:K.global.defaultColor,borderColor:"#fff",borderWidth:2,borderAlign:"center"}}});var Ot=mt.extend({_type:"arc",inLabelRange:function(t){var e=this._view;return!!e&&Math.pow(t-e.x,2)<Math.pow(e.radius+e.hoverRadius,2)},inRange:function(t,e){var r=this._view;if(r){for(var n=st.getAngleFromPoint(r,{x:t,y:e}),o=n.angle,i=n.distance,a=r.startAngle,s=r.endAngle;s<a;)s+=Lt;for(;o>s;)o-=Lt;for(;o<a;)o+=Lt;var c=o>=a&&o<=s,l=i>=r.innerRadius&&i<=r.outerRadius;return c&&l}return!1},getCenterPoint:function(){var t=this._view,e=(t.startAngle+t.endAngle)/2,r=(t.innerRadius+t.outerRadius)/2;return{x:t.x+Math.cos(e)*r,y:t.y+Math.sin(e)*r}},getArea:function(){var t=this._view;return Math.PI*((t.endAngle-t.startAngle)/(2*Math.PI))*(Math.pow(t.outerRadius,2)-Math.pow(t.innerRadius,2))},tooltipPosition:function(){var t=this._view,e=t.startAngle+(t.endAngle-t.startAngle)/2,r=(t.outerRadius-t.innerRadius)/2+t.innerRadius;return{x:t.x+Math.cos(e)*r,y:t.y+Math.sin(e)*r}},draw:function(){var t,e=this._chart.ctx,r=this._view,n="inner"===r.borderAlign?.33:0,o={x:r.x,y:r.y,innerRadius:r.innerRadius,outerRadius:Math.max(r.outerRadius-n,0),pixelMargin:n,startAngle:r.startAngle,endAngle:r.endAngle,fullCircles:Math.floor(r.circumference/Lt)};if(e.save(),e.fillStyle=r.backgroundColor,e.strokeStyle=r.borderColor,o.fullCircles){for(o.endAngle=o.startAngle+Lt,e.beginPath(),e.arc(o.x,o.y,o.outerRadius,o.startAngle,o.endAngle),e.arc(o.x,o.y,o.innerRadius,o.endAngle,o.startAngle,!0),e.closePath(),t=0;t<o.fullCircles;++t)e.fill();o.endAngle=o.startAngle+r.circumference%Lt}e.beginPath(),e.arc(o.x,o.y,o.outerRadius,o.startAngle,o.endAngle),e.arc(o.x,o.y,o.innerRadius,o.endAngle,o.startAngle,!0),e.closePath(),e.fill(),r.borderWidth&&Mt(e,r,o),e.restore()}}),Pt=st.valueOrDefault,jt=K.global.defaultColor;K._set("global",{elements:{line:{tension:.4,backgroundColor:jt,borderWidth:3,borderColor:jt,borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",capBezierPoints:!0,fill:!0}}});var Nt=mt.extend({_type:"line",draw:function(){var t,e,r,n=this,o=n._view,i=n._chart.ctx,a=o.spanGaps,s=n._children.slice(),c=K.global,l=c.elements.line,u=-1,d=n._loop;if(s.length){if(n._loop){for(t=0;t<s.length;++t)if(e=st.previousItem(s,t),!s[t]._view.skip&&e._view.skip){s=s.slice(t).concat(s.slice(0,t)),d=a;break}d&&s.push(s[0])}for(i.save(),i.lineCap=o.borderCapStyle||l.borderCapStyle,i.setLineDash&&i.setLineDash(o.borderDash||l.borderDash),i.lineDashOffset=Pt(o.borderDashOffset,l.borderDashOffset),i.lineJoin=o.borderJoinStyle||l.borderJoinStyle,i.lineWidth=Pt(o.borderWidth,l.borderWidth),i.strokeStyle=o.borderColor||c.defaultColor,i.beginPath(),(r=s[0]._view).skip||(i.moveTo(r.x,r.y),u=0),t=1;t<s.length;++t)r=s[t]._view,e=-1===u?st.previousItem(s,t):s[u],r.skip||(u!==t-1&&!a||-1===u?i.moveTo(r.x,r.y):st.canvas.lineTo(i,e._view,r),u=t);d&&i.closePath(),i.stroke(),i.restore()}}}),Tt=st.valueOrDefault,$t=K.global.defaultColor;function It(t){var e=this._view;return!!e&&Math.abs(t-e.x)<e.radius+e.hitRadius}function Dt(t){var e=this._view;return!!e&&Math.abs(t-e.y)<e.radius+e.hitRadius}K._set("global",{elements:{point:{radius:3,pointStyle:"circle",backgroundColor:$t,borderColor:$t,borderWidth:1,hitRadius:1,hoverRadius:4,hoverBorderWidth:1}}});var At=mt.extend({_type:"point",inRange:function(t,e){var r=this._view;return!!r&&Math.pow(t-r.x,2)+Math.pow(e-r.y,2)<Math.pow(r.hitRadius+r.radius,2)},inLabelRange:It,inXRange:It,inYRange:Dt,getCenterPoint:function(){var t=this._view;return{x:t.x,y:t.y}},getArea:function(){return Math.PI*Math.pow(this._view.radius,2)},tooltipPosition:function(){var t=this._view;return{x:t.x,y:t.y,padding:t.radius+t.borderWidth}},draw:function(t){var e=this._view,r=this._chart.ctx,n=e.pointStyle,o=e.rotation,i=e.radius,a=e.x,s=e.y,c=K.global,l=c.defaultColor;e.skip||(void 0===t||st.canvas._isPointInArea(e,t))&&(r.strokeStyle=e.borderColor||l,r.lineWidth=Tt(e.borderWidth,c.elements.point.borderWidth),r.fillStyle=e.backgroundColor||l,st.canvas.drawPoint(r,n,i,a,s,o))}}),Ft=K.global.defaultColor;function qt(t){return t&&void 0!==t.width}function Rt(t){var e,r,n,o,i;return qt(t)?(i=t.width/2,e=t.x-i,r=t.x+i,n=Math.min(t.y,t.base),o=Math.max(t.y,t.base)):(i=t.height/2,e=Math.min(t.x,t.base),r=Math.max(t.x,t.base),n=t.y-i,o=t.y+i),{left:e,top:n,right:r,bottom:o}}function Gt(t,e,r){return t===e?r:t===r?e:t}function zt(t){var e=t.borderSkipped,r={};return e?(t.horizontal?t.base>t.x&&(e=Gt(e,"left","right")):t.base<t.y&&(e=Gt(e,"bottom","top")),r[e]=!0,r):r}function Vt(t,e,r){var n,o,i,a,s=t.borderWidth,c=zt(t);return st.isObject(s)?(n=+s.top||0,o=+s.right||0,i=+s.bottom||0,a=+s.left||0):n=o=i=a=+s||0,{t:c.top||n<0?0:n>r?r:n,r:c.right||o<0?0:o>e?e:o,b:c.bottom||i<0?0:i>r?r:i,l:c.left||a<0?0:a>e?e:a}}function Zt(t){var e=Rt(t),r=e.right-e.left,n=e.bottom-e.top,o=Vt(t,r/2,n/2);return{outer:{x:e.left,y:e.top,w:r,h:n},inner:{x:e.left+o.l,y:e.top+o.t,w:r-o.l-o.r,h:n-o.t-o.b}}}function Bt(t,e,r){var n=null===e,o=null===r,i=!(!t||n&&o)&&Rt(t);return i&&(n||e>=i.left&&e<=i.right)&&(o||r>=i.top&&r<=i.bottom)}K._set("global",{elements:{rectangle:{backgroundColor:Ft,borderColor:Ft,borderSkipped:"bottom",borderWidth:0}}});var Ht=mt.extend({_type:"rectangle",draw:function(){var t=this._chart.ctx,e=this._view,r=Zt(e),n=r.outer,o=r.inner;t.fillStyle=e.backgroundColor,t.fillRect(n.x,n.y,n.w,n.h),n.w===o.w&&n.h===o.h||(t.save(),t.beginPath(),t.rect(n.x,n.y,n.w,n.h),t.clip(),t.fillStyle=e.borderColor,t.rect(o.x,o.y,o.w,o.h),t.fill("evenodd"),t.restore())},height:function(){var t=this._view;return t.base-t.y},inRange:function(t,e){return Bt(this._view,t,e)},inLabelRange:function(t,e){var r=this._view;return qt(r)?Bt(r,t,null):Bt(r,null,e)},inXRange:function(t){return Bt(this._view,t,null)},inYRange:function(t){return Bt(this._view,null,t)},getCenterPoint:function(){var t,e,r=this._view;return qt(r)?(t=r.x,e=(r.y+r.base)/2):(t=(r.x+r.base)/2,e=r.y),{x:t,y:e}},getArea:function(){var t=this._view;return qt(t)?t.width*Math.abs(t.y-t.base):t.height*Math.abs(t.x-t.base)},tooltipPosition:function(){var t=this._view;return{x:t.x,y:t.y}}}),Ut={},Yt=Ot,Wt=Nt,Xt=At,Qt=Ht;Ut.Arc=Yt,Ut.Line=Wt,Ut.Point=Xt,Ut.Rectangle=Qt;var Kt=st._deprecated,Jt=st.valueOrDefault;function te(t,e){var r,n,o,i,a=t._length;for(o=1,i=e.length;o<i;++o)a=Math.min(a,Math.abs(e[o]-e[o-1]));for(o=0,i=t.getTicks().length;o<i;++o)n=t.getPixelForTick(o),a=o>0?Math.min(a,Math.abs(n-r)):a,r=n;return a}function ee(t,e,r){var n,o,i=r.barThickness,a=e.stackCount,s=e.pixels[t],c=st.isNullOrUndef(i)?te(e.scale,e.pixels):-1;return st.isNullOrUndef(i)?(n=c*r.categoryPercentage,o=r.barPercentage):(n=i*a,o=1),{chunk:n/a,ratio:o,start:s-n/2}}function re(t,e,r){var n,o=e.pixels,i=o[t],a=t>0?o[t-1]:null,s=t<o.length-1?o[t+1]:null,c=r.categoryPercentage;return null===a&&(a=i-(null===s?e.end-e.start:s-i)),null===s&&(s=i+i-a),n=i-(i-Math.min(a,s))/2*c,{chunk:Math.abs(s-a)/2*c/e.stackCount,ratio:r.barPercentage,start:n}}K._set("bar",{hover:{mode:"label"},scales:{xAxes:[{type:"category",offset:!0,gridLines:{offsetGridLines:!0}}],yAxes:[{type:"linear"}]}}),K._set("global",{datasets:{bar:{categoryPercentage:.8,barPercentage:.9}}});var ne=kt.extend({dataElementType:Ut.Rectangle,_dataElementOptions:["backgroundColor","borderColor","borderSkipped","borderWidth","barPercentage","barThickness","categoryPercentage","maxBarThickness","minBarLength"],initialize:function(){var t,e,r=this;kt.prototype.initialize.apply(r,arguments),(t=r.getMeta()).stack=r.getDataset().stack,t.bar=!0,e=r._getIndexScale().options,Kt("bar chart",e.barPercentage,"scales.[x/y]Axes.barPercentage","dataset.barPercentage"),Kt("bar chart",e.barThickness,"scales.[x/y]Axes.barThickness","dataset.barThickness"),Kt("bar chart",e.categoryPercentage,"scales.[x/y]Axes.categoryPercentage","dataset.categoryPercentage"),Kt("bar chart",r._getValueScale().options.minBarLength,"scales.[x/y]Axes.minBarLength","dataset.minBarLength"),Kt("bar chart",e.maxBarThickness,"scales.[x/y]Axes.maxBarThickness","dataset.maxBarThickness")},update:function(t){var e,r,n=this,o=n.getMeta().data;for(n._ruler=n.getRuler(),e=0,r=o.length;e<r;++e)n.updateElement(o[e],e,t)},updateElement:function(t,e,r){var n=this,o=n.getMeta(),i=n.getDataset(),a=n._resolveDataElementOptions(t,e);t._xScale=n.getScaleForId(o.xAxisID),t._yScale=n.getScaleForId(o.yAxisID),t._datasetIndex=n.index,t._index=e,t._model={backgroundColor:a.backgroundColor,borderColor:a.borderColor,borderSkipped:a.borderSkipped,borderWidth:a.borderWidth,datasetLabel:i.label,label:n.chart.data.labels[e]},st.isArray(i.data[e])&&(t._model.borderSkipped=null),n._updateElementGeometry(t,e,r,a),t.pivot()},_updateElementGeometry:function(t,e,r,n){var o=this,i=t._model,a=o._getValueScale(),s=a.getBasePixel(),c=a.isHorizontal(),l=o._ruler||o.getRuler(),u=o.calculateBarValuePixels(o.index,e,n),d=o.calculateBarIndexPixels(o.index,e,l,n);i.horizontal=c,i.base=r?s:u.base,i.x=c?r?s:u.head:d.center,i.y=c?d.center:r?s:u.head,i.height=c?d.size:void 0,i.width=c?void 0:d.size},_getStacks:function(t){var e,r,n=this,o=n._getIndexScale(),i=o._getMatchingVisibleMetas(n._type),a=o.options.stacked,s=i.length,c=[];for(e=0;e<s&&(r=i[e],(!1===a||-1===c.indexOf(r.stack)||void 0===a&&void 0===r.stack)&&c.push(r.stack),r.index!==t);++e);return c},getStackCount:function(){return this._getStacks().length},getStackIndex:function(t,e){var r=this._getStacks(t),n=void 0!==e?r.indexOf(e):-1;return-1===n?r.length-1:n},getRuler:function(){var t,e,r=this,n=r._getIndexScale(),o=[];for(t=0,e=r.getMeta().data.length;t<e;++t)o.push(n.getPixelForValue(null,t,r.index));return{pixels:o,start:n._startPixel,end:n._endPixel,stackCount:r.getStackCount(),scale:n}},calculateBarValuePixels:function(t,e,r){var n,o,i,a,s,c,l,u=this,d=u.chart,h=u._getValueScale(),f=h.isHorizontal(),p=d.data.datasets,m=h._getMatchingVisibleMetas(u._type),v=h._parseValue(p[t].data[e]),g=r.minBarLength,y=h.options.stacked,_=u.getMeta().stack,b=void 0===v.start?0:v.max>=0&&v.min>=0?v.min:v.max,x=void 0===v.start?v.end:v.max>=0&&v.min>=0?v.max-v.min:v.min-v.max,w=m.length;if(y||void 0===y&&void 0!==_)for(n=0;n<w&&(o=m[n]).index!==t;++n)o.stack===_&&(i=void 0===(l=h._parseValue(p[o.index].data[e])).start?l.end:l.min>=0&&l.max>=0?l.max:l.min,(v.min<0&&i<0||v.max>=0&&i>0)&&(b+=i));return a=h.getPixelForValue(b),c=(s=h.getPixelForValue(b+x))-a,void 0!==g&&Math.abs(c)<g&&(c=g,s=x>=0&&!f||x<0&&f?a-g:a+g),{size:c,base:a,head:s,center:s+c/2}},calculateBarIndexPixels:function(t,e,r,n){var o=this,i="flex"===n.barThickness?re(e,r,n):ee(e,r,n),a=o.getStackIndex(t,o.getMeta().stack),s=i.start+i.chunk*a+i.chunk/2,c=Math.min(Jt(n.maxBarThickness,1/0),i.chunk*i.ratio);return{base:s-c/2,head:s+c/2,center:s,size:c}},draw:function(){var t=this,e=t.chart,r=t._getValueScale(),n=t.getMeta().data,o=t.getDataset(),i=n.length,a=0;for(st.canvas.clipArea(e.ctx,e.chartArea);a<i;++a){var s=r._parseValue(o.data[a]);isNaN(s.min)||isNaN(s.max)||n[a].draw()}st.canvas.unclipArea(e.ctx)},_resolveDataElementOptions:function(){var t=this,e=st.extend({},kt.prototype._resolveDataElementOptions.apply(t,arguments)),r=t._getIndexScale().options,n=t._getValueScale().options;return e.barPercentage=Jt(r.barPercentage,e.barPercentage),e.barThickness=Jt(r.barThickness,e.barThickness),e.categoryPercentage=Jt(r.categoryPercentage,e.categoryPercentage),e.maxBarThickness=Jt(r.maxBarThickness,e.maxBarThickness),e.minBarLength=Jt(n.minBarLength,e.minBarLength),e}}),oe=st.valueOrDefault,ie=st.options.resolve;K._set("bubble",{hover:{mode:"single"},scales:{xAxes:[{type:"linear",position:"bottom",id:"x-axis-0"}],yAxes:[{type:"linear",position:"left",id:"y-axis-0"}]},tooltips:{callbacks:{title:function(){return""},label:function(t,e){var r=e.datasets[t.datasetIndex].label||"",n=e.datasets[t.datasetIndex].data[t.index];return r+": ("+t.xLabel+", "+t.yLabel+", "+n.r+")"}}}});var ae=kt.extend({dataElementType:Ut.Point,_dataElementOptions:["backgroundColor","borderColor","borderWidth","hoverBackgroundColor","hoverBorderColor","hoverBorderWidth","hoverRadius","hitRadius","pointStyle","rotation"],update:function(t){var e=this,r=e.getMeta().data;st.each(r,(function(r,n){e.updateElement(r,n,t)}))},updateElement:function(t,e,r){var n=this,o=n.getMeta(),i=t.custom||{},a=n.getScaleForId(o.xAxisID),s=n.getScaleForId(o.yAxisID),c=n._resolveDataElementOptions(t,e),l=n.getDataset().data[e],u=n.index,d=r?a.getPixelForDecimal(.5):a.getPixelForValue("object"==typeof l?l:NaN,e,u),h=r?s.getBasePixel():s.getPixelForValue(l,e,u);t._xScale=a,t._yScale=s,t._options=c,t._datasetIndex=u,t._index=e,t._model={backgroundColor:c.backgroundColor,borderColor:c.borderColor,borderWidth:c.borderWidth,hitRadius:c.hitRadius,pointStyle:c.pointStyle,rotation:c.rotation,radius:r?0:c.radius,skip:i.skip||isNaN(d)||isNaN(h),x:d,y:h},t.pivot()},setHoverStyle:function(t){var e=t._model,r=t._options,n=st.getHoverColor;t.$previousStyle={backgroundColor:e.backgroundColor,borderColor:e.borderColor,borderWidth:e.borderWidth,radius:e.radius},e.backgroundColor=oe(r.hoverBackgroundColor,n(r.backgroundColor)),e.borderColor=oe(r.hoverBorderColor,n(r.borderColor)),e.borderWidth=oe(r.hoverBorderWidth,r.borderWidth),e.radius=r.radius+r.hoverRadius},_resolveDataElementOptions:function(t,e){var r=this,n=r.chart,o=r.getDataset(),i=t.custom||{},a=o.data[e]||{},s=kt.prototype._resolveDataElementOptions.apply(r,arguments),c={chart:n,dataIndex:e,dataset:o,datasetIndex:r.index};return r._cachedDataOpts===s&&(s=st.extend({},s)),s.radius=ie([i.radius,a.r,r._config.radius,n.options.elements.point.radius],c,e),s}}),se=st.valueOrDefault,ce=Math.PI,le=2*ce,ue=ce/2;K._set("doughnut",{animation:{animateRotate:!0,animateScale:!1},hover:{mode:"single"},legendCallback:function(t){var e,r,n,o=document.createElement("ul"),i=t.data,a=i.datasets,s=i.labels;if(o.setAttribute("class",t.id+"-legend"),a.length)for(e=0,r=a[0].data.length;e<r;++e)(n=o.appendChild(document.createElement("li"))).appendChild(document.createElement("span")).style.backgroundColor=a[0].backgroundColor[e],s[e]&&n.appendChild(document.createTextNode(s[e]));return o.outerHTML},legend:{labels:{generateLabels:function(t){var e=t.data;return e.labels.length&&e.datasets.length?e.labels.map((function(r,n){var o=t.getDatasetMeta(0),i=o.controller.getStyle(n);return{text:r,fillStyle:i.backgroundColor,strokeStyle:i.borderColor,lineWidth:i.borderWidth,hidden:isNaN(e.datasets[0].data[n])||o.data[n].hidden,index:n}})):[]}},onClick:function(t,e){var r,n,o,i=e.index,a=this.chart;for(r=0,n=(a.data.datasets||[]).length;r<n;++r)(o=a.getDatasetMeta(r)).data[i]&&(o.data[i].hidden=!o.data[i].hidden);a.update()}},cutoutPercentage:50,rotation:-ue,circumference:le,tooltips:{callbacks:{title:function(){return""},label:function(t,e){var r=e.labels[t.index],n=": "+e.datasets[t.datasetIndex].data[t.index];return st.isArray(r)?(r=r.slice())[0]+=n:r+=n,r}}}});var de=kt.extend({dataElementType:Ut.Arc,linkScales:st.noop,_dataElementOptions:["backgroundColor","borderColor","borderWidth","borderAlign","hoverBackgroundColor","hoverBorderColor","hoverBorderWidth"],getRingIndex:function(t){for(var e=0,r=0;r<t;++r)this.chart.isDatasetVisible(r)&&++e;return e},update:function(t){var e,r,n,o,i=this,a=i.chart,s=a.chartArea,c=a.options,l=1,u=1,d=0,h=0,f=i.getMeta(),p=f.data,m=c.cutoutPercentage/100||0,v=c.circumference,g=i._getRingWeight(i.index);if(v<le){var y=c.rotation%le,_=(y+=y>=ce?-le:y<-ce?le:0)+v,b=Math.cos(y),x=Math.sin(y),w=Math.cos(_),C=Math.sin(_),k=y<=0&&_>=0||_>=le,L=y<=ue&&_>=ue||_>=le+ue,S=y<=-ue&&_>=-ue||_>=ce+ue,E=y===-ce||_>=ce?-1:Math.min(b,b*m,w,w*m),M=S?-1:Math.min(x,x*m,C,C*m),O=k?1:Math.max(b,b*m,w,w*m),P=L?1:Math.max(x,x*m,C,C*m);l=(O-E)/2,u=(P-M)/2,d=-(O+E)/2,h=-(P+M)/2}for(n=0,o=p.length;n<o;++n)p[n]._options=i._resolveDataElementOptions(p[n],n);for(a.borderWidth=i.getMaxBorderWidth(),e=(s.right-s.left-a.borderWidth)/l,r=(s.bottom-s.top-a.borderWidth)/u,a.outerRadius=Math.max(Math.min(e,r)/2,0),a.innerRadius=Math.max(a.outerRadius*m,0),a.radiusLength=(a.outerRadius-a.innerRadius)/(i._getVisibleDatasetWeightTotal()||1),a.offsetX=d*a.outerRadius,a.offsetY=h*a.outerRadius,f.total=i.calculateTotal(),i.outerRadius=a.outerRadius-a.radiusLength*i._getRingWeightOffset(i.index),i.innerRadius=Math.max(i.outerRadius-a.radiusLength*g,0),n=0,o=p.length;n<o;++n)i.updateElement(p[n],n,t)},updateElement:function(t,e,r){var n=this,o=n.chart,i=o.chartArea,a=o.options,s=a.animation,c=(i.left+i.right)/2,l=(i.top+i.bottom)/2,u=a.rotation,d=a.rotation,h=n.getDataset(),f=r&&s.animateRotate||t.hidden?0:n.calculateCircumference(h.data[e])*(a.circumference/le),p=r&&s.animateScale?0:n.innerRadius,m=r&&s.animateScale?0:n.outerRadius,v=t._options||{};st.extend(t,{_datasetIndex:n.index,_index:e,_model:{backgroundColor:v.backgroundColor,borderColor:v.borderColor,borderWidth:v.borderWidth,borderAlign:v.borderAlign,x:c+o.offsetX,y:l+o.offsetY,startAngle:u,endAngle:d,circumference:f,outerRadius:m,innerRadius:p,label:st.valueAtIndexOrDefault(h.label,e,o.data.labels[e])}});var g=t._model;r&&s.animateRotate||(g.startAngle=0===e?a.rotation:n.getMeta().data[e-1]._model.endAngle,g.endAngle=g.startAngle+g.circumference),t.pivot()},calculateTotal:function(){var t,e=this.getDataset(),r=this.getMeta(),n=0;return st.each(r.data,(function(r,o){t=e.data[o],isNaN(t)||r.hidden||(n+=Math.abs(t))})),n},calculateCircumference:function(t){var e=this.getMeta().total;return e>0&&!isNaN(t)?le*(Math.abs(t)/e):0},getMaxBorderWidth:function(t){var e,r,n,o,i,a,s,c,l=this,u=0,d=l.chart;if(!t)for(e=0,r=d.data.datasets.length;e<r;++e)if(d.isDatasetVisible(e)){t=(n=d.getDatasetMeta(e)).data,e!==l.index&&(i=n.controller);break}if(!t)return 0;for(e=0,r=t.length;e<r;++e)o=t[e],i?(i._configure(),a=i._resolveDataElementOptions(o,e)):a=o._options,"inner"!==a.borderAlign&&(s=a.borderWidth,u=(c=a.hoverBorderWidth)>(u=s>u?s:u)?c:u);return u},setHoverStyle:function(t){var e=t._model,r=t._options,n=st.getHoverColor;t.$previousStyle={backgroundColor:e.backgroundColor,borderColor:e.borderColor,borderWidth:e.borderWidth},e.backgroundColor=se(r.hoverBackgroundColor,n(r.backgroundColor)),e.borderColor=se(r.hoverBorderColor,n(r.borderColor)),e.borderWidth=se(r.hoverBorderWidth,r.borderWidth)},_getRingWeightOffset:function(t){for(var e=0,r=0;r<t;++r)this.chart.isDatasetVisible(r)&&(e+=this._getRingWeight(r));return e},_getRingWeight:function(t){return Math.max(se(this.chart.data.datasets[t].weight,1),0)},_getVisibleDatasetWeightTotal:function(){return this._getRingWeightOffset(this.chart.data.datasets.length)}});K._set("horizontalBar",{hover:{mode:"index",axis:"y"},scales:{xAxes:[{type:"linear",position:"bottom"}],yAxes:[{type:"category",position:"left",offset:!0,gridLines:{offsetGridLines:!0}}]},elements:{rectangle:{borderSkipped:"left"}},tooltips:{mode:"index",axis:"y"}}),K._set("global",{datasets:{horizontalBar:{categoryPercentage:.8,barPercentage:.9}}});var he=ne.extend({_getValueScaleId:function(){return this.getMeta().xAxisID},_getIndexScaleId:function(){return this.getMeta().yAxisID}}),fe=st.valueOrDefault,pe=st.options.resolve,me=st.canvas._isPointInArea;function ve(t,e){var r=t&&t.options.ticks||{},n=r.reverse,o=void 0===r.min?e:0,i=void 0===r.max?e:0;return{start:n?i:o,end:n?o:i}}function ge(t,e,r){var n=r/2,o=ve(t,n),i=ve(e,n);return{top:i.end,right:o.end,bottom:i.start,left:o.start}}function ye(t){var e,r,n,o;return st.isObject(t)?(e=t.top,r=t.right,n=t.bottom,o=t.left):e=r=n=o=t,{top:e,right:r,bottom:n,left:o}}K._set("line",{showLines:!0,spanGaps:!1,hover:{mode:"label"},scales:{xAxes:[{type:"category",id:"x-axis-0"}],yAxes:[{type:"linear",id:"y-axis-0"}]}});var _e=kt.extend({datasetElementType:Ut.Line,dataElementType:Ut.Point,_datasetElementOptions:["backgroundColor","borderCapStyle","borderColor","borderDash","borderDashOffset","borderJoinStyle","borderWidth","cubicInterpolationMode","fill"],_dataElementOptions:{backgroundColor:"pointBackgroundColor",borderColor:"pointBorderColor",borderWidth:"pointBorderWidth",hitRadius:"pointHitRadius",hoverBackgroundColor:"pointHoverBackgroundColor",hoverBorderColor:"pointHoverBorderColor",hoverBorderWidth:"pointHoverBorderWidth",hoverRadius:"pointHoverRadius",pointStyle:"pointStyle",radius:"pointRadius",rotation:"pointRotation"},update:function(t){var e,r,n=this,o=n.getMeta(),i=o.dataset,a=o.data||[],s=n.chart.options,c=n._config,l=n._showLine=fe(c.showLine,s.showLines);for(n._xScale=n.getScaleForId(o.xAxisID),n._yScale=n.getScaleForId(o.yAxisID),l&&(void 0!==c.tension&&void 0===c.lineTension&&(c.lineTension=c.tension),i._scale=n._yScale,i._datasetIndex=n.index,i._children=a,i._model=n._resolveDatasetElementOptions(i),i.pivot()),e=0,r=a.length;e<r;++e)n.updateElement(a[e],e,t);for(l&&0!==i._model.tension&&n.updateBezierControlPoints(),e=0,r=a.length;e<r;++e)a[e].pivot()},updateElement:function(t,e,r){var n,o,i=this,a=i.getMeta(),s=t.custom||{},c=i.getDataset(),l=i.index,u=c.data[e],d=i._xScale,h=i._yScale,f=a.dataset._model,p=i._resolveDataElementOptions(t,e);n=d.getPixelForValue("object"==typeof u?u:NaN,e,l),o=r?h.getBasePixel():i.calculatePointY(u,e,l),t._xScale=d,t._yScale=h,t._options=p,t._datasetIndex=l,t._index=e,t._model={x:n,y:o,skip:s.skip||isNaN(n)||isNaN(o),radius:p.radius,pointStyle:p.pointStyle,rotation:p.rotation,backgroundColor:p.backgroundColor,borderColor:p.borderColor,borderWidth:p.borderWidth,tension:fe(s.tension,f?f.tension:0),steppedLine:!!f&&f.steppedLine,hitRadius:p.hitRadius}},_resolveDatasetElementOptions:function(t){var e=this,r=e._config,n=t.custom||{},o=e.chart.options,i=o.elements.line,a=kt.prototype._resolveDatasetElementOptions.apply(e,arguments);return a.spanGaps=fe(r.spanGaps,o.spanGaps),a.tension=fe(r.lineTension,i.tension),a.steppedLine=pe([n.steppedLine,r.steppedLine,i.stepped]),a.clip=ye(fe(r.clip,ge(e._xScale,e._yScale,a.borderWidth))),a},calculatePointY:function(t,e,r){var n,o,i,a,s,c,l,u=this,d=u.chart,h=u._yScale,f=0,p=0;if(h.options.stacked){for(s=+h.getRightValue(t),l=(c=d._getSortedVisibleDatasetMetas()).length,n=0;n<l&&(i=c[n]).index!==r;++n)o=d.data.datasets[i.index],"line"===i.type&&i.yAxisID===h.id&&((a=+h.getRightValue(o.data[e]))<0?p+=a||0:f+=a||0);return s<0?h.getPixelForValue(p+s):h.getPixelForValue(f+s)}return h.getPixelForValue(t)},updateBezierControlPoints:function(){var t,e,r,n,o=this,i=o.chart,a=o.getMeta(),s=a.dataset._model,c=i.chartArea,l=a.data||[];function u(t,e,r){return Math.max(Math.min(t,r),e)}if(s.spanGaps&&(l=l.filter((function(t){return!t._model.skip}))),"monotone"===s.cubicInterpolationMode)st.splineCurveMonotone(l);else for(t=0,e=l.length;t<e;++t)r=l[t]._model,n=st.splineCurve(st.previousItem(l,t)._model,r,st.nextItem(l,t)._model,s.tension),r.controlPointPreviousX=n.previous.x,r.controlPointPreviousY=n.previous.y,r.controlPointNextX=n.next.x,r.controlPointNextY=n.next.y;if(i.options.elements.line.capBezierPoints)for(t=0,e=l.length;t<e;++t)r=l[t]._model,me(r,c)&&(t>0&&me(l[t-1]._model,c)&&(r.controlPointPreviousX=u(r.controlPointPreviousX,c.left,c.right),r.controlPointPreviousY=u(r.controlPointPreviousY,c.top,c.bottom)),t<l.length-1&&me(l[t+1]._model,c)&&(r.controlPointNextX=u(r.controlPointNextX,c.left,c.right),r.controlPointNextY=u(r.controlPointNextY,c.top,c.bottom)))},draw:function(){var t,e=this,r=e.chart,n=e.getMeta(),o=n.data||[],i=r.chartArea,a=r.canvas,s=0,c=o.length;for(e._showLine&&(t=n.dataset._model.clip,st.canvas.clipArea(r.ctx,{left:!1===t.left?0:i.left-t.left,right:!1===t.right?a.width:i.right+t.right,top:!1===t.top?0:i.top-t.top,bottom:!1===t.bottom?a.height:i.bottom+t.bottom}),n.dataset.draw(),st.canvas.unclipArea(r.ctx));s<c;++s)o[s].draw(i)},setHoverStyle:function(t){var e=t._model,r=t._options,n=st.getHoverColor;t.$previousStyle={backgroundColor:e.backgroundColor,borderColor:e.borderColor,borderWidth:e.borderWidth,radius:e.radius},e.backgroundColor=fe(r.hoverBackgroundColor,n(r.backgroundColor)),e.borderColor=fe(r.hoverBorderColor,n(r.borderColor)),e.borderWidth=fe(r.hoverBorderWidth,r.borderWidth),e.radius=fe(r.hoverRadius,r.radius)}}),be=st.options.resolve;K._set("polarArea",{scale:{type:"radialLinear",angleLines:{display:!1},gridLines:{circular:!0},pointLabels:{display:!1},ticks:{beginAtZero:!0}},animation:{animateRotate:!0,animateScale:!0},startAngle:-.5*Math.PI,legendCallback:function(t){var e,r,n,o=document.createElement("ul"),i=t.data,a=i.datasets,s=i.labels;if(o.setAttribute("class",t.id+"-legend"),a.length)for(e=0,r=a[0].data.length;e<r;++e)(n=o.appendChild(document.createElement("li"))).appendChild(document.createElement("span")).style.backgroundColor=a[0].backgroundColor[e],s[e]&&n.appendChild(document.createTextNode(s[e]));return o.outerHTML},legend:{labels:{generateLabels:function(t){var e=t.data;return e.labels.length&&e.datasets.length?e.labels.map((function(r,n){var o=t.getDatasetMeta(0),i=o.controller.getStyle(n);return{text:r,fillStyle:i.backgroundColor,strokeStyle:i.borderColor,lineWidth:i.borderWidth,hidden:isNaN(e.datasets[0].data[n])||o.data[n].hidden,index:n}})):[]}},onClick:function(t,e){var r,n,o,i=e.index,a=this.chart;for(r=0,n=(a.data.datasets||[]).length;r<n;++r)(o=a.getDatasetMeta(r)).data[i].hidden=!o.data[i].hidden;a.update()}},tooltips:{callbacks:{title:function(){return""},label:function(t,e){return e.labels[t.index]+": "+t.yLabel}}}});var xe=kt.extend({dataElementType:Ut.Arc,linkScales:st.noop,_dataElementOptions:["backgroundColor","borderColor","borderWidth","borderAlign","hoverBackgroundColor","hoverBorderColor","hoverBorderWidth"],_getIndexScaleId:function(){return this.chart.scale.id},_getValueScaleId:function(){return this.chart.scale.id},update:function(t){var e,r,n,o=this,i=o.getDataset(),a=o.getMeta(),s=o.chart.options.startAngle||0,c=o._starts=[],l=o._angles=[],u=a.data;for(o._updateRadius(),a.count=o.countVisibleElements(),e=0,r=i.data.length;e<r;e++)c[e]=s,n=o._computeAngle(e),l[e]=n,s+=n;for(e=0,r=u.length;e<r;++e)u[e]._options=o._resolveDataElementOptions(u[e],e),o.updateElement(u[e],e,t)},_updateRadius:function(){var t=this,e=t.chart,r=e.chartArea,n=e.options,o=Math.min(r.right-r.left,r.bottom-r.top);e.outerRadius=Math.max(o/2,0),e.innerRadius=Math.max(n.cutoutPercentage?e.outerRadius/100*n.cutoutPercentage:1,0),e.radiusLength=(e.outerRadius-e.innerRadius)/e.getVisibleDatasetCount(),t.outerRadius=e.outerRadius-e.radiusLength*t.index,t.innerRadius=t.outerRadius-e.radiusLength},updateElement:function(t,e,r){var n=this,o=n.chart,i=n.getDataset(),a=o.options,s=a.animation,c=o.scale,l=o.data.labels,u=c.xCenter,d=c.yCenter,h=a.startAngle,f=t.hidden?0:c.getDistanceFromCenterForValue(i.data[e]),p=n._starts[e],m=p+(t.hidden?0:n._angles[e]),v=s.animateScale?0:c.getDistanceFromCenterForValue(i.data[e]),g=t._options||{};st.extend(t,{_datasetIndex:n.index,_index:e,_scale:c,_model:{backgroundColor:g.backgroundColor,borderColor:g.borderColor,borderWidth:g.borderWidth,borderAlign:g.borderAlign,x:u,y:d,innerRadius:0,outerRadius:r?v:f,startAngle:r&&s.animateRotate?h:p,endAngle:r&&s.animateRotate?h:m,label:st.valueAtIndexOrDefault(l,e,l[e])}}),t.pivot()},countVisibleElements:function(){var t=this.getDataset(),e=this.getMeta(),r=0;return st.each(e.data,(function(e,n){isNaN(t.data[n])||e.hidden||r++})),r},setHoverStyle:function(t){var e=t._model,r=t._options,n=st.getHoverColor,o=st.valueOrDefault;t.$previousStyle={backgroundColor:e.backgroundColor,borderColor:e.borderColor,borderWidth:e.borderWidth},e.backgroundColor=o(r.hoverBackgroundColor,n(r.backgroundColor)),e.borderColor=o(r.hoverBorderColor,n(r.borderColor)),e.borderWidth=o(r.hoverBorderWidth,r.borderWidth)},_computeAngle:function(t){var e=this,r=this.getMeta().count,n=e.getDataset(),o=e.getMeta();if(isNaN(n.data[t])||o.data[t].hidden)return 0;var i={chart:e.chart,dataIndex:t,dataset:n,datasetIndex:e.index};return be([e.chart.options.elements.arc.angle,2*Math.PI/r],i,t)}});K._set("pie",st.clone(K.doughnut)),K._set("pie",{cutoutPercentage:0});var we=de,Ce=st.valueOrDefault;K._set("radar",{spanGaps:!1,scale:{type:"radialLinear"},elements:{line:{fill:"start",tension:0}}});var ke=kt.extend({datasetElementType:Ut.Line,dataElementType:Ut.Point,linkScales:st.noop,_datasetElementOptions:["backgroundColor","borderWidth","borderColor","borderCapStyle","borderDash","borderDashOffset","borderJoinStyle","fill"],_dataElementOptions:{backgroundColor:"pointBackgroundColor",borderColor:"pointBorderColor",borderWidth:"pointBorderWidth",hitRadius:"pointHitRadius",hoverBackgroundColor:"pointHoverBackgroundColor",hoverBorderColor:"pointHoverBorderColor",hoverBorderWidth:"pointHoverBorderWidth",hoverRadius:"pointHoverRadius",pointStyle:"pointStyle",radius:"pointRadius",rotation:"pointRotation"},_getIndexScaleId:function(){return this.chart.scale.id},_getValueScaleId:function(){return this.chart.scale.id},update:function(t){var e,r,n=this,o=n.getMeta(),i=o.dataset,a=o.data||[],s=n.chart.scale,c=n._config;for(void 0!==c.tension&&void 0===c.lineTension&&(c.lineTension=c.tension),i._scale=s,i._datasetIndex=n.index,i._children=a,i._loop=!0,i._model=n._resolveDatasetElementOptions(i),i.pivot(),e=0,r=a.length;e<r;++e)n.updateElement(a[e],e,t);for(n.updateBezierControlPoints(),e=0,r=a.length;e<r;++e)a[e].pivot()},updateElement:function(t,e,r){var n=this,o=t.custom||{},i=n.getDataset(),a=n.chart.scale,s=a.getPointPositionForValue(e,i.data[e]),c=n._resolveDataElementOptions(t,e),l=n.getMeta().dataset._model,u=r?a.xCenter:s.x,d=r?a.yCenter:s.y;t._scale=a,t._options=c,t._datasetIndex=n.index,t._index=e,t._model={x:u,y:d,skip:o.skip||isNaN(u)||isNaN(d),radius:c.radius,pointStyle:c.pointStyle,rotation:c.rotation,backgroundColor:c.backgroundColor,borderColor:c.borderColor,borderWidth:c.borderWidth,tension:Ce(o.tension,l?l.tension:0),hitRadius:c.hitRadius}},_resolveDatasetElementOptions:function(){var t=this,e=t._config,r=t.chart.options,n=kt.prototype._resolveDatasetElementOptions.apply(t,arguments);return n.spanGaps=Ce(e.spanGaps,r.spanGaps),n.tension=Ce(e.lineTension,r.elements.line.tension),n},updateBezierControlPoints:function(){var t,e,r,n,o=this,i=o.getMeta(),a=o.chart.chartArea,s=i.data||[];function c(t,e,r){return Math.max(Math.min(t,r),e)}for(i.dataset._model.spanGaps&&(s=s.filter((function(t){return!t._model.skip}))),t=0,e=s.length;t<e;++t)r=s[t]._model,n=st.splineCurve(st.previousItem(s,t,!0)._model,r,st.nextItem(s,t,!0)._model,r.tension),r.controlPointPreviousX=c(n.previous.x,a.left,a.right),r.controlPointPreviousY=c(n.previous.y,a.top,a.bottom),r.controlPointNextX=c(n.next.x,a.left,a.right),r.controlPointNextY=c(n.next.y,a.top,a.bottom)},setHoverStyle:function(t){var e=t._model,r=t._options,n=st.getHoverColor;t.$previousStyle={backgroundColor:e.backgroundColor,borderColor:e.borderColor,borderWidth:e.borderWidth,radius:e.radius},e.backgroundColor=Ce(r.hoverBackgroundColor,n(r.backgroundColor)),e.borderColor=Ce(r.hoverBorderColor,n(r.borderColor)),e.borderWidth=Ce(r.hoverBorderWidth,r.borderWidth),e.radius=Ce(r.hoverRadius,r.radius)}});K._set("scatter",{hover:{mode:"single"},scales:{xAxes:[{id:"x-axis-1",type:"linear",position:"bottom"}],yAxes:[{id:"y-axis-1",type:"linear",position:"left"}]},tooltips:{callbacks:{title:function(){return""},label:function(t){return"("+t.xLabel+", "+t.yLabel+")"}}}}),K._set("global",{datasets:{scatter:{showLine:!1}}});var Le={bar:ne,bubble:ae,doughnut:de,horizontalBar:he,line:_e,polarArea:xe,pie:we,radar:ke,scatter:_e};function Se(t,e){return t.native?{x:t.x,y:t.y}:st.getRelativePosition(t,e)}function Ee(t,e){var r,n,o,i,a,s,c=t._getSortedVisibleDatasetMetas();for(n=0,i=c.length;n<i;++n)for(o=0,a=(r=c[n].data).length;o<a;++o)(s=r[o])._view.skip||e(s)}function Me(t,e){var r=[];return Ee(t,(function(t){t.inRange(e.x,e.y)&&r.push(t)})),r}function Oe(t,e,r,n){var o=Number.POSITIVE_INFINITY,i=[];return Ee(t,(function(t){if(!r||t.inRange(e.x,e.y)){var a=t.getCenterPoint(),s=n(e,a);s<o?(i=[t],o=s):s===o&&i.push(t)}})),i}function Pe(t){var e=-1!==t.indexOf("x"),r=-1!==t.indexOf("y");return function(t,n){var o=e?Math.abs(t.x-n.x):0,i=r?Math.abs(t.y-n.y):0;return Math.sqrt(Math.pow(o,2)+Math.pow(i,2))}}function je(t,e,r){var n=Se(e,t);r.axis=r.axis||"x";var o=Pe(r.axis),i=r.intersect?Me(t,n):Oe(t,n,!1,o),a=[];return i.length?(t._getSortedVisibleDatasetMetas().forEach((function(t){var e=t.data[i[0]._index];e&&!e._view.skip&&a.push(e)})),a):[]}var Ne={modes:{single:function(t,e){var r=Se(e,t),n=[];return Ee(t,(function(t){if(t.inRange(r.x,r.y))return n.push(t),n})),n.slice(0,1)},label:je,index:je,dataset:function(t,e,r){var n=Se(e,t);r.axis=r.axis||"xy";var o=Pe(r.axis),i=r.intersect?Me(t,n):Oe(t,n,!1,o);return i.length>0&&(i=t.getDatasetMeta(i[0]._datasetIndex).data),i},"x-axis":function(t,e){return je(t,e,{intersect:!1})},point:function(t,e){return Me(t,Se(e,t))},nearest:function(t,e,r){var n=Se(e,t);r.axis=r.axis||"xy";var o=Pe(r.axis);return Oe(t,n,r.intersect,o)},x:function(t,e,r){var n=Se(e,t),o=[],i=!1;return Ee(t,(function(t){t.inXRange(n.x)&&o.push(t),t.inRange(n.x,n.y)&&(i=!0)})),r.intersect&&!i&&(o=[]),o},y:function(t,e,r){var n=Se(e,t),o=[],i=!1;return Ee(t,(function(t){t.inYRange(n.y)&&o.push(t),t.inRange(n.x,n.y)&&(i=!0)})),r.intersect&&!i&&(o=[]),o}}},Te=st.extend;function $e(t,e){return st.where(t,(function(t){return t.pos===e}))}function Ie(t,e){return t.sort((function(t,r){var n=e?r:t,o=e?t:r;return n.weight===o.weight?n.index-o.index:n.weight-o.weight}))}function De(t){var e,r,n,o=[];for(e=0,r=(t||[]).length;e<r;++e)n=t[e],o.push({index:e,box:n,pos:n.position,horizontal:n.isHorizontal(),weight:n.weight});return o}function Ae(t,e){var r,n,o;for(r=0,n=t.length;r<n;++r)(o=t[r]).width=o.horizontal?o.box.fullWidth&&e.availableWidth:e.vBoxMaxWidth,o.height=o.horizontal&&e.hBoxMaxHeight}function Fe(t){var e=De(t),r=Ie($e(e,"left"),!0),n=Ie($e(e,"right")),o=Ie($e(e,"top"),!0),i=Ie($e(e,"bottom"));return{leftAndTop:r.concat(o),rightAndBottom:n.concat(i),chartArea:$e(e,"chartArea"),vertical:r.concat(n),horizontal:o.concat(i)}}function qe(t,e,r,n){return Math.max(t[r],e[r])+Math.max(t[n],e[n])}function Re(t,e,r){var n,o,i=r.box,a=t.maxPadding;if(r.size&&(t[r.pos]-=r.size),r.size=r.horizontal?i.height:i.width,t[r.pos]+=r.size,i.getPadding){var s=i.getPadding();a.top=Math.max(a.top,s.top),a.left=Math.max(a.left,s.left),a.bottom=Math.max(a.bottom,s.bottom),a.right=Math.max(a.right,s.right)}if(n=e.outerWidth-qe(a,t,"left","right"),o=e.outerHeight-qe(a,t,"top","bottom"),n!==t.w||o!==t.h){t.w=n,t.h=o;var c=r.horizontal?[n,t.w]:[o,t.h];return!(c[0]===c[1]||isNaN(c[0])&&isNaN(c[1]))}}function Ge(t){var e=t.maxPadding;function r(r){var n=Math.max(e[r]-t[r],0);return t[r]+=n,n}t.y+=r("top"),t.x+=r("left"),r("right"),r("bottom")}function ze(t,e){var r=e.maxPadding;function n(t){var n={left:0,top:0,right:0,bottom:0};return t.forEach((function(t){n[t]=Math.max(e[t],r[t])})),n}return n(t?["left","right"]:["top","bottom"])}function Ve(t,e,r){var n,o,i,a,s,c,l=[];for(n=0,o=t.length;n<o;++n)(a=(i=t[n]).box).update(i.width||e.w,i.height||e.h,ze(i.horizontal,e)),Re(e,r,i)&&(c=!0,l.length&&(s=!0)),a.fullWidth||l.push(i);return s&&Ve(l,e,r)||c}function Ze(t,e,r){var n,o,i,a,s=r.padding,c=e.x,l=e.y;for(n=0,o=t.length;n<o;++n)a=(i=t[n]).box,i.horizontal?(a.left=a.fullWidth?s.left:e.left,a.right=a.fullWidth?r.outerWidth-s.right:e.left+e.w,a.top=l,a.bottom=l+a.height,a.width=a.right-a.left,l=a.bottom):(a.left=c,a.right=c+a.width,a.top=e.top,a.bottom=e.top+e.h,a.height=a.bottom-a.top,c=a.right);e.x=c,e.y=l}K._set("global",{layout:{padding:{top:0,right:0,bottom:0,left:0}}});var Be={defaults:{},addBox:function(t,e){t.boxes||(t.boxes=[]),e.fullWidth=e.fullWidth||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw:function(){e.draw.apply(e,arguments)}}]},t.boxes.push(e)},removeBox:function(t,e){var r=t.boxes?t.boxes.indexOf(e):-1;-1!==r&&t.boxes.splice(r,1)},configure:function(t,e,r){for(var n,o=["fullWidth","position","weight"],i=o.length,a=0;a<i;++a)n=o[a],r.hasOwnProperty(n)&&(e[n]=r[n])},update:function(t,e,r){if(t){var n=t.options.layout||{},o=st.options.toPadding(n.padding),i=e-o.width,a=r-o.height,s=Fe(t.boxes),c=s.vertical,l=s.horizontal,u=Object.freeze({outerWidth:e,outerHeight:r,padding:o,availableWidth:i,vBoxMaxWidth:i/2/c.length,hBoxMaxHeight:a/2}),d=Te({maxPadding:Te({},o),w:i,h:a,x:o.left,y:o.top},o);Ae(c.concat(l),u),Ve(c,d,u),Ve(l,d,u)&&Ve(c,d,u),Ge(d),Ze(s.leftAndTop,d,u),d.x+=d.w,d.y+=d.h,Ze(s.rightAndBottom,d,u),t.chartArea={left:d.left,top:d.top,right:d.left+d.w,bottom:d.top+d.h},st.each(s.chartArea,(function(e){var r=e.box;Te(r,t.chartArea),r.update(d.w,d.h)}))}}},He={acquireContext:function(t){return t&&t.canvas&&(t=t.canvas),t&&t.getContext("2d")||null}},Ue="/*\r\n * DOM element rendering detection\r\n * https://davidwalsh.name/detect-node-insertion\r\n */\r\n@keyframes chartjs-render-animation {\r\n\tfrom { opacity: 0.99; }\r\n\tto { opacity: 1; }\r\n}\r\n\r\n.chartjs-render-monitor {\r\n\tanimation: chartjs-render-animation 0.001s;\r\n}\r\n\r\n/*\r\n * DOM element resizing detection\r\n * https://github.com/marcj/css-element-queries\r\n */\r\n.chartjs-size-monitor,\r\n.chartjs-size-monitor-expand,\r\n.chartjs-size-monitor-shrink {\r\n\tposition: absolute;\r\n\tdirection: ltr;\r\n\tleft: 0;\r\n\ttop: 0;\r\n\tright: 0;\r\n\tbottom: 0;\r\n\toverflow: hidden;\r\n\tpointer-events: none;\r\n\tvisibility: hidden;\r\n\tz-index: -1;\r\n}\r\n\r\n.chartjs-size-monitor-expand > div {\r\n\tposition: absolute;\r\n\twidth: 1000000px;\r\n\theight: 1000000px;\r\n\tleft: 0;\r\n\ttop: 0;\r\n}\r\n\r\n.chartjs-size-monitor-shrink > div {\r\n\tposition: absolute;\r\n\twidth: 200%;\r\n\theight: 200%;\r\n\tleft: 0;\r\n\ttop: 0;\r\n}\r\n",Ye=r(Object.freeze({__proto__:null,default:Ue})),We="$chartjs",Xe="chartjs-",Qe=Xe+"size-monitor",Ke=Xe+"render-monitor",Je=Xe+"render-animation",tr=["animationstart","webkitAnimationStart"],er={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"};function rr(t,e){var r=st.getStyle(t,e),n=r&&r.match(/^(\d+)(\.\d+)?px$/);return n?Number(n[1]):void 0}function nr(t,e){var r=t.style,n=t.getAttribute("height"),o=t.getAttribute("width");if(t[We]={initial:{height:n,width:o,style:{display:r.display,height:r.height,width:r.width}}},r.display=r.display||"block",null===o||""===o){var i=rr(t,"width");void 0!==i&&(t.width=i)}if(null===n||""===n)if(""===t.style.height)t.height=t.width/(e.options.aspectRatio||2);else{var a=rr(t,"height");void 0!==i&&(t.height=a)}return t}var or=function(){var t=!1;try{var e=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("e",null,e)}catch(t){}return t}(),ir=!!or&&{passive:!0};function ar(t,e,r){t.addEventListener(e,r,ir)}function sr(t,e,r){t.removeEventListener(e,r,ir)}function cr(t,e,r,n,o){return{type:t,chart:e,native:o||null,x:void 0!==r?r:null,y:void 0!==n?n:null}}function lr(t,e){var r=er[t.type]||t.type,n=st.getRelativePosition(t,e);return cr(r,e,n.x,n.y,t)}function ur(t,e){var r=!1,n=[];return function(){n=Array.prototype.slice.call(arguments),e=e||this,r||(r=!0,st.requestAnimFrame.call(window,(function(){r=!1,t.apply(e,n)})))}}function dr(t){var e=document.createElement("div");return e.className=t||"",e}function hr(t){var e=1e6,r=dr(Qe),n=dr(Qe+"-expand"),o=dr(Qe+"-shrink");n.appendChild(dr()),o.appendChild(dr()),r.appendChild(n),r.appendChild(o),r._reset=function(){n.scrollLeft=e,n.scrollTop=e,o.scrollLeft=e,o.scrollTop=e};var i=function(){r._reset(),t()};return ar(n,"scroll",i.bind(n,"expand")),ar(o,"scroll",i.bind(o,"shrink")),r}function fr(t,e){var r=t[We]||(t[We]={}),n=r.renderProxy=function(t){t.animationName===Je&&e()};st.each(tr,(function(e){ar(t,e,n)})),r.reflow=!!t.offsetParent,t.classList.add(Ke)}function pr(t){var e=t[We]||{},r=e.renderProxy;r&&(st.each(tr,(function(e){sr(t,e,r)})),delete e.renderProxy),t.classList.remove(Ke)}function mr(t,e,r){var n=t[We]||(t[We]={}),o=n.resizer=hr(ur((function(){if(n.resizer){var o=r.options.maintainAspectRatio&&t.parentNode,i=o?o.clientWidth:0;e(cr("resize",r)),o&&o.clientWidth<i&&r.canvas&&e(cr("resize",r))}})));fr(t,(function(){if(n.resizer){var e=t.parentNode;e&&e!==o.parentNode&&e.insertBefore(o,e.firstChild),o._reset()}}))}function vr(t){var e=t[We]||{},r=e.resizer;delete e.resizer,pr(t),r&&r.parentNode&&r.parentNode.removeChild(r)}function gr(t,e){var r=t[We]||(t[We]={});if(!r.containsStyles){r.containsStyles=!0,e="/* Chart.js */\n"+e;var n=document.createElement("style");n.setAttribute("type","text/css"),n.appendChild(document.createTextNode(e)),t.appendChild(n)}}var yr={disableCSSInjection:!1,_enabled:"undefined"!=typeof window&&"undefined"!=typeof document,_ensureLoaded:function(t){if(!this.disableCSSInjection){var e=t.getRootNode?t.getRootNode():document;gr(e.host?e:document.head,Ye)}},acquireContext:function(t,e){"string"==typeof t?t=document.getElementById(t):t.length&&(t=t[0]),t&&t.canvas&&(t=t.canvas);var r=t&&t.getContext&&t.getContext("2d");return r&&r.canvas===t?(this._ensureLoaded(t),nr(t,e),r):null},releaseContext:function(t){var e=t.canvas;if(e[We]){var r=e[We].initial;["height","width"].forEach((function(t){var n=r[t];st.isNullOrUndef(n)?e.removeAttribute(t):e.setAttribute(t,n)})),st.each(r.style||{},(function(t,r){e.style[r]=t})),e.width=e.width,delete e[We]}},addEventListener:function(t,e,r){var n=t.canvas;if("resize"!==e){var o=r[We]||(r[We]={});ar(n,e,(o.proxies||(o.proxies={}))[t.id+"_"+e]=function(e){r(lr(e,t))})}else mr(n,r,t)},removeEventListener:function(t,e,r){var n=t.canvas;if("resize"!==e){var o=((r[We]||{}).proxies||{})[t.id+"_"+e];o&&sr(n,e,o)}else vr(n)}};st.addEvent=ar,st.removeEvent=sr;var _r=yr._enabled?yr:He,br=st.extend({initialize:function(){},acquireContext:function(){},releaseContext:function(){},addEventListener:function(){},removeEventListener:function(){}},_r);K._set("global",{plugins:{}});var xr={_plugins:[],_cacheId:0,register:function(t){var e=this._plugins;[].concat(t).forEach((function(t){-1===e.indexOf(t)&&e.push(t)})),this._cacheId++},unregister:function(t){var e=this._plugins;[].concat(t).forEach((function(t){var r=e.indexOf(t);-1!==r&&e.splice(r,1)})),this._cacheId++},clear:function(){this._plugins=[],this._cacheId++},count:function(){return this._plugins.length},getAll:function(){return this._plugins},notify:function(t,e,r){var n,o,i,a,s,c=this.descriptors(t),l=c.length;for(n=0;n<l;++n)if("function"==typeof(s=(i=(o=c[n]).plugin)[e])&&((a=[t].concat(r||[])).push(o.options),!1===s.apply(i,a)))return!1;return!0},descriptors:function(t){var e=t.$plugins||(t.$plugins={});if(e.id===this._cacheId)return e.descriptors;var r=[],n=[],o=t&&t.config||{},i=o.options&&o.options.plugins||{};return this._plugins.concat(o.plugins||[]).forEach((function(t){if(-1===r.indexOf(t)){var e=t.id,o=i[e];!1!==o&&(!0===o&&(o=st.clone(K.global.plugins[e])),r.push(t),n.push({plugin:t,options:o||{}}))}})),e.descriptors=n,e.id=this._cacheId,n},_invalidate:function(t){delete t.$plugins}},wr={constructors:{},defaults:{},registerScaleType:function(t,e,r){this.constructors[t]=e,this.defaults[t]=st.clone(r)},getScaleConstructor:function(t){return this.constructors.hasOwnProperty(t)?this.constructors[t]:void 0},getScaleDefaults:function(t){return this.defaults.hasOwnProperty(t)?st.merge(Object.create(null),[K.scale,this.defaults[t]]):{}},updateScaleDefaults:function(t,e){var r=this;r.defaults.hasOwnProperty(t)&&(r.defaults[t]=st.extend(r.defaults[t],e))},addScalesToLayout:function(t){st.each(t.scales,(function(e){e.fullWidth=e.options.fullWidth,e.position=e.options.position,e.weight=e.options.weight,Be.addBox(t,e)}))}},Cr=st.valueOrDefault,kr=st.rtl.getRtlAdapter;K._set("global",{tooltips:{enabled:!0,custom:null,mode:"nearest",position:"average",intersect:!0,backgroundColor:"rgba(0,0,0,0.8)",titleFontStyle:"bold",titleSpacing:2,titleMarginBottom:6,titleFontColor:"#fff",titleAlign:"left",bodySpacing:2,bodyFontColor:"#fff",bodyAlign:"left",footerFontStyle:"bold",footerSpacing:2,footerMarginTop:6,footerFontColor:"#fff",footerAlign:"left",yPadding:6,xPadding:6,caretPadding:2,caretSize:5,cornerRadius:6,multiKeyBackground:"#fff",displayColors:!0,borderColor:"rgba(0,0,0,0)",borderWidth:0,callbacks:{beforeTitle:st.noop,title:function(t,e){var r="",n=e.labels,o=n?n.length:0;if(t.length>0){var i=t[0];i.label?r=i.label:i.xLabel?r=i.xLabel:o>0&&i.index<o&&(r=n[i.index])}return r},afterTitle:st.noop,beforeBody:st.noop,beforeLabel:st.noop,label:function(t,e){var r=e.datasets[t.datasetIndex].label||"";return r&&(r+=": "),st.isNullOrUndef(t.value)?r+=t.yLabel:r+=t.value,r},labelColor:function(t,e){var r=e.getDatasetMeta(t.datasetIndex).data[t.index]._view;return{borderColor:r.borderColor,backgroundColor:r.backgroundColor}},labelTextColor:function(){return this._options.bodyFontColor},afterLabel:st.noop,afterBody:st.noop,beforeFooter:st.noop,footer:st.noop,afterFooter:st.noop}}});var Lr={average:function(t){if(!t.length)return!1;var e,r,n=0,o=0,i=0;for(e=0,r=t.length;e<r;++e){var a=t[e];if(a&&a.hasValue()){var s=a.tooltipPosition();n+=s.x,o+=s.y,++i}}return{x:n/i,y:o/i}},nearest:function(t,e){var r,n,o,i=e.x,a=e.y,s=Number.POSITIVE_INFINITY;for(r=0,n=t.length;r<n;++r){var c=t[r];if(c&&c.hasValue()){var l=c.getCenterPoint(),u=st.distanceBetweenPoints(e,l);u<s&&(s=u,o=c)}}if(o){var d=o.tooltipPosition();i=d.x,a=d.y}return{x:i,y:a}}};function Sr(t,e){return e&&(st.isArray(e)?Array.prototype.push.apply(t,e):t.push(e)),t}function Er(t){return("string"==typeof t||t instanceof String)&&t.indexOf("\n")>-1?t.split("\n"):t}function Mr(t){var e=t._xScale,r=t._yScale||t._scale,n=t._index,o=t._datasetIndex,i=t._chart.getDatasetMeta(o).controller,a=i._getIndexScale(),s=i._getValueScale();return{xLabel:e?e.getLabelForIndex(n,o):"",yLabel:r?r.getLabelForIndex(n,o):"",label:a?""+a.getLabelForIndex(n,o):"",value:s?""+s.getLabelForIndex(n,o):"",index:n,datasetIndex:o,x:t._model.x,y:t._model.y}}function Or(t){var e=K.global;return{xPadding:t.xPadding,yPadding:t.yPadding,xAlign:t.xAlign,yAlign:t.yAlign,rtl:t.rtl,textDirection:t.textDirection,bodyFontColor:t.bodyFontColor,_bodyFontFamily:Cr(t.bodyFontFamily,e.defaultFontFamily),_bodyFontStyle:Cr(t.bodyFontStyle,e.defaultFontStyle),_bodyAlign:t.bodyAlign,bodyFontSize:Cr(t.bodyFontSize,e.defaultFontSize),bodySpacing:t.bodySpacing,titleFontColor:t.titleFontColor,_titleFontFamily:Cr(t.titleFontFamily,e.defaultFontFamily),_titleFontStyle:Cr(t.titleFontStyle,e.defaultFontStyle),titleFontSize:Cr(t.titleFontSize,e.defaultFontSize),_titleAlign:t.titleAlign,titleSpacing:t.titleSpacing,titleMarginBottom:t.titleMarginBottom,footerFontColor:t.footerFontColor,_footerFontFamily:Cr(t.footerFontFamily,e.defaultFontFamily),_footerFontStyle:Cr(t.footerFontStyle,e.defaultFontStyle),footerFontSize:Cr(t.footerFontSize,e.defaultFontSize),_footerAlign:t.footerAlign,footerSpacing:t.footerSpacing,footerMarginTop:t.footerMarginTop,caretSize:t.caretSize,cornerRadius:t.cornerRadius,backgroundColor:t.backgroundColor,opacity:0,legendColorBackground:t.multiKeyBackground,displayColors:t.displayColors,borderColor:t.borderColor,borderWidth:t.borderWidth}}function Pr(t,e){var r=t._chart.ctx,n=2*e.yPadding,o=0,i=e.body,a=i.reduce((function(t,e){return t+e.before.length+e.lines.length+e.after.length}),0);a+=e.beforeBody.length+e.afterBody.length;var s=e.title.length,c=e.footer.length,l=e.titleFontSize,u=e.bodyFontSize,d=e.footerFontSize;n+=s*l,n+=s?(s-1)*e.titleSpacing:0,n+=s?e.titleMarginBottom:0,n+=a*u,n+=a?(a-1)*e.bodySpacing:0,n+=c?e.footerMarginTop:0,n+=c*d,n+=c?(c-1)*e.footerSpacing:0;var h=0,f=function(t){o=Math.max(o,r.measureText(t).width+h)};return r.font=st.fontString(l,e._titleFontStyle,e._titleFontFamily),st.each(e.title,f),r.font=st.fontString(u,e._bodyFontStyle,e._bodyFontFamily),st.each(e.beforeBody.concat(e.afterBody),f),h=e.displayColors?u+2:0,st.each(i,(function(t){st.each(t.before,f),st.each(t.lines,f),st.each(t.after,f)})),h=0,r.font=st.fontString(d,e._footerFontStyle,e._footerFontFamily),st.each(e.footer,f),{width:o+=2*e.xPadding,height:n}}function jr(t,e){var r,n,o,i,a,s=t._model,c=t._chart,l=t._chart.chartArea,u="center",d="center";s.y<e.height?d="top":s.y>c.height-e.height&&(d="bottom");var h=(l.left+l.right)/2,f=(l.top+l.bottom)/2;"center"===d?(r=function(t){return t<=h},n=function(t){return t>h}):(r=function(t){return t<=e.width/2},n=function(t){return t>=c.width-e.width/2}),o=function(t){return t+e.width+s.caretSize+s.caretPadding>c.width},i=function(t){return t-e.width-s.caretSize-s.caretPadding<0},a=function(t){return t<=f?"top":"bottom"},r(s.x)?(u="left",o(s.x)&&(u="center",d=a(s.y))):n(s.x)&&(u="right",i(s.x)&&(u="center",d=a(s.y)));var p=t._options;return{xAlign:p.xAlign?p.xAlign:u,yAlign:p.yAlign?p.yAlign:d}}function Nr(t,e,r,n){var o=t.x,i=t.y,a=t.caretSize,s=t.caretPadding,c=t.cornerRadius,l=r.xAlign,u=r.yAlign,d=a+s,h=c+s;return"right"===l?o-=e.width:"center"===l&&((o-=e.width/2)+e.width>n.width&&(o=n.width-e.width),o<0&&(o=0)),"top"===u?i+=d:i-="bottom"===u?e.height+d:e.height/2,"center"===u?"left"===l?o+=d:"right"===l&&(o-=d):"left"===l?o-=h:"right"===l&&(o+=h),{x:o,y:i}}function Tr(t,e){return"center"===e?t.x+t.width/2:"right"===e?t.x+t.width-t.xPadding:t.x+t.xPadding}function $r(t){return Sr([],Er(t))}var Ir=mt.extend({initialize:function(){this._model=Or(this._options),this._lastActive=[]},getTitle:function(){var t=this,e=t._options.callbacks,r=e.beforeTitle.apply(t,arguments),n=e.title.apply(t,arguments),o=e.afterTitle.apply(t,arguments),i=[];return i=Sr(i,Er(r)),i=Sr(i,Er(n)),i=Sr(i,Er(o))},getBeforeBody:function(){return $r(this._options.callbacks.beforeBody.apply(this,arguments))},getBody:function(t,e){var r=this,n=r._options.callbacks,o=[];return st.each(t,(function(t){var i={before:[],lines:[],after:[]};Sr(i.before,Er(n.beforeLabel.call(r,t,e))),Sr(i.lines,n.label.call(r,t,e)),Sr(i.after,Er(n.afterLabel.call(r,t,e))),o.push(i)})),o},getAfterBody:function(){return $r(this._options.callbacks.afterBody.apply(this,arguments))},getFooter:function(){var t=this,e=t._options.callbacks,r=e.beforeFooter.apply(t,arguments),n=e.footer.apply(t,arguments),o=e.afterFooter.apply(t,arguments),i=[];return i=Sr(i,Er(r)),i=Sr(i,Er(n)),i=Sr(i,Er(o))},update:function(t){var e,r,n=this,o=n._options,i=n._model,a=n._model=Or(o),s=n._active,c=n._data,l={xAlign:i.xAlign,yAlign:i.yAlign},u={x:i.x,y:i.y},d={width:i.width,height:i.height},h={x:i.caretX,y:i.caretY};if(s.length){a.opacity=1;var f=[],p=[];h=Lr[o.position].call(n,s,n._eventPosition);var m=[];for(e=0,r=s.length;e<r;++e)m.push(Mr(s[e]));o.filter&&(m=m.filter((function(t){return o.filter(t,c)}))),o.itemSort&&(m=m.sort((function(t,e){return o.itemSort(t,e,c)}))),st.each(m,(function(t){f.push(o.callbacks.labelColor.call(n,t,n._chart)),p.push(o.callbacks.labelTextColor.call(n,t,n._chart))})),a.title=n.getTitle(m,c),a.beforeBody=n.getBeforeBody(m,c),a.body=n.getBody(m,c),a.afterBody=n.getAfterBody(m,c),a.footer=n.getFooter(m,c),a.x=h.x,a.y=h.y,a.caretPadding=o.caretPadding,a.labelColors=f,a.labelTextColors=p,a.dataPoints=m,u=Nr(a,d=Pr(this,a),l=jr(this,d),n._chart)}else a.opacity=0;return a.xAlign=l.xAlign,a.yAlign=l.yAlign,a.x=u.x,a.y=u.y,a.width=d.width,a.height=d.height,a.caretX=h.x,a.caretY=h.y,n._model=a,t&&o.custom&&o.custom.call(n,a),n},drawCaret:function(t,e){var r=this._chart.ctx,n=this._view,o=this.getCaretPosition(t,e,n);r.lineTo(o.x1,o.y1),r.lineTo(o.x2,o.y2),r.lineTo(o.x3,o.y3)},getCaretPosition:function(t,e,r){var n,o,i,a,s,c,l=r.caretSize,u=r.cornerRadius,d=r.xAlign,h=r.yAlign,f=t.x,p=t.y,m=e.width,v=e.height;if("center"===h)s=p+v/2,"left"===d?(o=(n=f)-l,i=n,a=s+l,c=s-l):(o=(n=f+m)+l,i=n,a=s-l,c=s+l);else if("left"===d?(n=(o=f+u+l)-l,i=o+l):"right"===d?(n=(o=f+m-u-l)-l,i=o+l):(n=(o=r.caretX)-l,i=o+l),"top"===h)s=(a=p)-l,c=a;else{s=(a=p+v)+l,c=a;var g=i;i=n,n=g}return{x1:n,x2:o,x3:i,y1:a,y2:s,y3:c}},drawTitle:function(t,e,r){var n,o,i,a=e.title,s=a.length;if(s){var c=kr(e.rtl,e.x,e.width);for(t.x=Tr(e,e._titleAlign),r.textAlign=c.textAlign(e._titleAlign),r.textBaseline="middle",n=e.titleFontSize,o=e.titleSpacing,r.fillStyle=e.titleFontColor,r.font=st.fontString(n,e._titleFontStyle,e._titleFontFamily),i=0;i<s;++i)r.fillText(a[i],c.x(t.x),t.y+n/2),t.y+=n+o,i+1===s&&(t.y+=e.titleMarginBottom-o)}},drawBody:function(t,e,r){var n,o,i,a,s,c,l,u,d=e.bodyFontSize,h=e.bodySpacing,f=e._bodyAlign,p=e.body,m=e.displayColors,v=0,g=m?Tr(e,"left"):0,y=kr(e.rtl,e.x,e.width),_=function(e){r.fillText(e,y.x(t.x+v),t.y+d/2),t.y+=d+h},b=y.textAlign(f);for(r.textAlign=f,r.textBaseline="middle",r.font=st.fontString(d,e._bodyFontStyle,e._bodyFontFamily),t.x=Tr(e,b),r.fillStyle=e.bodyFontColor,st.each(e.beforeBody,_),v=m&&"right"!==b?"center"===f?d/2+1:d+2:0,s=0,l=p.length;s<l;++s){for(n=p[s],o=e.labelTextColors[s],i=e.labelColors[s],r.fillStyle=o,st.each(n.before,_),c=0,u=(a=n.lines).length;c<u;++c){if(m){var x=y.x(g);r.fillStyle=e.legendColorBackground,r.fillRect(y.leftForLtr(x,d),t.y,d,d),r.lineWidth=1,r.strokeStyle=i.borderColor,r.strokeRect(y.leftForLtr(x,d),t.y,d,d),r.fillStyle=i.backgroundColor,r.fillRect(y.leftForLtr(y.xPlus(x,1),d-2),t.y+1,d-2,d-2),r.fillStyle=o}_(a[c])}st.each(n.after,_)}v=0,st.each(e.afterBody,_),t.y-=h},drawFooter:function(t,e,r){var n,o,i=e.footer,a=i.length;if(a){var s=kr(e.rtl,e.x,e.width);for(t.x=Tr(e,e._footerAlign),t.y+=e.footerMarginTop,r.textAlign=s.textAlign(e._footerAlign),r.textBaseline="middle",n=e.footerFontSize,r.fillStyle=e.footerFontColor,r.font=st.fontString(n,e._footerFontStyle,e._footerFontFamily),o=0;o<a;++o)r.fillText(i[o],s.x(t.x),t.y+n/2),t.y+=n+e.footerSpacing}},drawBackground:function(t,e,r,n){r.fillStyle=e.backgroundColor,r.strokeStyle=e.borderColor,r.lineWidth=e.borderWidth;var o=e.xAlign,i=e.yAlign,a=t.x,s=t.y,c=n.width,l=n.height,u=e.cornerRadius;r.beginPath(),r.moveTo(a+u,s),"top"===i&&this.drawCaret(t,n),r.lineTo(a+c-u,s),r.quadraticCurveTo(a+c,s,a+c,s+u),"center"===i&&"right"===o&&this.drawCaret(t,n),r.lineTo(a+c,s+l-u),r.quadraticCurveTo(a+c,s+l,a+c-u,s+l),"bottom"===i&&this.drawCaret(t,n),r.lineTo(a+u,s+l),r.quadraticCurveTo(a,s+l,a,s+l-u),"center"===i&&"left"===o&&this.drawCaret(t,n),r.lineTo(a,s+u),r.quadraticCurveTo(a,s,a+u,s),r.closePath(),r.fill(),e.borderWidth>0&&r.stroke()},draw:function(){var t=this._chart.ctx,e=this._view;if(0!==e.opacity){var r={width:e.width,height:e.height},n={x:e.x,y:e.y},o=Math.abs(e.opacity<.001)?0:e.opacity,i=e.title.length||e.beforeBody.length||e.body.length||e.afterBody.length||e.footer.length;this._options.enabled&&i&&(t.save(),t.globalAlpha=o,this.drawBackground(n,e,t,r),n.y+=e.yPadding,st.rtl.overrideTextDirection(t,e.textDirection),this.drawTitle(n,e,t),this.drawBody(n,e,t),this.drawFooter(n,e,t),st.rtl.restoreTextDirection(t,e.textDirection),t.restore())}},handleEvent:function(t){var e=this,r=e._options,n=!1;return e._lastActive=e._lastActive||[],"mouseout"===t.type?e._active=[]:(e._active=e._chart.getElementsAtEventForMode(t,r.mode,r),r.reverse&&e._active.reverse()),(n=!st.arrayEquals(e._active,e._lastActive))&&(e._lastActive=e._active,(r.enabled||r.custom)&&(e._eventPosition={x:t.x,y:t.y},e.update(!0),e.pivot())),n}}),Dr=Lr,Ar=Ir;Ar.positioners=Dr;var Fr=st.valueOrDefault;function qr(){return st.merge(Object.create(null),[].slice.call(arguments),{merger:function(t,e,r,n){if("xAxes"===t||"yAxes"===t){var o,i,a,s=r[t].length;for(e[t]||(e[t]=[]),o=0;o<s;++o)a=r[t][o],i=Fr(a.type,"xAxes"===t?"category":"linear"),o>=e[t].length&&e[t].push({}),!e[t][o].type||a.type&&a.type!==e[t][o].type?st.merge(e[t][o],[wr.getScaleDefaults(i),a]):st.merge(e[t][o],a)}else st._merger(t,e,r,n)}})}function Rr(){return st.merge(Object.create(null),[].slice.call(arguments),{merger:function(t,e,r,n){var o=e[t]||Object.create(null),i=r[t];"scales"===t?e[t]=qr(o,i):"scale"===t?e[t]=st.merge(o,[wr.getScaleDefaults(i.type),i]):st._merger(t,e,r,n)}})}function Gr(t){var e=(t=t||Object.create(null)).data=t.data||{};return e.datasets=e.datasets||[],e.labels=e.labels||[],t.options=Rr(K.global,K[t.type],t.options||{}),t}function zr(t){var e=t.options;st.each(t.scales,(function(e){Be.removeBox(t,e)})),e=Rr(K.global,K[t.config.type],e),t.options=t.config.options=e,t.ensureScalesHaveIDs(),t.buildOrUpdateScales(),t.tooltip._options=e.tooltips,t.tooltip.initialize()}function Vr(t,e,r){var n,o=function(t){return t.id===n};do{n=e+r++}while(st.findIndex(t,o)>=0);return n}function Zr(t){return"top"===t||"bottom"===t}function Br(t,e){return function(r,n){return r[t]===n[t]?r[e]-n[e]:r[t]-n[t]}}K._set("global",{elements:{},events:["mousemove","mouseout","click","touchstart","touchmove"],hover:{onHover:null,mode:"nearest",intersect:!0,animationDuration:400},onClick:null,maintainAspectRatio:!0,responsive:!0,responsiveAnimationDuration:0});var Hr=function(t,e){return this.construct(t,e),this};st.extend(Hr.prototype,{construct:function(t,e){var r=this;e=Gr(e);var n=br.acquireContext(t,e),o=n&&n.canvas,i=o&&o.height,a=o&&o.width;r.id=st.uid(),r.ctx=n,r.canvas=o,r.config=e,r.width=a,r.height=i,r.aspectRatio=i?a/i:null,r.options=e.options,r._bufferedRender=!1,r._layers=[],r.chart=r,r.controller=r,Hr.instances[r.id]=r,Object.defineProperty(r,"data",{get:function(){return r.config.data},set:function(t){r.config.data=t}}),n&&o?(r.initialize(),r.update()):console.error("Failed to create chart: can't acquire context from the given item")},initialize:function(){var t=this;return xr.notify(t,"beforeInit"),st.retinaScale(t,t.options.devicePixelRatio),t.bindEvents(),t.options.responsive&&t.resize(!0),t.initToolTip(),xr.notify(t,"afterInit"),t},clear:function(){return st.canvas.clear(this),this},stop:function(){return yt.cancelAnimation(this),this},resize:function(t){var e=this,r=e.options,n=e.canvas,o=r.maintainAspectRatio&&e.aspectRatio||null,i=Math.max(0,Math.floor(st.getMaximumWidth(n))),a=Math.max(0,Math.floor(o?i/o:st.getMaximumHeight(n)));if((e.width!==i||e.height!==a)&&(n.width=e.width=i,n.height=e.height=a,n.style.width=i+"px",n.style.height=a+"px",st.retinaScale(e,r.devicePixelRatio),!t)){var s={width:i,height:a};xr.notify(e,"resize",[s]),r.onResize&&r.onResize(e,s),e.stop(),e.update({duration:r.responsiveAnimationDuration})}},ensureScalesHaveIDs:function(){var t=this.options,e=t.scales||{},r=t.scale;st.each(e.xAxes,(function(t,r){t.id||(t.id=Vr(e.xAxes,"x-axis-",r))})),st.each(e.yAxes,(function(t,r){t.id||(t.id=Vr(e.yAxes,"y-axis-",r))})),r&&(r.id=r.id||"scale")},buildOrUpdateScales:function(){var t=this,e=t.options,r=t.scales||{},n=[],o=Object.keys(r).reduce((function(t,e){return t[e]=!1,t}),{});e.scales&&(n=n.concat((e.scales.xAxes||[]).map((function(t){return{options:t,dtype:"category",dposition:"bottom"}})),(e.scales.yAxes||[]).map((function(t){return{options:t,dtype:"linear",dposition:"left"}})))),e.scale&&n.push({options:e.scale,dtype:"radialLinear",isDefault:!0,dposition:"chartArea"}),st.each(n,(function(e){var n=e.options,i=n.id,a=Fr(n.type,e.dtype);Zr(n.position)!==Zr(e.dposition)&&(n.position=e.dposition),o[i]=!0;var s=null;if(i in r&&r[i].type===a)(s=r[i]).options=n,s.ctx=t.ctx,s.chart=t;else{var c=wr.getScaleConstructor(a);if(!c)return;s=new c({id:i,type:a,options:n,ctx:t.ctx,chart:t}),r[s.id]=s}s.mergeTicksOptions(),e.isDefault&&(t.scale=s)})),st.each(o,(function(t,e){t||delete r[e]})),t.scales=r,wr.addScalesToLayout(this)},buildOrUpdateControllers:function(){var t,e,r=this,n=[],o=r.data.datasets;for(t=0,e=o.length;t<e;t++){var i=o[t],a=r.getDatasetMeta(t),s=i.type||r.config.type;if(a.type&&a.type!==s&&(r.destroyDatasetMeta(t),a=r.getDatasetMeta(t)),a.type=s,a.order=i.order||0,a.index=t,a.controller)a.controller.updateIndex(t),a.controller.linkScales();else{var c=Le[a.type];if(void 0===c)throw new Error('"'+a.type+'" is not a chart type.');a.controller=new c(r,t),n.push(a.controller)}}return n},resetElements:function(){var t=this;st.each(t.data.datasets,(function(e,r){t.getDatasetMeta(r).controller.reset()}),t)},reset:function(){this.resetElements(),this.tooltip.initialize()},update:function(t){var e,r,n=this;if(t&&"object"==typeof t||(t={duration:t,lazy:arguments[1]}),zr(n),xr._invalidate(n),!1!==xr.notify(n,"beforeUpdate")){n.tooltip._data=n.data;var o=n.buildOrUpdateControllers();for(e=0,r=n.data.datasets.length;e<r;e++)n.getDatasetMeta(e).controller.buildOrUpdateElements();n.updateLayout(),n.options.animation&&n.options.animation.duration&&st.each(o,(function(t){t.reset()})),n.updateDatasets(),n.tooltip.initialize(),n.lastActive=[],xr.notify(n,"afterUpdate"),n._layers.sort(Br("z","_idx")),n._bufferedRender?n._bufferedRequest={duration:t.duration,easing:t.easing,lazy:t.lazy}:n.render(t)}},updateLayout:function(){var t=this;!1!==xr.notify(t,"beforeLayout")&&(Be.update(this,this.width,this.height),t._layers=[],st.each(t.boxes,(function(e){e._configure&&e._configure(),t._layers.push.apply(t._layers,e._layers())}),t),t._layers.forEach((function(t,e){t._idx=e})),xr.notify(t,"afterScaleUpdate"),xr.notify(t,"afterLayout"))},updateDatasets:function(){var t=this;if(!1!==xr.notify(t,"beforeDatasetsUpdate")){for(var e=0,r=t.data.datasets.length;e<r;++e)t.updateDataset(e);xr.notify(t,"afterDatasetsUpdate")}},updateDataset:function(t){var e=this,r=e.getDatasetMeta(t),n={meta:r,index:t};!1!==xr.notify(e,"beforeDatasetUpdate",[n])&&(r.controller._update(),xr.notify(e,"afterDatasetUpdate",[n]))},render:function(t){var e=this;t&&"object"==typeof t||(t={duration:t,lazy:arguments[1]});var r=e.options.animation,n=Fr(t.duration,r&&r.duration),o=t.lazy;if(!1!==xr.notify(e,"beforeRender")){var i=function(t){xr.notify(e,"afterRender"),st.callback(r&&r.onComplete,[t],e)};if(r&&n){var a=new gt({numSteps:n/16.66,easing:t.easing||r.easing,render:function(t,e){var r=st.easing.effects[e.easing],n=e.currentStep,o=n/e.numSteps;t.draw(r(o),o,n)},onAnimationProgress:r.onProgress,onAnimationComplete:i});yt.addAnimation(e,a,n,o)}else e.draw(),i(new gt({numSteps:0,chart:e}));return e}},draw:function(t){var e,r,n=this;if(n.clear(),st.isNullOrUndef(t)&&(t=1),n.transition(t),!(n.width<=0||n.height<=0)&&!1!==xr.notify(n,"beforeDraw",[t])){for(r=n._layers,e=0;e<r.length&&r[e].z<=0;++e)r[e].draw(n.chartArea);for(n.drawDatasets(t);e<r.length;++e)r[e].draw(n.chartArea);n._drawTooltip(t),xr.notify(n,"afterDraw",[t])}},transition:function(t){for(var e=this,r=0,n=(e.data.datasets||[]).length;r<n;++r)e.isDatasetVisible(r)&&e.getDatasetMeta(r).controller.transition(t);e.tooltip.transition(t)},_getSortedDatasetMetas:function(t){var e,r,n=this,o=[];for(e=0,r=(n.data.datasets||[]).length;e<r;++e)t&&!n.isDatasetVisible(e)||o.push(n.getDatasetMeta(e));return o.sort(Br("order","index")),o},_getSortedVisibleDatasetMetas:function(){return this._getSortedDatasetMetas(!0)},drawDatasets:function(t){var e,r,n=this;if(!1!==xr.notify(n,"beforeDatasetsDraw",[t])){for(r=(e=n._getSortedVisibleDatasetMetas()).length-1;r>=0;--r)n.drawDataset(e[r],t);xr.notify(n,"afterDatasetsDraw",[t])}},drawDataset:function(t,e){var r=this,n={meta:t,index:t.index,easingValue:e};!1!==xr.notify(r,"beforeDatasetDraw",[n])&&(t.controller.draw(e),xr.notify(r,"afterDatasetDraw",[n]))},_drawTooltip:function(t){var e=this,r=e.tooltip,n={tooltip:r,easingValue:t};!1!==xr.notify(e,"beforeTooltipDraw",[n])&&(r.draw(),xr.notify(e,"afterTooltipDraw",[n]))},getElementAtEvent:function(t){return Ne.modes.single(this,t)},getElementsAtEvent:function(t){return Ne.modes.label(this,t,{intersect:!0})},getElementsAtXAxis:function(t){return Ne.modes["x-axis"](this,t,{intersect:!0})},getElementsAtEventForMode:function(t,e,r){var n=Ne.modes[e];return"function"==typeof n?n(this,t,r):[]},getDatasetAtEvent:function(t){return Ne.modes.dataset(this,t,{intersect:!0})},getDatasetMeta:function(t){var e=this,r=e.data.datasets[t];r._meta||(r._meta={});var n=r._meta[e.id];return n||(n=r._meta[e.id]={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:r.order||0,index:t}),n},getVisibleDatasetCount:function(){for(var t=0,e=0,r=this.data.datasets.length;e<r;++e)this.isDatasetVisible(e)&&t++;return t},isDatasetVisible:function(t){var e=this.getDatasetMeta(t);return"boolean"==typeof e.hidden?!e.hidden:!this.data.datasets[t].hidden},generateLegend:function(){return this.options.legendCallback(this)},destroyDatasetMeta:function(t){var e=this.id,r=this.data.datasets[t],n=r._meta&&r._meta[e];n&&(n.controller.destroy(),delete r._meta[e])},destroy:function(){var t,e,r=this,n=r.canvas;for(r.stop(),t=0,e=r.data.datasets.length;t<e;++t)r.destroyDatasetMeta(t);n&&(r.unbindEvents(),st.canvas.clear(r),br.releaseContext(r.ctx),r.canvas=null,r.ctx=null),xr.notify(r,"destroy"),delete Hr.instances[r.id]},toBase64Image:function(){return this.canvas.toDataURL.apply(this.canvas,arguments)},initToolTip:function(){var t=this;t.tooltip=new Ar({_chart:t,_chartInstance:t,_data:t.data,_options:t.options.tooltips},t)},bindEvents:function(){var t=this,e=t._listeners={},r=function(){t.eventHandler.apply(t,arguments)};st.each(t.options.events,(function(n){br.addEventListener(t,n,r),e[n]=r})),t.options.responsive&&(r=function(){t.resize()},br.addEventListener(t,"resize",r),e.resize=r)},unbindEvents:function(){var t=this,e=t._listeners;e&&(delete t._listeners,st.each(e,(function(e,r){br.removeEventListener(t,r,e)})))},updateHoverStyle:function(t,e,r){var n,o,i,a=r?"set":"remove";for(o=0,i=t.length;o<i;++o)(n=t[o])&&this.getDatasetMeta(n._datasetIndex).controller[a+"HoverStyle"](n);"dataset"===e&&this.getDatasetMeta(t[0]._datasetIndex).controller["_"+a+"DatasetHoverStyle"]()},eventHandler:function(t){var e=this,r=e.tooltip;if(!1!==xr.notify(e,"beforeEvent",[t])){e._bufferedRender=!0,e._bufferedRequest=null;var n=e.handleEvent(t);r&&(n=r._start?r.handleEvent(t):n|r.handleEvent(t)),xr.notify(e,"afterEvent",[t]);var o=e._bufferedRequest;return o?e.render(o):n&&!e.animating&&(e.stop(),e.render({duration:e.options.hover.animationDuration,lazy:!0})),e._bufferedRender=!1,e._bufferedRequest=null,e}},handleEvent:function(t){var e=this,r=e.options||{},n=r.hover,o=!1;return e.lastActive=e.lastActive||[],"mouseout"===t.type?e.active=[]:e.active=e.getElementsAtEventForMode(t,n.mode,n),st.callback(r.onHover||r.hover.onHover,[t.native,e.active],e),"mouseup"!==t.type&&"click"!==t.type||r.onClick&&r.onClick.call(e,t.native,e.active),e.lastActive.length&&e.updateHoverStyle(e.lastActive,n.mode,!1),e.active.length&&n.mode&&e.updateHoverStyle(e.active,n.mode,!0),o=!st.arrayEquals(e.active,e.lastActive),e.lastActive=e.active,o}}),Hr.instances={};var Ur=Hr;Hr.Controller=Hr,Hr.types={},st.configMerge=Rr,st.scaleMerge=qr;var Yr=function(){function t(t,e,r){var n;return"string"==typeof t?(n=parseInt(t,10),-1!==t.indexOf("%")&&(n=n/100*e.parentNode[r])):n=t,n}function e(t){return null!=t&&"none"!==t}function r(r,n,o){var i=document.defaultView,a=st._getParentNode(r),s=i.getComputedStyle(r)[n],c=i.getComputedStyle(a)[n],l=e(s),u=e(c),d=Number.POSITIVE_INFINITY;return l||u?Math.min(l?t(s,r,o):d,u?t(c,a,o):d):"none"}st.where=function(t,e){if(st.isArray(t)&&Array.prototype.filter)return t.filter(e);var r=[];return st.each(t,(function(t){e(t)&&r.push(t)})),r},st.findIndex=Array.prototype.findIndex?function(t,e,r){return t.findIndex(e,r)}:function(t,e,r){r=void 0===r?t:r;for(var n=0,o=t.length;n<o;++n)if(e.call(r,t[n],n,t))return n;return-1},st.findNextWhere=function(t,e,r){st.isNullOrUndef(r)&&(r=-1);for(var n=r+1;n<t.length;n++){var o=t[n];if(e(o))return o}},st.findPreviousWhere=function(t,e,r){st.isNullOrUndef(r)&&(r=t.length);for(var n=r-1;n>=0;n--){var o=t[n];if(e(o))return o}},st.isNumber=function(t){return!isNaN(parseFloat(t))&&isFinite(t)},st.almostEquals=function(t,e,r){return Math.abs(t-e)<r},st.almostWhole=function(t,e){var r=Math.round(t);return r-e<=t&&r+e>=t},st.max=function(t){return t.reduce((function(t,e){return isNaN(e)?t:Math.max(t,e)}),Number.NEGATIVE_INFINITY)},st.min=function(t){return t.reduce((function(t,e){return isNaN(e)?t:Math.min(t,e)}),Number.POSITIVE_INFINITY)},st.sign=Math.sign?function(t){return Math.sign(t)}:function(t){return 0==(t=+t)||isNaN(t)?t:t>0?1:-1},st.toRadians=function(t){return t*(Math.PI/180)},st.toDegrees=function(t){return t*(180/Math.PI)},st._decimalPlaces=function(t){if(st.isFinite(t)){for(var e=1,r=0;Math.round(t*e)/e!==t;)e*=10,r++;return r}},st.getAngleFromPoint=function(t,e){var r=e.x-t.x,n=e.y-t.y,o=Math.sqrt(r*r+n*n),i=Math.atan2(n,r);return i<-.5*Math.PI&&(i+=2*Math.PI),{angle:i,distance:o}},st.distanceBetweenPoints=function(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))},st.aliasPixel=function(t){return t%2==0?0:.5},st._alignPixel=function(t,e,r){var n=t.currentDevicePixelRatio,o=r/2;return Math.round((e-o)*n)/n+o},st.splineCurve=function(t,e,r,n){var o=t.skip?e:t,i=e,a=r.skip?e:r,s=Math.sqrt(Math.pow(i.x-o.x,2)+Math.pow(i.y-o.y,2)),c=Math.sqrt(Math.pow(a.x-i.x,2)+Math.pow(a.y-i.y,2)),l=s/(s+c),u=c/(s+c),d=n*(l=isNaN(l)?0:l),h=n*(u=isNaN(u)?0:u);return{previous:{x:i.x-d*(a.x-o.x),y:i.y-d*(a.y-o.y)},next:{x:i.x+h*(a.x-o.x),y:i.y+h*(a.y-o.y)}}},st.EPSILON=Number.EPSILON||1e-14,st.splineCurveMonotone=function(t){var e,r,n,o,i,a,s,c,l,u=(t||[]).map((function(t){return{model:t._model,deltaK:0,mK:0}})),d=u.length;for(e=0;e<d;++e)if(!(n=u[e]).model.skip){if(r=e>0?u[e-1]:null,(o=e<d-1?u[e+1]:null)&&!o.model.skip){var h=o.model.x-n.model.x;n.deltaK=0!==h?(o.model.y-n.model.y)/h:0}!r||r.model.skip?n.mK=n.deltaK:!o||o.model.skip?n.mK=r.deltaK:this.sign(r.deltaK)!==this.sign(n.deltaK)?n.mK=0:n.mK=(r.deltaK+n.deltaK)/2}for(e=0;e<d-1;++e)n=u[e],o=u[e+1],n.model.skip||o.model.skip||(st.almostEquals(n.deltaK,0,this.EPSILON)?n.mK=o.mK=0:(i=n.mK/n.deltaK,a=o.mK/n.deltaK,(c=Math.pow(i,2)+Math.pow(a,2))<=9||(s=3/Math.sqrt(c),n.mK=i*s*n.deltaK,o.mK=a*s*n.deltaK)));for(e=0;e<d;++e)(n=u[e]).model.skip||(r=e>0?u[e-1]:null,o=e<d-1?u[e+1]:null,r&&!r.model.skip&&(l=(n.model.x-r.model.x)/3,n.model.controlPointPreviousX=n.model.x-l,n.model.controlPointPreviousY=n.model.y-l*n.mK),o&&!o.model.skip&&(l=(o.model.x-n.model.x)/3,n.model.controlPointNextX=n.model.x+l,n.model.controlPointNextY=n.model.y+l*n.mK))},st.nextItem=function(t,e,r){return r?e>=t.length-1?t[0]:t[e+1]:e>=t.length-1?t[t.length-1]:t[e+1]},st.previousItem=function(t,e,r){return r?e<=0?t[t.length-1]:t[e-1]:e<=0?t[0]:t[e-1]},st.niceNum=function(t,e){var r=Math.floor(st.log10(t)),n=t/Math.pow(10,r);return(e?n<1.5?1:n<3?2:n<7?5:10:n<=1?1:n<=2?2:n<=5?5:10)*Math.pow(10,r)},st.requestAnimFrame="undefined"==typeof window?function(t){t()}:window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t){return window.setTimeout(t,1e3/60)},st.getRelativePosition=function(t,e){var r,n,o=t.originalEvent||t,i=t.target||t.srcElement,a=i.getBoundingClientRect(),s=o.touches;s&&s.length>0?(r=s[0].clientX,n=s[0].clientY):(r=o.clientX,n=o.clientY);var c=parseFloat(st.getStyle(i,"padding-left")),l=parseFloat(st.getStyle(i,"padding-top")),u=parseFloat(st.getStyle(i,"padding-right")),d=parseFloat(st.getStyle(i,"padding-bottom")),h=a.right-a.left-c-u,f=a.bottom-a.top-l-d;return{x:r=Math.round((r-a.left-c)/h*i.width/e.currentDevicePixelRatio),y:n=Math.round((n-a.top-l)/f*i.height/e.currentDevicePixelRatio)}},st.getConstraintWidth=function(t){return r(t,"max-width","clientWidth")},st.getConstraintHeight=function(t){return r(t,"max-height","clientHeight")},st._calculatePadding=function(t,e,r){return(e=st.getStyle(t,e)).indexOf("%")>-1?r*parseInt(e,10)/100:parseInt(e,10)},st._getParentNode=function(t){var e=t.parentNode;return e&&"[object ShadowRoot]"===e.toString()&&(e=e.host),e},st.getMaximumWidth=function(t){var e=st._getParentNode(t);if(!e)return t.clientWidth;var r=e.clientWidth,n=r-st._calculatePadding(e,"padding-left",r)-st._calculatePadding(e,"padding-right",r),o=st.getConstraintWidth(t);return isNaN(o)?n:Math.min(n,o)},st.getMaximumHeight=function(t){var e=st._getParentNode(t);if(!e)return t.clientHeight;var r=e.clientHeight,n=r-st._calculatePadding(e,"padding-top",r)-st._calculatePadding(e,"padding-bottom",r),o=st.getConstraintHeight(t);return isNaN(o)?n:Math.min(n,o)},st.getStyle=function(t,e){return t.currentStyle?t.currentStyle[e]:document.defaultView.getComputedStyle(t,null).getPropertyValue(e)},st.retinaScale=function(t,e){var r=t.currentDevicePixelRatio=e||"undefined"!=typeof window&&window.devicePixelRatio||1;if(1!==r){var n=t.canvas,o=t.height,i=t.width;n.height=o*r,n.width=i*r,t.ctx.scale(r,r),n.style.height||n.style.width||(n.style.height=o+"px",n.style.width=i+"px")}},st.fontString=function(t,e,r){return e+" "+t+"px "+r},st.longestText=function(t,e,r,n){var o=(n=n||{}).data=n.data||{},i=n.garbageCollect=n.garbageCollect||[];n.font!==e&&(o=n.data={},i=n.garbageCollect=[],n.font=e),t.font=e;var a,s,c,l,u,d=0,h=r.length;for(a=0;a<h;a++)if(null!=(l=r[a])&&!0!==st.isArray(l))d=st.measureText(t,o,i,d,l);else if(st.isArray(l))for(s=0,c=l.length;s<c;s++)null==(u=l[s])||st.isArray(u)||(d=st.measureText(t,o,i,d,u));var f=i.length/2;if(f>r.length){for(a=0;a<f;a++)delete o[i[a]];i.splice(0,f)}return d},st.measureText=function(t,e,r,n,o){var i=e[o];return i||(i=e[o]=t.measureText(o).width,r.push(o)),i>n&&(n=i),n},st.numberOfLabelLines=function(t){var e=1;return st.each(t,(function(t){st.isArray(t)&&t.length>e&&(e=t.length)})),e},st.color=D?function(t){return t instanceof CanvasGradient&&(t=K.global.defaultColor),D(t)}:function(t){return console.error("Color.js not found!"),t},st.getHoverColor=function(t){return t instanceof CanvasPattern||t instanceof CanvasGradient?t:st.color(t).saturate(.5).darken(.1).rgbString()}};function Wr(){throw new Error("This method is not implemented: either no adapter can be found or an incomplete integration was provided.")}function Xr(t){this.options=t||{}}st.extend(Xr.prototype,{formats:Wr,parse:Wr,format:Wr,add:Wr,diff:Wr,startOf:Wr,endOf:Wr,_create:function(t){return t}}),Xr.override=function(t){st.extend(Xr.prototype,t)};var Qr={_date:Xr},Kr={formatters:{values:function(t){return st.isArray(t)?t:""+t},linear:function(t,e,r){var n=r.length>3?r[2]-r[1]:r[1]-r[0];Math.abs(n)>1&&t!==Math.floor(t)&&(n=t-Math.floor(t));var o=st.log10(Math.abs(n)),i="";if(0!==t)if(Math.max(Math.abs(r[0]),Math.abs(r[r.length-1]))<1e-4){var a=st.log10(Math.abs(t)),s=Math.floor(a)-Math.floor(o);s=Math.max(Math.min(s,20),0),i=t.toExponential(s)}else{var c=-1*Math.floor(o);c=Math.max(Math.min(c,20),0),i=t.toFixed(c)}else i="0";return i},logarithmic:function(t,e,r){var n=t/Math.pow(10,Math.floor(st.log10(t)));return 0===t?"0":1===n||2===n||5===n||0===e||e===r.length-1?t.toExponential():""}}},Jr=st.isArray,tn=st.isNullOrUndef,en=st.valueOrDefault,rn=st.valueAtIndexOrDefault;function nn(t,e){for(var r=[],n=t.length/e,o=0,i=t.length;o<i;o+=n)r.push(t[Math.floor(o)]);return r}function on(t,e,r){var n,o=t.getTicks().length,i=Math.min(e,o-1),a=t.getPixelForTick(i),s=t._startPixel,c=t._endPixel,l=1e-6;if(!(r&&(n=1===o?Math.max(a-s,c-a):0===e?(t.getPixelForTick(1)-a)/2:(a-t.getPixelForTick(i-1))/2,(a+=i<e?n:-n)<s-l||a>c+l)))return a}function an(t,e){st.each(t,(function(t){var r,n=t.gc,o=n.length/2;if(o>e){for(r=0;r<o;++r)delete t.data[n[r]];n.splice(0,o)}}))}function sn(t,e,r,n){var o,i,a,s,c,l,u,d,h,f,p,m,v,g=r.length,y=[],_=[],b=[],x=0,w=0;for(o=0;o<g;++o){if(s=r[o].label,c=r[o].major?e.major:e.minor,t.font=l=c.string,u=n[l]=n[l]||{data:{},gc:[]},d=c.lineHeight,h=f=0,tn(s)||Jr(s)){if(Jr(s))for(i=0,a=s.length;i<a;++i)p=s[i],tn(p)||Jr(p)||(h=st.measureText(t,u.data,u.gc,h,p),f+=d)}else h=st.measureText(t,u.data,u.gc,h,s),f=d;y.push(h),_.push(f),b.push(d/2),x=Math.max(h,x),w=Math.max(f,w)}function C(t){return{width:y[t]||0,height:_[t]||0,offset:b[t]||0}}return an(n,g),m=y.indexOf(x),v=_.indexOf(w),{first:C(0),last:C(g-1),widest:C(m),highest:C(v)}}function cn(t){return t.drawTicks?t.tickMarkLength:0}function ln(t){var e,r;return t.display?(e=st.options._parseFont(t),r=st.options.toPadding(t.padding),e.lineHeight+r.height):0}function un(t,e){return st.extend(st.options._parseFont({fontFamily:en(e.fontFamily,t.fontFamily),fontSize:en(e.fontSize,t.fontSize),fontStyle:en(e.fontStyle,t.fontStyle),lineHeight:en(e.lineHeight,t.lineHeight)}),{color:st.options.resolve([e.fontColor,t.fontColor,K.global.defaultFontColor])})}function dn(t){var e=un(t,t.minor);return{minor:e,major:t.major.enabled?un(t,t.major):e}}function hn(t){var e,r,n,o=[];for(r=0,n=t.length;r<n;++r)void 0!==(e=t[r])._index&&o.push(e);return o}function fn(t){var e,r,n=t.length;if(n<2)return!1;for(r=t[0],e=1;e<n;++e)if(t[e]-t[e-1]!==r)return!1;return r}function pn(t,e,r,n){var o,i,a,s,c=fn(t),l=(e.length-1)/n;if(!c)return Math.max(l,1);for(a=0,s=(o=st.math._factorize(c)).length-1;a<s;a++)if((i=o[a])>l)return i;return Math.max(l,1)}function mn(t){var e,r,n=[];for(e=0,r=t.length;e<r;e++)t[e].major&&n.push(e);return n}function vn(t,e,r){var n,o,i=0,a=e[0];for(r=Math.ceil(r),n=0;n<t.length;n++)o=t[n],n===a?(o._index=n,a=e[++i*r]):delete o.label}function gn(t,e,r,n){var o,i,a,s,c=en(r,0),l=Math.min(en(n,t.length),t.length),u=0;for(e=Math.ceil(e),n&&(e=(o=n-r)/Math.floor(o/e)),s=c;s<0;)u++,s=Math.round(c+u*e);for(i=Math.max(c,0);i<l;i++)a=t[i],i===s?(a._index=i,u++,s=Math.round(c+u*e)):delete a.label}K._set("scale",{display:!0,position:"left",offset:!1,gridLines:{display:!0,color:"rgba(0,0,0,0.1)",lineWidth:1,drawBorder:!0,drawOnChartArea:!0,drawTicks:!0,tickMarkLength:10,zeroLineWidth:1,zeroLineColor:"rgba(0,0,0,0.25)",zeroLineBorderDash:[],zeroLineBorderDashOffset:0,offsetGridLines:!1,borderDash:[],borderDashOffset:0},scaleLabel:{display:!1,labelString:"",padding:{top:4,bottom:4}},ticks:{beginAtZero:!1,minRotation:0,maxRotation:50,mirror:!1,padding:0,reverse:!1,display:!0,autoSkip:!0,autoSkipPadding:0,labelOffset:0,callback:Kr.formatters.values,minor:{},major:{}}});var yn=mt.extend({zeroLineIndex:0,getPadding:function(){var t=this;return{left:t.paddingLeft||0,top:t.paddingTop||0,right:t.paddingRight||0,bottom:t.paddingBottom||0}},getTicks:function(){return this._ticks},_getLabels:function(){var t=this.chart.data;return this.options.labels||(this.isHorizontal()?t.xLabels:t.yLabels)||t.labels||[]},mergeTicksOptions:function(){},beforeUpdate:function(){st.callback(this.options.beforeUpdate,[this])},update:function(t,e,r){var n,o,i,a,s,c=this,l=c.options.ticks,u=l.sampleSize;if(c.beforeUpdate(),c.maxWidth=t,c.maxHeight=e,c.margins=st.extend({left:0,right:0,top:0,bottom:0},r),c._ticks=null,c.ticks=null,c._labelSizes=null,c._maxLabelLines=0,c.longestLabelWidth=0,c.longestTextCache=c.longestTextCache||{},c._gridLineItems=null,c._labelItems=null,c.beforeSetDimensions(),c.setDimensions(),c.afterSetDimensions(),c.beforeDataLimits(),c.determineDataLimits(),c.afterDataLimits(),c.beforeBuildTicks(),a=c.buildTicks()||[],(!(a=c.afterBuildTicks(a)||a)||!a.length)&&c.ticks)for(a=[],n=0,o=c.ticks.length;n<o;++n)a.push({value:c.ticks[n],major:!1});return c._ticks=a,s=u<a.length,i=c._convertTicksToLabels(s?nn(a,u):a),c._configure(),c.beforeCalculateTickRotation(),c.calculateTickRotation(),c.afterCalculateTickRotation(),c.beforeFit(),c.fit(),c.afterFit(),c._ticksToDraw=l.display&&(l.autoSkip||"auto"===l.source)?c._autoSkip(a):a,s&&(i=c._convertTicksToLabels(c._ticksToDraw)),c.ticks=i,c.afterUpdate(),c.minSize},_configure:function(){var t,e,r=this,n=r.options.ticks.reverse;r.isHorizontal()?(t=r.left,e=r.right):(t=r.top,e=r.bottom,n=!n),r._startPixel=t,r._endPixel=e,r._reversePixels=n,r._length=e-t},afterUpdate:function(){st.callback(this.options.afterUpdate,[this])},beforeSetDimensions:function(){st.callback(this.options.beforeSetDimensions,[this])},setDimensions:function(){var t=this;t.isHorizontal()?(t.width=t.maxWidth,t.left=0,t.right=t.width):(t.height=t.maxHeight,t.top=0,t.bottom=t.height),t.paddingLeft=0,t.paddingTop=0,t.paddingRight=0,t.paddingBottom=0},afterSetDimensions:function(){st.callback(this.options.afterSetDimensions,[this])},beforeDataLimits:function(){st.callback(this.options.beforeDataLimits,[this])},determineDataLimits:st.noop,afterDataLimits:function(){st.callback(this.options.afterDataLimits,[this])},beforeBuildTicks:function(){st.callback(this.options.beforeBuildTicks,[this])},buildTicks:st.noop,afterBuildTicks:function(t){var e=this;return Jr(t)&&t.length?st.callback(e.options.afterBuildTicks,[e,t]):(e.ticks=st.callback(e.options.afterBuildTicks,[e,e.ticks])||e.ticks,t)},beforeTickToLabelConversion:function(){st.callback(this.options.beforeTickToLabelConversion,[this])},convertTicksToLabels:function(){var t=this,e=t.options.ticks;t.ticks=t.ticks.map(e.userCallback||e.callback,this)},afterTickToLabelConversion:function(){st.callback(this.options.afterTickToLabelConversion,[this])},beforeCalculateTickRotation:function(){st.callback(this.options.beforeCalculateTickRotation,[this])},calculateTickRotation:function(){var t,e,r,n,o,i,a,s=this,c=s.options,l=c.ticks,u=s.getTicks().length,d=l.minRotation||0,h=l.maxRotation,f=d;!s._isVisible()||!l.display||d>=h||u<=1||!s.isHorizontal()?s.labelRotation=d:(e=(t=s._getLabelSizes()).widest.width,r=t.highest.height-t.highest.offset,n=Math.min(s.maxWidth,s.chart.width-e),e+6>(o=c.offset?s.maxWidth/u:n/(u-1))&&(o=n/(u-(c.offset?.5:1)),i=s.maxHeight-cn(c.gridLines)-l.padding-ln(c.scaleLabel),a=Math.sqrt(e*e+r*r),f=st.toDegrees(Math.min(Math.asin(Math.min((t.highest.height+6)/o,1)),Math.asin(Math.min(i/a,1))-Math.asin(r/a))),f=Math.max(d,Math.min(h,f))),s.labelRotation=f)},afterCalculateTickRotation:function(){st.callback(this.options.afterCalculateTickRotation,[this])},beforeFit:function(){st.callback(this.options.beforeFit,[this])},fit:function(){var t=this,e=t.minSize={width:0,height:0},r=t.chart,n=t.options,o=n.ticks,i=n.scaleLabel,a=n.gridLines,s=t._isVisible(),c="bottom"===n.position,l=t.isHorizontal();if(l?e.width=t.maxWidth:s&&(e.width=cn(a)+ln(i)),l?s&&(e.height=cn(a)+ln(i)):e.height=t.maxHeight,o.display&&s){var u=dn(o),d=t._getLabelSizes(),h=d.first,f=d.last,p=d.widest,m=d.highest,v=.4*u.minor.lineHeight,g=o.padding;if(l){var y=0!==t.labelRotation,_=st.toRadians(t.labelRotation),b=Math.cos(_),x=Math.sin(_),w=x*p.width+b*(m.height-(y?m.offset:0))+(y?0:v);e.height=Math.min(t.maxHeight,e.height+w+g);var C,k,L=t.getPixelForTick(0)-t.left,S=t.right-t.getPixelForTick(t.getTicks().length-1);y?(C=c?b*h.width+x*h.offset:x*(h.height-h.offset),k=c?x*(f.height-f.offset):b*f.width+x*f.offset):(C=h.width/2,k=f.width/2),t.paddingLeft=Math.max((C-L)*t.width/(t.width-L),0)+3,t.paddingRight=Math.max((k-S)*t.width/(t.width-S),0)+3}else{var E=o.mirror?0:p.width+g+v;e.width=Math.min(t.maxWidth,e.width+E),t.paddingTop=h.height/2,t.paddingBottom=f.height/2}}t.handleMargins(),l?(t.width=t._length=r.width-t.margins.left-t.margins.right,t.height=e.height):(t.width=e.width,t.height=t._length=r.height-t.margins.top-t.margins.bottom)},handleMargins:function(){var t=this;t.margins&&(t.margins.left=Math.max(t.paddingLeft,t.margins.left),t.margins.top=Math.max(t.paddingTop,t.margins.top),t.margins.right=Math.max(t.paddingRight,t.margins.right),t.margins.bottom=Math.max(t.paddingBottom,t.margins.bottom))},afterFit:function(){st.callback(this.options.afterFit,[this])},isHorizontal:function(){var t=this.options.position;return"top"===t||"bottom"===t},isFullWidth:function(){return this.options.fullWidth},getRightValue:function(t){if(tn(t))return NaN;if(("number"==typeof t||t instanceof Number)&&!isFinite(t))return NaN;if(t)if(this.isHorizontal()){if(void 0!==t.x)return this.getRightValue(t.x)}else if(void 0!==t.y)return this.getRightValue(t.y);return t},_convertTicksToLabels:function(t){var e,r,n,o=this;for(o.ticks=t.map((function(t){return t.value})),o.beforeTickToLabelConversion(),e=o.convertTicksToLabels(t)||o.ticks,o.afterTickToLabelConversion(),r=0,n=t.length;r<n;++r)t[r].label=e[r];return e},_getLabelSizes:function(){var t=this,e=t._labelSizes;return e||(t._labelSizes=e=sn(t.ctx,dn(t.options.ticks),t.getTicks(),t.longestTextCache),t.longestLabelWidth=e.widest.width),e},_parseValue:function(t){var e,r,n,o;return Jr(t)?(e=+this.getRightValue(t[0]),r=+this.getRightValue(t[1]),n=Math.min(e,r),o=Math.max(e,r)):(e=void 0,r=t=+this.getRightValue(t),n=t,o=t),{min:n,max:o,start:e,end:r}},_getScaleLabel:function(t){var e=this._parseValue(t);return void 0!==e.start?"["+e.start+", "+e.end+"]":+this.getRightValue(t)},getLabelForIndex:st.noop,getPixelForValue:st.noop,getValueForPixel:st.noop,getPixelForTick:function(t){var e=this,r=e.options.offset,n=e._ticks.length,o=1/Math.max(n-(r?0:1),1);return t<0||t>n-1?null:e.getPixelForDecimal(t*o+(r?o/2:0))},getPixelForDecimal:function(t){var e=this;return e._reversePixels&&(t=1-t),e._startPixel+t*e._length},getDecimalForPixel:function(t){var e=(t-this._startPixel)/this._length;return this._reversePixels?1-e:e},getBasePixel:function(){return this.getPixelForValue(this.getBaseValue())},getBaseValue:function(){var t=this,e=t.min,r=t.max;return t.beginAtZero?0:e<0&&r<0?r:e>0&&r>0?e:0},_autoSkip:function(t){var e,r,n,o,i=this,a=i.options.ticks,s=i._length,c=a.maxTicksLimit||s/i._tickSize()+1,l=a.major.enabled?mn(t):[],u=l.length,d=l[0],h=l[u-1];if(u>c)return vn(t,l,u/c),hn(t);if(n=pn(l,t,s,c),u>0){for(e=0,r=u-1;e<r;e++)gn(t,n,l[e],l[e+1]);return o=u>1?(h-d)/(u-1):null,gn(t,n,st.isNullOrUndef(o)?0:d-o,d),gn(t,n,h,st.isNullOrUndef(o)?t.length:h+o),hn(t)}return gn(t,n),hn(t)},_tickSize:function(){var t=this,e=t.options.ticks,r=st.toRadians(t.labelRotation),n=Math.abs(Math.cos(r)),o=Math.abs(Math.sin(r)),i=t._getLabelSizes(),a=e.autoSkipPadding||0,s=i?i.widest.width+a:0,c=i?i.highest.height+a:0;return t.isHorizontal()?c*n>s*o?s/n:c/o:c*o<s*n?c/n:s/o},_isVisible:function(){var t,e,r,n=this,o=n.chart,i=n.options.display;if("auto"!==i)return!!i;for(t=0,e=o.data.datasets.length;t<e;++t)if(o.isDatasetVisible(t)&&((r=o.getDatasetMeta(t)).xAxisID===n.id||r.yAxisID===n.id))return!0;return!1},_computeGridLineItems:function(t){var e,r,n,o,i,a,s,c,l,u,d,h,f,p,m,v,g,y=this,_=y.chart,b=y.options,x=b.gridLines,w=b.position,C=x.offsetGridLines,k=y.isHorizontal(),L=y._ticksToDraw,S=L.length+(C?1:0),E=cn(x),M=[],O=x.drawBorder?rn(x.lineWidth,0,0):0,P=O/2,j=st._alignPixel,N=function(t){return j(_,t,O)};for("top"===w?(e=N(y.bottom),s=y.bottom-E,l=e-P,d=N(t.top)+P,f=t.bottom):"bottom"===w?(e=N(y.top),d=t.top,f=N(t.bottom)-P,s=e+P,l=y.top+E):"left"===w?(e=N(y.right),a=y.right-E,c=e-P,u=N(t.left)+P,h=t.right):(e=N(y.left),u=t.left,h=N(t.right)-P,a=e+P,c=y.left+E),r=0;r<S;++r)n=L[r]||{},tn(n.label)&&r<L.length||(r===y.zeroLineIndex&&b.offset===C?(p=x.zeroLineWidth,m=x.zeroLineColor,v=x.zeroLineBorderDash||[],g=x.zeroLineBorderDashOffset||0):(p=rn(x.lineWidth,r,1),m=rn(x.color,r,"rgba(0,0,0,0.1)"),v=x.borderDash||[],g=x.borderDashOffset||0),void 0!==(o=on(y,n._index||r,C))&&(i=j(_,o,p),k?a=c=u=h=i:s=l=d=f=i,M.push({tx1:a,ty1:s,tx2:c,ty2:l,x1:u,y1:d,x2:h,y2:f,width:p,color:m,borderDash:v,borderDashOffset:g})));return M.ticksLength=S,M.borderValue=e,M},_computeLabelItems:function(){var t,e,r,n,o,i,a,s,c,l,u,d,h=this,f=h.options,p=f.ticks,m=f.position,v=p.mirror,g=h.isHorizontal(),y=h._ticksToDraw,_=dn(p),b=p.padding,x=cn(f.gridLines),w=-st.toRadians(h.labelRotation),C=[];for("top"===m?(i=h.bottom-x-b,a=w?"left":"center"):"bottom"===m?(i=h.top+x+b,a=w?"right":"center"):"left"===m?(o=h.right-(v?0:x)-b,a=v?"left":"right"):(o=h.left+(v?0:x)+b,a=v?"right":"left"),t=0,e=y.length;t<e;++t)n=(r=y[t]).label,tn(n)||(s=h.getPixelForTick(r._index||t)+p.labelOffset,l=(c=r.major?_.major:_.minor).lineHeight,u=Jr(n)?n.length:1,g?(o=s,d="top"===m?((w?1:.5)-u)*l:(w?0:.5)*l):(i=s,d=(1-u)*l/2),C.push({x:o,y:i,rotation:w,label:n,font:c,textOffset:d,textAlign:a}));return C},_drawGrid:function(t){var e=this,r=e.options.gridLines;if(r.display){var n,o,i,a,s,c=e.ctx,l=e.chart,u=st._alignPixel,d=r.drawBorder?rn(r.lineWidth,0,0):0,h=e._gridLineItems||(e._gridLineItems=e._computeGridLineItems(t));for(i=0,a=h.length;i<a;++i)n=(s=h[i]).width,o=s.color,n&&o&&(c.save(),c.lineWidth=n,c.strokeStyle=o,c.setLineDash&&(c.setLineDash(s.borderDash),c.lineDashOffset=s.borderDashOffset),c.beginPath(),r.drawTicks&&(c.moveTo(s.tx1,s.ty1),c.lineTo(s.tx2,s.ty2)),r.drawOnChartArea&&(c.moveTo(s.x1,s.y1),c.lineTo(s.x2,s.y2)),c.stroke(),c.restore());if(d){var f,p,m,v,g=d,y=rn(r.lineWidth,h.ticksLength-1,1),_=h.borderValue;e.isHorizontal()?(f=u(l,e.left,g)-g/2,p=u(l,e.right,y)+y/2,m=v=_):(m=u(l,e.top,g)-g/2,v=u(l,e.bottom,y)+y/2,f=p=_),c.lineWidth=d,c.strokeStyle=rn(r.color,0),c.beginPath(),c.moveTo(f,m),c.lineTo(p,v),c.stroke()}}},_drawLabels:function(){var t=this;if(t.options.ticks.display){var e,r,n,o,i,a,s,c,l=t.ctx,u=t._labelItems||(t._labelItems=t._computeLabelItems());for(e=0,n=u.length;e<n;++e){if(a=(i=u[e]).font,l.save(),l.translate(i.x,i.y),l.rotate(i.rotation),l.font=a.string,l.fillStyle=a.color,l.textBaseline="middle",l.textAlign=i.textAlign,s=i.label,c=i.textOffset,Jr(s))for(r=0,o=s.length;r<o;++r)l.fillText(""+s[r],0,c),c+=a.lineHeight;else l.fillText(s,0,c);l.restore()}}},_drawTitle:function(){var t=this,e=t.ctx,r=t.options,n=r.scaleLabel;if(n.display){var o,i,a=en(n.fontColor,K.global.defaultFontColor),s=st.options._parseFont(n),c=st.options.toPadding(n.padding),l=s.lineHeight/2,u=r.position,d=0;if(t.isHorizontal())o=t.left+t.width/2,i="bottom"===u?t.bottom-l-c.bottom:t.top+l+c.top;else{var h="left"===u;o=h?t.left+l+c.top:t.right-l-c.top,i=t.top+t.height/2,d=h?-.5*Math.PI:.5*Math.PI}e.save(),e.translate(o,i),e.rotate(d),e.textAlign="center",e.textBaseline="middle",e.fillStyle=a,e.font=s.string,e.fillText(n.labelString,0,0),e.restore()}},draw:function(t){var e=this;e._isVisible()&&(e._drawGrid(t),e._drawTitle(),e._drawLabels())},_layers:function(){var t=this,e=t.options,r=e.ticks&&e.ticks.z||0,n=e.gridLines&&e.gridLines.z||0;return t._isVisible()&&r!==n&&t.draw===t._draw?[{z:n,draw:function(){t._drawGrid.apply(t,arguments),t._drawTitle.apply(t,arguments)}},{z:r,draw:function(){t._drawLabels.apply(t,arguments)}}]:[{z:r,draw:function(){t.draw.apply(t,arguments)}}]},_getMatchingVisibleMetas:function(t){var e=this,r=e.isHorizontal();return e.chart._getSortedVisibleDatasetMetas().filter((function(n){return(!t||n.type===t)&&(r?n.xAxisID===e.id:n.yAxisID===e.id)}))}});yn.prototype._draw=yn.prototype.draw;var _n=yn,bn=st.isNullOrUndef,xn={position:"bottom"},wn=_n.extend({determineDataLimits:function(){var t,e=this,r=e._getLabels(),n=e.options.ticks,o=n.min,i=n.max,a=0,s=r.length-1;void 0!==o&&(t=r.indexOf(o))>=0&&(a=t),void 0!==i&&(t=r.indexOf(i))>=0&&(s=t),e.minIndex=a,e.maxIndex=s,e.min=r[a],e.max=r[s]},buildTicks:function(){var t=this,e=t._getLabels(),r=t.minIndex,n=t.maxIndex;t.ticks=0===r&&n===e.length-1?e:e.slice(r,n+1)},getLabelForIndex:function(t,e){var r=this,n=r.chart;return n.getDatasetMeta(e).controller._getValueScaleId()===r.id?r.getRightValue(n.data.datasets[e].data[t]):r._getLabels()[t]},_configure:function(){var t=this,e=t.options.offset,r=t.ticks;_n.prototype._configure.call(t),t.isHorizontal()||(t._reversePixels=!t._reversePixels),r&&(t._startValue=t.minIndex-(e?.5:0),t._valueRange=Math.max(r.length-(e?0:1),1))},getPixelForValue:function(t,e,r){var n,o,i,a=this;return bn(e)||bn(r)||(t=a.chart.data.datasets[r].data[e]),bn(t)||(n=a.isHorizontal()?t.x:t.y),(void 0!==n||void 0!==t&&isNaN(e))&&(o=a._getLabels(),t=st.valueOrDefault(n,t),e=-1!==(i=o.indexOf(t))?i:e,isNaN(e)&&(e=t)),a.getPixelForDecimal((e-a._startValue)/a._valueRange)},getPixelForTick:function(t){var e=this.ticks;return t<0||t>e.length-1?null:this.getPixelForValue(e[t],t+this.minIndex)},getValueForPixel:function(t){var e=this,r=Math.round(e._startValue+e.getDecimalForPixel(t)*e._valueRange);return Math.min(Math.max(r,0),e.ticks.length-1)},getBasePixel:function(){return this.bottom}}),Cn=xn;wn._defaults=Cn;var kn=st.noop,Ln=st.isNullOrUndef;function Sn(t,e){var r,n,o,i,a=[],s=1e-14,c=t.stepSize,l=c||1,u=t.maxTicks-1,d=t.min,h=t.max,f=t.precision,p=e.min,m=e.max,v=st.niceNum((m-p)/u/l)*l;if(v<s&&Ln(d)&&Ln(h))return[p,m];(i=Math.ceil(m/v)-Math.floor(p/v))>u&&(v=st.niceNum(i*v/u/l)*l),c||Ln(f)?r=Math.pow(10,st._decimalPlaces(v)):(r=Math.pow(10,f),v=Math.ceil(v*r)/r),n=Math.floor(p/v)*v,o=Math.ceil(m/v)*v,c&&(!Ln(d)&&st.almostWhole(d/v,v/1e3)&&(n=d),!Ln(h)&&st.almostWhole(h/v,v/1e3)&&(o=h)),i=(o-n)/v,i=st.almostEquals(i,Math.round(i),v/1e3)?Math.round(i):Math.ceil(i),n=Math.round(n*r)/r,o=Math.round(o*r)/r,a.push(Ln(d)?n:d);for(var g=1;g<i;++g)a.push(Math.round((n+g*v)*r)/r);return a.push(Ln(h)?o:h),a}var En=_n.extend({getRightValue:function(t){return"string"==typeof t?+t:_n.prototype.getRightValue.call(this,t)},handleTickRangeOptions:function(){var t=this,e=t.options.ticks;if(e.beginAtZero){var r=st.sign(t.min),n=st.sign(t.max);r<0&&n<0?t.max=0:r>0&&n>0&&(t.min=0)}var o=void 0!==e.min||void 0!==e.suggestedMin,i=void 0!==e.max||void 0!==e.suggestedMax;void 0!==e.min?t.min=e.min:void 0!==e.suggestedMin&&(null===t.min?t.min=e.suggestedMin:t.min=Math.min(t.min,e.suggestedMin)),void 0!==e.max?t.max=e.max:void 0!==e.suggestedMax&&(null===t.max?t.max=e.suggestedMax:t.max=Math.max(t.max,e.suggestedMax)),o!==i&&t.min>=t.max&&(o?t.max=t.min+1:t.min=t.max-1),t.min===t.max&&(t.max++,e.beginAtZero||t.min--)},getTickLimit:function(){var t,e=this,r=e.options.ticks,n=r.stepSize,o=r.maxTicksLimit;return n?t=Math.ceil(e.max/n)-Math.floor(e.min/n)+1:(t=e._computeTickLimit(),o=o||11),o&&(t=Math.min(o,t)),t},_computeTickLimit:function(){return Number.POSITIVE_INFINITY},handleDirectionalChanges:kn,buildTicks:function(){var t=this,e=t.options.ticks,r=t.getTickLimit(),n={maxTicks:r=Math.max(2,r),min:e.min,max:e.max,precision:e.precision,stepSize:st.valueOrDefault(e.fixedStepSize,e.stepSize)},o=t.ticks=Sn(n,t);t.handleDirectionalChanges(),t.max=st.max(o),t.min=st.min(o),e.reverse?(o.reverse(),t.start=t.max,t.end=t.min):(t.start=t.min,t.end=t.max)},convertTicksToLabels:function(){var t=this;t.ticksAsNumbers=t.ticks.slice(),t.zeroLineIndex=t.ticks.indexOf(0),_n.prototype.convertTicksToLabels.call(t)},_configure:function(){var t,e=this,r=e.getTicks(),n=e.min,o=e.max;_n.prototype._configure.call(e),e.options.offset&&r.length&&(n-=t=(o-n)/Math.max(r.length-1,1)/2,o+=t),e._startValue=n,e._endValue=o,e._valueRange=o-n}}),Mn={position:"left",ticks:{callback:Kr.formatters.linear}},On=0,Pn=1;function jn(t,e,r){var n=[r.type,void 0===e&&void 0===r.stack?r.index:"",r.stack].join(".");return void 0===t[n]&&(t[n]={pos:[],neg:[]}),t[n]}function Nn(t,e,r,n){var o,i,a=t.options,s=jn(e,a.stacked,r),c=s.pos,l=s.neg,u=n.length;for(o=0;o<u;++o)i=t._parseValue(n[o]),isNaN(i.min)||isNaN(i.max)||r.data[o].hidden||(c[o]=c[o]||0,l[o]=l[o]||0,a.relativePoints?c[o]=100:i.min<0||i.max<0?l[o]+=i.min:c[o]+=i.max)}function Tn(t,e,r){var n,o,i=r.length;for(n=0;n<i;++n)o=t._parseValue(r[n]),isNaN(o.min)||isNaN(o.max)||e.data[n].hidden||(t.min=Math.min(t.min,o.min),t.max=Math.max(t.max,o.max))}var $n=En.extend({determineDataLimits:function(){var t,e,r,n,o=this,i=o.options,a=o.chart.data.datasets,s=o._getMatchingVisibleMetas(),c=i.stacked,l={},u=s.length;if(o.min=Number.POSITIVE_INFINITY,o.max=Number.NEGATIVE_INFINITY,void 0===c)for(t=0;!c&&t<u;++t)c=void 0!==(e=s[t]).stack;for(t=0;t<u;++t)r=a[(e=s[t]).index].data,c?Nn(o,l,e,r):Tn(o,e,r);st.each(l,(function(t){n=t.pos.concat(t.neg),o.min=Math.min(o.min,st.min(n)),o.max=Math.max(o.max,st.max(n))})),o.min=st.isFinite(o.min)&&!isNaN(o.min)?o.min:On,o.max=st.isFinite(o.max)&&!isNaN(o.max)?o.max:Pn,o.handleTickRangeOptions()},_computeTickLimit:function(){var t,e=this;return e.isHorizontal()?Math.ceil(e.width/40):(t=st.options._parseFont(e.options.ticks),Math.ceil(e.height/t.lineHeight))},handleDirectionalChanges:function(){this.isHorizontal()||this.ticks.reverse()},getLabelForIndex:function(t,e){return this._getScaleLabel(this.chart.data.datasets[e].data[t])},getPixelForValue:function(t){var e=this;return e.getPixelForDecimal((+e.getRightValue(t)-e._startValue)/e._valueRange)},getValueForPixel:function(t){return this._startValue+this.getDecimalForPixel(t)*this._valueRange},getPixelForTick:function(t){var e=this.ticksAsNumbers;return t<0||t>e.length-1?null:this.getPixelForValue(e[t])}}),In=Mn;$n._defaults=In;var Dn=st.valueOrDefault,An=st.math.log10;function Fn(t,e){var r,n,o=[],i=Dn(t.min,Math.pow(10,Math.floor(An(e.min)))),a=Math.floor(An(e.max)),s=Math.ceil(e.max/Math.pow(10,a));0===i?(r=Math.floor(An(e.minNotZero)),n=Math.floor(e.minNotZero/Math.pow(10,r)),o.push(i),i=n*Math.pow(10,r)):(r=Math.floor(An(i)),n=Math.floor(i/Math.pow(10,r)));var c=r<0?Math.pow(10,Math.abs(r)):1;do{o.push(i),10==++n&&(n=1,c=++r>=0?1:c),i=Math.round(n*Math.pow(10,r)*c)/c}while(r<a||r===a&&n<s);var l=Dn(t.max,i);return o.push(l),o}var qn={position:"left",ticks:{callback:Kr.formatters.logarithmic}};function Rn(t,e){return st.isFinite(t)&&t>=0?t:e}var Gn=_n.extend({determineDataLimits:function(){var t,e,r,n,o,i,a=this,s=a.options,c=a.chart,l=c.data.datasets,u=a.isHorizontal();function d(t){return u?t.xAxisID===a.id:t.yAxisID===a.id}a.min=Number.POSITIVE_INFINITY,a.max=Number.NEGATIVE_INFINITY,a.minNotZero=Number.POSITIVE_INFINITY;var h=s.stacked;if(void 0===h)for(t=0;t<l.length;t++)if(e=c.getDatasetMeta(t),c.isDatasetVisible(t)&&d(e)&&void 0!==e.stack){h=!0;break}if(s.stacked||h){var f={};for(t=0;t<l.length;t++){var p=[(e=c.getDatasetMeta(t)).type,void 0===s.stacked&&void 0===e.stack?t:"",e.stack].join(".");if(c.isDatasetVisible(t)&&d(e))for(void 0===f[p]&&(f[p]=[]),o=0,i=(n=l[t].data).length;o<i;o++){var m=f[p];r=a._parseValue(n[o]),isNaN(r.min)||isNaN(r.max)||e.data[o].hidden||r.min<0||r.max<0||(m[o]=m[o]||0,m[o]+=r.max)}}st.each(f,(function(t){if(t.length>0){var e=st.min(t),r=st.max(t);a.min=Math.min(a.min,e),a.max=Math.max(a.max,r)}}))}else for(t=0;t<l.length;t++)if(e=c.getDatasetMeta(t),c.isDatasetVisible(t)&&d(e))for(o=0,i=(n=l[t].data).length;o<i;o++)r=a._parseValue(n[o]),isNaN(r.min)||isNaN(r.max)||e.data[o].hidden||r.min<0||r.max<0||(a.min=Math.min(r.min,a.min),a.max=Math.max(r.max,a.max),0!==r.min&&(a.minNotZero=Math.min(r.min,a.minNotZero)));a.min=st.isFinite(a.min)?a.min:null,a.max=st.isFinite(a.max)?a.max:null,a.minNotZero=st.isFinite(a.minNotZero)?a.minNotZero:null,this.handleTickRangeOptions()},handleTickRangeOptions:function(){var t=this,e=t.options.ticks,r=1,n=10;t.min=Rn(e.min,t.min),t.max=Rn(e.max,t.max),t.min===t.max&&(0!==t.min&&null!==t.min?(t.min=Math.pow(10,Math.floor(An(t.min))-1),t.max=Math.pow(10,Math.floor(An(t.max))+1)):(t.min=r,t.max=n)),null===t.min&&(t.min=Math.pow(10,Math.floor(An(t.max))-1)),null===t.max&&(t.max=0!==t.min?Math.pow(10,Math.floor(An(t.min))+1):n),null===t.minNotZero&&(t.min>0?t.minNotZero=t.min:t.max<1?t.minNotZero=Math.pow(10,Math.floor(An(t.max))):t.minNotZero=r)},buildTicks:function(){var t=this,e=t.options.ticks,r=!t.isHorizontal(),n={min:Rn(e.min),max:Rn(e.max)},o=t.ticks=Fn(n,t);t.max=st.max(o),t.min=st.min(o),e.reverse?(r=!r,t.start=t.max,t.end=t.min):(t.start=t.min,t.end=t.max),r&&o.reverse()},convertTicksToLabels:function(){this.tickValues=this.ticks.slice(),_n.prototype.convertTicksToLabels.call(this)},getLabelForIndex:function(t,e){return this._getScaleLabel(this.chart.data.datasets[e].data[t])},getPixelForTick:function(t){var e=this.tickValues;return t<0||t>e.length-1?null:this.getPixelForValue(e[t])},_getFirstTickValue:function(t){var e=Math.floor(An(t));return Math.floor(t/Math.pow(10,e))*Math.pow(10,e)},_configure:function(){var t=this,e=t.min,r=0;_n.prototype._configure.call(t),0===e&&(e=t._getFirstTickValue(t.minNotZero),r=Dn(t.options.ticks.fontSize,K.global.defaultFontSize)/t._length),t._startValue=An(e),t._valueOffset=r,t._valueRange=(An(t.max)-An(e))/(1-r)},getPixelForValue:function(t){var e=this,r=0;return(t=+e.getRightValue(t))>e.min&&t>0&&(r=(An(t)-e._startValue)/e._valueRange+e._valueOffset),e.getPixelForDecimal(r)},getValueForPixel:function(t){var e=this,r=e.getDecimalForPixel(t);return 0===r&&0===e.min?0:Math.pow(10,e._startValue+(r-e._valueOffset)*e._valueRange)}}),zn=qn;Gn._defaults=zn;var Vn=st.valueOrDefault,Zn=st.valueAtIndexOrDefault,Bn=st.options.resolve,Hn={display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,color:"rgba(0,0,0,0.1)",lineWidth:1,borderDash:[],borderDashOffset:0},gridLines:{circular:!1},ticks:{showLabelBackdrop:!0,backdropColor:"rgba(255,255,255,0.75)",backdropPaddingY:2,backdropPaddingX:2,callback:Kr.formatters.linear},pointLabels:{display:!0,fontSize:10,callback:function(t){return t}}};function Un(t){var e=t.ticks;return e.display&&t.display?Vn(e.fontSize,K.global.defaultFontSize)+2*e.backdropPaddingY:0}function Yn(t,e,r){return st.isArray(r)?{w:st.longestText(t,t.font,r),h:r.length*e}:{w:t.measureText(r).width,h:e}}function Wn(t,e,r,n,o){return t===n||t===o?{start:e-r/2,end:e+r/2}:t<n||t>o?{start:e-r,end:e}:{start:e,end:e+r}}function Xn(t){var e,r,n,o=st.options._parseFont(t.options.pointLabels),i={l:0,r:t.width,t:0,b:t.height-t.paddingTop},a={};t.ctx.font=o.string,t._pointLabelSizes=[];var s=t.chart.data.labels.length;for(e=0;e<s;e++){n=t.getPointPosition(e,t.drawingArea+5),r=Yn(t.ctx,o.lineHeight,t.pointLabels[e]),t._pointLabelSizes[e]=r;var c=t.getIndexAngle(e),l=st.toDegrees(c)%360,u=Wn(l,n.x,r.w,0,180),d=Wn(l,n.y,r.h,90,270);u.start<i.l&&(i.l=u.start,a.l=c),u.end>i.r&&(i.r=u.end,a.r=c),d.start<i.t&&(i.t=d.start,a.t=c),d.end>i.b&&(i.b=d.end,a.b=c)}t.setReductions(t.drawingArea,i,a)}function Qn(t){return 0===t||180===t?"center":t<180?"left":"right"}function Kn(t,e,r,n){var o,i,a=r.y+n/2;if(st.isArray(e))for(o=0,i=e.length;o<i;++o)t.fillText(e[o],r.x,a),a+=n;else t.fillText(e,r.x,a)}function Jn(t,e,r){90===t||270===t?r.y-=e.h/2:(t>270||t<90)&&(r.y-=e.h)}function to(t){var e=t.ctx,r=t.options,n=r.pointLabels,o=Un(r),i=t.getDistanceFromCenterForValue(r.ticks.reverse?t.min:t.max),a=st.options._parseFont(n);e.save(),e.font=a.string,e.textBaseline="middle";for(var s=t.chart.data.labels.length-1;s>=0;s--){var c=0===s?o/2:0,l=t.getPointPosition(s,i+c+5),u=Zn(n.fontColor,s,K.global.defaultFontColor);e.fillStyle=u;var d=t.getIndexAngle(s),h=st.toDegrees(d);e.textAlign=Qn(h),Jn(h,t._pointLabelSizes[s],l),Kn(e,t.pointLabels[s],l,a.lineHeight)}e.restore()}function eo(t,e,r,n){var o,i=t.ctx,a=e.circular,s=t.chart.data.labels.length,c=Zn(e.color,n-1),l=Zn(e.lineWidth,n-1);if((a||s)&&c&&l){if(i.save(),i.strokeStyle=c,i.lineWidth=l,i.setLineDash&&(i.setLineDash(e.borderDash||[]),i.lineDashOffset=e.borderDashOffset||0),i.beginPath(),a)i.arc(t.xCenter,t.yCenter,r,0,2*Math.PI);else{o=t.getPointPosition(0,r),i.moveTo(o.x,o.y);for(var u=1;u<s;u++)o=t.getPointPosition(u,r),i.lineTo(o.x,o.y)}i.closePath(),i.stroke(),i.restore()}}function ro(t){return st.isNumber(t)?t:0}var no=En.extend({setDimensions:function(){var t=this;t.width=t.maxWidth,t.height=t.maxHeight,t.paddingTop=Un(t.options)/2,t.xCenter=Math.floor(t.width/2),t.yCenter=Math.floor((t.height-t.paddingTop)/2),t.drawingArea=Math.min(t.height-t.paddingTop,t.width)/2},determineDataLimits:function(){var t=this,e=t.chart,r=Number.POSITIVE_INFINITY,n=Number.NEGATIVE_INFINITY;st.each(e.data.datasets,(function(o,i){if(e.isDatasetVisible(i)){var a=e.getDatasetMeta(i);st.each(o.data,(function(e,o){var i=+t.getRightValue(e);isNaN(i)||a.data[o].hidden||(r=Math.min(i,r),n=Math.max(i,n))}))}})),t.min=r===Number.POSITIVE_INFINITY?0:r,t.max=n===Number.NEGATIVE_INFINITY?0:n,t.handleTickRangeOptions()},_computeTickLimit:function(){return Math.ceil(this.drawingArea/Un(this.options))},convertTicksToLabels:function(){var t=this;En.prototype.convertTicksToLabels.call(t),t.pointLabels=t.chart.data.labels.map((function(){var e=st.callback(t.options.pointLabels.callback,arguments,t);return e||0===e?e:""}))},getLabelForIndex:function(t,e){return+this.getRightValue(this.chart.data.datasets[e].data[t])},fit:function(){var t=this,e=t.options;e.display&&e.pointLabels.display?Xn(t):t.setCenterPoint(0,0,0,0)},setReductions:function(t,e,r){var n=this,o=e.l/Math.sin(r.l),i=Math.max(e.r-n.width,0)/Math.sin(r.r),a=-e.t/Math.cos(r.t),s=-Math.max(e.b-(n.height-n.paddingTop),0)/Math.cos(r.b);o=ro(o),i=ro(i),a=ro(a),s=ro(s),n.drawingArea=Math.min(Math.floor(t-(o+i)/2),Math.floor(t-(a+s)/2)),n.setCenterPoint(o,i,a,s)},setCenterPoint:function(t,e,r,n){var o=this,i=o.width-e-o.drawingArea,a=t+o.drawingArea,s=r+o.drawingArea,c=o.height-o.paddingTop-n-o.drawingArea;o.xCenter=Math.floor((a+i)/2+o.left),o.yCenter=Math.floor((s+c)/2+o.top+o.paddingTop)},getIndexAngle:function(t){var e=this.chart,r=(t*(360/e.data.labels.length)+((e.options||{}).startAngle||0))%360;return(r<0?r+360:r)*Math.PI*2/360},getDistanceFromCenterForValue:function(t){var e=this;if(st.isNullOrUndef(t))return NaN;var r=e.drawingArea/(e.max-e.min);return e.options.ticks.reverse?(e.max-t)*r:(t-e.min)*r},getPointPosition:function(t,e){var r=this,n=r.getIndexAngle(t)-Math.PI/2;return{x:Math.cos(n)*e+r.xCenter,y:Math.sin(n)*e+r.yCenter}},getPointPositionForValue:function(t,e){return this.getPointPosition(t,this.getDistanceFromCenterForValue(e))},getBasePosition:function(t){var e=this,r=e.min,n=e.max;return e.getPointPositionForValue(t||0,e.beginAtZero?0:r<0&&n<0?n:r>0&&n>0?r:0)},_drawGrid:function(){var t,e,r,n=this,o=n.ctx,i=n.options,a=i.gridLines,s=i.angleLines,c=Vn(s.lineWidth,a.lineWidth),l=Vn(s.color,a.color);if(i.pointLabels.display&&to(n),a.display&&st.each(n.ticks,(function(t,r){0!==r&&(e=n.getDistanceFromCenterForValue(n.ticksAsNumbers[r]),eo(n,a,e,r))})),s.display&&c&&l){for(o.save(),o.lineWidth=c,o.strokeStyle=l,o.setLineDash&&(o.setLineDash(Bn([s.borderDash,a.borderDash,[]])),o.lineDashOffset=Bn([s.borderDashOffset,a.borderDashOffset,0])),t=n.chart.data.labels.length-1;t>=0;t--)e=n.getDistanceFromCenterForValue(i.ticks.reverse?n.min:n.max),r=n.getPointPosition(t,e),o.beginPath(),o.moveTo(n.xCenter,n.yCenter),o.lineTo(r.x,r.y),o.stroke();o.restore()}},_drawLabels:function(){var t=this,e=t.ctx,r=t.options.ticks;if(r.display){var n,o,i=t.getIndexAngle(0),a=st.options._parseFont(r),s=Vn(r.fontColor,K.global.defaultFontColor);e.save(),e.font=a.string,e.translate(t.xCenter,t.yCenter),e.rotate(i),e.textAlign="center",e.textBaseline="middle",st.each(t.ticks,(function(i,c){(0!==c||r.reverse)&&(n=t.getDistanceFromCenterForValue(t.ticksAsNumbers[c]),r.showLabelBackdrop&&(o=e.measureText(i).width,e.fillStyle=r.backdropColor,e.fillRect(-o/2-r.backdropPaddingX,-n-a.size/2-r.backdropPaddingY,o+2*r.backdropPaddingX,a.size+2*r.backdropPaddingY)),e.fillStyle=s,e.fillText(i,0,-n))})),e.restore()}},_drawTitle:st.noop}),oo=Hn;no._defaults=oo;var io=st._deprecated,ao=st.options.resolve,so=st.valueOrDefault,co=Number.MIN_SAFE_INTEGER||-9007199254740991,lo=Number.MAX_SAFE_INTEGER||9007199254740991,uo={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},ho=Object.keys(uo);function fo(t,e){return t-e}function po(t){var e,r,n,o={},i=[];for(e=0,r=t.length;e<r;++e)o[n=t[e]]||(o[n]=!0,i.push(n));return i}function mo(t){return st.valueOrDefault(t.time.min,t.ticks.min)}function vo(t){return st.valueOrDefault(t.time.max,t.ticks.max)}function go(t,e,r,n){if("linear"===n||!t.length)return[{time:e,pos:0},{time:r,pos:1}];var o,i,a,s,c,l=[],u=[e];for(o=0,i=t.length;o<i;++o)(s=t[o])>e&&s<r&&u.push(s);for(u.push(r),o=0,i=u.length;o<i;++o)c=u[o+1],a=u[o-1],s=u[o],void 0!==a&&void 0!==c&&Math.round((c+a)/2)===s||l.push({time:s,pos:o/(i-1)});return l}function yo(t,e,r){for(var n,o,i,a=0,s=t.length-1;a>=0&&a<=s;){if(o=t[(n=a+s>>1)-1]||null,i=t[n],!o)return{lo:null,hi:i};if(i[e]<r)a=n+1;else{if(!(o[e]>r))return{lo:o,hi:i};s=n-1}}return{lo:i,hi:null}}function _o(t,e,r,n){var o=yo(t,e,r),i=o.lo?o.hi?o.lo:t[t.length-2]:t[0],a=o.lo?o.hi?o.hi:t[t.length-1]:t[1],s=a[e]-i[e],c=s?(r-i[e])/s:0,l=(a[n]-i[n])*c;return i[n]+l}function bo(t,e){var r=t._adapter,n=t.options.time,o=n.parser,i=o||n.format,a=e;return"function"==typeof o&&(a=o(a)),st.isFinite(a)||(a="string"==typeof i?r.parse(a,i):r.parse(a)),null!==a?+a:(o||"function"!=typeof i||(a=i(e),st.isFinite(a)||(a=r.parse(a))),a)}function xo(t,e){if(st.isNullOrUndef(e))return null;var r=t.options.time,n=bo(t,t.getRightValue(e));return null===n||r.round&&(n=+t._adapter.startOf(n,r.round)),n}function wo(t,e,r,n){var o,i,a,s=ho.length;for(o=ho.indexOf(t);o<s-1;++o)if(a=(i=uo[ho[o]]).steps?i.steps:lo,i.common&&Math.ceil((r-e)/(a*i.size))<=n)return ho[o];return ho[s-1]}function Co(t,e,r,n,o){var i,a;for(i=ho.length-1;i>=ho.indexOf(r);i--)if(a=ho[i],uo[a].common&&t._adapter.diff(o,n,a)>=e-1)return a;return ho[r?ho.indexOf(r):0]}function ko(t){for(var e=ho.indexOf(t)+1,r=ho.length;e<r;++e)if(uo[ho[e]].common)return ho[e]}function Lo(t,e,r,n){var o,i=t._adapter,a=t.options,s=a.time,c=s.unit||wo(s.minUnit,e,r,n),l=ao([s.stepSize,s.unitStepSize,1]),u="week"===c&&s.isoWeekday,d=e,h=[];if(u&&(d=+i.startOf(d,"isoWeek",u)),d=+i.startOf(d,u?"day":c),i.diff(r,e,c)>1e5*l)throw e+" and "+r+" are too far apart with stepSize of "+l+" "+c;for(o=d;o<r;o=+i.add(o,l,c))h.push(o);return o!==r&&"ticks"!==a.bounds||h.push(o),h}function So(t,e,r,n,o){var i,a,s=0,c=0;return o.offset&&e.length&&(i=_o(t,"time",e[0],"pos"),s=1===e.length?1-i:(_o(t,"time",e[1],"pos")-i)/2,a=_o(t,"time",e[e.length-1],"pos"),c=1===e.length?a:(a-_o(t,"time",e[e.length-2],"pos"))/2),{start:s,end:c,factor:1/(s+1+c)}}function Eo(t,e,r,n){var o,i,a=t._adapter,s=+a.startOf(e[0].value,n),c=e[e.length-1].value;for(o=s;o<=c;o=+a.add(o,1,n))(i=r[o])>=0&&(e[i].major=!0);return e}function Mo(t,e,r){var n,o,i=[],a={},s=e.length;for(n=0;n<s;++n)a[o=e[n]]=n,i.push({value:o,major:!1});return 0!==s&&r?Eo(t,i,a,r):i}var Oo={position:"bottom",distribution:"linear",bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,displayFormat:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{autoSkip:!1,source:"auto",major:{enabled:!1}}},Po=_n.extend({initialize:function(){this.mergeTicksOptions(),_n.prototype.initialize.call(this)},update:function(){var t=this,e=t.options,r=e.time||(e.time={}),n=t._adapter=new Qr._date(e.adapters.date);return io("time scale",r.format,"time.format","time.parser"),io("time scale",r.min,"time.min","ticks.min"),io("time scale",r.max,"time.max","ticks.max"),st.mergeIf(r.displayFormats,n.formats()),_n.prototype.update.apply(t,arguments)},getRightValue:function(t){return t&&void 0!==t.t&&(t=t.t),_n.prototype.getRightValue.call(this,t)},determineDataLimits:function(){var t,e,r,n,o,i,a,s=this,c=s.chart,l=s._adapter,u=s.options,d=u.time.unit||"day",h=lo,f=co,p=[],m=[],v=[],g=s._getLabels();for(t=0,r=g.length;t<r;++t)v.push(xo(s,g[t]));for(t=0,r=(c.data.datasets||[]).length;t<r;++t)if(c.isDatasetVisible(t))if(o=c.data.datasets[t].data,st.isObject(o[0]))for(m[t]=[],e=0,n=o.length;e<n;++e)i=xo(s,o[e]),p.push(i),m[t][e]=i;else m[t]=v.slice(0),a||(p=p.concat(v),a=!0);else m[t]=[];v.length&&(h=Math.min(h,v[0]),f=Math.max(f,v[v.length-1])),p.length&&(p=r>1?po(p).sort(fo):p.sort(fo),h=Math.min(h,p[0]),f=Math.max(f,p[p.length-1])),h=xo(s,mo(u))||h,f=xo(s,vo(u))||f,h=h===lo?+l.startOf(Date.now(),d):h,f=f===co?+l.endOf(Date.now(),d)+1:f,s.min=Math.min(h,f),s.max=Math.max(h+1,f),s._table=[],s._timestamps={data:p,datasets:m,labels:v}},buildTicks:function(){var t,e,r,n=this,o=n.min,i=n.max,a=n.options,s=a.ticks,c=a.time,l=n._timestamps,u=[],d=n.getLabelCapacity(o),h=s.source,f=a.distribution;for(l="data"===h||"auto"===h&&"series"===f?l.data:"labels"===h?l.labels:Lo(n,o,i,d),"ticks"===a.bounds&&l.length&&(o=l[0],i=l[l.length-1]),o=xo(n,mo(a))||o,i=xo(n,vo(a))||i,t=0,e=l.length;t<e;++t)(r=l[t])>=o&&r<=i&&u.push(r);return n.min=o,n.max=i,n._unit=c.unit||(s.autoSkip?wo(c.minUnit,n.min,n.max,d):Co(n,u.length,c.minUnit,n.min,n.max)),n._majorUnit=s.major.enabled&&"year"!==n._unit?ko(n._unit):void 0,n._table=go(n._timestamps.data,o,i,f),n._offsets=So(n._table,u,o,i,a),s.reverse&&u.reverse(),Mo(n,u,n._majorUnit)},getLabelForIndex:function(t,e){var r=this,n=r._adapter,o=r.chart.data,i=r.options.time,a=o.labels&&t<o.labels.length?o.labels[t]:"",s=o.datasets[e].data[t];return st.isObject(s)&&(a=r.getRightValue(s)),i.tooltipFormat?n.format(bo(r,a),i.tooltipFormat):"string"==typeof a?a:n.format(bo(r,a),i.displayFormats.datetime)},tickFormatFunction:function(t,e,r,n){var o=this,i=o._adapter,a=o.options,s=a.time.displayFormats,c=s[o._unit],l=o._majorUnit,u=s[l],d=r[e],h=a.ticks,f=l&&u&&d&&d.major,p=i.format(t,n||(f?u:c)),m=f?h.major:h.minor,v=ao([m.callback,m.userCallback,h.callback,h.userCallback]);return v?v(p,e,r):p},convertTicksToLabels:function(t){var e,r,n=[];for(e=0,r=t.length;e<r;++e)n.push(this.tickFormatFunction(t[e].value,e,t));return n},getPixelForOffset:function(t){var e=this,r=e._offsets,n=_o(e._table,"time",t,"pos");return e.getPixelForDecimal((r.start+n)*r.factor)},getPixelForValue:function(t,e,r){var n=this,o=null;if(void 0!==e&&void 0!==r&&(o=n._timestamps.datasets[r][e]),null===o&&(o=xo(n,t)),null!==o)return n.getPixelForOffset(o)},getPixelForTick:function(t){var e=this.getTicks();return t>=0&&t<e.length?this.getPixelForOffset(e[t].value):null},getValueForPixel:function(t){var e=this,r=e._offsets,n=e.getDecimalForPixel(t)/r.factor-r.end,o=_o(e._table,"pos",n,"time");return e._adapter._create(o)},_getLabelSize:function(t){var e=this,r=e.options.ticks,n=e.ctx.measureText(t).width,o=st.toRadians(e.isHorizontal()?r.maxRotation:r.minRotation),i=Math.cos(o),a=Math.sin(o),s=so(r.fontSize,K.global.defaultFontSize);return{w:n*i+s*a,h:n*a+s*i}},getLabelWidth:function(t){return this._getLabelSize(t).w},getLabelCapacity:function(t){var e=this,r=e.options.time,n=r.displayFormats,o=n[r.unit]||n.millisecond,i=e.tickFormatFunction(t,0,Mo(e,[t],e._majorUnit),o),a=e._getLabelSize(i),s=Math.floor(e.isHorizontal()?e.width/a.w:e.height/a.h);return e.options.offset&&s--,s>0?s:1}}),jo=Oo;Po._defaults=jo;var No={category:wn,linear:$n,logarithmic:Gn,radialLinear:no,time:Po},To={datetime:"MMM D, YYYY, h:mm:ss a",millisecond:"h:mm:ss.SSS a",second:"h:mm:ss a",minute:"h:mm a",hour:"hA",day:"MMM D",week:"ll",month:"MMM YYYY",quarter:"[Q]Q - YYYY",year:"YYYY"};Qr._date.override("function"==typeof t?{_id:"moment",formats:function(){return To},parse:function(e,r){return"string"==typeof e&&"string"==typeof r?e=t(e,r):e instanceof t||(e=t(e)),e.isValid()?e.valueOf():null},format:function(e,r){return t(e).format(r)},add:function(e,r,n){return t(e).add(r,n).valueOf()},diff:function(e,r,n){return t(e).diff(t(r),n)},startOf:function(e,r,n){return e=t(e),"isoWeek"===r?e.isoWeekday(n).valueOf():e.startOf(r).valueOf()},endOf:function(e,r){return t(e).endOf(r).valueOf()},_create:function(e){return t(e)}}:{}),K._set("global",{plugins:{filler:{propagate:!0}}});var $o={dataset:function(t){var e=t.fill,r=t.chart,n=r.getDatasetMeta(e),o=n&&r.isDatasetVisible(e)&&n.dataset._children||[],i=o.length||0;return i?function(t,e){return e<i&&o[e]._view||null}:null},boundary:function(t){var e=t.boundary,r=e?e.x:null,n=e?e.y:null;return st.isArray(e)?function(t,r){return e[r]}:function(t){return{x:null===r?t.x:r,y:null===n?t.y:n}}}};function Io(t,e,r){var n,o=t._model||{},i=o.fill;if(void 0===i&&(i=!!o.backgroundColor),!1===i||null===i)return!1;if(!0===i)return"origin";if(n=parseFloat(i,10),isFinite(n)&&Math.floor(n)===n)return"-"!==i[0]&&"+"!==i[0]||(n=e+n),!(n===e||n<0||n>=r)&&n;switch(i){case"bottom":return"start";case"top":return"end";case"zero":return"origin";case"origin":case"start":case"end":return i;default:return!1}}function Do(t){var e,r=t.el._model||{},n=t.el._scale||{},o=t.fill,i=null;if(isFinite(o))return null;if("start"===o?i=void 0===r.scaleBottom?n.bottom:r.scaleBottom:"end"===o?i=void 0===r.scaleTop?n.top:r.scaleTop:void 0!==r.scaleZero?i=r.scaleZero:n.getBasePixel&&(i=n.getBasePixel()),null!=i){if(void 0!==i.x&&void 0!==i.y)return i;if(st.isFinite(i))return{x:(e=n.isHorizontal())?i:null,y:e?null:i}}return null}function Ao(t){var e,r,n,o,i,a=t.el._scale,s=a.options,c=a.chart.data.labels.length,l=t.fill,u=[];if(!c)return null;for(e=s.ticks.reverse?a.max:a.min,r=s.ticks.reverse?a.min:a.max,n=a.getPointPositionForValue(0,e),o=0;o<c;++o)i="start"===l||"end"===l?a.getPointPositionForValue(o,"start"===l?e:r):a.getBasePosition(o),s.gridLines.circular&&(i.cx=n.x,i.cy=n.y,i.angle=a.getIndexAngle(o)-Math.PI/2),u.push(i);return u}function Fo(t){return(t.el._scale||{}).getPointPositionForValue?Ao(t):Do(t)}function qo(t,e,r){var n,o=t[e].fill,i=[e];if(!r)return o;for(;!1!==o&&-1===i.indexOf(o);){if(!isFinite(o))return o;if(!(n=t[o]))return!1;if(n.visible)return o;i.push(o),o=n.fill}return!1}function Ro(t){var e=t.fill,r="dataset";return!1===e?null:(isFinite(e)||(r="boundary"),$o[r](t))}function Go(t){return t&&!t.skip}function zo(t,e,r,n,o){var i,a,s,c;if(n&&o){for(t.moveTo(e[0].x,e[0].y),i=1;i<n;++i)st.canvas.lineTo(t,e[i-1],e[i]);if(void 0===r[0].angle)for(t.lineTo(r[o-1].x,r[o-1].y),i=o-1;i>0;--i)st.canvas.lineTo(t,r[i],r[i-1],!0);else for(a=r[0].cx,s=r[0].cy,c=Math.sqrt(Math.pow(r[0].x-a,2)+Math.pow(r[0].y-s,2)),i=o-1;i>0;--i)t.arc(a,s,c,r[i].angle,r[i-1].angle,!0)}}function Vo(t,e,r,n,o,i){var a,s,c,l,u,d,h,f,p=e.length,m=n.spanGaps,v=[],g=[],y=0,_=0;for(t.beginPath(),a=0,s=p;a<s;++a)u=r(l=e[c=a%p]._view,c,n),d=Go(l),h=Go(u),i&&void 0===f&&d&&(s=p+(f=a+1)),d&&h?(y=v.push(l),_=g.push(u)):y&&_&&(m?(d&&v.push(l),h&&g.push(u)):(zo(t,v,g,y,_),y=_=0,v=[],g=[]));zo(t,v,g,y,_),t.closePath(),t.fillStyle=o,t.fill()}var Zo={id:"filler",afterDatasetsUpdate:function(t,e){var r,n,o,i,a=(t.data.datasets||[]).length,s=e.propagate,c=[];for(n=0;n<a;++n)i=null,(o=(r=t.getDatasetMeta(n)).dataset)&&o._model&&o instanceof Ut.Line&&(i={visible:t.isDatasetVisible(n),fill:Io(o,n,a),chart:t,el:o}),r.$filler=i,c.push(i);for(n=0;n<a;++n)(i=c[n])&&(i.fill=qo(c,n,s),i.boundary=Fo(i),i.mapper=Ro(i))},beforeDatasetsDraw:function(t){var e,r,n,o,i,a,s,c=t._getSortedVisibleDatasetMetas(),l=t.ctx;for(r=c.length-1;r>=0;--r)(e=c[r].$filler)&&e.visible&&(o=(n=e.el)._view,i=n._children||[],a=e.mapper,s=o.backgroundColor||K.global.defaultColor,a&&s&&i.length&&(st.canvas.clipArea(l,t.chartArea),Vo(l,i,a,o,s,n._loop),st.canvas.unclipArea(l)))}},Bo=st.rtl.getRtlAdapter,Ho=st.noop,Uo=st.valueOrDefault;function Yo(t,e){return t.usePointStyle&&t.boxWidth>e?e:t.boxWidth}K._set("global",{legend:{display:!0,position:"top",align:"center",fullWidth:!0,reverse:!1,weight:1e3,onClick:function(t,e){var r=e.datasetIndex,n=this.chart,o=n.getDatasetMeta(r);o.hidden=null===o.hidden?!n.data.datasets[r].hidden:null,n.update()},onHover:null,onLeave:null,labels:{boxWidth:40,padding:10,generateLabels:function(t){var e=t.data.datasets,r=t.options.legend||{},n=r.labels&&r.labels.usePointStyle;return t._getSortedDatasetMetas().map((function(r){var o=r.controller.getStyle(n?0:void 0);return{text:e[r.index].label,fillStyle:o.backgroundColor,hidden:!t.isDatasetVisible(r.index),lineCap:o.borderCapStyle,lineDash:o.borderDash,lineDashOffset:o.borderDashOffset,lineJoin:o.borderJoinStyle,lineWidth:o.borderWidth,strokeStyle:o.borderColor,pointStyle:o.pointStyle,rotation:o.rotation,datasetIndex:r.index}}),this)}}},legendCallback:function(t){var e,r,n,o=document.createElement("ul"),i=t.data.datasets;for(o.setAttribute("class",t.id+"-legend"),e=0,r=i.length;e<r;e++)(n=o.appendChild(document.createElement("li"))).appendChild(document.createElement("span")).style.backgroundColor=i[e].backgroundColor,i[e].label&&n.appendChild(document.createTextNode(i[e].label));return o.outerHTML}});var Wo=mt.extend({initialize:function(t){var e=this;st.extend(e,t),e.legendHitBoxes=[],e._hoveredItem=null,e.doughnutMode=!1},beforeUpdate:Ho,update:function(t,e,r){var n=this;return n.beforeUpdate(),n.maxWidth=t,n.maxHeight=e,n.margins=r,n.beforeSetDimensions(),n.setDimensions(),n.afterSetDimensions(),n.beforeBuildLabels(),n.buildLabels(),n.afterBuildLabels(),n.beforeFit(),n.fit(),n.afterFit(),n.afterUpdate(),n.minSize},afterUpdate:Ho,beforeSetDimensions:Ho,setDimensions:function(){var t=this;t.isHorizontal()?(t.width=t.maxWidth,t.left=0,t.right=t.width):(t.height=t.maxHeight,t.top=0,t.bottom=t.height),t.paddingLeft=0,t.paddingTop=0,t.paddingRight=0,t.paddingBottom=0,t.minSize={width:0,height:0}},afterSetDimensions:Ho,beforeBuildLabels:Ho,buildLabels:function(){var t=this,e=t.options.labels||{},r=st.callback(e.generateLabels,[t.chart],t)||[];e.filter&&(r=r.filter((function(r){return e.filter(r,t.chart.data)}))),t.options.reverse&&r.reverse(),t.legendItems=r},afterBuildLabels:Ho,beforeFit:Ho,fit:function(){var t=this,e=t.options,r=e.labels,n=e.display,o=t.ctx,i=st.options._parseFont(r),a=i.size,s=t.legendHitBoxes=[],c=t.minSize,l=t.isHorizontal();if(l?(c.width=t.maxWidth,c.height=n?10:0):(c.width=n?10:0,c.height=t.maxHeight),n){if(o.font=i.string,l){var u=t.lineWidths=[0],d=0;o.textAlign="left",o.textBaseline="middle",st.each(t.legendItems,(function(t,e){var n=Yo(r,a)+a/2+o.measureText(t.text).width;(0===e||u[u.length-1]+n+2*r.padding>c.width)&&(d+=a+r.padding,u[u.length-(e>0?0:1)]=0),s[e]={left:0,top:0,width:n,height:a},u[u.length-1]+=n+r.padding})),c.height+=d}else{var h=r.padding,f=t.columnWidths=[],p=t.columnHeights=[],m=r.padding,v=0,g=0;st.each(t.legendItems,(function(t,e){var n=Yo(r,a)+a/2+o.measureText(t.text).width;e>0&&g+a+2*h>c.height&&(m+=v+r.padding,f.push(v),p.push(g),v=0,g=0),v=Math.max(v,n),g+=a+h,s[e]={left:0,top:0,width:n,height:a}})),m+=v,f.push(v),p.push(g),c.width+=m}t.width=c.width,t.height=c.height}else t.width=c.width=t.height=c.height=0},afterFit:Ho,isHorizontal:function(){return"top"===this.options.position||"bottom"===this.options.position},draw:function(){var t=this,e=t.options,r=e.labels,n=K.global,o=n.defaultColor,i=n.elements.line,a=t.height,s=t.columnHeights,c=t.width,l=t.lineWidths;if(e.display){var u,d=Bo(e.rtl,t.left,t.minSize.width),h=t.ctx,f=Uo(r.fontColor,n.defaultFontColor),p=st.options._parseFont(r),m=p.size;h.textAlign=d.textAlign("left"),h.textBaseline="middle",h.lineWidth=.5,h.strokeStyle=f,h.fillStyle=f,h.font=p.string;var v=Yo(r,m),g=t.legendHitBoxes,y=function(t,e,n){if(!(isNaN(v)||v<=0)){h.save();var a=Uo(n.lineWidth,i.borderWidth);if(h.fillStyle=Uo(n.fillStyle,o),h.lineCap=Uo(n.lineCap,i.borderCapStyle),h.lineDashOffset=Uo(n.lineDashOffset,i.borderDashOffset),h.lineJoin=Uo(n.lineJoin,i.borderJoinStyle),h.lineWidth=a,h.strokeStyle=Uo(n.strokeStyle,o),h.setLineDash&&h.setLineDash(Uo(n.lineDash,i.borderDash)),r&&r.usePointStyle){var s=v*Math.SQRT2/2,c=d.xPlus(t,v/2),l=e+m/2;st.canvas.drawPoint(h,n.pointStyle,s,c,l,n.rotation)}else h.fillRect(d.leftForLtr(t,v),e,v,m),0!==a&&h.strokeRect(d.leftForLtr(t,v),e,v,m);h.restore()}},_=function(t,e,r,n){var o=m/2,i=d.xPlus(t,v+o),a=e+o;h.fillText(r.text,i,a),r.hidden&&(h.beginPath(),h.lineWidth=2,h.moveTo(i,a),h.lineTo(d.xPlus(i,n),a),h.stroke())},b=function(t,n){switch(e.align){case"start":return r.padding;case"end":return t-n;default:return(t-n+r.padding)/2}},x=t.isHorizontal();u=x?{x:t.left+b(c,l[0]),y:t.top+r.padding,line:0}:{x:t.left+r.padding,y:t.top+b(a,s[0]),line:0},st.rtl.overrideTextDirection(t.ctx,e.textDirection);var w=m+r.padding;st.each(t.legendItems,(function(e,n){var o=h.measureText(e.text).width,i=v+m/2+o,f=u.x,p=u.y;d.setWidth(t.minSize.width),x?n>0&&f+i+r.padding>t.left+t.minSize.width&&(p=u.y+=w,u.line++,f=u.x=t.left+b(c,l[u.line])):n>0&&p+w>t.top+t.minSize.height&&(f=u.x=f+t.columnWidths[u.line]+r.padding,u.line++,p=u.y=t.top+b(a,s[u.line]));var C=d.x(f);y(C,p,e),g[n].left=d.leftForLtr(C,g[n].width),g[n].top=p,_(C,p,e,o),x?u.x+=i+r.padding:u.y+=w})),st.rtl.restoreTextDirection(t.ctx,e.textDirection)}},_getLegendItemAt:function(t,e){var r,n,o,i=this;if(t>=i.left&&t<=i.right&&e>=i.top&&e<=i.bottom)for(o=i.legendHitBoxes,r=0;r<o.length;++r)if(t>=(n=o[r]).left&&t<=n.left+n.width&&e>=n.top&&e<=n.top+n.height)return i.legendItems[r];return null},handleEvent:function(t){var e,r=this,n=r.options,o="mouseup"===t.type?"click":t.type;if("mousemove"===o){if(!n.onHover&&!n.onLeave)return}else{if("click"!==o)return;if(!n.onClick)return}e=r._getLegendItemAt(t.x,t.y),"click"===o?e&&n.onClick&&n.onClick.call(r,t.native,e):(n.onLeave&&e!==r._hoveredItem&&(r._hoveredItem&&n.onLeave.call(r,t.native,r._hoveredItem),r._hoveredItem=e),n.onHover&&e&&n.onHover.call(r,t.native,e))}});function Xo(t,e){var r=new Wo({ctx:t.ctx,options:e,chart:t});Be.configure(t,r,e),Be.addBox(t,r),t.legend=r}var Qo={id:"legend",_element:Wo,beforeInit:function(t){var e=t.options.legend;e&&Xo(t,e)},beforeUpdate:function(t){var e=t.options.legend,r=t.legend;e?(st.mergeIf(e,K.global.legend),r?(Be.configure(t,r,e),r.options=e):Xo(t,e)):r&&(Be.removeBox(t,r),delete t.legend)},afterEvent:function(t,e){var r=t.legend;r&&r.handleEvent(e)}},Ko=st.noop;K._set("global",{title:{display:!1,fontStyle:"bold",fullWidth:!0,padding:10,position:"top",text:"",weight:2e3}});var Jo=mt.extend({initialize:function(t){var e=this;st.extend(e,t),e.legendHitBoxes=[]},beforeUpdate:Ko,update:function(t,e,r){var n=this;return n.beforeUpdate(),n.maxWidth=t,n.maxHeight=e,n.margins=r,n.beforeSetDimensions(),n.setDimensions(),n.afterSetDimensions(),n.beforeBuildLabels(),n.buildLabels(),n.afterBuildLabels(),n.beforeFit(),n.fit(),n.afterFit(),n.afterUpdate(),n.minSize},afterUpdate:Ko,beforeSetDimensions:Ko,setDimensions:function(){var t=this;t.isHorizontal()?(t.width=t.maxWidth,t.left=0,t.right=t.width):(t.height=t.maxHeight,t.top=0,t.bottom=t.height),t.paddingLeft=0,t.paddingTop=0,t.paddingRight=0,t.paddingBottom=0,t.minSize={width:0,height:0}},afterSetDimensions:Ko,beforeBuildLabels:Ko,buildLabels:Ko,afterBuildLabels:Ko,beforeFit:Ko,fit:function(){var t,e=this,r=e.options,n=e.minSize={},o=e.isHorizontal();r.display?(t=(st.isArray(r.text)?r.text.length:1)*st.options._parseFont(r).lineHeight+2*r.padding,e.width=n.width=o?e.maxWidth:t,e.height=n.height=o?t:e.maxHeight):e.width=n.width=e.height=n.height=0},afterFit:Ko,isHorizontal:function(){var t=this.options.position;return"top"===t||"bottom"===t},draw:function(){var t=this,e=t.ctx,r=t.options;if(r.display){var n,o,i,a=st.options._parseFont(r),s=a.lineHeight,c=s/2+r.padding,l=0,u=t.top,d=t.left,h=t.bottom,f=t.right;e.fillStyle=st.valueOrDefault(r.fontColor,K.global.defaultFontColor),e.font=a.string,t.isHorizontal()?(o=d+(f-d)/2,i=u+c,n=f-d):(o="left"===r.position?d+c:f-c,i=u+(h-u)/2,n=h-u,l=Math.PI*("left"===r.position?-.5:.5)),e.save(),e.translate(o,i),e.rotate(l),e.textAlign="center",e.textBaseline="middle";var p=r.text;if(st.isArray(p))for(var m=0,v=0;v<p.length;++v)e.fillText(p[v],0,m,n),m+=s;else e.fillText(p,0,0,n);e.restore()}}});function ti(t,e){var r=new Jo({ctx:t.ctx,options:e,chart:t});Be.configure(t,r,e),Be.addBox(t,r),t.titleBlock=r}var ei={},ri=Zo,ni=Qo,oi={id:"title",_element:Jo,beforeInit:function(t){var e=t.options.title;e&&ti(t,e)},beforeUpdate:function(t){var e=t.options.title,r=t.titleBlock;e?(st.mergeIf(e,K.global.title),r?(Be.configure(t,r,e),r.options=e):ti(t,e)):r&&(Be.removeBox(t,r),delete t.titleBlock)}};for(var ii in ei.filler=ri,ei.legend=ni,ei.title=oi,Ur.helpers=st,Yr(),Ur._adapters=Qr,Ur.Animation=gt,Ur.animationService=yt,Ur.controllers=Le,Ur.DatasetController=kt,Ur.defaults=K,Ur.Element=mt,Ur.elements=Ut,Ur.Interaction=Ne,Ur.layouts=Be,Ur.platform=br,Ur.plugins=xr,Ur.Scale=_n,Ur.scaleService=wr,Ur.Ticks=Kr,Ur.Tooltip=Ar,Ur.helpers.each(No,(function(t,e){Ur.scaleService.registerScaleType(e,t,t._defaults)})),ei)ei.hasOwnProperty(ii)&&Ur.plugins.register(ei[ii]);Ur.platform.initialize();var ai=Ur;return"undefined"!=typeof window&&(window.Chart=Ur),Ur.Chart=Ur,Ur.Legend=ei.legend._element,Ur.Title=ei.title._element,Ur.pluginService=Ur.plugins,Ur.PluginBase=Ur.Element.extend({}),Ur.canvasHelpers=Ur.helpers.canvas,Ur.layoutService=Ur.layouts,Ur.LinearScaleBase=En,Ur.helpers.each(["Bar","Bubble","Doughnut","Line","PolarArea","Radar","Scatter"],(function(t){Ur[t]=function(e,r){return new Ur(e,Ur.helpers.merge(r||{},{type:t.charAt(0).toLowerCase()+t.slice(1)}))}})),ai}(function(){try{return r(381)}catch(t){}}())},9523:function(t,e,r){t.exports=function(t){"use strict";function e(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var r=e(t),n=r.default.helpers,o=function(){if("undefined"!=typeof window){if(window.devicePixelRatio)return window.devicePixelRatio;var t=window.screen;if(t)return(t.deviceXDPI||1)/(t.logicalXDPI||1)}return 1}(),i={toTextLines:function(t){var e,r=[];for(t=[].concat(t);t.length;)"string"==typeof(e=t.pop())?r.unshift.apply(r,e.split("\n")):Array.isArray(e)?t.push.apply(t,e):n.isNullOrUndef(t)||r.unshift(""+e);return r},toFontString:function(t){return!t||n.isNullOrUndef(t.size)||n.isNullOrUndef(t.family)?null:(t.style?t.style+" ":"")+(t.weight?t.weight+" ":"")+t.size+"px "+t.family},textSize:function(t,e,r){var n,o=[].concat(e),i=o.length,a=t.font,s=0;for(t.font=r.string,n=0;n<i;++n)s=Math.max(t.measureText(o[n]).width,s);return t.font=a,{height:i*r.lineHeight,width:s}},parseFont:function(t){var e=r.default.defaults.global,o=n.valueOrDefault(t.size,e.defaultFontSize),a={family:n.valueOrDefault(t.family,e.defaultFontFamily),lineHeight:n.options.toLineHeight(t.lineHeight,o),size:o,style:n.valueOrDefault(t.style,e.defaultFontStyle),weight:n.valueOrDefault(t.weight,null),string:""};return a.string=i.toFontString(a),a},bound:function(t,e,r){return Math.max(t,Math.min(e,r))},arrayDiff:function(t,e){var r,n,o,i,a=t.slice(),s=[];for(r=0,o=e.length;r<o;++r)i=e[r],-1===(n=a.indexOf(i))?s.push([i,1]):a.splice(n,1);for(r=0,o=a.length;r<o;++r)s.push([a[r],-1]);return s},rasterize:function(t){return Math.round(t*o)/o}};function a(t,e){var r=e.x,n=e.y;if(null===r)return{x:0,y:-1};if(null===n)return{x:1,y:0};var o=t.x-r,i=t.y-n,a=Math.sqrt(o*o+i*i);return{x:a?o/a:0,y:a?i/a:-1}}function s(t,e,r,n,o){switch(o){case"center":r=n=0;break;case"bottom":r=0,n=1;break;case"right":r=1,n=0;break;case"left":r=-1,n=0;break;case"top":r=0,n=-1;break;case"start":r=-r,n=-n;break;case"end":break;default:o*=Math.PI/180,r=Math.cos(o),n=Math.sin(o)}return{x:t,y:e,vx:r,vy:n}}var c=0,l=1,u=2,d=4,h=8;function f(t,e,r){var n=c;return t<r.left?n|=l:t>r.right&&(n|=u),e<r.top?n|=h:e>r.bottom&&(n|=d),n}function p(t,e){for(var r,n,o,i=t.x0,a=t.y0,s=t.x1,c=t.y1,p=f(i,a,e),m=f(s,c,e);p|m&&!(p&m);)(r=p||m)&h?(n=i+(s-i)*(e.top-a)/(c-a),o=e.top):r&d?(n=i+(s-i)*(e.bottom-a)/(c-a),o=e.bottom):r&u?(o=a+(c-a)*(e.right-i)/(s-i),n=e.right):r&l&&(o=a+(c-a)*(e.left-i)/(s-i),n=e.left),r===p?p=f(i=n,a=o,e):m=f(s=n,c=o,e);return{x0:i,x1:s,y0:a,y1:c}}function m(t,e){var r,n,o=e.anchor,i=t;return e.clamp&&(i=p(i,e.area)),"start"===o?(r=i.x0,n=i.y0):"end"===o?(r=i.x1,n=i.y1):(r=(i.x0+i.x1)/2,n=(i.y0+i.y1)/2),s(r,n,t.vx,t.vy,e.align)}var v={arc:function(t,e){var r=(t.startAngle+t.endAngle)/2,n=Math.cos(r),o=Math.sin(r),i=t.innerRadius,a=t.outerRadius;return m({x0:t.x+n*i,y0:t.y+o*i,x1:t.x+n*a,y1:t.y+o*a,vx:n,vy:o},e)},point:function(t,e){var r=a(t,e.origin),n=r.x*t.radius,o=r.y*t.radius;return m({x0:t.x-n,y0:t.y-o,x1:t.x+n,y1:t.y+o,vx:r.x,vy:r.y},e)},rect:function(t,e){var r=a(t,e.origin),n=t.x,o=t.y,i=0,s=0;return t.horizontal?(n=Math.min(t.x,t.base),i=Math.abs(t.base-t.x)):(o=Math.min(t.y,t.base),s=Math.abs(t.base-t.y)),m({x0:n,y0:o+s,x1:n+i,y1:o,vx:r.x,vy:r.y},e)},fallback:function(t,e){var r=a(t,e.origin);return m({x0:t.x,y0:t.y,x1:t.x,y1:t.y,vx:r.x,vy:r.y},e)}},g=r.default.helpers,y=i.rasterize;function _(t){var e=t.borderWidth||0,r=t.padding,n=t.size.height,o=t.size.width,i=-o/2,a=-n/2;return{frame:{x:i-r.left-e,y:a-r.top-e,w:o+r.width+2*e,h:n+r.height+2*e},text:{x:i,y:a,w:o,h:n}}}function b(t){var e=t._model.horizontal,r=t._scale||e&&t._xScale||t._yScale;if(!r)return null;if(void 0!==r.xCenter&&void 0!==r.yCenter)return{x:r.xCenter,y:r.yCenter};var n=r.getBasePixel();return e?{x:n,y:null}:{x:null,y:n}}function x(t){return t instanceof r.default.elements.Arc?v.arc:t instanceof r.default.elements.Point?v.point:t instanceof r.default.elements.Rectangle?v.rect:v.fallback}function w(t,e,r){var n=r.backgroundColor,o=r.borderColor,i=r.borderWidth;(n||o&&i)&&(t.beginPath(),g.canvas.roundedRect(t,y(e.x)+i/2,y(e.y)+i/2,y(e.w)-i,y(e.h)-i,r.borderRadius),t.closePath(),n&&(t.fillStyle=n,t.fill()),o&&i&&(t.strokeStyle=o,t.lineWidth=i,t.lineJoin="miter",t.stroke()))}function C(t,e,r){var n=r.lineHeight,o=t.w,i=t.x;return"center"===e?i+=o/2:"end"!==e&&"right"!==e||(i+=o),{h:n,w:o,x:i,y:t.y+n/2}}function k(t,e,r){var n=t.shadowBlur,o=r.stroked,i=y(r.x),a=y(r.y),s=y(r.w);o&&t.strokeText(e,i,a,s),r.filled&&(n&&o&&(t.shadowBlur=0),t.fillText(e,i,a,s),n&&o&&(t.shadowBlur=n))}function L(t,e,r,n){var o,i=n.textAlign,a=n.color,s=!!a,c=n.font,l=e.length,u=n.textStrokeColor,d=n.textStrokeWidth,h=u&&d;if(l&&(s||h))for(r=C(r,i,c),t.font=c.string,t.textAlign=i,t.textBaseline="middle",t.shadowBlur=n.textShadowBlur,t.shadowColor=n.textShadowColor,s&&(t.fillStyle=a),h&&(t.lineJoin="round",t.lineWidth=d,t.strokeStyle=u),o=0,l=e.length;o<l;++o)k(t,e[o],{stroked:h,filled:s,w:r.w,x:r.x,y:r.y+r.h*o})}var S=function(t,e,r,n){var o=this;o._config=t,o._index=n,o._model=null,o._rects=null,o._ctx=e,o._el=r};g.extend(S.prototype,{_modelize:function(t,e,n,o){var a=this,s=a._index,c=g.options.resolve,l=i.parseFont(c([n.font,{}],o,s)),u=c([n.color,r.default.defaults.global.defaultFontColor],o,s);return{align:c([n.align,"center"],o,s),anchor:c([n.anchor,"center"],o,s),area:o.chart.chartArea,backgroundColor:c([n.backgroundColor,null],o,s),borderColor:c([n.borderColor,null],o,s),borderRadius:c([n.borderRadius,0],o,s),borderWidth:c([n.borderWidth,0],o,s),clamp:c([n.clamp,!1],o,s),clip:c([n.clip,!1],o,s),color:u,display:t,font:l,lines:e,offset:c([n.offset,0],o,s),opacity:c([n.opacity,1],o,s),origin:b(a._el),padding:g.options.toPadding(c([n.padding,0],o,s)),positioner:x(a._el),rotation:c([n.rotation,0],o,s)*(Math.PI/180),size:i.textSize(a._ctx,e,l),textAlign:c([n.textAlign,"start"],o,s),textShadowBlur:c([n.textShadowBlur,0],o,s),textShadowColor:c([n.textShadowColor,u],o,s),textStrokeColor:c([n.textStrokeColor,u],o,s),textStrokeWidth:c([n.textStrokeWidth,0],o,s)}},update:function(t){var e,r,n,o=this,a=null,s=null,c=o._index,l=o._config,u=g.options.resolve([l.display,!0],t,c);u&&(e=t.dataset.data[c],r=g.valueOrDefault(g.callback(l.formatter,[e,t]),e),(n=g.isNullOrUndef(r)?[]:i.toTextLines(r)).length&&(s=_(a=o._modelize(u,n,l,t)))),o._model=a,o._rects=s},geometry:function(){return this._rects?this._rects.frame:{}},rotation:function(){return this._model?this._model.rotation:0},visible:function(){return this._model&&this._model.opacity},model:function(){return this._model},draw:function(t,e){var r,n=this,o=t.ctx,a=n._model,s=n._rects;this.visible()&&(o.save(),a.clip&&(r=a.area,o.beginPath(),o.rect(r.left,r.top,r.right-r.left,r.bottom-r.top),o.clip()),o.globalAlpha=i.bound(0,a.opacity,1),o.translate(y(e.x),y(e.y)),o.rotate(a.rotation),w(o,s.frame,a),L(o,a.lines,s.text,a),o.restore())}});var E=r.default.helpers,M=Number.MIN_SAFE_INTEGER||-9007199254740991,O=Number.MAX_SAFE_INTEGER||9007199254740991;function P(t,e,r){var n=Math.cos(r),o=Math.sin(r),i=e.x,a=e.y;return{x:i+n*(t.x-i)-o*(t.y-a),y:a+o*(t.x-i)+n*(t.y-a)}}function j(t,e){var r,n,o,i,a,s=O,c=M,l=e.origin;for(r=0;r<t.length;++r)o=(n=t[r]).x-l.x,i=n.y-l.y,a=e.vx*o+e.vy*i,s=Math.min(s,a),c=Math.max(c,a);return{min:s,max:c}}function N(t,e){var r=e.x-t.x,n=e.y-t.y,o=Math.sqrt(r*r+n*n);return{vx:(e.x-t.x)/o,vy:(e.y-t.y)/o,origin:t,ln:o}}var T=function(){this._rotation=0,this._rect={x:0,y:0,w:0,h:0}};function $(t,e,r){var n=e.positioner(t,e),o=n.vx,i=n.vy;if(!o&&!i)return{x:n.x,y:n.y};var a=r.w,s=r.h,c=e.rotation,l=Math.abs(a/2*Math.cos(c))+Math.abs(s/2*Math.sin(c)),u=Math.abs(a/2*Math.sin(c))+Math.abs(s/2*Math.cos(c)),d=1/Math.max(Math.abs(o),Math.abs(i));return l*=o*d,u*=i*d,l+=e.offset*o,u+=e.offset*i,{x:n.x+l,y:n.y+u}}function I(t,e){var r,n,o,i;for(r=t.length-1;r>=0;--r)for(o=t[r].$layout,n=r-1;n>=0&&o._visible;--n)(i=t[n].$layout)._visible&&o._box.intersects(i._box)&&e(o,i);return t}function D(t){var e,r,n,o,i,a;for(e=0,r=t.length;e<r;++e)(o=(n=t[e]).$layout)._visible&&(i=n.geometry(),a=$(n._el._model,n.model(),i),o._box.update(a,i,n.rotation()));return I(t,(function(t,e){var r=t._hidable,n=e._hidable;r&&n||n?e._visible=!1:r&&(t._visible=!1)}))}E.extend(T.prototype,{center:function(){var t=this._rect;return{x:t.x+t.w/2,y:t.y+t.h/2}},update:function(t,e,r){this._rotation=r,this._rect={x:e.x+t.x,y:e.y+t.y,w:e.w,h:e.h}},contains:function(t){var e=this,r=1,n=e._rect;return!((t=P(t,e.center(),-e._rotation)).x<n.x-r||t.y<n.y-r||t.x>n.x+n.w+2*r||t.y>n.y+n.h+2*r)},intersects:function(t){var e,r,n,o=this._points(),i=t._points(),a=[N(o[0],o[1]),N(o[0],o[3])];for(this._rotation!==t._rotation&&a.push(N(i[0],i[1]),N(i[0],i[3])),e=0;e<a.length;++e)if(r=j(o,a[e]),n=j(i,a[e]),r.max<n.min||n.max<r.min)return!1;return!0},_points:function(){var t=this,e=t._rect,r=t._rotation,n=t.center();return[P({x:e.x,y:e.y},n,r),P({x:e.x+e.w,y:e.y},n,r),P({x:e.x+e.w,y:e.y+e.h},n,r),P({x:e.x,y:e.y+e.h},n,r)]}});var A={prepare:function(t){var e,r,n,o,i,a=[];for(e=0,n=t.length;e<n;++e)for(r=0,o=t[e].length;r<o;++r)i=t[e][r],a.push(i),i.$layout={_box:new T,_hidable:!1,_visible:!0,_set:e,_idx:r};return a.sort((function(t,e){var r=t.$layout,n=e.$layout;return r._idx===n._idx?n._set-r._set:n._idx-r._idx})),this.update(a),a},update:function(t){var e,r,n,o,i,a=!1;for(e=0,r=t.length;e<r;++e)o=(n=t[e]).model(),(i=n.$layout)._hidable=o&&"auto"===o.display,i._visible=n.visible(),a|=i._hidable;a&&D(t)},lookup:function(t,e){var r,n;for(r=t.length-1;r>=0;--r)if((n=t[r].$layout)&&n._visible&&n._box.contains(e))return t[r];return null},draw:function(t,e){var r,n,o,i,a,s;for(r=0,n=e.length;r<n;++r)(i=(o=e[r]).$layout)._visible&&(a=o.geometry(),s=$(o._el._view,o.model(),a),i._box.update(s,a,o.rotation()),o.draw(t,s))}},F=r.default.helpers,q={align:"center",anchor:"center",backgroundColor:null,borderColor:null,borderRadius:0,borderWidth:0,clamp:!1,clip:!1,color:void 0,display:!0,font:{family:void 0,lineHeight:1.2,size:void 0,style:void 0,weight:null},formatter:function(t){if(F.isNullOrUndef(t))return null;var e,r,n,o=t;if(F.isObject(t))if(F.isNullOrUndef(t.label))if(F.isNullOrUndef(t.r))for(o="",n=0,r=(e=Object.keys(t)).length;n<r;++n)o+=(0!==n?", ":"")+e[n]+": "+t[e[n]];else o=t.r;else o=t.label;return""+o},labels:void 0,listeners:{},offset:4,opacity:1,padding:{top:4,right:4,bottom:4,left:4},rotation:0,textAlign:"start",textStrokeColor:void 0,textStrokeWidth:0,textShadowBlur:0,textShadowColor:void 0},R=r.default.helpers,G="$datalabels",z="$default";function V(t,e){var r,n,o=t.datalabels,i={},a=[];return!1===o?null:(!0===o&&(o={}),e=R.merge({},[e,o]),r=e.labels||{},n=Object.keys(r),delete e.labels,n.length?n.forEach((function(t){r[t]&&a.push(R.merge({},[e,r[t],{_key:t}]))})):a.push(e),i=a.reduce((function(t,e){return R.each(e.listeners||{},(function(r,n){t[n]=t[n]||{},t[n][e._key||z]=r})),delete e.listeners,t}),{}),{labels:a,listeners:i})}function Z(t,e,r){if(e){var n,o=r.$context,i=r.$groups;e[i._set]&&(n=e[i._set][i._key])&&!0===R.callback(n,[o])&&(t[G]._dirty=!0,r.update(o))}}function B(t,e,r,n){var o,i;(r||n)&&(r?n?r!==n&&(i=o=!0):i=!0:o=!0,i&&Z(t,e.leave,r),o&&Z(t,e.enter,n))}function H(t,e){var r,n,o=t[G],i=o._listeners;if(i.enter||i.leave){if("mousemove"===e.type)n=A.lookup(o._labels,e);else if("mouseout"!==e.type)return;r=o._hovered,o._hovered=n,B(t,i,r,n)}}function U(t,e){var r=t[G],n=r._listeners.click,o=n&&A.lookup(r._labels,e);o&&Z(t,n,o)}function Y(t){if(!t.animating){for(var e=r.default.animationService.animations,n=0,o=e.length;n<o;++n)if(e[n].chart===t)return;t.render({duration:1,lazy:!0})}}return r.default.defaults.global.plugins.datalabels=q,{id:"datalabels",beforeInit:function(t){t[G]={_actives:[]}},beforeUpdate:function(t){var e=t[G];e._listened=!1,e._listeners={},e._datasets=[],e._labels=[]},afterDatasetUpdate:function(t,e,r){var n,o,i,a,s,c,l,u,d=e.index,h=t[G],f=h._datasets[d]=[],p=t.isDatasetVisible(d),m=t.data.datasets[d],v=V(m,r),g=e.meta.data||[],y=t.ctx;for(y.save(),n=0,i=g.length;n<i;++n)if((l=g[n])[G]=[],p&&l&&!l.hidden&&!l._model.skip)for(o=0,a=v.labels.length;o<a;++o)c=(s=v.labels[o])._key,(u=new S(s,y,l,n)).$groups={_set:d,_key:c||z},u.$context={active:!1,chart:t,dataIndex:n,dataset:m,datasetIndex:d},u.update(u.$context),l[G].push(u),f.push(u);y.restore(),R.merge(h._listeners,v.listeners,{merger:function(t,r,n){r[t]=r[t]||{},r[t][e.index]=n[t],h._listened=!0}})},afterUpdate:function(t,e){t[G]._labels=A.prepare(t[G]._datasets,e)},afterDatasetsDraw:function(t){A.draw(t,t[G]._labels)},beforeEvent:function(t,e){if(t[G]._listened)switch(e.type){case"mousemove":case"mouseout":H(t,e);break;case"click":U(t,e)}},afterEvent:function(t){var e,r,n,o,a,s,c,l=t[G],u=l._actives,d=l._actives=t.lastActive||[],h=i.arrayDiff(u,d);for(e=0,r=h.length;e<r;++e)if((a=h[e])[1])for(n=0,o=(c=a[0][G]||[]).length;n<o;++n)(s=c[n]).$context.active=1===a[1],s.update(s.$context);(l._dirty||h.length)&&(A.update(l._labels),Y(t)),delete l._dirty}}}(r(7757))},1049:function(t,e,r){t.exports=function(t,e){"use strict";t=t&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t,e=e&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e;var r=t.helpers,n=t.Zoom=t.Zoom||{},o=n.zoomFunctions=n.zoomFunctions||{},i=n.panFunctions=n.panFunctions||{};function a(t,e){var n={};void 0!==t.options.pan&&(n.pan=t.options.pan),void 0!==t.options.zoom&&(n.zoom=t.options.zoom);var o=t.$zoom;e=o._options=r.merge({},[e,n]);var i=o._node,a=e.zoom&&e.zoom.enabled,s=e.zoom.drag;a&&!s?i.addEventListener("wheel",o._wheelHandler):i.removeEventListener("wheel",o._wheelHandler),a&&s?(i.addEventListener("mousedown",o._mouseDownHandler),i.ownerDocument.addEventListener("mouseup",o._mouseUpHandler)):(i.removeEventListener("mousedown",o._mouseDownHandler),i.removeEventListener("mousemove",o._mouseMoveHandler),i.ownerDocument.removeEventListener("mouseup",o._mouseUpHandler))}function s(t){var e=t.$zoom._originalOptions;r.each(t.scales,(function(t){e[t.id]||(e[t.id]=r.clone(t.options))})),r.each(e,(function(r,n){t.scales[n]||delete e[n]}))}function c(t,e,r){return void 0===t||("string"==typeof t?-1!==t.indexOf(e):"function"==typeof t&&-1!==t({chart:r}).indexOf(e))}function l(t,e){if(t.scaleAxes&&t.rangeMax&&!r.isNullOrUndef(t.rangeMax[t.scaleAxes])){var n=t.rangeMax[t.scaleAxes];e>n&&(e=n)}return e}function u(t,e){if(t.scaleAxes&&t.rangeMin&&!r.isNullOrUndef(t.rangeMin[t.scaleAxes])){var n=t.rangeMin[t.scaleAxes];e<n&&(e=n)}return e}function d(t,e,r,o){var i=t.chart.data.labels,a=t.minIndex,s=i.length-1,c=t.maxIndex,d=o.sensitivity,h=t.isHorizontal()?t.left+t.width/2:t.top+t.height/2,f=t.isHorizontal()?r.x:r.y;n.zoomCumulativeDelta=e>1?n.zoomCumulativeDelta+1:n.zoomCumulativeDelta-1,Math.abs(n.zoomCumulativeDelta)>d&&(n.zoomCumulativeDelta<0?(f>=h?a<=0?c=Math.min(s,c+1):a=Math.max(0,a-1):f<h&&(c>=s?a=Math.max(0,a-1):c=Math.min(s,c+1)),n.zoomCumulativeDelta=0):n.zoomCumulativeDelta>0&&(f>=h?a=a<c?a=Math.min(c,a+1):a:f<h&&(c=c>a?c=Math.max(a,c-1):c),n.zoomCumulativeDelta=0),t.options.ticks.min=u(o,i[a]),t.options.ticks.max=l(o,i[c]))}function h(t,e,r,n){var o=t.max-t.min,i=o*(e-1),a=t.isHorizontal()?r.x:r.y,s=(t.getValueForPixel(a)-t.min)/o,c=i*s,d=i*(1-s);t.options.ticks.min=u(n,t.min+c),t.options.ticks.max=l(n,t.max-d)}function f(t,e,r,n){h(t,e,r,n);var o=t.options;o.time&&(o.time.min&&(o.time.min=o.ticks.min),o.time.max&&(o.time.max=o.ticks.max))}function p(t,e,r,n){var i=o[t.type];i&&i(t,e,r,n)}function m(t,e,n,o,i,a){var l=t.chartArea;o||(o={x:(l.left+l.right)/2,y:(l.top+l.bottom)/2});var u=t.$zoom._options.zoom;if(u.enabled){s(t);var d,h="function"==typeof u.mode?u.mode({chart:t}):u.mode;d="xy"===h&&void 0!==i?i:"xy",r.each(t.scales,(function(r){r.isHorizontal()&&c(h,"x",t)&&c(d,"x",t)?(u.scaleAxes="x",p(r,e,o,u)):!r.isHorizontal()&&c(h,"y",t)&&c(d,"y",t)&&(u.scaleAxes="y",p(r,n,o,u))})),a?t.update({duration:a,easing:"easeOutQuad"}):t.update(0),"function"==typeof u.onZoom&&u.onZoom({chart:t})}}function v(t,e,r){var o,i=t.chart.data.labels,a=i.length-1,s=Math.max(t.ticks.length,1),c=r.speed,d=t.minIndex,h=Math.round(t.width/(s*c));n.panCumulativeDelta+=e,d=n.panCumulativeDelta>h?Math.max(0,d-1):n.panCumulativeDelta<-h?Math.min(a-s+1,d+1):d,n.panCumulativeDelta=d!==t.minIndex?0:n.panCumulativeDelta,o=Math.min(a,d+s-1),t.options.ticks.min=u(r,i[d]),t.options.ticks.max=l(r,i[o])}function g(t,e,n){var o,i=t.options.ticks,a=t.min,s=t.max,c=t.getValueForPixel(t.getPixelForValue(a)-e),l=t.getValueForPixel(t.getPixelForValue(s)-e),u=c=c.valueOf?c.valueOf():c,d=l=l.valueOf?l.valueOf():l;n.scaleAxes&&n.rangeMin&&!r.isNullOrUndef(n.rangeMin[n.scaleAxes])&&(u=n.rangeMin[n.scaleAxes]),n.scaleAxes&&n.rangeMax&&!r.isNullOrUndef(n.rangeMax[n.scaleAxes])&&(d=n.rangeMax[n.scaleAxes]),c>=u&&l<=d?(i.min=c,i.max=l):c<u?(o=a-u,i.min=u,i.max=s-o):l>d&&(o=d-s,i.max=d,i.min=a+o)}function y(t,e,r){g(t,e,r);var n=t.options;n.time&&(n.time.min&&(n.time.min=n.ticks.min),n.time.max&&(n.time.max=n.ticks.max))}function _(t,e,r){var n=i[t.type];n&&n(t,e,r)}function b(t,e,n){s(t);var o=t.$zoom._options.pan;if(o.enabled){var i="function"==typeof o.mode?o.mode({chart:t}):o.mode;r.each(t.scales,(function(r){r.isHorizontal()&&c(i,"x",t)&&0!==e?(o.scaleAxes="x",_(r,e,o)):!r.isHorizontal()&&c(i,"y",t)&&0!==n&&(o.scaleAxes="y",_(r,n,o))})),t.update(0),"function"==typeof o.onPan&&o.onPan({chart:t})}}function x(t){for(var e=t.scales,r=Object.keys(e),n=0;n<r.length;n++){var o=e[r[n]];if(o.isHorizontal())return o}}function w(t){for(var e=t.scales,r=Object.keys(e),n=0;n<r.length;n++){var o=e[r[n]];if(!o.isHorizontal())return o}}t.Zoom.defaults=t.defaults.global.plugins.zoom={pan:{enabled:!1,mode:"xy",speed:20,threshold:10},zoom:{enabled:!1,mode:"xy",sensitivity:3,speed:.1}},n.zoomFunctions.category=d,n.zoomFunctions.time=f,n.zoomFunctions.linear=h,n.zoomFunctions.logarithmic=h,n.panFunctions.category=v,n.panFunctions.time=y,n.panFunctions.linear=g,n.panFunctions.logarithmic=g,n.panCumulativeDelta=0,n.zoomCumulativeDelta=0;var C={id:"zoom",afterInit:function(t){t.resetZoom=function(){s(t);var e=t.$zoom._originalOptions;r.each(t.scales,(function(t){var r=t.options.time,n=t.options.ticks;e[t.id]?(r&&(r.min=e[t.id].time.min,r.max=e[t.id].time.max),n&&(n.min=e[t.id].ticks.min,n.max=e[t.id].ticks.max)):(r&&(delete r.min,delete r.max),n&&(delete n.min,delete n.max))})),t.update()}},beforeUpdate:function(t,e){a(t,e)},beforeInit:function(t,r){t.$zoom={_originalOptions:{}};var o=t.$zoom._node=t.ctx.canvas;a(t,r);var i=t.$zoom._options,s=i.pan&&i.pan.threshold;t.$zoom._mouseDownHandler=function(e){o.addEventListener("mousemove",t.$zoom._mouseMoveHandler),t.$zoom._dragZoomStart=e},t.$zoom._mouseMoveHandler=function(e){t.$zoom._dragZoomStart&&(t.$zoom._dragZoomEnd=e,t.update(0))},t.$zoom._mouseUpHandler=function(e){if(t.$zoom._dragZoomStart){o.removeEventListener("mousemove",t.$zoom._mouseMoveHandler);var r=t.$zoom._dragZoomStart,n=r.target.getBoundingClientRect().left,a=Math.min(r.clientX,e.clientX)-n,s=Math.max(r.clientX,e.clientX)-n,l=r.target.getBoundingClientRect().top,u=Math.min(r.clientY,e.clientY)-l,d=s-a,h=Math.max(r.clientY,e.clientY)-l-u;t.$zoom._dragZoomStart=null,t.$zoom._dragZoomEnd=null;var f=i.zoom&&i.zoom.threshold||0;if(!(d<=f&&h<=f)){var p=t.chartArea,v=t.$zoom._options.zoom,g=p.right-p.left,y=c(v.mode,"x",t)&&d?1+(g-d)/g:1,_=p.bottom-p.top,b=c(v.mode,"y",t);m(t,y,b&&h?1+(_-h)/_:1,{x:(a-p.left)/(1-d/g)+p.left,y:(u-p.top)/(1-h/_)+p.top},void 0,v.drag.animationDuration),"function"==typeof v.onZoomComplete&&v.onZoomComplete({chart:t})}}};var l=null;if(t.$zoom._wheelHandler=function(e){if(e.cancelable&&e.preventDefault(),void 0!==e.deltaY){var r=e.target.getBoundingClientRect(),n={x:e.clientX-r.left,y:e.clientY-r.top},o=t.$zoom._options.zoom,i=o.speed;e.deltaY>=0&&(i=-i),m(t,1+i,1+i,n),clearTimeout(l),l=setTimeout((function(){"function"==typeof o.onZoomComplete&&o.onZoomComplete({chart:t})}),250)}},e){var u,d=new e.Manager(o);d.add(new e.Pinch),d.add(new e.Pan({threshold:s}));var h=function(e){var r=1/u*e.scale,n=e.target.getBoundingClientRect(),o={x:e.center.x-n.left,y:e.center.y-n.top},i=Math.abs(e.pointers[0].clientX-e.pointers[1].clientX),a=Math.abs(e.pointers[0].clientY-e.pointers[1].clientY),s=i/a;m(t,r,r,o,s>.3&&s<1.7?"xy":i>a?"x":"y");var c=t.$zoom._options.zoom;"function"==typeof c.onZoomComplete&&c.onZoomComplete({chart:t}),u=e.scale};d.on("pinchstart",(function(){u=1})),d.on("pinch",h),d.on("pinchend",(function(t){h(t),u=null,n.zoomCumulativeDelta=0}));var f=null,p=null,v=!1,g=function(e){if(null!==f&&null!==p){v=!0;var r=e.deltaX-f,n=e.deltaY-p;f=e.deltaX,p=e.deltaY,b(t,r,n)}};d.on("panstart",(function(t){f=0,p=0,g(t)})),d.on("panmove",g),d.on("panend",(function(){f=null,p=null,n.panCumulativeDelta=0,setTimeout((function(){v=!1}),500);var e=t.$zoom._options.pan;"function"==typeof e.onPanComplete&&e.onPanComplete({chart:t})})),t.$zoom._ghostClickHandler=function(t){v&&t.cancelable&&(t.stopImmediatePropagation(),t.preventDefault())},o.addEventListener("click",t.$zoom._ghostClickHandler),t._mc=d}},beforeDatasetsDraw:function(t){var e=t.ctx;if(t.$zoom._dragZoomEnd){var r=x(t),n=w(t),o=t.$zoom._dragZoomStart,i=t.$zoom._dragZoomEnd,a=r.left,s=r.right,l=n.top,u=n.bottom;if(c(t.$zoom._options.zoom.mode,"x",t)){var d=o.target.getBoundingClientRect().left;a=Math.min(o.clientX,i.clientX)-d,s=Math.max(o.clientX,i.clientX)-d}if(c(t.$zoom._options.zoom.mode,"y",t)){var h=o.target.getBoundingClientRect().top;l=Math.min(o.clientY,i.clientY)-h,u=Math.max(o.clientY,i.clientY)-h}var f=s-a,p=u-l,m=t.$zoom._options.zoom.drag;e.save(),e.beginPath(),e.fillStyle=m.backgroundColor||"rgba(225,225,225,0.3)",e.fillRect(a,l,f,p),m.borderWidth>0&&(e.lineWidth=m.borderWidth,e.strokeStyle=m.borderColor||"rgba(225,225,225)",e.strokeRect(a,l,f,p)),e.restore()}},destroy:function(t){if(t.$zoom){var e=t.$zoom,r=e._node;r.removeEventListener("mousedown",e._mouseDownHandler),r.removeEventListener("mousemove",e._mouseMoveHandler),r.ownerDocument.removeEventListener("mouseup",e._mouseUpHandler),r.removeEventListener("wheel",e._wheelHandler),r.removeEventListener("click",e._ghostClickHandler),delete t.$zoom;var n=t._mc;n&&(n.remove("pinchstart"),n.remove("pinch"),n.remove("pinchend"),n.remove("panstart"),n.remove("pan"),n.remove("panend"),n.destroy())}}};return t.plugins.register(C),C}(r(7757),r(840))},8201:(t,e,r)=>{"use strict";r.d(e,{Z:()=>i});var n=r(3645),o=r.n(n)()((function(t){return t[1]}));o.push([t.id,'.context-menu-box{position:absolute;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.context-menu-box .list-context-menu-wrapper{background:#fff;border:1px solid #e4e4e4;border-radius:3px;box-shadow:0 2px 6px 0 rgba(0,0,0,.12);box-sizing:content-box;margin:0;padding:8px 0;position:absolute;white-space:nowrap;z-index:999}.context-menu-box .list-context-menu-wrapper li{list-style:none}.context-menu-box .list-context-menu-wrapper .menu-item-space{height:40px;line-height:40px}.context-menu-box .list-context-menu-wrapper .empty-text{align-items:center;color:rgba(0,0,0,.4);display:flex;height:60px;justify-content:center;margin:0 auto;padding:0 24px}.context-menu-box .list-context-menu-wrapper .menu-item{-webkit-tap-highlight-color:rgba(255,255,255,0);color:rgba(0,0,0,.88);cursor:pointer;display:block;font-size:14px;font-stretch:normal;font-style:normal;font-weight:400;letter-spacing:normal;padding:0 24px;text-align:left}.context-menu-box .list-context-menu-wrapper .menu-item:hover{background:rgba(0,0,0,.02)}.context-menu-box .list-context-menu-wrapper .menu-item:active{background:rgba(0,0,0,.04)}.context-menu-box .list-context-menu-wrapper .menu-item:focus{outline:1px auto -webkit-focus-ring-color}.context-menu-box .list-context-menu-wrapper .menu-item img,.context-menu-box .list-context-menu-wrapper .menu-item svg{display:inline-block;height:14px;margin-right:9px;vertical-align:middle;width:14px}.context-menu-box .list-context-menu-wrapper .seperator{height:1px;padding:8px 0}.context-menu-box .list-context-menu-wrapper .seperator:before{background:rgba(0,0,0,.04);content:"";display:block;height:1px}',""]);const i=o},8370:(t,e,r)=>{"use strict";r.d(e,{Z:()=>i});var n=r(3645),o=r.n(n)()((function(t){return t[1]}));o.push([t.id,".table-head[data-v-508deb8d]{background-color:initial;color:initial}.table-bordered>tbody>tr>td[data-v-508deb8d],.table-bordered>tbody>tr>th[data-v-508deb8d],.table-bordered>tfoot>tr>td[data-v-508deb8d],.table-bordered>tfoot>tr>th[data-v-508deb8d],.table-bordered>thead>tr>td[data-v-508deb8d],.table-bordered>thead>tr>th[data-v-508deb8d]{border:1px solid grey}.table-title[data-v-508deb8d]{border-bottom:1px solid #000;font-weight:700;margin:0;padding-bottom:10px;padding-top:5px}.vertical-middle[data-v-508deb8d]{vertical-align:middle}.th-grade[data-v-508deb8d]{background-color:#fff}.reset-btn[data-v-508deb8d]{position:absolute;right:15px}input[data-v-508deb8d]::-webkit-inner-spin-button,input[data-v-508deb8d]::-webkit-outer-spin-button{-webkit-appearance:none;margin:0}input[type=number][data-v-508deb8d]{-moz-appearance:textfield}input[type=color][data-v-508deb8d]{-webkit-appearance:none;border:none}input[type=color][data-v-508deb8d]::-webkit-color-swatch-wrapper{padding:0}input[type=color][data-v-508deb8d]::-webkit-color-swatch{border:none}",""]);const i=o},5165:(t,e,r)=>{"use strict";r.d(e,{Z:()=>i});var n=r(3645),o=r.n(n)()((function(t){return t[1]}));o.push([t.id,".content-header[data-v-e5d71a1c]{color:#000}.size-sm[data-v-e5d71a1c]{font-size:12pt}.table[data-v-e5d71a1c]{margin-bottom:10px}th[data-v-e5d71a1c]{vertical-align:middle!important}",""]);const i=o},1133:(t,e,r)=>{"use strict";r.d(e,{Z:()=>i});var n=r(3645),o=r.n(n)()((function(t){return t[1]}));o.push([t.id,".main-header[data-v-052a1dc5]{-webkit-user-drag:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.skin-green-light .main-header .logo[data-v-052a1dc5],.skin-green-light .main-header .navbar[data-v-052a1dc5]{background-color:#5c9b6c}.skin-green-light .main-header .navbar .sidebar-toggle[data-v-052a1dc5]:hover{background:rgba(0,0,0,.1)}.logo[data-v-052a1dc5]{height:55px}.logo .logo-mini[data-v-052a1dc5]{margin-top:3px}.logo .logo-lg[data-v-052a1dc5]{font-size:18px;font-weight:700;letter-spacing:1px;line-height:55px}.logo[data-v-052a1dc5],.nav>li>a[data-v-052a1dc5],.sidebar-toggle[data-v-052a1dc5]{line-height:25px}.icon-addon[data-v-052a1dc5]{font-size:10pt;margin-left:-12px}.split[data-v-052a1dc5]{border-right:solid #fff}.no-hover[data-v-052a1dc5]:focus,.no-hover[data-v-052a1dc5]:hover{background:none!important}.device-name[data-v-052a1dc5]{color:#fff;float:left;font-family:NotoSansTC,system-ui;font-weight:700;line-height:25px;padding:15px}.device-menu[data-v-052a1dc5],.device-name[data-v-052a1dc5]{cursor:default;transition:all .5s ease-in-out}.device-menu[data-v-052a1dc5]{text-align:right;width:144px}.sidebar-toggle[data-v-052a1dc5]{transition:all .5s ease-in-out}.device-connected[data-v-052a1dc5]{background-color:#5c9b6c!important}.device-disconnected[data-v-052a1dc5]{background-color:#db736a!important}.battery[data-v-052a1dc5],.battery .fa-battery-half[data-v-052a1dc5]{color:#fff}.fa.fa-battery-full[data-v-052a1dc5],.fa.fa-battery-three-quarters[data-v-052a1dc5]{color:#32cd32}.fa.fa-battery-half[data-v-052a1dc5]{color:gold}.fa.fa-battery-quarter[data-v-052a1dc5]{color:orange}.fa.fa-battery-empty[data-v-052a1dc5]{color:grey}.fa.fa-map-marker.blue[data-v-052a1dc5]{color:blue}.fa.fa-map-marker.red[data-v-052a1dc5]{color:red}.fa.fa-map-marker.orange[data-v-052a1dc5]{color:orange}.fa.fa-map-marker.gold[data-v-052a1dc5]{color:gold}.fa.fa-map-marker.limegreen[data-v-052a1dc5]{color:#32cd32}.battery-level[data-v-052a1dc5]{margin-right:10px}.device-menu-2[data-v-052a1dc5]{padding-left:20px}.bar[data-v-052a1dc5]{background-color:rgba(0,0,0,.5);border-radius:5px;float:left;padding:5px}.control[data-v-052a1dc5]{cursor:pointer;margin-right:3px;padding:5px 10px}.bar-link[data-v-052a1dc5]{color:#fff;cursor:default;padding-bottom:10px;padding-top:10px}.state[data-v-052a1dc5]{border-radius:3px;font-size:12px;margin-left:10px;padding:3px}.map-name-div[data-v-052a1dc5]{border-radius:5px;float:left;font-family:NotoSansTC,system-ui;font-weight:700;margin-right:3px;padding:5px}.vehicle-error-message-icon[data-v-052a1dc5]{cursor:pointer;margin-left:8px}.petri-count[data-v-052a1dc5]{vertical-align:text-bottom}",""]);const i=o},1718:(t,e,r)=>{"use strict";r.d(e,{Z:()=>i});var n=r(3645),o=r.n(n)()((function(t){return t[1]}));o.push([t.id,".reload-div[data-v-bf428606]{align-items:center;display:flex;justify-content:center;padding-bottom:2rem}.reload-div>span[data-v-bf428606]{font-size:2.4rem;margin-right:.8rem;margin-top:.4rem}.reload-div i[data-v-bf428606]{margin-right:.4rem}",""]);const i=o},4512:(t,e,r)=>{"use strict";r.d(e,{Z:()=>i});var n=r(3645),o=r.n(n)()((function(t){return t[1]}));o.push([t.id,".box-body[data-v-77134fd4],.box-header[data-v-77134fd4]{padding:30px}.device-block[data-v-77134fd4]{background-color:#fcfcfc;border:1px solid #ebebeb;display:inline-block;margin-right:10px;vertical-align:top;width:calc(50% - 14px)}.device-block[data-v-77134fd4]:nth-child(n+3){margin-top:10px}.status-grid[data-v-77134fd4]{display:inline-block;padding:15px}.status-grid[data-v-77134fd4]:not(:last-child){border-right:1px solid #ebebeb}.title-right-block[data-v-77134fd4]{float:right;margin-top:20px}.divider[data-v-77134fd4]{color:gray;display:inline-block;margin-left:15px;margin-right:15px}.device-info-block[data-v-77134fd4]{border-top:1px solid #ebebeb;padding:15px 30px}.device-name[data-v-77134fd4]{margin-bottom:30px}.device-info[data-v-77134fd4]{margin-top:15px}.device-info-right[data-v-77134fd4]{float:right}.device-button-bar[data-v-77134fd4]{padding:15px 30px}",""]);const i=o},6613:(t,e,r)=>{"use strict";r.d(e,{Z:()=>i});var n=r(3645),o=r.n(n)()((function(t){return t[1]}));o.push([t.id,"thead tr[data-v-f944344c]{color:#fff}td[data-v-f944344c],th[data-v-f944344c]{white-space:nowrap}th[data-v-f944344c]{vertical-align:middle!important}.nav-tabs[data-v-f944344c]{background-color:#fff}.nav-tabs li.active a[data-v-f944344c]{color:#5c9b6c}.nav-tabs a[data-v-f944344c]{color:#000}.box[data-v-f944344c]{border-top:none}.scroll[data-v-f944344c]{overflow-x:auto}",""]);const i=o},3126:(t,e,r)=>{"use strict";r.d(e,{Z:()=>i});var n=r(3645),o=r.n(n)()((function(t){return t[1]}));o.push([t.id,".title-block[data-v-72e987ae]{margin-bottom:30px}.title-left-block[data-v-72e987ae]{display:inline-block}.title-left-block h3[data-v-72e987ae]{font-size:32px}.title-right-block[data-v-72e987ae]{float:right;margin-top:20px}.box-body[data-v-72e987ae]{padding:30px}.table-head th[data-v-72e987ae]{white-space:nowrap}tbody tr[data-v-72e987ae]:nth-child(2n){background-color:#f5f5f5}table[data-v-72e987ae]{margin-top:20px}",""]);const i=o},4106:(t,e,r)=>{"use strict";r.d(e,{Z:()=>i});var n=r(3645),o=r.n(n)()((function(t){return t[1]}));o.push([t.id,".app-layout[data-v-2b1aef27]{background-color:#222d32;position:relative}.app-layout .main-header .logo[data-v-2b1aef27]{height:52px}.content-wrapper[data-v-2b1aef27]{background-color:#ecf0f5;padding-top:58px}.alarms[data-v-2b1aef27]{max-height:calc(100vh - 64px);overflow-y:auto;position:fixed;right:10px;top:60px;transition:all 1s ease-in-out;z-index:1}",""]);const i=o},8869:(t,e,r)=>{"use strict";r.d(e,{Z:()=>i});var n=r(3645),o=r.n(n)()((function(t){return t[1]}));o.push([t.id,".auth-page[data-v-3bb50fdc]{min-height:100vh;position:relative;text-align:center}",""]);const i=o},857:(t,e,r)=>{"use strict";r.d(e,{Z:()=>i});var n=r(3645),o=r.n(n)()((function(t){return t[1]}));o.push([t.id,".location-point[data-v-38a55698]{top:3px}.location-point[data-v-38a55698],.location-point>img[data-v-38a55698]{-webkit-user-drag:none;border-radius:50%;max-height:20px;position:relative;width:20px}.location-point>img[data-v-38a55698]{top:-6.4px}.location-point[data-v-38a55698]:hover{cursor:pointer}.location-point:hover>img[data-v-38a55698]{scale:2;z-index:2}.animation-fade[data-v-38a55698]{-webkit-animation:fade-data-v-38a55698 1.5s infinite;animation:fade-data-v-38a55698 1.5s infinite}.location-badge[data-v-38a55698]{left:16px;min-height:20px;min-width:20px;position:absolute;top:-6px;z-index:1}.disappear-location-point[data-v-38a55698]{z-index:-1!important}.fa-rotate-45[data-v-38a55698]{transform:rotate(45deg)}.fa-24[data-v-38a55698]{font-size:24px}.micro-organism[data-v-38a55698]{opacity:.5}@-webkit-keyframes fade-data-v-38a55698{0%{opacity:1}50%{opacity:.5}to{opacity:1}}@keyframes fade-data-v-38a55698{0%{opacity:1}50%{opacity:.5}to{opacity:1}}",""]);const i=o},3141:(t,e,r)=>{"use strict";r.d(e,{Z:()=>i});var n=r(3645),o=r.n(n)()((function(t){return t[1]}));o.push([t.id,'.title-block[data-v-32bcce24]{margin-bottom:30px}.title-block[data-v-32bcce24]:after{clear:both;content:"";display:table}.title-left-block[data-v-32bcce24]{display:inline-block}.title-left-block h3[data-v-32bcce24]{font-size:32px}.title-right-block[data-v-32bcce24]{float:right;margin-top:20px}.box-body[data-v-32bcce24]{padding:30px}.table-head th[data-v-32bcce24]{white-space:nowrap}tbody tr[data-v-32bcce24]:nth-child(2n){background-color:#f5f5f5}.table>tbody>tr>td[data-v-32bcce24]{vertical-align:middle}table[data-v-32bcce24]{margin-top:20px}.label[data-v-32bcce24]{line-height:16px;padding:.3rem .6rem;vertical-align:text-top}',""]);const i=o},2708:(t,e,r)=>{"use strict";r.d(e,{Z:()=>i});var n=r(3645),o=r.n(n)()((function(t){return t[1]}));o.push([t.id,".title-block[data-v-7a927fc4]{margin-bottom:30px}.title-left-block[data-v-7a927fc4]{display:inline-block}.title-left-block h3[data-v-7a927fc4]{font-size:32px}.title-right-block[data-v-7a927fc4]{display:inline-block;float:right;margin-top:20px}.box-body[data-v-7a927fc4]{padding:30px}.table-head th[data-v-7a927fc4]{white-space:nowrap}tbody tr[data-v-7a927fc4]:nth-child(2n){background-color:#f5f5f5}table[data-v-7a927fc4]{margin-top:20px}",""]);const i=o},225:(t,e,r)=>{"use strict";r.d(e,{Z:()=>i});var n=r(3645),o=r.n(n)()((function(t){return t[1]}));o.push([t.id,".schedule-time[data-v-5adad37c]{display:flex;justify-content:space-between;padding-top:4px}.date-time-selector[data-v-5adad37c]{border-color:#d2d6de;font-size:18px;height:28px;min-width:58px;outline-color:#d2d6de}",""]);const i=o},147:(t,e,r)=>{"use strict";r.d(e,{Z:()=>i});var n=r(3645),o=r.n(n)()((function(t){return t[1]}));o.push([t.id,".data-list[data-v-84112e68]{margin-bottom:16px;margin-top:16px}.data-row[data-v-84112e68]{background-image:linear-gradient(#fcfcfc,#fafafa,#f6f6f6);border:1px solid #f1f1f1;border-radius:8px}.data-row[data-v-84112e68]:hover{background-image:linear-gradient(#f9f9f9,#efefef)}.data-row[data-v-84112e68]:not(:first-child){margin-top:15px}.data-row-status[data-v-84112e68]{background-image:linear-gradient(#f9f9f9,#efefef);border-bottom-left-radius:8px;border-right:1px solid #f1f1f1;border-top-left-radius:8px;padding:20px;text-align:center;width:100px}.data-row-content[data-v-84112e68],.data-row-status[data-v-84112e68]{display:inline-block;vertical-align:middle}.data-row-content[data-v-84112e68]{padding:10px}.data-row-content .data-row-subtitle[data-v-84112e68]{color:#9a9a99;font-size:14px}.data-row-right-block[data-v-84112e68]{float:right;letter-spacing:4px;margin-top:20px;padding:0 20px}.color-start[data-v-84112e68]{color:#5c9b6c}.color-stop[data-v-84112e68]{color:#db736a}.data-row-status .fa[data-v-84112e68]{font-size:25px}.search-btn[data-v-84112e68]{vertical-align:bottom}",""]);const i=o},4801:(t,e,r)=>{"use strict";r.d(e,{Z:()=>i});var n=r(3645),o=r.n(n)()((function(t){return t[1]}));o.push([t.id,".data-list[data-v-0d6abebb]{margin-bottom:16px;margin-top:16px}.data-row[data-v-0d6abebb]{background-image:linear-gradient(#fcfcfc,#fafafa,#f6f6f6);border:1px solid #f1f1f1;border-radius:8px}.data-row[data-v-0d6abebb]:hover{background-image:linear-gradient(#f9f9f9,#efefef)}.data-row[data-v-0d6abebb]:not(:first-child){margin-top:15px}.data-row-status[data-v-0d6abebb]{background-image:linear-gradient(#f9f9f9,#efefef);border-bottom-left-radius:8px;border-right:1px solid #f1f1f1;border-top-left-radius:8px;padding:20px;text-align:center;width:100px}.data-row-content[data-v-0d6abebb],.data-row-status[data-v-0d6abebb]{display:inline-block;vertical-align:middle}.data-row-content[data-v-0d6abebb]{padding:10px}.data-row-content .data-row-subtitle[data-v-0d6abebb]{color:#9a9a99;font-size:14px}.data-row-right-block[data-v-0d6abebb]{float:right;line-height:1.5;margin-top:12px;padding:0 20px}.color-start[data-v-0d6abebb]{color:#5c9b6c}.color-stop[data-v-0d6abebb]{color:#db736a}.data-row-status .fa[data-v-0d6abebb]{font-size:25px}.search-btn[data-v-0d6abebb]{vertical-align:bottom}.op-btn[data-v-0d6abebb]{vertical-align:middle}",""]);const i=o},8955:(t,e,r)=>{"use strict";r.d(e,{Z:()=>i});var n=r(3645),o=r.n(n)()((function(t){return t[1]}));o.push([t.id,".title-block[data-v-455527de]{margin-bottom:30px}.title-left-block[data-v-455527de]{display:inline-block}.title-left-block h3[data-v-455527de]{font-size:32px}.title-right-block[data-v-455527de]{float:right;letter-spacing:10px;margin-top:20px}.box-body[data-v-455527de]{padding:30px}.data-list[data-v-455527de]{margin-top:20px}.data-row[data-v-455527de]{background-image:linear-gradient(#fcfcfc,#fafafa,#f6f6f6);border:1px solid #f1f1f1;border-radius:8px}.data-row[data-v-455527de]:hover{background-image:linear-gradient(#f9f9f9,#efefef)}.data-row[data-v-455527de]:not(:first-child){margin-top:15px}.data-row-content[data-v-455527de]{display:inline-block;padding:10px;vertical-align:middle}.data-row-content .data-row-subtitle[data-v-455527de]{color:#9a9a99;font-size:14px}.data-row-right-block[data-v-455527de]{float:right;letter-spacing:4px;margin-top:20px;padding:0 20px}",""]);const i=o},392:(t,e,r)=>{"use strict";r.d(e,{Z:()=>i});var n=r(3645),o=r.n(n)()((function(t){return t[1]}));o.push([t.id,".alarm[data-v-690d3061]{background-color:#fff;border-radius:0 0 5px 5px;box-shadow:0 5px 5px grey;left:15px;letter-spacing:1px;margin-bottom:15px;margin-right:15px;min-width:300px;padding:10px;position:relative;right:15px;top:0;transition:all 1s ease-in-out}.alarm h1[data-v-690d3061]{display:inline;font-size:22px;font-weight:700;margin-top:0}.alarm-collapsed[data-v-690d3061]{position:relative;top:-400px}.alarm-content[data-v-690d3061]{font-size:14px;font-weight:400;line-height:1.8;margin:10px 0}.alarm-ts[data-v-690d3061]{color:grey;font-size:12px;font-weight:400;letter-spacing:2px;text-align:right}",""]);const i=o},5949:(t,e,r)=>{"use strict";r.d(e,{Z:()=>i});var n=r(3645),o=r.n(n)()((function(t){return t[1]}));o.push([t.id,".date-div[data-v-39828905]{margin-top:-1px;position:relative}.clear-btn[data-v-39828905]{background-color:transparent;border:none;bottom:0;color:#555;font-weight:700;outline:none;padding:0 6px;position:absolute;right:0;top:0;z-index:1}",""]);const i=o},8276:(t,e,r)=>{"use strict";r.d(e,{Z:()=>i});var n=r(3645),o=r.n(n)()((function(t){return t[1]}));o.push([t.id,".animation-fade[data-v-ae8558f8]{-webkit-animation:fade-data-v-ae8558f8 1.5s infinite;animation:fade-data-v-ae8558f8 1.5s infinite}@-webkit-keyframes fade-data-v-ae8558f8{0%{opacity:1}50%{opacity:.5}to{opacity:1}}@keyframes fade-data-v-ae8558f8{0%{opacity:1}50%{opacity:.5}to{opacity:1}}",""]);const i=o},1059:(t,e,r)=>{"use strict";r.d(e,{Z:()=>i});var n=r(3645),o=r.n(n)()((function(t){return t[1]}));o.push([t.id,".import-block[data-v-4ea2f4fb]{font-family:NotoSansTC,system-ui;max-height:80vh;min-height:50vh;overflow:auto;padding:0 2px}.import-title[data-v-4ea2f4fb]{font-size:20px;font-weight:700;margin-top:0}.import-subtitle[data-v-4ea2f4fb]{font-size:16px;font-weight:700;margin-top:12px}.example-link[data-v-4ea2f4fb]{text-underline:#25466f;color:#25466f}.uploader[data-v-4ea2f4fb]{background-color:#e5edf2;border:1px solid #beccd4;border-radius:4px;margin-top:12px;padding:30px}.img-status[data-v-4ea2f4fb]{display:inline-block}.btn-upload[data-v-4ea2f4fb]{border-radius:4px;margin-top:20px;padding:6px 18px}.btn-re-upload[data-v-4ea2f4fb]{background-color:#fff;box-shadow:0 0 6px 0 rgba(0,0,0,.3);color:#142d4f}.divider[data-v-4ea2f4fb]{border-top:1px solid #beccd4;left:-15px;margin-top:15px;position:relative;width:calc(100% + 30px)}.modal-footer[data-v-4ea2f4fb]{padding:15px 0 0}.button-block[data-v-4ea2f4fb]{display:inline-block;width:calc(50% - 3px)}.button-block.left[data-v-4ea2f4fb]{padding-right:10px}.button-block.right[data-v-4ea2f4fb]{padding-left:10px}.btn-cancel[data-v-4ea2f4fb]{background-color:#fff;border-radius:4px;box-shadow:0 0 6px 0 rgba(0,0,0,.3);color:#241916;height:35px;padding:9px 18px;width:100%}.btn-cancel[data-v-4ea2f4fb]:hover,.btn-light-green[data-v-4ea2f4fb]:disabled,.btn-light-green[data-v-4ea2f4fb]:hover{opacity:.75}.btn-light-green[data-v-4ea2f4fb]:disabled{cursor:not-allowed;opacity:.75}.btn-light-green[data-v-4ea2f4fb]{border-radius:4px;box-shadow:0 0 6px 0 rgba(0,0,0,.3);color:#fff;height:35px;padding:9px 18px;width:100%}",""]);const i=o},1428:(t,e,r)=>{"use strict";r.d(e,{Z:()=>i});var n=r(3645),o=r.n(n)()((function(t){return t[1]}));o.push([t.id,"a[data-v-8ebac2ac]{clear:both;color:#777;display:block;font-weight:400;line-height:1.5;padding:3px 20px;white-space:nowrap}a[data-v-8ebac2ac]:hover{background-color:#e1e3e9;color:#333}a[data-v-8ebac2ac]:focus{background-color:#f5f5f5;color:#262626;text-decoration:none}a.disabled[data-v-8ebac2ac]{pointer-events:none}.inline-block[data-v-8ebac2ac]{display:inline-block}.init-btn[data-v-8ebac2ac]{border-radius:10px 10px 10px 10px;font-size:16px;margin:8px 0;padding:4px 8px}",""]);const i=o},819:(t,e,r)=>{"use strict";r.d(e,{Z:()=>i});var n=r(3645),o=r.n(n)()((function(t){return t[1]}));o.push([t.id,'@charset "UTF-8";.panel[data-v-5740c558]{border:0}.panel-default>.panel-heading[data-v-5740c558]{background-color:#deecdf}.panel-heading .accordion-toggle[data-v-5740c558]:after{color:#5c9b6c;content:"";float:right;font-family:Glyphicons Halflings,serif;line-height:1.6;padding:10px 15px 10px 0}.panel-heading .accordion-toggle.collapsed[data-v-5740c558]:after{content:""}.panel-heading[data-v-5740c558]{border-radius:0;padding:0}.panel-heading a div[data-v-5740c558]{color:#5c9b6c;float:left;font-size:14pt;font-weight:700;padding:10px 0 10px 15px;width:88%}.panel-body[data-v-5740c558]{padding:0}.panel-group .panel+.panel[data-v-5740c558]{border-top:1px solid #5c9b6c;margin-top:0}.region-item[data-v-5740c558]{color:#5c9b6c;line-height:2}.region-item[data-v-5740c558]:hover,.selected-region[data-v-5740c558]{background-color:#5c9b6c;color:#fff;cursor:pointer}.region-item:hover .label-region[data-v-5740c558],.selected-region .label-region[data-v-5740c558]{background-color:#fff!important;color:#5c9b6c}.disabled[data-v-5740c558]{cursor:default;pointer-events:none}.label-project[data-v-5740c558],.label-region[data-v-5740c558]{background-color:#5c9b6c!important;font-size:14px;letter-spacing:4px;padding:.2em .2em .2em .4em}.select-only-read[data-v-5740c558]{-webkit-appearance:none;-moz-appearance:none;appearance:none;background:#fff;border:0}',""]);const i=o},8035:(t,e,r)=>{"use strict";r.d(e,{Z:()=>i});var n=r(3645),o=r.n(n)()((function(t){return t[1]}));o.push([t.id,".container-right[data-v-d633d5b4]{background-color:#fff;border:1px solid #ddd;height:calc(100vh - 58px);padding-top:15px;position:fixed;right:0;top:58px;transition:all .8s ease-in-out;width:320px}.container-right-collapsed[data-v-d633d5b4]{right:-324px}.region-tag[data-v-d633d5b4]{background-color:#fff;border-bottom:2px solid #d3d3d3;border-left:1px solid #d3d3d3;border-radius:20px 0 0 20px;border-top:2px solid #d3d3d3;bottom:calc(50vh - 200px);box-shadow:-1px 0 4px 2px #d3d3d3;color:#5c9b6c;cursor:pointer;display:inline-block;font-size:16pt;font-weight:700;margin-top:22px;padding:4px 0 8px 10px;position:fixed;right:320px;transition:all .8s ease-in-out;width:40px;word-break:break-all}.burner-collapsed[data-v-d633d5b4]{position:fixed;right:0}.project-list[data-v-d633d5b4]{padding-left:0;padding-right:0}.project-list-title[data-v-d633d5b4]{color:#5c9b6c;font-size:24px;margin-bottom:15px}.region-floor-room-collapse-select[data-v-d633d5b4]{height:calc(100vh - 180px);margin-top:6px;overflow:scroll}",""]);const i=o},2848:(t,e,r)=>{"use strict";r.d(e,{Z:()=>i});var n=r(3645),o=r.n(n)()((function(t){return t[1]}));o.push([t.id,'@charset "UTF-8";.panel[data-v-870c6718]{border:0}.panel-default>.panel-heading[data-v-870c6718]{background-color:#deecdf}.panel-heading .accordion-toggle[data-v-870c6718]:after{color:#5c9b6c;content:"";float:right;font-family:Glyphicons Halflings,serif;line-height:1.6;padding:10px 15px 10px 0}.panel-heading .accordion-toggle.collapsed[data-v-870c6718]:after{content:""}.panel-heading[data-v-870c6718]{border-radius:0;padding:0}.panel-heading a div[data-v-870c6718]{color:#5c9b6c;float:left;font-size:14pt;font-weight:700;padding:10px 0 10px 15px;width:88%}.panel-body[data-v-870c6718]{padding:0}.panel-group .panel+.panel[data-v-870c6718]{border-top:1px solid #5c9b6c;margin-top:0}.region-item[data-v-870c6718]{color:#5c9b6c;line-height:2;text-align:left}.region-item[data-v-870c6718]:hover,.selected-region[data-v-870c6718]{background-color:#5c9b6c;color:#fff;cursor:pointer}.region-item:hover .label-room[data-v-870c6718],.selected-region .label-room[data-v-870c6718]{background-color:#fff!important;color:#5c9b6c}.disabled[data-v-870c6718]{cursor:default;pointer-events:none}.label-floor[data-v-870c6718],.label-room[data-v-870c6718]{background-color:#5c9b6c!important;font-size:14px;letter-spacing:4px;padding:.2em .2em .2em .4em}',""]);const i=o},6070:(t,e,r)=>{"use strict";r.d(e,{Z:()=>i});var n=r(3645),o=r.n(n)()((function(t){return t[1]}));o.push([t.id,".project[data-v-c2e6d646]{position:relative;text-align:left}.base-map[data-v-c2e6d646]{overflow:hidden;position:relative}.base-map img[data-v-c2e6d646]{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}",""]);const i=o},8280:(t,e,r)=>{"use strict";r.d(e,{Z:()=>i});var n=r(3645),o=r.n(n)()((function(t){return t[1]}));o.push([t.id,'@charset "UTF-8";.panel[data-v-4e684bd8]{border:0}.panel-default>.panel-heading[data-v-4e684bd8]{background-color:#deecdf}.panel-heading .accordion-toggle[data-v-4e684bd8]:after{color:#5c9b6c;content:"";float:right;font-family:Glyphicons Halflings,serif;line-height:1.6;padding:10px 15px 10px 0}.panel-heading .accordion-toggle.collapsed[data-v-4e684bd8]:after{content:""}.panel-heading[data-v-4e684bd8]{border-radius:0;padding:0}.panel-heading a div[data-v-4e684bd8]{color:#5c9b6c;float:left;font-size:14pt;font-weight:700;padding:10px 0 10px 15px;width:88%}.panel-body[data-v-4e684bd8]{padding:0}.panel-group .panel+.panel[data-v-4e684bd8]{border-top:1px solid #5c9b6c;margin-top:0}.region-item[data-v-4e684bd8]{color:#5c9b6c;line-height:2}.region-item[data-v-4e684bd8]:hover,.selected-region[data-v-4e684bd8]{background-color:#5c9b6c;color:#fff;cursor:pointer}.region-item:hover .label-room[data-v-4e684bd8],.selected-region .label-room[data-v-4e684bd8]{background-color:#fff!important;color:#5c9b6c}.disabled[data-v-4e684bd8]{cursor:default;pointer-events:none}.label-floor[data-v-4e684bd8],.label-room[data-v-4e684bd8]{background-color:#5c9b6c!important;font-size:14px;letter-spacing:4px;padding:.2em .2em .2em .4em}',""]);const i=o},6818:(t,e,r)=>{"use strict";r.d(e,{Z:()=>i});var n=r(3645),o=r.n(n)()((function(t){return t[1]}));o.push([t.id,'.container-fluid[data-v-5ba4cb27]{padding:0}.region-area[data-v-5ba4cb27]{height:calc(100vh - 58px);position:relative}#imgMap[data-v-5ba4cb27]{-webkit-user-drag:none;-o-object-fit:contain;object-fit:contain}.div-region[data-v-5ba4cb27]{position:relative;-webkit-transform-origin:0 0;-webkit-user-select:none;-moz-user-select:none}.container-left-top[data-v-5ba4cb27]{left:20px;position:absolute;top:15px;z-index:1}.container-right-top[data-v-5ba4cb27]{position:absolute;right:20px;top:15px}.container-bottom[data-v-5ba4cb27]{bottom:0;left:0;padding:0 10px;position:absolute;right:0}.container-tag[data-v-5ba4cb27]{bottom:48px;display:inline-block;position:fixed}.bottom-bar[data-v-5ba4cb27]{background-image:url(/img/map_bottom_background.png?v=20221216);background-position:50%;background-repeat:no-repeat;background-size:cover;min-height:49px}.vertex-point-container[data-v-5ba4cb27]{display:inline-block}.list-select[data-v-5ba4cb27]{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:transparent;border:none;color:#006400;cursor:pointer;display:inline;font-size:11pt;font-weight:700;margin:0 6px 8px 0;padding:0 0 2px 20px;width:170px}.container-right[data-v-5ba4cb27]{background-color:#fff;border:1px solid #ddd;height:calc(100vh - 106px);padding-top:15px;position:fixed;right:0;top:58px;transition:all .8s ease-in-out;width:320px}.container-right-collapsed[data-v-5ba4cb27]{right:-324px}.container-right-display[data-v-5ba4cb27]{background-color:#fff;box-shadow:0 0 10px gray;height:calc(100vh - 108px);margin:10px 0 0 26px;min-width:450px;overflow-x:hidden;overflow-y:scroll;position:fixed;right:0;top:48px;transition:all .8s ease-in-out}.container-right-display-collapsed[data-v-5ba4cb27]{position:fixed;right:-490px}.region-tag[data-v-5ba4cb27]{bottom:calc(50vh - 200px);margin-top:22px;right:320px}.region-tag[data-v-5ba4cb27],.show-info[data-v-5ba4cb27]{background-color:#fff;border-bottom:2px solid #d3d3d3;border-left:1px solid #d3d3d3;border-radius:20px 0 0 20px;border-top:2px solid #d3d3d3;box-shadow:-1px 0 4px 2px #d3d3d3;color:#5c9b6c;cursor:pointer;display:inline-block;font-size:16pt;font-weight:700;padding:4px 0 8px 10px;position:fixed;transition:all .8s ease-in-out;width:40px;word-break:break-all}.show-info[data-v-5ba4cb27]{bottom:calc(50vh - 20px);right:450px}.burner-collapsed[data-v-5ba4cb27]{position:fixed;right:0}.shadow[data-v-5ba4cb27]{box-shadow:5px 5px 5px gray;margin:0 5px 5px 0}.demarcation[data-v-5ba4cb27]{border-right:2px solid #fff;margin:0 10px 0 6px}.btn[data-v-5ba4cb27]{font-weight:700}.toolbar-btn[data-v-5ba4cb27]{border-radius:10px 10px 10px 10px;font-size:16px;margin:8px 0;padding:4px 8px}.div-background[data-v-5ba4cb27]{background-image:url(/img/vertex_type_dropdownlist_border.png?v=20231108);background-repeat:no-repeat;background-size:contain;display:inline-block;margin:7px 0 0;position:relative;width:254px}.div-background[data-v-5ba4cb27]:after{border-left:6px solid transparent;border-right:6px solid transparent;border-top:6px solid #fff;content:"";height:0;position:absolute;right:10px;top:14px;width:0;z-index:98}.tag-self[data-v-5ba4cb27]{background-color:transparent;background-image:url(/img/tag-blank.png?v=202212161533);background-position:50%;background-repeat:no-repeat;background-size:cover;color:#fff;cursor:pointer;display:inline-block;font-size:12pt;font-weight:700;height:40px;line-height:40px;margin:0 -12px -2px -3px;text-align:center;width:120px}.tag-self[data-v-5ba4cb27]:hover{background-image:url(/img/tag-blank-s.png?v=202212161533)}.scale-refer-block[data-v-5ba4cb27]{display:inline-block;line-height:49px}.scale-refer[data-v-5ba4cb27]{border:2px solid #5c9b6c;border-top:none;display:inline-block;height:4px}.btn-lock[data-v-5ba4cb27]{background-color:rgba(0,0,0,.5);border-radius:8px 8px 8px 8px;color:#fff;width:108px}.view-mask[data-v-5ba4cb27]{background-color:rgba(0,0,0,.2);height:calc(100vh - 48px);left:0;position:fixed;right:0;top:0}.animation-fade[data-v-5ba4cb27]{-webkit-animation:fade-data-v-5ba4cb27 1.2s infinite;animation:fade-data-v-5ba4cb27 1.2s infinite;background-color:gold;position:relative;z-index:1}.clean-station-status[data-v-5ba4cb27],.file-md5[data-v-5ba4cb27]{color:#333;display:inline-block;font-size:12px;margin-left:8px;position:relative;top:8px}.btn-clean-all-edge[data-v-5ba4cb27]{background-color:#5b3c44;border-radius:10px;color:#fff;margin:7px 0}.btn-clean-all-edge[data-v-5ba4cb27]:hover{background-color:#bb7c8c}#region[data-v-5ba4cb27]{overflow:hidden;width:100%}.goal[data-v-5ba4cb27]{background-color:gold;border-radius:50%;height:10px;width:10px}.dust-view[data-v-5ba4cb27],.goal[data-v-5ba4cb27]{position:absolute}.dust-view[data-v-5ba4cb27]{bottom:48px;right:10px}.origin-x-y[data-v-5ba4cb27]{background-image:radial-gradient(circle at 10px 10px,#ff0,orange);border-radius:50%;box-shadow:1px 1px 4px grey;height:10px;position:absolute;width:10px}.region-operate[data-v-5ba4cb27]{bottom:0;left:0;margin-bottom:15px;position:absolute;right:0}.region-floor-room-collapse-select[data-v-5ba4cb27]{height:calc(100vh - 270px);margin-top:6px;overflow:scroll}.project-list-title[data-v-5ba4cb27]{color:#5c9b6c;font-size:24px;margin-bottom:15px}.vehicle-mgmt-list-select[data-v-5ba4cb27]{display:inline-block}.project-list[data-v-5ba4cb27]{padding-left:0;padding-right:0}.dropup[data-v-5ba4cb27]{display:inline-block}.bottom-bar-map-type[data-v-5ba4cb27]{bottom:54px;left:calc(50% - 58px);position:absolute}.bottom-bar-map-type button[data-v-5ba4cb27]{font-weight:500}.bottom-bar-map-type button[data-v-5ba4cb27]:focus{outline:none}.room-name-block[data-v-5ba4cb27]{background-color:#fff;border-top:6px solid #6db880;display:inline-block;font-size:14px;letter-spacing:2px;padding:4px 15px}.room-name-block .room-name[data-v-5ba4cb27]{font-weight:700}.room-name-block .room-name-title[data-v-5ba4cb27]{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.route-planing[data-v-5ba4cb27]{color:#fff;font-size:40px;line-height:calc(100vh - 48px);text-align:center}@-webkit-keyframes fade-data-v-5ba4cb27{0%{opacity:1}50%{opacity:.5}to{opacity:1}}@keyframes fade-data-v-5ba4cb27{0%{opacity:1}50%{opacity:.5}to{opacity:1}}@media only screen and (max-width:520px){.container-tag[data-v-5ba4cb27]{bottom:144px}}@media only screen and (max-width:768px){.container-right[data-v-5ba4cb27]{top:24vh}}@media only screen and (max-width:786px){.container-tag[data-v-5ba4cb27]{bottom:96px}}@media only screen and (max-width:1066px){.div-region[data-v-5ba4cb27]{padding:0 0 80px}}@media only screen and (max-width:552px){.div-region[data-v-5ba4cb27]{padding:0 0 120px}}@media only screen and (max-width:520px){.container-tag[data-v-5ba4cb27]{bottom:122px}}@media only screen and (max-width:460px){.div-region[data-v-5ba4cb27]{padding:0 0 154px}}.battery[data-v-5ba4cb27]{color:#4d878e;font-size:16px;margin:0 10px}',""]);const i=o},809:(t,e,r)=>{"use strict";r.d(e,{Z:()=>i});var n=r(3645),o=r.n(n)()((function(t){return t[1]}));o.push([t.id,".base-map[data-v-16962b0f],.region[data-v-16962b0f]{position:relative}.base-map[data-v-16962b0f]{height:calc(100vh - 60px);overflow:hidden}.base-map img[data-v-16962b0f]{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.region-link[data-v-16962b0f]{position:absolute;z-index:1}.micro-organism[data-v-16962b0f]{background-color:#fff;box-shadow:0 0 10px gray;height:calc(100vh - 60px);margin:10px 0 0 26px;min-width:450px;overflow-x:hidden;overflow-y:scroll;position:fixed;right:0;top:48px;transition:all .8s ease-in-out}.micro-organism-collapsed[data-v-16962b0f]{position:fixed;right:-450px}.micro-organism-tag[data-v-16962b0f]{background-color:#fff;border-bottom:2px solid #d3d3d3;border-left:1px solid #d3d3d3;border-radius:20px 0 0 20px;border-top:2px solid #d3d3d3;bottom:calc(50vh - 20px);box-shadow:-1px 0 4px 2px #d3d3d3;color:#5c9b6c;cursor:pointer;display:inline-block;font-size:16pt;font-weight:700;padding:4px 0 8px 10px;position:fixed;right:450px;transition:all .8s ease-in-out;width:40px;word-break:break-all}.tag-collapsed[data-v-16962b0f]{position:fixed;right:0}.micro-organism-info[data-v-16962b0f]{margin-top:30px}.fa-rotate-45[data-v-16962b0f]{transform:rotate(45deg)}.fa-24[data-v-16962b0f]{font-size:24px}.micro-organism-legend[data-v-16962b0f]{background-color:#fff;border-top:8px solid #bfc2e3;box-shadow:0 1px 4px 2px #d3d3d3;font-size:14px;left:15px;letter-spacing:2px;padding:5px 15px;position:absolute;top:15px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.micro-organism-legend span[data-v-16962b0f]:not(:first-child){margin-left:10px}.micro-organism-legend div[data-v-16962b0f]{line-height:3}.room-name-block[data-v-16962b0f]{background-color:#fff;border-top:8px solid #bfc2e3;box-shadow:0 1px 4px 2px #d3d3d3;font-size:14px;letter-spacing:2px;padding:15px;position:absolute;right:15px;top:15px;transition:top .5s ease-in-out}.room-name-block .room-name[data-v-16962b0f]{font-weight:700}.room-name-block .room-name-title[data-v-16962b0f]{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.back-btn[data-v-16962b0f]{border-right:1px solid grey;padding-right:4px}",""]);const i=o},5568:(t,e,r)=>{"use strict";r.d(e,{Z:()=>i});var n=r(3645),o=r.n(n)()((function(t){return t[1]}));o.push([t.id,".title-right-block[data-v-495cfd99]{float:right}.box-body[data-v-495cfd99]{padding:30px}.table-striped>tbody tr[data-v-495cfd99]:nth-child(2n){background-color:#f5f5f5}table[data-v-495cfd99]{margin-top:20px}.location-select-div[data-v-495cfd99]{display:inline-block;margin-left:16px;position:relative;top:-2px}@-webkit-keyframes breathing-data-v-495cfd99{0%{background-color:#d2d6de}50%{background-color:#f0ad4e}to{background-color:#d2d6de}}@keyframes breathing-data-v-495cfd99{0%{background-color:#d2d6de}50%{background-color:#f0ad4e}to{background-color:#d2d6de}}.breathing-effect[data-v-495cfd99]{-webkit-animation:breathing-data-v-495cfd99 1.2s ease-in-out infinite;animation:breathing-data-v-495cfd99 1.2s ease-in-out infinite}.flow-chart-remote-management-system[data-v-495cfd99]{font-size:24px}.flow-chart-remote-management-system i[data-v-495cfd99]{vertical-align:middle}.flow-chart-remote-management-system .label-node[data-v-495cfd99]{background-color:#d2d6de;border-radius:8px;padding:8px 16px;position:relative}.flow-chart-remote-management-system .label-node .second[data-v-495cfd99]{font-size:18px;position:absolute;right:0;top:-24px}.flow-chart-remote-management-system .arrow-gap[data-v-495cfd99]{padding:8px}",""]);const i=o},6437:(t,e,r)=>{"use strict";r.d(e,{Z:()=>i});var n=r(3645),o=r.n(n)()((function(t){return t[1]}));o.push([t.id,".remote-management-system-status-table[data-v-5632fe8a]{max-height:calc(100vh - 150px);overflow:auto}.table>thead>tr>th[data-v-5632fe8a]{background-color:#5c9b6c;color:#fff;white-space:nowrap}.nowrap[data-v-5632fe8a]{white-space:nowrap}",""]);const i=o},4359:(t,e,r)=>{"use strict";r.d(e,{Z:()=>i});var n=r(3645),o=r.n(n)()((function(t){return t[1]}));o.push([t.id,".room-environment-view[data-v-65ee6f1e]{color:grey;cursor:pointer;font-size:12px;letter-spacing:2px;min-height:18px;min-width:64px;padding:0 10px;position:absolute}.room-environment-view p[data-v-65ee6f1e]{margin-bottom:0}",""]);const i=o},2171:(t,e,r)=>{"use strict";r.d(e,{Z:()=>i});var n=r(3645),o=r.n(n)()((function(t){return t[1]}));o.push([t.id,".login-box-title[data-v-3e34a54e]{background-color:#87b994;border-radius:15px 15px 0 0;box-shadow:5px 5px 15px 0 grey;letter-spacing:2px;padding:30px;width:450px}.login-box-title span[data-v-3e34a54e]{color:#fff;font-size:20px;font-weight:700}.login-box-title img[data-v-3e34a54e]{height:25px;vertical-align:top;width:25px}.login-box[data-v-3e34a54e]{margin:11% auto;position:relative;width:450px;z-index:1}.login-box-body[data-v-3e34a54e]{border-radius:0 0 15px 15px;box-shadow:5px 5px 15px 0 grey;padding:20px;width:450px}.login-box-msg[data-v-3e34a54e]{color:#000;font-size:24px;font-weight:700;letter-spacing:6px}.input-frame[data-v-3e34a54e]{border-radius:10px;font-size:20px;height:40px}.is-danger[data-v-3e34a54e]{font-size:15px;margin:0 0 0 12px}.form-group[data-v-3e34a54e]{margin-bottom:5px;margin-top:15px}.forget-pwd[data-v-3e34a54e]{font-size:14px;margin-left:5px;margin-top:10px}.forget-pwd a[data-v-3e34a54e]{color:#6db880}.login-button-row[data-v-3e34a54e]{margin-bottom:20px;margin-top:20px}.btn-lg[data-v-3e34a54e]{border-radius:10px;font-size:24px;font-weight:700;padding:4px 8px}.close-btn[data-v-3e34a54e]{color:grey;cursor:pointer;position:absolute;right:-15px;top:-15px}",""]);const i=o},5137:(t,e,r)=>{"use strict";r.d(e,{Z:()=>i});var n=r(3645),o=r.n(n)()((function(t){return t[1]}));o.push([t.id,".bottom-row[data-v-2ca6e38a]{background-color:#b1b3b2;background-image:url(/img/login-bottom-row.jpg);background-repeat:no-repeat;background-size:contain;bottom:0;height:66px;left:0;position:fixed;right:0;width:100%}.login-btn[data-v-2ca6e38a]{left:15px;position:fixed;top:15px;z-index:1}.login[data-v-2ca6e38a]{left:0;position:absolute;top:0;width:100%}.container-right[data-v-2ca6e38a]{background-color:#fff;border:1px solid #ddd;height:calc(100vh - 66px);padding-top:15px;position:fixed;right:0;top:0;transition:all .8s ease-in-out;width:320px}.container-right-collapsed[data-v-2ca6e38a]{right:-324px}.region-tag[data-v-2ca6e38a]{background-color:#fff;border-bottom:2px solid #d3d3d3;border-left:1px solid #d3d3d3;border-radius:20px 0 0 20px;border-top:2px solid #d3d3d3;bottom:calc(50vh - 200px);box-shadow:-1px 0 4px 2px #d3d3d3;color:#5c9b6c;cursor:pointer;display:inline-block;font-size:16pt;font-weight:700;margin-top:22px;padding:4px 0 8px 10px;position:fixed;right:320px;transition:all .8s ease-in-out;width:40px;word-break:break-all}.burner-collapsed[data-v-2ca6e38a]{position:fixed;right:0}.project-list[data-v-2ca6e38a]{padding-left:0;padding-right:0}.project-list-title[data-v-2ca6e38a]{color:#5c9b6c;font-size:24px;margin-bottom:15px}.region-floor-room-collapse-select[data-v-2ca6e38a]{height:calc(100vh - 180px);margin-top:6px;overflow:scroll}",""]);const i=o},4317:(t,e,r)=>{"use strict";r.d(e,{Z:()=>i});var n=r(3645),o=r.n(n)()((function(t){return t[1]}));o.push([t.id,".vehicle-mgmt-point[data-v-d46af4dc]{border-radius:50%;height:17px;position:absolute;width:17px;z-index:1}.vehicle-mgmt-point img[data-v-d46af4dc]{left:0;position:absolute;top:0}",""]);const i=o},2398:(t,e,r)=>{"use strict";r.d(e,{Z:()=>i});var n=r(3645),o=r.n(n)()((function(t){return t[1]}));o.push([t.id,".vertex-point[data-v-00bcc902]{top:3px}.vertex-point[data-v-00bcc902],.vertex-point>img[data-v-00bcc902]{-webkit-user-drag:none;border-radius:50%;max-height:20px;position:relative;width:20px}.vertex-point>img[data-v-00bcc902]{top:-6.4px}.vertex-point[data-v-00bcc902]:hover{cursor:pointer}.vertex-point:hover>img[data-v-00bcc902]{scale:2;z-index:2}.animation-fade[data-v-00bcc902]{-webkit-animation:fade-data-v-00bcc902 1.5s infinite;animation:fade-data-v-00bcc902 1.5s infinite}.vertex-badge[data-v-00bcc902]{left:16px;min-height:20px;min-width:20px;position:absolute;top:-6px;z-index:1}.disappear-vertex-point[data-v-00bcc902]{z-index:-1!important}@-webkit-keyframes fade-data-v-00bcc902{0%{opacity:1}50%{opacity:.5}to{opacity:1}}@keyframes fade-data-v-00bcc902{0%{opacity:1}50%{opacity:.5}to{opacity:1}}",""]);const i=o},3998:(t,e,r)=>{"use strict";r.d(e,{Z:()=>i});var n=r(3645),o=r.n(n)()((function(t){return t[1]}));o.push([t.id,".v-spinner{text-align:center}.v-spinner .v-clip{-webkit-animation:v-clipDelay .75s linear 0s infinite;animation:v-clipDelay .75s linear 0s infinite;-webkit-animation-fill-mode:both;animation-fill-mode:both;display:inline-block}@-webkit-keyframes v-clipDelay{0%{transform:rotate(0deg) scale(1)}50%{transform:rotate(180deg) scale(.8)}to{transform:rotate(1turn) scale(1)}}@keyframes v-clipDelay{0%{transform:rotate(0deg) scale(1)}50%{transform:rotate(180deg) scale(.8)}to{transform:rotate(1turn) scale(1)}}",""]);const i=o},4932:(t,e,r)=>{"use strict";r.d(e,{Z:()=>i});var n=r(3645),o=r.n(n)()((function(t){return t[1]}));o.push([t.id,"label[data-v-046380bf]{line-height:34px}.color-picker[data-v-046380bf]{height:0;width:0}.select-block[data-v-046380bf]{display:inline-block;width:calc(100% - 48px)}.micro-organism-select[data-v-046380bf]{display:inline-block;width:calc(50% - 4px)}.micro-organism-select1[data-v-046380bf]{display:inline-block;max-width:600px}.organism-type-select[data-v-046380bf]{display:inline-block;vertical-align:middle;width:calc(50% - 4px)}.organism-type-select1[data-v-046380bf]{display:inline-block;vertical-align:middle;width:auto}.vertical-middle[data-v-046380bf]{vertical-align:middle}.btn-rounded[data-v-046380bf]{border-radius:6px}.relative[data-v-046380bf]{position:relative}.btn-reset-chart-scale[data-v-046380bf]{position:absolute;right:16px;top:32px}input[type=color][data-v-046380bf]{-webkit-appearance:none;border:none}input[type=color][data-v-046380bf]::-webkit-color-swatch-wrapper{padding:0}input[type=color][data-v-046380bf]::-webkit-color-swatch{border:none}",""]);const i=o},2853:(t,e,r)=>{"use strict";r.d(e,{Z:()=>i});var n=r(3645),o=r.n(n)()((function(t){return t[1]}));o.push([t.id,".switch-btn[data-v-8c4d4b3e]{margin-top:5px}.glyphicon-plus-sign[data-v-8c4d4b3e]{font-size:31px}",""]);const i=o},4920:(t,e,r)=>{"use strict";r.d(e,{Z:()=>i});var n=r(3645),o=r.n(n)()((function(t){return t[1]}));o.push([t.id,".edge-point[data-v-f0ad818c]{background-color:#fff;border:1px solid grey;border-radius:50%;min-height:8px;width:8px}.edge-point[data-v-f0ad818c]:hover{background-color:#646464;cursor:pointer}.edge-line[data-v-f0ad818c]{border-top:2px solid;cursor:pointer;height:5px}.edge-line-disabled[data-v-f0ad818c]{border-color:#bababa!important}.edge-arrow[data-v-f0ad818c]{font-size:1px}.edge-arrow-1[data-v-f0ad818c]{position:absolute;right:5px;top:-7.6px}.edge-arrow-2[data-v-f0ad818c]{left:5px;top:-15.4px;transform:rotate(180deg)}.edge-arrow-disabled[data-v-f0ad818c]{color:#bababa!important}.auto-door[data-v-f0ad818c]{border-radius:3px;position:absolute;width:10px}",""]);const i=o},1646:(t,e,r)=>{"use strict";r.d(e,{Z:()=>i});var n=r(3645),o=r.n(n)()((function(t){return t[1]}));o.push([t.id,".full-line[data-v-1862d283]{font-weight:400;min-height:19px;min-width:100%}",""]);const i=o},5419:(t,e,r)=>{"use strict";r.d(e,{Z:()=>i});var n=r(3645),o=r.n(n)()((function(t){return t[1]}));o.push([t.id,".table[data-v-5de08ebd]{margin-bottom:10px}th[data-v-5de08ebd]{vertical-align:middle!important}.border-gray[data-v-5de08ebd],.border-gray[data-v-5de08ebd]:focus{border:1px solid #adadad}.border-gray[data-v-5de08ebd]:focus{outline:none!important}.input-group[data-v-5de08ebd]{margin:0 auto;width:100px;button{position:relative}}.btn-list[data-v-5de08ebd]{margin-bottom:10px}.operate-td[data-v-5de08ebd]{min-width:180px}.input-floor[data-v-5de08ebd]{font-size:14px;width:42px}",""]);const i=o},5904:(t,e,r)=>{"use strict";r.d(e,{Z:()=>i});var n=r(3645),o=r.n(n)()((function(t){return t[1]}));o.push([t.id,".img-size[data-v-7e12537e]{font-size:16px;margin-right:16px}.glyphicon-plus-sign[data-v-7e12537e]{height:19px}",""]);const i=o},8155:(t,e,r)=>{"use strict";r.d(e,{Z:()=>i});var n=r(3645),o=r.n(n)()((function(t){return t[1]}));o.push([t.id,".dust-value[data-v-0f24063b]{background-clip:content-box,border-box;background-image:linear-gradient(#daf7da,#daf7da),linear-gradient(to bottom right,#5c9b6c,#6db880);background-origin:border-box;border:10px solid transparent;border-radius:30px 0 0 0;box-shadow:-2px -2px 10px #5c9b6c;min-height:80px;min-width:300px;>div{margin-left:10px}}",""]);const i=o},3376:(t,e,r)=>{"use strict";r.d(e,{Z:()=>i});var n=r(3645),o=r.n(n)()((function(t){return t[1]}));o.push([t.id,".black-mask[data-v-4dc58d7b]{background-color:rgba(0,0,0,.5);min-height:100%;min-width:100%;position:absolute;top:0;z-index:2}",""]);const i=o},4983:(t,e,r)=>{"use strict";r.d(e,{Z:()=>i});var n=r(3645),o=r.n(n)()((function(t){return t[1]}));o.push([t.id,".info-block[data-v-659dbac8]{left:0;max-width:450px;min-width:450px;position:absolute;top:0}",""]);const i=o},510:(t,e,r)=>{"use strict";r.d(e,{Z:()=>i});var n=r(3645),o=r.n(n)()((function(t){return t[1]}));o.push([t.id,".vertical-middle[data-v-6d52ec99]{vertical-align:middle}.push-btn[data-v-6d52ec99]{background-color:#fff;color:#696969;cursor:pointer}.push-btn[data-v-6d52ec99]:hover{background-color:#f5f5f5}.next-row[data-v-6d52ec99]{margin-top:15px}.box[data-v-6d52ec99]{box-shadow:5px 5px 15px 0 grey}.box-top[data-v-6d52ec99]{border-radius:15px 15px 0 0}.box-bottom[data-v-6d52ec99]{border-radius:0 0 15px 15px}input[data-v-6d52ec99]::-webkit-inner-spin-button,input[data-v-6d52ec99]::-webkit-outer-spin-button{-webkit-appearance:none;margin:0}input[type=number][data-v-6d52ec99]{-moz-appearance:textfield}input[type=color][data-v-6d52ec99]{-webkit-appearance:none;border:none}input[type=color][data-v-6d52ec99]::-webkit-color-swatch-wrapper{padding:0}input[type=color][data-v-6d52ec99]::-webkit-color-swatch{border:none}#excel-container[data-v-6d52ec99]{height:400px;width:100%}",""]);const i=o},9376:(t,e,r)=>{"use strict";r.d(e,{Z:()=>i});var n=r(3645),o=r.n(n)()((function(t){return t[1]}));o.push([t.id,".title-block[data-v-58bcecb2]{margin-bottom:30px}.title-left-block[data-v-58bcecb2]{display:inline-block;h3{font-size:32px}}.title-right-block[data-v-58bcecb2]{float:right;letter-spacing:10px;margin-top:20px}.box-body[data-v-58bcecb2]{padding:30px}.data-list[data-v-58bcecb2]{margin-top:20px}.data-row[data-v-58bcecb2]{background-image:linear-gradient(#fcfcfc,#fafafa,#f6f6f6);border:1px solid #f1f1f1;border-radius:8px}.data-row[data-v-58bcecb2]:hover{background-image:linear-gradient(#f9f9f9,#efefef)}.data-row[data-v-58bcecb2]:not(:first-child){margin-top:15px}.data-row-content[data-v-58bcecb2]{display:inline-block;padding:10px;vertical-align:middle;.data-row-subtitle{color:#9a9a99;font-size:14px}}.data-row-right-block[data-v-58bcecb2]{float:right;letter-spacing:4px;margin-top:20px;padding:0 20px}",""]);const i=o},1904:(t,e,r)=>{"use strict";r.d(e,{Z:()=>i});var n=r(3645),o=r.n(n)()((function(t){return t[1]}));o.push([t.id,".edge-line[data-v-49a65384]{background-color:#545c51;min-height:5px}.edge-line-disabled[data-v-49a65384]{background-color:#666}.edge-arrow-1[data-v-49a65384]{right:-4px;transform:rotate(90deg)}.edge-arrow-1[data-v-49a65384],.edge-arrow-2[data-v-49a65384]{height:14px;position:absolute;top:-4.4px;width:16px}.edge-arrow-2[data-v-49a65384]{left:-4px;transform:rotate(-90deg)}",""]);const i=o},7990:(t,e,r)=>{"use strict";r.d(e,{Z:()=>i});var n=r(3645),o=r.n(n)()((function(t){return t[1]}));o.push([t.id,".p[data-v-2593f8d8]{color:#969696}",""]);const i=o},4938:(t,e,r)=>{"use strict";r.d(e,{Z:()=>i});var n=r(3645),o=r.n(n)()((function(t){return t[1]}));o.push([t.id,".table[data-v-56f91b58]{margin-bottom:10px}.size-sm[data-v-56f91b58]{font-size:12pt}td[data-v-56f91b58],th[data-v-56f91b58]{vertical-align:middle!important}",""]);const i=o},9770:(t,e,r)=>{"use strict";r.d(e,{Z:()=>i});var n=r(3645),o=r.n(n)()((function(t){return t[1]}));o.push([t.id,".th-max-width[data-v-40215a7d]{max-width:130px}.th-min-width[data-v-40215a7d]{min-width:150px}",""]);const i=o},9988:(t,e,r)=>{"use strict";r.d(e,{Z:()=>i});var n=r(3645),o=r.n(n)()((function(t){return t[1]}));o.push([t.id,"hr[data-v-3a6a3770]{margin-bottom:20px}.checkbox-label-text[data-v-3a6a3770]{cursor:pointer;position:relative;top:-1px}",""]);const i=o},2885:(t,e,r)=>{"use strict";r.d(e,{Z:()=>i});var n=r(3645),o=r.n(n)()((function(t){return t[1]}));o.push([t.id,".table[data-v-6891ac15]{margin-bottom:10px}th[data-v-6891ac15]{vertical-align:middle!important}",""]);const i=o},8703:(t,e,r)=>{"use strict";r.d(e,{Z:()=>i});var n=r(3645),o=r.n(n)()((function(t){return t[1]}));o.push([t.id,".checkbox-label-text[data-v-0628cefb]{font-size:18px;font-weight:400}",""]);const i=o},2928:(t,e,r)=>{"use strict";r.d(e,{Z:()=>i});var n=r(3645),o=r.n(n)()((function(t){return t[1]}));o.push([t.id,".pollute-color-selector[data-v-43e56941]{height:27px;width:29px}input[type=color][data-v-43e56941]{-webkit-appearance:none;border:none}input[type=color][data-v-43e56941]::-webkit-color-swatch-wrapper{padding:0}input[type=color][data-v-43e56941]::-webkit-color-swatch{border:none}",""]);const i=o},4080:(t,e,r)=>{"use strict";r.d(e,{Z:()=>i});var n=r(3645),o=r.n(n)()((function(t){return t[1]}));o.push([t.id,"hr[data-v-2ef8f00c]{margin-bottom:20px}",""]);const i=o},8103:(t,e,r)=>{"use strict";r.d(e,{Z:()=>i});var n=r(3645),o=r.n(n)()((function(t){return t[1]}));o.push([t.id,".img-size[data-v-1ed0f0a4]{font-size:16px;margin-right:16px}",""]);const i=o},5390:(t,e,r)=>{"use strict";r.d(e,{Z:()=>i});var n=r(3645),o=r.n(n)()((function(t){return t[1]}));o.push([t.id,".vertical-middle[data-v-1d9af6c4]{vertical-align:middle}.inline-block[data-v-1d9af6c4]{display:inline-block}.push-btn[data-v-1d9af6c4]{background-color:#fff;color:#696969;cursor:pointer}.push-btn[data-v-1d9af6c4]:hover{background-color:#f5f5f5}input[data-v-1d9af6c4]::-webkit-inner-spin-button,input[data-v-1d9af6c4]::-webkit-outer-spin-button{-webkit-appearance:none;margin:0}input[type=number][data-v-1d9af6c4]{-moz-appearance:textfield}input[type=color][data-v-1d9af6c4]{-webkit-appearance:none;border:none}input[type=color][data-v-1d9af6c4]::-webkit-color-swatch-wrapper{padding:0}input[type=color][data-v-1d9af6c4]::-webkit-color-swatch{border:none}",""]);const i=o},7605:(t,e,r)=>{"use strict";r.d(e,{Z:()=>i});var n=r(3645),o=r.n(n)()((function(t){return t[1]}));o.push([t.id,".select-all-div[data-v-44b3b04c]{display:inline-block;position:relative}.select-all-input[data-v-44b3b04c]{position:relative;top:3px}.select-all-label[data-v-44b3b04c]{position:relative;top:2px}.control-label[data-v-44b3b04c],.select-all-label[data-v-44b3b04c]{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.divider[data-v-44b3b04c]{border:1px solid #d3d3d3;display:inline-block;height:24px;margin:0 6px;position:relative;top:8px}",""]);const i=o},3076:(t,e,r)=>{"use strict";r.d(e,{Z:()=>i});var n=r(3645),o=r.n(n)()((function(t){return t[1]}));o.push([t.id,".op-btn[data-v-6a30b578]{border-radius:6px;font-weight:700;padding:5px 7px 2px 6px;vertical-align:top}",""]);const i=o},6579:(t,e,r)=>{"use strict";r.d(e,{Z:()=>i});var n=r(3645),o=r.n(n)()((function(t){return t[1]}));o.push([t.id,".schedule-time[data-v-303c46dc]{padding-top:4px}.date-time-selector[data-v-303c46dc]{border-color:#d2d6de;font-size:18px;height:28px;min-width:60px;outline-color:#d2d6de}",""]);const i=o},5292:(t,e,r)=>{"use strict";r.d(e,{Z:()=>i});var n=r(3645),o=r.n(n)()((function(t){return t[1]}));o.push([t.id,".icon-user[data-v-9cb6fb46]{width:14px}",""]);const i=o},6042:(t,e,r)=>{"use strict";r.d(e,{Z:()=>i});var n=r(3645),o=r.n(n)()((function(t){return t[1]}));o.push([t.id,".th-search-text[data-v-35c51619]{max-width:100px;min-width:80px}.th-search-enable[data-v-35c51619]{min-width:100px}.table-block[data-v-35c51619]{height:calc(100vh - 305px);overflow:auto;padding-right:0}.region-title[data-v-35c51619]{font-size:18px;font-weight:700;margin-top:14px;padding-left:7px}.region-list[data-v-35c51619]{border:1px solid #f4f4f4;height:calc(100vh - 350px);list-style-type:none;overflow:auto;padding-left:0}.region-item[data-v-35c51619]{cursor:pointer;padding:8px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.region-item[data-v-35c51619]:hover{background-color:#e3e3e3}.region-item[data-v-35c51619]:active{cursor:-webkit-grabbing;cursor:grabbing}.region-item[data-v-35c51619]:not(:first-child){margin-top:10px}.label-success[data-v-35c51619]{background-color:#6db880!important}.region-label[data-v-35c51619]{display:inline-block;font-size:14px;margin-bottom:10px;margin-right:15px;margin-top:10px;position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.region-label-close-btn[data-v-35c51619]{color:#6db880;cursor:pointer;position:absolute;right:-10px;top:-10px}.no-wrap[data-v-35c51619]{white-space:nowrap}.vertical-middle[data-v-35c51619]{vertical-align:middle}.cursor-disable[data-v-35c51619],.cursor-disable[data-v-35c51619]:active,.cursor-disable[data-v-35c51619]:hover{cursor:not-allowed}.th-operate[data-v-35c51619]{width:170px}.region-label-div[data-v-35c51619]{border-top:1px solid #d3d3d3;margin-top:10px;padding-top:5px}@media only screen and (max-width:768px){.th-search-enable[data-v-35c51619],.th-search-text[data-v-35c51619]{max-width:100%}}",""]);const i=o},7379:(t,e,r)=>{"use strict";r.d(e,{Z:()=>i});var n=r(3645),o=r.n(n)()((function(t){return t[1]}));o.push([t.id,"hr[data-v-028fd0f4]{margin-bottom:20px}",""]);const i=o},4357:(t,e,r)=>{"use strict";r.d(e,{Z:()=>i});var n=r(3645),o=r.n(n)()((function(t){return t[1]}));o.push([t.id,".table[data-v-384a1380]{margin-bottom:10px}.clean-area[data-v-384a1380]{background-color:hsla(97,53%,92%,.5);border-radius:10px;position:absolute}",""]);const i=o},1668:(t,e,r)=>{"use strict";r.d(e,{Z:()=>i});var n=r(3645),o=r.n(n)()((function(t){return t[1]}));o.push([t.id,".btn-xs[data-v-5c4fe72c]{height:27px}input[type=color][data-v-5c4fe72c]{-webkit-appearance:none;border:none}input[type=color][data-v-5c4fe72c]::-webkit-color-swatch-wrapper{padding:0}input[type=color][data-v-5c4fe72c]::-webkit-color-swatch{border:none}",""]);const i=o},7300:(t,e,r)=>{"use strict";r.d(e,{Z:()=>i});var n=r(3645),o=r.n(n)()((function(t){return t[1]}));o.push([t.id,".vendor-list-select[data-v-701869e6]{width:83%}",""]);const i=o},52:(t,e,r)=>{"use strict";r.d(e,{Z:()=>i});var n=r(3645),o=r.n(n)()((function(t){return t[1]}));o.push([t.id,".switch-btn[data-v-e321d796]{margin-top:5px}.glyphicon-plus-sign[data-v-e321d796]{font-size:31px}",""]);const i=o},9365:(t,e,r)=>{"use strict";r.d(e,{Z:()=>i});var n=r(3645),o=r.n(n)()((function(t){return t[1]}));o.push([t.id,".scroll[data-v-18ca7527]{max-height:500px;overflow-x:scroll}.text-right[data-v-18ca7527]{margin-top:10px}",""]);const i=o},4125:(t,e,r)=>{"use strict";r.d(e,{Z:()=>i});var n=r(3645),o=r.n(n)()((function(t){return t[1]}));o.push([t.id,".black-mask[data-v-0319c226]{background-color:rgba(0,0,0,.5);min-height:100%;min-width:100%;position:absolute;top:0;z-index:2}",""]);const i=o},8941:(t,e,r)=>{"use strict";r.d(e,{Z:()=>i});var n=r(3645),o=r.n(n)()((function(t){return t[1]}));o.push([t.id,"table tbody[data-v-18bbbb08]{display:block}table thead[data-v-18bbbb08],tbody tr[data-v-18bbbb08]{display:table;table-layout:fixed;width:100%}.glyphicon-plus-sign[data-v-18bbbb08]{font-size:31px}.toggle-btn[data-v-18bbbb08]{margin-top:5px}.booking-sign[data-v-18bbbb08]{border:1px solid grey;border-radius:5px 5px 5px 5px;height:60px;margin:0 0 0 3px;width:120px}.booking-tag[data-v-18bbbb08]{align-self:end;color:#fff;text-align:center;width:100%}.booking[data-v-18bbbb08]{background-color:green!important;border-radius:5px 5px 0 0}.none-booking[data-v-18bbbb08]{background-color:grey;border-radius:0 0 5px 5px;margin:30px 0 0}.full-line[data-v-18bbbb08]{font-weight:400;min-height:21.2px;min-width:100%}.display-select[data-v-18bbbb08]{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:transparent;border-color:transparent;color:#000;cursor:unset;font-size:12pt;font-weight:700;margin:2px 0 0 -15px;-webkit-user-select:text;-moz-user-select:text;-ms-user-select:text;user-select:text}.cursor-pointer[data-v-18bbbb08]{cursor:pointer}.ml-15[data-v-18bbbb08]{margin-left:15px}.switch-btn[data-v-18bbbb08]{margin-top:10px}.border-gray[data-v-18bbbb08],.border-gray[data-v-18bbbb08]:focus{border:1px solid #adadad}.border-gray[data-v-18bbbb08]:focus{outline:none!important}.input-target-floor[data-v-18bbbb08]{font-size:16px;font-weight:400;height:30px;position:relative;text-align:center;top:2px;width:120px}.close-btn[data-v-18bbbb08],.elevator-btn[data-v-18bbbb08],.input-target-floor[data-v-18bbbb08]{border-radius:50%;height:42px;padding:5px;width:42px}.elevator-btn[data-v-18bbbb08]{position:relative}.fa-arrow-up[data-v-18bbbb08]{left:6px;top:12px}.fa-arrow-down[data-v-18bbbb08],.fa-arrow-up[data-v-18bbbb08]{font-size:14px;position:absolute}.fa-arrow-down[data-v-18bbbb08]{left:19px;top:13px}.fa-play[data-v-18bbbb08]{font-size:6px}.elevator-command[data-v-18bbbb08]{height:44px;margin:5px 0 0 -6px}",""]);const i=o},3645:t=>{"use strict";t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var r=t(e);return e[2]?"@media ".concat(e[2]," {").concat(r,"}"):r})).join("")},e.i=function(t,r,n){"string"==typeof t&&(t=[[null,t,""]]);var o={};if(n)for(var i=0;i<this.length;i++){var a=this[i][0];null!=a&&(o[a]=!0)}for(var s=0;s<t.length;s++){var c=[].concat(t[s]);n&&o[c[0]]||(r&&(c[2]?c[2]="".concat(r," and ").concat(c[2]):c[2]=r),e.push(c))}},e}},840:(t,e,r)=>{var n;!function(o,i,a,s){"use strict";var c,l=["","webkit","Moz","MS","ms","o"],u=i.createElement("div"),d=Math.round,h=Math.abs,f=Date.now;function p(t,e,r){return setTimeout(x(t,r),e)}function m(t,e,r){return!!Array.isArray(t)&&(v(t,r[e],r),!0)}function v(t,e,r){var n;if(t)if(t.forEach)t.forEach(e,r);else if(t.length!==s)for(n=0;n<t.length;)e.call(r,t[n],n,t),n++;else for(n in t)t.hasOwnProperty(n)&&e.call(r,t[n],n,t)}function g(t,e,r){var n="DEPRECATED METHOD: "+e+"\n"+r+" AT \n";return function(){var e=new Error("get-stack-trace"),r=e&&e.stack?e.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",i=o.console&&(o.console.warn||o.console.log);return i&&i.call(o.console,n,r),t.apply(this,arguments)}}c="function"!=typeof Object.assign?function(t){if(t===s||null===t)throw new TypeError("Cannot convert undefined or null to object");for(var e=Object(t),r=1;r<arguments.length;r++){var n=arguments[r];if(n!==s&&null!==n)for(var o in n)n.hasOwnProperty(o)&&(e[o]=n[o])}return e}:Object.assign;var y=g((function(t,e,r){for(var n=Object.keys(e),o=0;o<n.length;)(!r||r&&t[n[o]]===s)&&(t[n[o]]=e[n[o]]),o++;return t}),"extend","Use `assign`."),_=g((function(t,e){return y(t,e,!0)}),"merge","Use `assign`.");function b(t,e,r){var n,o=e.prototype;(n=t.prototype=Object.create(o)).constructor=t,n._super=o,r&&c(n,r)}function x(t,e){return function(){return t.apply(e,arguments)}}function w(t,e){return"function"==typeof t?t.apply(e&&e[0]||s,e):t}function C(t,e){return t===s?e:t}function k(t,e,r){v(M(e),(function(e){t.addEventListener(e,r,!1)}))}function L(t,e,r){v(M(e),(function(e){t.removeEventListener(e,r,!1)}))}function S(t,e){for(;t;){if(t==e)return!0;t=t.parentNode}return!1}function E(t,e){return t.indexOf(e)>-1}function M(t){return t.trim().split(/\s+/g)}function O(t,e,r){if(t.indexOf&&!r)return t.indexOf(e);for(var n=0;n<t.length;){if(r&&t[n][r]==e||!r&&t[n]===e)return n;n++}return-1}function P(t){return Array.prototype.slice.call(t,0)}function j(t,e,r){for(var n=[],o=[],i=0;i<t.length;){var a=e?t[i][e]:t[i];O(o,a)<0&&n.push(t[i]),o[i]=a,i++}return r&&(n=e?n.sort((function(t,r){return t[e]>r[e]})):n.sort()),n}function N(t,e){for(var r,n,o=e[0].toUpperCase()+e.slice(1),i=0;i<l.length;){if((n=(r=l[i])?r+o:e)in t)return n;i++}return s}var T=1;function $(t){var e=t.ownerDocument||t;return e.defaultView||e.parentWindow||o}var I="ontouchstart"in o,D=N(o,"PointerEvent")!==s,A=I&&/mobile|tablet|ip(ad|hone|od)|android/i.test(navigator.userAgent),F="touch",q="mouse",R=24,G=["x","y"],z=["clientX","clientY"];function V(t,e){var r=this;this.manager=t,this.callback=e,this.element=t.element,this.target=t.options.inputTarget,this.domHandler=function(e){w(t.options.enable,[t])&&r.handler(e)},this.init()}function Z(t,e,r){var n=r.pointers.length,o=r.changedPointers.length,i=1&e&&n-o==0,a=12&e&&n-o==0;r.isFirst=!!i,r.isFinal=!!a,i&&(t.session={}),r.eventType=e,function(t,e){var r=t.session,n=e.pointers,o=n.length;r.firstInput||(r.firstInput=B(e));o>1&&!r.firstMultiple?r.firstMultiple=B(e):1===o&&(r.firstMultiple=!1);var i=r.firstInput,a=r.firstMultiple,c=a?a.center:i.center,l=e.center=H(n);e.timeStamp=f(),e.deltaTime=e.timeStamp-i.timeStamp,e.angle=X(c,l),e.distance=W(c,l),function(t,e){var r=e.center,n=t.offsetDelta||{},o=t.prevDelta||{},i=t.prevInput||{};1!==e.eventType&&4!==i.eventType||(o=t.prevDelta={x:i.deltaX||0,y:i.deltaY||0},n=t.offsetDelta={x:r.x,y:r.y});e.deltaX=o.x+(r.x-n.x),e.deltaY=o.y+(r.y-n.y)}(r,e),e.offsetDirection=Y(e.deltaX,e.deltaY);var u=U(e.deltaTime,e.deltaX,e.deltaY);e.overallVelocityX=u.x,e.overallVelocityY=u.y,e.overallVelocity=h(u.x)>h(u.y)?u.x:u.y,e.scale=a?(d=a.pointers,p=n,W(p[0],p[1],z)/W(d[0],d[1],z)):1,e.rotation=a?function(t,e){return X(e[1],e[0],z)+X(t[1],t[0],z)}(a.pointers,n):0,e.maxPointers=r.prevInput?e.pointers.length>r.prevInput.maxPointers?e.pointers.length:r.prevInput.maxPointers:e.pointers.length,function(t,e){var r,n,o,i,a=t.lastInterval||e,c=e.timeStamp-a.timeStamp;if(8!=e.eventType&&(c>25||a.velocity===s)){var l=e.deltaX-a.deltaX,u=e.deltaY-a.deltaY,d=U(c,l,u);n=d.x,o=d.y,r=h(d.x)>h(d.y)?d.x:d.y,i=Y(l,u),t.lastInterval=e}else r=a.velocity,n=a.velocityX,o=a.velocityY,i=a.direction;e.velocity=r,e.velocityX=n,e.velocityY=o,e.direction=i}(r,e);var d,p;var m=t.element;S(e.srcEvent.target,m)&&(m=e.srcEvent.target);e.target=m}(t,r),t.emit("hammer.input",r),t.recognize(r),t.session.prevInput=r}function B(t){for(var e=[],r=0;r<t.pointers.length;)e[r]={clientX:d(t.pointers[r].clientX),clientY:d(t.pointers[r].clientY)},r++;return{timeStamp:f(),pointers:e,center:H(e),deltaX:t.deltaX,deltaY:t.deltaY}}function H(t){var e=t.length;if(1===e)return{x:d(t[0].clientX),y:d(t[0].clientY)};for(var r=0,n=0,o=0;o<e;)r+=t[o].clientX,n+=t[o].clientY,o++;return{x:d(r/e),y:d(n/e)}}function U(t,e,r){return{x:e/t||0,y:r/t||0}}function Y(t,e){return t===e?1:h(t)>=h(e)?t<0?2:4:e<0?8:16}function W(t,e,r){r||(r=G);var n=e[r[0]]-t[r[0]],o=e[r[1]]-t[r[1]];return Math.sqrt(n*n+o*o)}function X(t,e,r){r||(r=G);var n=e[r[0]]-t[r[0]],o=e[r[1]]-t[r[1]];return 180*Math.atan2(o,n)/Math.PI}V.prototype={handler:function(){},init:function(){this.evEl&&k(this.element,this.evEl,this.domHandler),this.evTarget&&k(this.target,this.evTarget,this.domHandler),this.evWin&&k($(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&L(this.element,this.evEl,this.domHandler),this.evTarget&&L(this.target,this.evTarget,this.domHandler),this.evWin&&L($(this.element),this.evWin,this.domHandler)}};var Q={mousedown:1,mousemove:2,mouseup:4},K="mousedown",J="mousemove mouseup";function tt(){this.evEl=K,this.evWin=J,this.pressed=!1,V.apply(this,arguments)}b(tt,V,{handler:function(t){var e=Q[t.type];1&e&&0===t.button&&(this.pressed=!0),2&e&&1!==t.which&&(e=4),this.pressed&&(4&e&&(this.pressed=!1),this.callback(this.manager,e,{pointers:[t],changedPointers:[t],pointerType:q,srcEvent:t}))}});var et={pointerdown:1,pointermove:2,pointerup:4,pointercancel:8,pointerout:8},rt={2:F,3:"pen",4:q,5:"kinect"},nt="pointerdown",ot="pointermove pointerup pointercancel";function it(){this.evEl=nt,this.evWin=ot,V.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}o.MSPointerEvent&&!o.PointerEvent&&(nt="MSPointerDown",ot="MSPointerMove MSPointerUp MSPointerCancel"),b(it,V,{handler:function(t){var e=this.store,r=!1,n=t.type.toLowerCase().replace("ms",""),o=et[n],i=rt[t.pointerType]||t.pointerType,a=i==F,s=O(e,t.pointerId,"pointerId");1&o&&(0===t.button||a)?s<0&&(e.push(t),s=e.length-1):12&o&&(r=!0),s<0||(e[s]=t,this.callback(this.manager,o,{pointers:e,changedPointers:[t],pointerType:i,srcEvent:t}),r&&e.splice(s,1))}});var at={touchstart:1,touchmove:2,touchend:4,touchcancel:8},st="touchstart",ct="touchstart touchmove touchend touchcancel";function lt(){this.evTarget=st,this.evWin=ct,this.started=!1,V.apply(this,arguments)}function ut(t,e){var r=P(t.touches),n=P(t.changedTouches);return 12&e&&(r=j(r.concat(n),"identifier",!0)),[r,n]}b(lt,V,{handler:function(t){var e=at[t.type];if(1===e&&(this.started=!0),this.started){var r=ut.call(this,t,e);12&e&&r[0].length-r[1].length==0&&(this.started=!1),this.callback(this.manager,e,{pointers:r[0],changedPointers:r[1],pointerType:F,srcEvent:t})}}});var dt={touchstart:1,touchmove:2,touchend:4,touchcancel:8},ht="touchstart touchmove touchend touchcancel";function ft(){this.evTarget=ht,this.targetIds={},V.apply(this,arguments)}function pt(t,e){var r=P(t.touches),n=this.targetIds;if(3&e&&1===r.length)return n[r[0].identifier]=!0,[r,r];var o,i,a=P(t.changedTouches),s=[],c=this.target;if(i=r.filter((function(t){return S(t.target,c)})),1===e)for(o=0;o<i.length;)n[i[o].identifier]=!0,o++;for(o=0;o<a.length;)n[a[o].identifier]&&s.push(a[o]),12&e&&delete n[a[o].identifier],o++;return s.length?[j(i.concat(s),"identifier",!0),s]:void 0}b(ft,V,{handler:function(t){var e=dt[t.type],r=pt.call(this,t,e);r&&this.callback(this.manager,e,{pointers:r[0],changedPointers:r[1],pointerType:F,srcEvent:t})}});function mt(){V.apply(this,arguments);var t=x(this.handler,this);this.touch=new ft(this.manager,t),this.mouse=new tt(this.manager,t),this.primaryTouch=null,this.lastTouches=[]}function vt(t,e){1&t?(this.primaryTouch=e.changedPointers[0].identifier,gt.call(this,e)):12&t&&gt.call(this,e)}function gt(t){var e=t.changedPointers[0];if(e.identifier===this.primaryTouch){var r={x:e.clientX,y:e.clientY};this.lastTouches.push(r);var n=this.lastTouches;setTimeout((function(){var t=n.indexOf(r);t>-1&&n.splice(t,1)}),2500)}}function yt(t){for(var e=t.srcEvent.clientX,r=t.srcEvent.clientY,n=0;n<this.lastTouches.length;n++){var o=this.lastTouches[n],i=Math.abs(e-o.x),a=Math.abs(r-o.y);if(i<=25&&a<=25)return!0}return!1}b(mt,V,{handler:function(t,e,r){var n=r.pointerType==F,o=r.pointerType==q;if(!(o&&r.sourceCapabilities&&r.sourceCapabilities.firesTouchEvents)){if(n)vt.call(this,e,r);else if(o&&yt.call(this,r))return;this.callback(t,e,r)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var _t=N(u.style,"touchAction"),bt=_t!==s,xt="compute",wt="auto",Ct="manipulation",kt="none",Lt="pan-x",St="pan-y",Et=function(){if(!bt)return!1;var t={},e=o.CSS&&o.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach((function(r){t[r]=!e||o.CSS.supports("touch-action",r)})),t}();function Mt(t,e){this.manager=t,this.set(e)}Mt.prototype={set:function(t){t==xt&&(t=this.compute()),bt&&this.manager.element.style&&Et[t]&&(this.manager.element.style[_t]=t),this.actions=t.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var t=[];return v(this.manager.recognizers,(function(e){w(e.options.enable,[e])&&(t=t.concat(e.getTouchAction()))})),function(t){if(E(t,kt))return kt;var e=E(t,Lt),r=E(t,St);if(e&&r)return kt;if(e||r)return e?Lt:St;if(E(t,Ct))return Ct;return wt}(t.join(" "))},preventDefaults:function(t){var e=t.srcEvent,r=t.offsetDirection;if(this.manager.session.prevented)e.preventDefault();else{var n=this.actions,o=E(n,kt)&&!Et.none,i=E(n,St)&&!Et["pan-y"],a=E(n,Lt)&&!Et["pan-x"];if(o){var s=1===t.pointers.length,c=t.distance<2,l=t.deltaTime<250;if(s&&c&&l)return}if(!a||!i)return o||i&&6&r||a&&r&R?this.preventSrc(e):void 0}},preventSrc:function(t){this.manager.session.prevented=!0,t.preventDefault()}};var Ot=32;function Pt(t){this.options=c({},this.defaults,t||{}),this.id=T++,this.manager=null,this.options.enable=C(this.options.enable,!0),this.state=1,this.simultaneous={},this.requireFail=[]}function jt(t){return 16&t?"cancel":8&t?"end":4&t?"move":2&t?"start":""}function Nt(t){return 16==t?"down":8==t?"up":2==t?"left":4==t?"right":""}function Tt(t,e){var r=e.manager;return r?r.get(t):t}function $t(){Pt.apply(this,arguments)}function It(){$t.apply(this,arguments),this.pX=null,this.pY=null}function Dt(){$t.apply(this,arguments)}function At(){Pt.apply(this,arguments),this._timer=null,this._input=null}function Ft(){$t.apply(this,arguments)}function qt(){$t.apply(this,arguments)}function Rt(){Pt.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function Gt(t,e){return(e=e||{}).recognizers=C(e.recognizers,Gt.defaults.preset),new zt(t,e)}Pt.prototype={defaults:{},set:function(t){return c(this.options,t),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(t){if(m(t,"recognizeWith",this))return this;var e=this.simultaneous;return e[(t=Tt(t,this)).id]||(e[t.id]=t,t.recognizeWith(this)),this},dropRecognizeWith:function(t){return m(t,"dropRecognizeWith",this)||(t=Tt(t,this),delete this.simultaneous[t.id]),this},requireFailure:function(t){if(m(t,"requireFailure",this))return this;var e=this.requireFail;return-1===O(e,t=Tt(t,this))&&(e.push(t),t.requireFailure(this)),this},dropRequireFailure:function(t){if(m(t,"dropRequireFailure",this))return this;t=Tt(t,this);var e=O(this.requireFail,t);return e>-1&&this.requireFail.splice(e,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(t){return!!this.simultaneous[t.id]},emit:function(t){var e=this,r=this.state;function n(r){e.manager.emit(r,t)}r<8&&n(e.options.event+jt(r)),n(e.options.event),t.additionalEvent&&n(t.additionalEvent),r>=8&&n(e.options.event+jt(r))},tryEmit:function(t){if(this.canEmit())return this.emit(t);this.state=Ot},canEmit:function(){for(var t=0;t<this.requireFail.length;){if(!(33&this.requireFail[t].state))return!1;t++}return!0},recognize:function(t){var e=c({},t);if(!w(this.options.enable,[this,e]))return this.reset(),void(this.state=Ot);56&this.state&&(this.state=1),this.state=this.process(e),30&this.state&&this.tryEmit(e)},process:function(t){},getTouchAction:function(){},reset:function(){}},b($t,Pt,{defaults:{pointers:1},attrTest:function(t){var e=this.options.pointers;return 0===e||t.pointers.length===e},process:function(t){var e=this.state,r=t.eventType,n=6&e,o=this.attrTest(t);return n&&(8&r||!o)?16|e:n||o?4&r?8|e:2&e?4|e:2:Ot}}),b(It,$t,{defaults:{event:"pan",threshold:10,pointers:1,direction:30},getTouchAction:function(){var t=this.options.direction,e=[];return 6&t&&e.push(St),t&R&&e.push(Lt),e},directionTest:function(t){var e=this.options,r=!0,n=t.distance,o=t.direction,i=t.deltaX,a=t.deltaY;return o&e.direction||(6&e.direction?(o=0===i?1:i<0?2:4,r=i!=this.pX,n=Math.abs(t.deltaX)):(o=0===a?1:a<0?8:16,r=a!=this.pY,n=Math.abs(t.deltaY))),t.direction=o,r&&n>e.threshold&&o&e.direction},attrTest:function(t){return $t.prototype.attrTest.call(this,t)&&(2&this.state||!(2&this.state)&&this.directionTest(t))},emit:function(t){this.pX=t.deltaX,this.pY=t.deltaY;var e=Nt(t.direction);e&&(t.additionalEvent=this.options.event+e),this._super.emit.call(this,t)}}),b(Dt,$t,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[kt]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.scale-1)>this.options.threshold||2&this.state)},emit:function(t){if(1!==t.scale){var e=t.scale<1?"in":"out";t.additionalEvent=this.options.event+e}this._super.emit.call(this,t)}}),b(At,Pt,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[wt]},process:function(t){var e=this.options,r=t.pointers.length===e.pointers,n=t.distance<e.threshold,o=t.deltaTime>e.time;if(this._input=t,!n||!r||12&t.eventType&&!o)this.reset();else if(1&t.eventType)this.reset(),this._timer=p((function(){this.state=8,this.tryEmit()}),e.time,this);else if(4&t.eventType)return 8;return Ot},reset:function(){clearTimeout(this._timer)},emit:function(t){8===this.state&&(t&&4&t.eventType?this.manager.emit(this.options.event+"up",t):(this._input.timeStamp=f(),this.manager.emit(this.options.event,this._input)))}}),b(Ft,$t,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[kt]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.rotation)>this.options.threshold||2&this.state)}}),b(qt,$t,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:30,pointers:1},getTouchAction:function(){return It.prototype.getTouchAction.call(this)},attrTest:function(t){var e,r=this.options.direction;return 30&r?e=t.overallVelocity:6&r?e=t.overallVelocityX:r&R&&(e=t.overallVelocityY),this._super.attrTest.call(this,t)&&r&t.offsetDirection&&t.distance>this.options.threshold&&t.maxPointers==this.options.pointers&&h(e)>this.options.velocity&&4&t.eventType},emit:function(t){var e=Nt(t.offsetDirection);e&&this.manager.emit(this.options.event+e,t),this.manager.emit(this.options.event,t)}}),b(Rt,Pt,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[Ct]},process:function(t){var e=this.options,r=t.pointers.length===e.pointers,n=t.distance<e.threshold,o=t.deltaTime<e.time;if(this.reset(),1&t.eventType&&0===this.count)return this.failTimeout();if(n&&o&&r){if(4!=t.eventType)return this.failTimeout();var i=!this.pTime||t.timeStamp-this.pTime<e.interval,a=!this.pCenter||W(this.pCenter,t.center)<e.posThreshold;if(this.pTime=t.timeStamp,this.pCenter=t.center,a&&i?this.count+=1:this.count=1,this._input=t,0===this.count%e.taps)return this.hasRequireFailures()?(this._timer=p((function(){this.state=8,this.tryEmit()}),e.interval,this),2):8}return Ot},failTimeout:function(){return this._timer=p((function(){this.state=Ot}),this.options.interval,this),Ot},reset:function(){clearTimeout(this._timer)},emit:function(){8==this.state&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),Gt.VERSION="2.0.7",Gt.defaults={domEvents:!1,touchAction:xt,enable:!0,inputTarget:null,inputClass:null,preset:[[Ft,{enable:!1}],[Dt,{enable:!1},["rotate"]],[qt,{direction:6}],[It,{direction:6},["swipe"]],[Rt],[Rt,{event:"doubletap",taps:2},["tap"]],[At]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};function zt(t,e){var r;this.options=c({},Gt.defaults,e||{}),this.options.inputTarget=this.options.inputTarget||t,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=t,this.input=new((r=this).options.inputClass||(D?it:A?ft:I?mt:tt))(r,Z),this.touchAction=new Mt(this,this.options.touchAction),Vt(this,!0),v(this.options.recognizers,(function(t){var e=this.add(new t[0](t[1]));t[2]&&e.recognizeWith(t[2]),t[3]&&e.requireFailure(t[3])}),this)}function Vt(t,e){var r,n=t.element;n.style&&(v(t.options.cssProps,(function(o,i){r=N(n.style,i),e?(t.oldCssProps[r]=n.style[r],n.style[r]=o):n.style[r]=t.oldCssProps[r]||""})),e||(t.oldCssProps={}))}zt.prototype={set:function(t){return c(this.options,t),t.touchAction&&this.touchAction.update(),t.inputTarget&&(this.input.destroy(),this.input.target=t.inputTarget,this.input.init()),this},stop:function(t){this.session.stopped=t?2:1},recognize:function(t){var e=this.session;if(!e.stopped){var r;this.touchAction.preventDefaults(t);var n=this.recognizers,o=e.curRecognizer;(!o||o&&8&o.state)&&(o=e.curRecognizer=null);for(var i=0;i<n.length;)r=n[i],2===e.stopped||o&&r!=o&&!r.canRecognizeWith(o)?r.reset():r.recognize(t),!o&&14&r.state&&(o=e.curRecognizer=r),i++}},get:function(t){if(t instanceof Pt)return t;for(var e=this.recognizers,r=0;r<e.length;r++)if(e[r].options.event==t)return e[r];return null},add:function(t){if(m(t,"add",this))return this;var e=this.get(t.options.event);return e&&this.remove(e),this.recognizers.push(t),t.manager=this,this.touchAction.update(),t},remove:function(t){if(m(t,"remove",this))return this;if(t=this.get(t)){var e=this.recognizers,r=O(e,t);-1!==r&&(e.splice(r,1),this.touchAction.update())}return this},on:function(t,e){if(t!==s&&e!==s){var r=this.handlers;return v(M(t),(function(t){r[t]=r[t]||[],r[t].push(e)})),this}},off:function(t,e){if(t!==s){var r=this.handlers;return v(M(t),(function(t){e?r[t]&&r[t].splice(O(r[t],e),1):delete r[t]})),this}},emit:function(t,e){this.options.domEvents&&function(t,e){var r=i.createEvent("Event");r.initEvent(t,!0,!0),r.gesture=e,e.target.dispatchEvent(r)}(t,e);var r=this.handlers[t]&&this.handlers[t].slice();if(r&&r.length){e.type=t,e.preventDefault=function(){e.srcEvent.preventDefault()};for(var n=0;n<r.length;)r[n](e),n++}},destroy:function(){this.element&&Vt(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},c(Gt,{INPUT_START:1,INPUT_MOVE:2,INPUT_END:4,INPUT_CANCEL:8,STATE_POSSIBLE:1,STATE_BEGAN:2,STATE_CHANGED:4,STATE_ENDED:8,STATE_RECOGNIZED:8,STATE_CANCELLED:16,STATE_FAILED:Ot,DIRECTION_NONE:1,DIRECTION_LEFT:2,DIRECTION_RIGHT:4,DIRECTION_UP:8,DIRECTION_DOWN:16,DIRECTION_HORIZONTAL:6,DIRECTION_VERTICAL:R,DIRECTION_ALL:30,Manager:zt,Input:V,TouchAction:Mt,TouchInput:ft,MouseInput:tt,PointerEventInput:it,TouchMouseInput:mt,SingleTouchInput:lt,Recognizer:Pt,AttrRecognizer:$t,Tap:Rt,Pan:It,Swipe:qt,Pinch:Dt,Rotate:Ft,Press:At,on:k,off:L,each:v,merge:_,extend:y,assign:c,inherit:b,bindFn:x,prefixed:N}),(void 0!==o?o:"undefined"!=typeof self?self:{}).Hammer=Gt,(n=function(){return Gt}.call(e,r,e,t))===s||(t.exports=n)}(window,document)},6400:(t,e,r)=>{var n,o,i;!function(a){"use strict";o=[r(9755),r(5592)],void 0===(i="function"==typeof(n=function(t){return t.extend(t.expr.pseudos,{data:t.expr.createPseudo?t.expr.createPseudo((function(e){return function(r){return!!t.data(r,e)}})):function(e,r,n){return!!t.data(e,n[3])}})})?n.apply(e,o):n)||(t.exports=i)}()},1870:(t,e,r)=>{var n,o,i;!function(a){"use strict";o=[r(9755),r(5592)],void 0===(i="function"==typeof(n=function(t){return t.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase())})?n.apply(e,o):n)||(t.exports=i)}()},1624:(t,e,r)=>{var n,o,i;!function(a){"use strict";o=[r(9755),r(5592)],n=function(t){return t.ui.plugin={add:function(e,r,n){var o,i=t.ui[e].prototype;for(o in n)i.plugins[o]=i.plugins[o]||[],i.plugins[o].push([r,n[o]])},call:function(t,e,r,n){var o,i=t.plugins[e];if(i&&(n||t.element[0].parentNode&&11!==t.element[0].parentNode.nodeType))for(o=0;o<i.length;o++)t.options[i[o][0]]&&i[o][1].apply(t.element,r)}}},void 0===(i="function"==typeof n?n.apply(e,o):n)||(t.exports=i)}()},6575:(t,e,r)=>{var n,o,i;!function(a){"use strict";o=[r(9755),r(5592)],void 0===(i="function"==typeof(n=function(t){return t.ui.safeActiveElement=function(t){var e;try{e=t.activeElement}catch(r){e=t.body}return e||(e=t.body),e.nodeName||(e=t.body),e}})?n.apply(e,o):n)||(t.exports=i)}()},192:(t,e,r)=>{var n,o,i;!function(a){"use strict";o=[r(9755),r(5592)],void 0===(i="function"==typeof(n=function(t){return t.ui.safeBlur=function(e){e&&"body"!==e.nodeName.toLowerCase()&&t(e).trigger("blur")}})?n.apply(e,o):n)||(t.exports=i)}()},464:(t,e,r)=>{var n,o,i;!function(a){"use strict";o=[r(9755),r(5592)],void 0===(i="function"==typeof(n=function(t){return t.fn.scrollParent=function(e){var r=this.css("position"),n="absolute"===r,o=e?/(auto|scroll|hidden)/:/(auto|scroll)/,i=this.parents().filter((function(){var e=t(this);return(!n||"static"!==e.css("position"))&&o.test(e.css("overflow")+e.css("overflow-y")+e.css("overflow-x"))})).eq(0);return"fixed"!==r&&i.length?i:t(this[0].ownerDocument||document)}})?n.apply(e,o):n)||(t.exports=i)}()},5592:(t,e,r)=>{var n,o,i;!function(a){"use strict";o=[r(9755)],void 0===(i="function"==typeof(n=function(t){return t.ui=t.ui||{},t.ui.version="1.13.1"})?n.apply(e,o):n)||(t.exports=i)}()},6891:(t,e,r)=>{var n,o,i;!function(a){"use strict";o=[r(9755),r(5592)],n=function(t){var e=0,r=Array.prototype.hasOwnProperty,n=Array.prototype.slice;return t.cleanData=function(e){return function(r){var n,o,i;for(i=0;null!=(o=r[i]);i++)(n=t._data(o,"events"))&&n.remove&&t(o).triggerHandler("remove");e(r)}}(t.cleanData),t.widget=function(e,r,n){var o,i,a,s={},c=e.split(".")[0],l=c+"-"+(e=e.split(".")[1]);return n||(n=r,r=t.Widget),Array.isArray(n)&&(n=t.extend.apply(null,[{}].concat(n))),t.expr.pseudos[l.toLowerCase()]=function(e){return!!t.data(e,l)},t[c]=t[c]||{},o=t[c][e],i=t[c][e]=function(t,e){if(!this||!this._createWidget)return new i(t,e);arguments.length&&this._createWidget(t,e)},t.extend(i,o,{version:n.version,_proto:t.extend({},n),_childConstructors:[]}),(a=new r).options=t.widget.extend({},a.options),t.each(n,(function(t,e){s[t]="function"==typeof e?function(){function n(){return r.prototype[t].apply(this,arguments)}function o(e){return r.prototype[t].apply(this,e)}return function(){var t,r=this._super,i=this._superApply;return this._super=n,this._superApply=o,t=e.apply(this,arguments),this._super=r,this._superApply=i,t}}():e})),i.prototype=t.widget.extend(a,{widgetEventPrefix:o&&a.widgetEventPrefix||e},s,{constructor:i,namespace:c,widgetName:e,widgetFullName:l}),o?(t.each(o._childConstructors,(function(e,r){var n=r.prototype;t.widget(n.namespace+"."+n.widgetName,i,r._proto)})),delete o._childConstructors):r._childConstructors.push(i),t.widget.bridge(e,i),i},t.widget.extend=function(e){for(var o,i,a=n.call(arguments,1),s=0,c=a.length;s<c;s++)for(o in a[s])i=a[s][o],r.call(a[s],o)&&void 0!==i&&(t.isPlainObject(i)?e[o]=t.isPlainObject(e[o])?t.widget.extend({},e[o],i):t.widget.extend({},i):e[o]=i);return e},t.widget.bridge=function(e,r){var o=r.prototype.widgetFullName||e;t.fn[e]=function(i){var a="string"==typeof i,s=n.call(arguments,1),c=this;return a?this.length||"instance"!==i?this.each((function(){var r,n=t.data(this,o);return"instance"===i?(c=n,!1):n?"function"!=typeof n[i]||"_"===i.charAt(0)?t.error("no such method '"+i+"' for "+e+" widget instance"):(r=n[i].apply(n,s))!==n&&void 0!==r?(c=r&&r.jquery?c.pushStack(r.get()):r,!1):void 0:t.error("cannot call methods on "+e+" prior to initialization; attempted to call method '"+i+"'")})):c=void 0:(s.length&&(i=t.widget.extend.apply(null,[i].concat(s))),this.each((function(){var e=t.data(this,o);e?(e.option(i||{}),e._init&&e._init()):t.data(this,o,new r(i,this))}))),c}},t.Widget=function(){},t.Widget._childConstructors=[],t.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{classes:{},disabled:!1,create:null},_createWidget:function(r,n){n=t(n||this.defaultElement||this)[0],this.element=t(n),this.uuid=e++,this.eventNamespace="."+this.widgetName+this.uuid,this.bindings=t(),this.hoverable=t(),this.focusable=t(),this.classesElementLookup={},n!==this&&(t.data(n,this.widgetFullName,this),this._on(!0,this.element,{remove:function(t){t.target===n&&this.destroy()}}),this.document=t(n.style?n.ownerDocument:n.document||n),this.window=t(this.document[0].defaultView||this.document[0].parentWindow)),this.options=t.widget.extend({},this.options,this._getCreateOptions(),r),this._create(),this.options.disabled&&this._setOptionDisabled(this.options.disabled),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:function(){return{}},_getCreateEventData:t.noop,_create:t.noop,_init:t.noop,destroy:function(){var e=this;this._destroy(),t.each(this.classesElementLookup,(function(t,r){e._removeClass(r,t)})),this.element.off(this.eventNamespace).removeData(this.widgetFullName),this.widget().off(this.eventNamespace).removeAttr("aria-disabled"),this.bindings.off(this.eventNamespace)},_destroy:t.noop,widget:function(){return this.element},option:function(e,r){var n,o,i,a=e;if(0===arguments.length)return t.widget.extend({},this.options);if("string"==typeof e)if(a={},n=e.split("."),e=n.shift(),n.length){for(o=a[e]=t.widget.extend({},this.options[e]),i=0;i<n.length-1;i++)o[n[i]]=o[n[i]]||{},o=o[n[i]];if(e=n.pop(),1===arguments.length)return void 0===o[e]?null:o[e];o[e]=r}else{if(1===arguments.length)return void 0===this.options[e]?null:this.options[e];a[e]=r}return this._setOptions(a),this},_setOptions:function(t){var e;for(e in t)this._setOption(e,t[e]);return this},_setOption:function(t,e){return"classes"===t&&this._setOptionClasses(e),this.options[t]=e,"disabled"===t&&this._setOptionDisabled(e),this},_setOptionClasses:function(e){var r,n,o;for(r in e)o=this.classesElementLookup[r],e[r]!==this.options.classes[r]&&o&&o.length&&(n=t(o.get()),this._removeClass(o,r),n.addClass(this._classes({element:n,keys:r,classes:e,add:!0})))},_setOptionDisabled:function(t){this._toggleClass(this.widget(),this.widgetFullName+"-disabled",null,!!t),t&&(this._removeClass(this.hoverable,null,"ui-state-hover"),this._removeClass(this.focusable,null,"ui-state-focus"))},enable:function(){return this._setOptions({disabled:!1})},disable:function(){return this._setOptions({disabled:!0})},_classes:function(e){var r=[],n=this;function o(){var r=[];e.element.each((function(e,o){t.map(n.classesElementLookup,(function(t){return t})).some((function(t){return t.is(o)}))||r.push(o)})),n._on(t(r),{remove:"_untrackClassesElement"})}function i(i,a){var s,c;for(c=0;c<i.length;c++)s=n.classesElementLookup[i[c]]||t(),e.add?(o(),s=t(t.uniqueSort(s.get().concat(e.element.get())))):s=t(s.not(e.element).get()),n.classesElementLookup[i[c]]=s,r.push(i[c]),a&&e.classes[i[c]]&&r.push(e.classes[i[c]])}return(e=t.extend({element:this.element,classes:this.options.classes||{}},e)).keys&&i(e.keys.match(/\S+/g)||[],!0),e.extra&&i(e.extra.match(/\S+/g)||[]),r.join(" ")},_untrackClassesElement:function(e){var r=this;t.each(r.classesElementLookup,(function(n,o){-1!==t.inArray(e.target,o)&&(r.classesElementLookup[n]=t(o.not(e.target).get()))})),this._off(t(e.target))},_removeClass:function(t,e,r){return this._toggleClass(t,e,r,!1)},_addClass:function(t,e,r){return this._toggleClass(t,e,r,!0)},_toggleClass:function(t,e,r,n){n="boolean"==typeof n?n:r;var o="string"==typeof t||null===t,i={extra:o?e:r,keys:o?t:e,element:o?this.element:t,add:n};return i.element.toggleClass(this._classes(i),n),this},_on:function(e,r,n){var o,i=this;"boolean"!=typeof e&&(n=r,r=e,e=!1),n?(r=o=t(r),this.bindings=this.bindings.add(r)):(n=r,r=this.element,o=this.widget()),t.each(n,(function(n,a){function s(){if(e||!0!==i.options.disabled&&!t(this).hasClass("ui-state-disabled"))return("string"==typeof a?i[a]:a).apply(i,arguments)}"string"!=typeof a&&(s.guid=a.guid=a.guid||s.guid||t.guid++);var c=n.match(/^([\w:-]*)\s*(.*)$/),l=c[1]+i.eventNamespace,u=c[2];u?o.on(l,u,s):r.on(l,s)}))},_off:function(e,r){r=(r||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,e.off(r),this.bindings=t(this.bindings.not(e).get()),this.focusable=t(this.focusable.not(e).get()),this.hoverable=t(this.hoverable.not(e).get())},_delay:function(t,e){function r(){return("string"==typeof t?n[t]:t).apply(n,arguments)}var n=this;return setTimeout(r,e||0)},_hoverable:function(e){this.hoverable=this.hoverable.add(e),this._on(e,{mouseenter:function(e){this._addClass(t(e.currentTarget),null,"ui-state-hover")},mouseleave:function(e){this._removeClass(t(e.currentTarget),null,"ui-state-hover")}})},_focusable:function(e){this.focusable=this.focusable.add(e),this._on(e,{focusin:function(e){this._addClass(t(e.currentTarget),null,"ui-state-focus")},focusout:function(e){this._removeClass(t(e.currentTarget),null,"ui-state-focus")}})},_trigger:function(e,r,n){var o,i,a=this.options[e];if(n=n||{},(r=t.Event(r)).type=(e===this.widgetEventPrefix?e:this.widgetEventPrefix+e).toLowerCase(),r.target=this.element[0],i=r.originalEvent)for(o in i)o in r||(r[o]=i[o]);return this.element.trigger(r,n),!("function"==typeof a&&!1===a.apply(this.element[0],[r].concat(n))||r.isDefaultPrevented())}},t.each({show:"fadeIn",hide:"fadeOut"},(function(e,r){t.Widget.prototype["_"+e]=function(n,o,i){var a;"string"==typeof o&&(o={effect:o});var s=o?!0===o||"number"==typeof o?r:o.effect||r:e;"number"==typeof(o=o||{})?o={duration:o}:!0===o&&(o={}),a=!t.isEmptyObject(o),o.complete=i,o.delay&&n.delay(o.delay),a&&t.effects&&t.effects.effect[s]?n[e](o):s!==e&&n[s]?n[s](o.duration,o.easing,i):n.queue((function(r){t(this)[e](),i&&i.call(n[0]),r()}))}})),t.widget},void 0===(i="function"==typeof n?n.apply(e,o):n)||(t.exports=i)}()},7285:(t,e,r)=>{var n,o,i;!function(a){"use strict";o=[r(9755),r(6177),r(6400),r(1624),r(6575),r(192),r(464),r(5592),r(6891)],void 0===(i="function"==typeof(n=function(t){return t.widget("ui.draggable",t.ui.mouse,{version:"1.13.1",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1,drag:null,start:null,stop:null},_create:function(){"original"===this.options.helper&&this._setPositionRelative(),this.options.addClasses&&this._addClass("ui-draggable"),this._setHandleClassName(),this._mouseInit()},_setOption:function(t,e){this._super(t,e),"handle"===t&&(this._removeHandleClassName(),this._setHandleClassName())},_destroy:function(){(this.helper||this.element).is(".ui-draggable-dragging")?this.destroyOnClear=!0:(this._removeHandleClassName(),this._mouseDestroy())},_mouseCapture:function(e){var r=this.options;return!(this.helper||r.disabled||t(e.target).closest(".ui-resizable-handle").length>0)&&(this.handle=this._getHandle(e),!!this.handle&&(this._blurActiveElement(e),this._blockFrames(!0===r.iframeFix?"iframe":r.iframeFix),!0))},_blockFrames:function(e){this.iframeBlocks=this.document.find(e).map((function(){var e=t(this);return t("<div>").css("position","absolute").appendTo(e.parent()).outerWidth(e.outerWidth()).outerHeight(e.outerHeight()).offset(e.offset())[0]}))},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_blurActiveElement:function(e){var r=t.ui.safeActiveElement(this.document[0]);t(e.target).closest(r).length||t.ui.safeBlur(r)},_mouseStart:function(e){var r=this.options;return this.helper=this._createHelper(e),this._addClass(this.helper,"ui-draggable-dragging"),this._cacheHelperProportions(),t.ui.ddmanager&&(t.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(!0),this.offsetParent=this.helper.offsetParent(),this.hasFixedAncestor=this.helper.parents().filter((function(){return"fixed"===t(this).css("position")})).length>0,this.positionAbs=this.element.offset(),this._refreshOffsets(e),this.originalPosition=this.position=this._generatePosition(e,!1),this.originalPageX=e.pageX,this.originalPageY=e.pageY,r.cursorAt&&this._adjustOffsetFromHelper(r.cursorAt),this._setContainment(),!1===this._trigger("start",e)?(this._clear(),!1):(this._cacheHelperProportions(),t.ui.ddmanager&&!r.dropBehaviour&&t.ui.ddmanager.prepareOffsets(this,e),this._mouseDrag(e,!0),t.ui.ddmanager&&t.ui.ddmanager.dragStart(this,e),!0)},_refreshOffsets:function(t){this.offset={top:this.positionAbs.top-this.margins.top,left:this.positionAbs.left-this.margins.left,scroll:!1,parent:this._getParentOffset(),relative:this._getRelativeOffset()},this.offset.click={left:t.pageX-this.offset.left,top:t.pageY-this.offset.top}},_mouseDrag:function(e,r){if(this.hasFixedAncestor&&(this.offset.parent=this._getParentOffset()),this.position=this._generatePosition(e,!0),this.positionAbs=this._convertPositionTo("absolute"),!r){var n=this._uiHash();if(!1===this._trigger("drag",e,n))return this._mouseUp(new t.Event("mouseup",e)),!1;this.position=n.position}return this.helper[0].style.left=this.position.left+"px",this.helper[0].style.top=this.position.top+"px",t.ui.ddmanager&&t.ui.ddmanager.drag(this,e),!1},_mouseStop:function(e){var r=this,n=!1;return t.ui.ddmanager&&!this.options.dropBehaviour&&(n=t.ui.ddmanager.drop(this,e)),this.dropped&&(n=this.dropped,this.dropped=!1),"invalid"===this.options.revert&&!n||"valid"===this.options.revert&&n||!0===this.options.revert||"function"==typeof this.options.revert&&this.options.revert.call(this.element,n)?t(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),(function(){!1!==r._trigger("stop",e)&&r._clear()})):!1!==this._trigger("stop",e)&&this._clear(),!1},_mouseUp:function(e){return this._unblockFrames(),t.ui.ddmanager&&t.ui.ddmanager.dragStop(this,e),this.handleElement.is(e.target)&&this.element.trigger("focus"),t.ui.mouse.prototype._mouseUp.call(this,e)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp(new t.Event("mouseup",{target:this.element[0]})):this._clear(),this},_getHandle:function(e){return!this.options.handle||!!t(e.target).closest(this.element.find(this.options.handle)).length},_setHandleClassName:function(){this.handleElement=this.options.handle?this.element.find(this.options.handle):this.element,this._addClass(this.handleElement,"ui-draggable-handle")},_removeHandleClassName:function(){this._removeClass(this.handleElement,"ui-draggable-handle")},_createHelper:function(e){var r=this.options,n="function"==typeof r.helper,o=n?t(r.helper.apply(this.element[0],[e])):"clone"===r.helper?this.element.clone().removeAttr("id"):this.element;return o.parents("body").length||o.appendTo("parent"===r.appendTo?this.element[0].parentNode:r.appendTo),n&&o[0]===this.element[0]&&this._setPositionRelative(),o[0]===this.element[0]||/(fixed|absolute)/.test(o.css("position"))||o.css("position","absolute"),o},_setPositionRelative:function(){/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative")},_adjustOffsetFromHelper:function(t){"string"==typeof t&&(t=t.split(" ")),Array.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_isRootNode:function(t){return/(html|body)/i.test(t.tagName)||t===this.document[0]},_getParentOffset:function(){var e=this.offsetParent.offset(),r=this.document[0];return"absolute"===this.cssPosition&&this.scrollParent[0]!==r&&t.contains(this.scrollParent[0],this.offsetParent[0])&&(e.left+=this.scrollParent.scrollLeft(),e.top+=this.scrollParent.scrollTop()),this._isRootNode(this.offsetParent[0])&&(e={top:0,left:0}),{top:e.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:e.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"!==this.cssPosition)return{top:0,left:0};var t=this.element.position(),e=this._isRootNode(this.scrollParent[0]);return{top:t.top-(parseInt(this.helper.css("top"),10)||0)+(e?0:this.scrollParent.scrollTop()),left:t.left-(parseInt(this.helper.css("left"),10)||0)+(e?0:this.scrollParent.scrollLeft())}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var e,r,n,o=this.options,i=this.document[0];this.relativeContainer=null,o.containment?"window"!==o.containment?"document"!==o.containment?o.containment.constructor!==Array?("parent"===o.containment&&(o.containment=this.helper[0].parentNode),(n=(r=t(o.containment))[0])&&(e=/(scroll|auto)/.test(r.css("overflow")),this.containment=[(parseInt(r.css("borderLeftWidth"),10)||0)+(parseInt(r.css("paddingLeft"),10)||0),(parseInt(r.css("borderTopWidth"),10)||0)+(parseInt(r.css("paddingTop"),10)||0),(e?Math.max(n.scrollWidth,n.offsetWidth):n.offsetWidth)-(parseInt(r.css("borderRightWidth"),10)||0)-(parseInt(r.css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(e?Math.max(n.scrollHeight,n.offsetHeight):n.offsetHeight)-(parseInt(r.css("borderBottomWidth"),10)||0)-(parseInt(r.css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relativeContainer=r)):this.containment=o.containment:this.containment=[0,0,t(i).width()-this.helperProportions.width-this.margins.left,(t(i).height()||i.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]:this.containment=[t(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,t(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,t(window).scrollLeft()+t(window).width()-this.helperProportions.width-this.margins.left,t(window).scrollTop()+(t(window).height()||i.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]:this.containment=null},_convertPositionTo:function(t,e){e||(e=this.position);var r="absolute"===t?1:-1,n=this._isRootNode(this.scrollParent[0]);return{top:e.top+this.offset.relative.top*r+this.offset.parent.top*r-("fixed"===this.cssPosition?-this.offset.scroll.top:n?0:this.offset.scroll.top)*r,left:e.left+this.offset.relative.left*r+this.offset.parent.left*r-("fixed"===this.cssPosition?-this.offset.scroll.left:n?0:this.offset.scroll.left)*r}},_generatePosition:function(t,e){var r,n,o,i,a=this.options,s=this._isRootNode(this.scrollParent[0]),c=t.pageX,l=t.pageY;return s&&this.offset.scroll||(this.offset.scroll={top:this.scrollParent.scrollTop(),left:this.scrollParent.scrollLeft()}),e&&(this.containment&&(this.relativeContainer?(n=this.relativeContainer.offset(),r=[this.containment[0]+n.left,this.containment[1]+n.top,this.containment[2]+n.left,this.containment[3]+n.top]):r=this.containment,t.pageX-this.offset.click.left<r[0]&&(c=r[0]+this.offset.click.left),t.pageY-this.offset.click.top<r[1]&&(l=r[1]+this.offset.click.top),t.pageX-this.offset.click.left>r[2]&&(c=r[2]+this.offset.click.left),t.pageY-this.offset.click.top>r[3]&&(l=r[3]+this.offset.click.top)),a.grid&&(o=a.grid[1]?this.originalPageY+Math.round((l-this.originalPageY)/a.grid[1])*a.grid[1]:this.originalPageY,l=r?o-this.offset.click.top>=r[1]||o-this.offset.click.top>r[3]?o:o-this.offset.click.top>=r[1]?o-a.grid[1]:o+a.grid[1]:o,i=a.grid[0]?this.originalPageX+Math.round((c-this.originalPageX)/a.grid[0])*a.grid[0]:this.originalPageX,c=r?i-this.offset.click.left>=r[0]||i-this.offset.click.left>r[2]?i:i-this.offset.click.left>=r[0]?i-a.grid[0]:i+a.grid[0]:i),"y"===a.axis&&(c=this.originalPageX),"x"===a.axis&&(l=this.originalPageY)),{top:l-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.offset.scroll.top:s?0:this.offset.scroll.top),left:c-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.offset.scroll.left:s?0:this.offset.scroll.left)}},_clear:function(){this._removeClass(this.helper,"ui-draggable-dragging"),this.helper[0]===this.element[0]||this.cancelHelperRemoval||this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1,this.destroyOnClear&&this.destroy()},_trigger:function(e,r,n){return n=n||this._uiHash(),t.ui.plugin.call(this,e,[r,n,this],!0),/^(drag|start|stop)/.test(e)&&(this.positionAbs=this._convertPositionTo("absolute"),n.offset=this.positionAbs),t.Widget.prototype._trigger.call(this,e,r,n)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),t.ui.plugin.add("draggable","connectToSortable",{start:function(e,r,n){var o=t.extend({},r,{item:n.element});n.sortables=[],t(n.options.connectToSortable).each((function(){var r=t(this).sortable("instance");r&&!r.options.disabled&&(n.sortables.push(r),r.refreshPositions(),r._trigger("activate",e,o))}))},stop:function(e,r,n){var o=t.extend({},r,{item:n.element});n.cancelHelperRemoval=!1,t.each(n.sortables,(function(){var t=this;t.isOver?(t.isOver=0,n.cancelHelperRemoval=!0,t.cancelHelperRemoval=!1,t._storedCSS={position:t.placeholder.css("position"),top:t.placeholder.css("top"),left:t.placeholder.css("left")},t._mouseStop(e),t.options.helper=t.options._helper):(t.cancelHelperRemoval=!0,t._trigger("deactivate",e,o))}))},drag:function(e,r,n){t.each(n.sortables,(function(){var o=!1,i=this;i.positionAbs=n.positionAbs,i.helperProportions=n.helperProportions,i.offset.click=n.offset.click,i._intersectsWith(i.containerCache)&&(o=!0,t.each(n.sortables,(function(){return this.positionAbs=n.positionAbs,this.helperProportions=n.helperProportions,this.offset.click=n.offset.click,this!==i&&this._intersectsWith(this.containerCache)&&t.contains(i.element[0],this.element[0])&&(o=!1),o}))),o?(i.isOver||(i.isOver=1,n._parent=r.helper.parent(),i.currentItem=r.helper.appendTo(i.element).data("ui-sortable-item",!0),i.options._helper=i.options.helper,i.options.helper=function(){return r.helper[0]},e.target=i.currentItem[0],i._mouseCapture(e,!0),i._mouseStart(e,!0,!0),i.offset.click.top=n.offset.click.top,i.offset.click.left=n.offset.click.left,i.offset.parent.left-=n.offset.parent.left-i.offset.parent.left,i.offset.parent.top-=n.offset.parent.top-i.offset.parent.top,n._trigger("toSortable",e),n.dropped=i.element,t.each(n.sortables,(function(){this.refreshPositions()})),n.currentItem=n.element,i.fromOutside=n),i.currentItem&&(i._mouseDrag(e),r.position=i.position)):i.isOver&&(i.isOver=0,i.cancelHelperRemoval=!0,i.options._revert=i.options.revert,i.options.revert=!1,i._trigger("out",e,i._uiHash(i)),i._mouseStop(e,!0),i.options.revert=i.options._revert,i.options.helper=i.options._helper,i.placeholder&&i.placeholder.remove(),r.helper.appendTo(n._parent),n._refreshOffsets(e),r.position=n._generatePosition(e,!0),n._trigger("fromSortable",e),n.dropped=!1,t.each(n.sortables,(function(){this.refreshPositions()})))}))}}),t.ui.plugin.add("draggable","cursor",{start:function(e,r,n){var o=t("body"),i=n.options;o.css("cursor")&&(i._cursor=o.css("cursor")),o.css("cursor",i.cursor)},stop:function(e,r,n){var o=n.options;o._cursor&&t("body").css("cursor",o._cursor)}}),t.ui.plugin.add("draggable","opacity",{start:function(e,r,n){var o=t(r.helper),i=n.options;o.css("opacity")&&(i._opacity=o.css("opacity")),o.css("opacity",i.opacity)},stop:function(e,r,n){var o=n.options;o._opacity&&t(r.helper).css("opacity",o._opacity)}}),t.ui.plugin.add("draggable","scroll",{start:function(t,e,r){r.scrollParentNotHidden||(r.scrollParentNotHidden=r.helper.scrollParent(!1)),r.scrollParentNotHidden[0]!==r.document[0]&&"HTML"!==r.scrollParentNotHidden[0].tagName&&(r.overflowOffset=r.scrollParentNotHidden.offset())},drag:function(e,r,n){var o=n.options,i=!1,a=n.scrollParentNotHidden[0],s=n.document[0];a!==s&&"HTML"!==a.tagName?(o.axis&&"x"===o.axis||(n.overflowOffset.top+a.offsetHeight-e.pageY<o.scrollSensitivity?a.scrollTop=i=a.scrollTop+o.scrollSpeed:e.pageY-n.overflowOffset.top<o.scrollSensitivity&&(a.scrollTop=i=a.scrollTop-o.scrollSpeed)),o.axis&&"y"===o.axis||(n.overflowOffset.left+a.offsetWidth-e.pageX<o.scrollSensitivity?a.scrollLeft=i=a.scrollLeft+o.scrollSpeed:e.pageX-n.overflowOffset.left<o.scrollSensitivity&&(a.scrollLeft=i=a.scrollLeft-o.scrollSpeed))):(o.axis&&"x"===o.axis||(e.pageY-t(s).scrollTop()<o.scrollSensitivity?i=t(s).scrollTop(t(s).scrollTop()-o.scrollSpeed):t(window).height()-(e.pageY-t(s).scrollTop())<o.scrollSensitivity&&(i=t(s).scrollTop(t(s).scrollTop()+o.scrollSpeed))),o.axis&&"y"===o.axis||(e.pageX-t(s).scrollLeft()<o.scrollSensitivity?i=t(s).scrollLeft(t(s).scrollLeft()-o.scrollSpeed):t(window).width()-(e.pageX-t(s).scrollLeft())<o.scrollSensitivity&&(i=t(s).scrollLeft(t(s).scrollLeft()+o.scrollSpeed)))),!1!==i&&t.ui.ddmanager&&!o.dropBehaviour&&t.ui.ddmanager.prepareOffsets(n,e)}}),t.ui.plugin.add("draggable","snap",{start:function(e,r,n){var o=n.options;n.snapElements=[],t(o.snap.constructor!==String?o.snap.items||":data(ui-draggable)":o.snap).each((function(){var e=t(this),r=e.offset();this!==n.element[0]&&n.snapElements.push({item:this,width:e.outerWidth(),height:e.outerHeight(),top:r.top,left:r.left})}))},drag:function(e,r,n){var o,i,a,s,c,l,u,d,h,f,p=n.options,m=p.snapTolerance,v=r.offset.left,g=v+n.helperProportions.width,y=r.offset.top,_=y+n.helperProportions.height;for(h=n.snapElements.length-1;h>=0;h--)l=(c=n.snapElements[h].left-n.margins.left)+n.snapElements[h].width,d=(u=n.snapElements[h].top-n.margins.top)+n.snapElements[h].height,g<c-m||v>l+m||_<u-m||y>d+m||!t.contains(n.snapElements[h].item.ownerDocument,n.snapElements[h].item)?(n.snapElements[h].snapping&&n.options.snap.release&&n.options.snap.release.call(n.element,e,t.extend(n._uiHash(),{snapItem:n.snapElements[h].item})),n.snapElements[h].snapping=!1):("inner"!==p.snapMode&&(o=Math.abs(u-_)<=m,i=Math.abs(d-y)<=m,a=Math.abs(c-g)<=m,s=Math.abs(l-v)<=m,o&&(r.position.top=n._convertPositionTo("relative",{top:u-n.helperProportions.height,left:0}).top),i&&(r.position.top=n._convertPositionTo("relative",{top:d,left:0}).top),a&&(r.position.left=n._convertPositionTo("relative",{top:0,left:c-n.helperProportions.width}).left),s&&(r.position.left=n._convertPositionTo("relative",{top:0,left:l}).left)),f=o||i||a||s,"outer"!==p.snapMode&&(o=Math.abs(u-y)<=m,i=Math.abs(d-_)<=m,a=Math.abs(c-v)<=m,s=Math.abs(l-g)<=m,o&&(r.position.top=n._convertPositionTo("relative",{top:u,left:0}).top),i&&(r.position.top=n._convertPositionTo("relative",{top:d-n.helperProportions.height,left:0}).top),a&&(r.position.left=n._convertPositionTo("relative",{top:0,left:c}).left),s&&(r.position.left=n._convertPositionTo("relative",{top:0,left:l-n.helperProportions.width}).left)),!n.snapElements[h].snapping&&(o||i||a||s||f)&&n.options.snap.snap&&n.options.snap.snap.call(n.element,e,t.extend(n._uiHash(),{snapItem:n.snapElements[h].item})),n.snapElements[h].snapping=o||i||a||s||f)}}),t.ui.plugin.add("draggable","stack",{start:function(e,r,n){var o,i=n.options,a=t.makeArray(t(i.stack)).sort((function(e,r){return(parseInt(t(e).css("zIndex"),10)||0)-(parseInt(t(r).css("zIndex"),10)||0)}));a.length&&(o=parseInt(t(a[0]).css("zIndex"),10)||0,t(a).each((function(e){t(this).css("zIndex",o+e)})),this.css("zIndex",o+a.length))}}),t.ui.plugin.add("draggable","zIndex",{start:function(e,r,n){var o=t(r.helper),i=n.options;o.css("zIndex")&&(i._zIndex=o.css("zIndex")),o.css("zIndex",i.zIndex)},stop:function(e,r,n){var o=n.options;o._zIndex&&t(r.helper).css("zIndex",o._zIndex)}}),t.ui.draggable})?n.apply(e,o):n)||(t.exports=i)}()},6709:(t,e,r)=>{var n,o,i;!function(a){"use strict";o=[r(9755),r(7285),r(6177),r(5592),r(6891)],n=function(t){t.widget("ui.droppable",{version:"1.13.1",widgetEventPrefix:"drop",options:{accept:"*",addClasses:!0,greedy:!1,scope:"default",tolerance:"intersect",activate:null,deactivate:null,drop:null,out:null,over:null},_create:function(){var t,e=this.options,r=e.accept;this.isover=!1,this.isout=!0,this.accept="function"==typeof r?r:function(t){return t.is(r)},this.proportions=function(){if(!arguments.length)return t||(t={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight});t=arguments[0]},this._addToManager(e.scope),e.addClasses&&this._addClass("ui-droppable")},_addToManager:function(e){t.ui.ddmanager.droppables[e]=t.ui.ddmanager.droppables[e]||[],t.ui.ddmanager.droppables[e].push(this)},_splice:function(t){for(var e=0;e<t.length;e++)t[e]===this&&t.splice(e,1)},_destroy:function(){var e=t.ui.ddmanager.droppables[this.options.scope];this._splice(e)},_setOption:function(e,r){if("accept"===e)this.accept="function"==typeof r?r:function(t){return t.is(r)};else if("scope"===e){var n=t.ui.ddmanager.droppables[this.options.scope];this._splice(n),this._addToManager(r)}this._super(e,r)},_activate:function(e){var r=t.ui.ddmanager.current;this._addActiveClass(),r&&this._trigger("activate",e,this.ui(r))},_deactivate:function(e){var r=t.ui.ddmanager.current;this._removeActiveClass(),r&&this._trigger("deactivate",e,this.ui(r))},_over:function(e){var r=t.ui.ddmanager.current;r&&(r.currentItem||r.element)[0]!==this.element[0]&&this.accept.call(this.element[0],r.currentItem||r.element)&&(this._addHoverClass(),this._trigger("over",e,this.ui(r)))},_out:function(e){var r=t.ui.ddmanager.current;r&&(r.currentItem||r.element)[0]!==this.element[0]&&this.accept.call(this.element[0],r.currentItem||r.element)&&(this._removeHoverClass(),this._trigger("out",e,this.ui(r)))},_drop:function(e,r){var n=r||t.ui.ddmanager.current,o=!1;return!(!n||(n.currentItem||n.element)[0]===this.element[0])&&(this.element.find(":data(ui-droppable)").not(".ui-draggable-dragging").each((function(){var r=t(this).droppable("instance");if(r.options.greedy&&!r.options.disabled&&r.options.scope===n.options.scope&&r.accept.call(r.element[0],n.currentItem||n.element)&&t.ui.intersect(n,t.extend(r,{offset:r.element.offset()}),r.options.tolerance,e))return o=!0,!1})),!o&&(!!this.accept.call(this.element[0],n.currentItem||n.element)&&(this._removeActiveClass(),this._removeHoverClass(),this._trigger("drop",e,this.ui(n)),this.element)))},ui:function(t){return{draggable:t.currentItem||t.element,helper:t.helper,position:t.position,offset:t.positionAbs}},_addHoverClass:function(){this._addClass("ui-droppable-hover")},_removeHoverClass:function(){this._removeClass("ui-droppable-hover")},_addActiveClass:function(){this._addClass("ui-droppable-active")},_removeActiveClass:function(){this._removeClass("ui-droppable-active")}}),t.ui.intersect=function(){function t(t,e,r){return t>=e&&t<e+r}return function(e,r,n,o){if(!r.offset)return!1;var i=(e.positionAbs||e.position.absolute).left+e.margins.left,a=(e.positionAbs||e.position.absolute).top+e.margins.top,s=i+e.helperProportions.width,c=a+e.helperProportions.height,l=r.offset.left,u=r.offset.top,d=l+r.proportions().width,h=u+r.proportions().height;switch(n){case"fit":return l<=i&&s<=d&&u<=a&&c<=h;case"intersect":return l<i+e.helperProportions.width/2&&s-e.helperProportions.width/2<d&&u<a+e.helperProportions.height/2&&c-e.helperProportions.height/2<h;case"pointer":return t(o.pageY,u,r.proportions().height)&&t(o.pageX,l,r.proportions().width);case"touch":return(a>=u&&a<=h||c>=u&&c<=h||a<u&&c>h)&&(i>=l&&i<=d||s>=l&&s<=d||i<l&&s>d);default:return!1}}}(),t.ui.ddmanager={current:null,droppables:{default:[]},prepareOffsets:function(e,r){var n,o,i=t.ui.ddmanager.droppables[e.options.scope]||[],a=r?r.type:null,s=(e.currentItem||e.element).find(":data(ui-droppable)").addBack();t:for(n=0;n<i.length;n++)if(!(i[n].options.disabled||e&&!i[n].accept.call(i[n].element[0],e.currentItem||e.element))){for(o=0;o<s.length;o++)if(s[o]===i[n].element[0]){i[n].proportions().height=0;continue t}i[n].visible="none"!==i[n].element.css("display"),i[n].visible&&("mousedown"===a&&i[n]._activate.call(i[n],r),i[n].offset=i[n].element.offset(),i[n].proportions({width:i[n].element[0].offsetWidth,height:i[n].element[0].offsetHeight}))}},drop:function(e,r){var n=!1;return t.each((t.ui.ddmanager.droppables[e.options.scope]||[]).slice(),(function(){this.options&&(!this.options.disabled&&this.visible&&t.ui.intersect(e,this,this.options.tolerance,r)&&(n=this._drop.call(this,r)||n),!this.options.disabled&&this.visible&&this.accept.call(this.element[0],e.currentItem||e.element)&&(this.isout=!0,this.isover=!1,this._deactivate.call(this,r)))})),n},dragStart:function(e,r){e.element.parentsUntil("body").on("scroll.droppable",(function(){e.options.refreshPositions||t.ui.ddmanager.prepareOffsets(e,r)}))},drag:function(e,r){e.options.refreshPositions&&t.ui.ddmanager.prepareOffsets(e,r),t.each(t.ui.ddmanager.droppables[e.options.scope]||[],(function(){if(!this.options.disabled&&!this.greedyChild&&this.visible){var n,o,i,a=t.ui.intersect(e,this,this.options.tolerance,r),s=!a&&this.isover?"isout":a&&!this.isover?"isover":null;s&&(this.options.greedy&&(o=this.options.scope,(i=this.element.parents(":data(ui-droppable)").filter((function(){return t(this).droppable("instance").options.scope===o}))).length&&((n=t(i[0]).droppable("instance")).greedyChild="isover"===s)),n&&"isover"===s&&(n.isover=!1,n.isout=!0,n._out.call(n,r)),this[s]=!0,this["isout"===s?"isover":"isout"]=!1,this["isover"===s?"_over":"_out"].call(this,r),n&&"isout"===s&&(n.isout=!1,n.isover=!0,n._over.call(n,r)))}}))},dragStop:function(e,r){e.element.parentsUntil("body").off("scroll.droppable"),e.options.refreshPositions||t.ui.ddmanager.prepareOffsets(e,r)}},!1!==t.uiBackCompat&&t.widget("ui.droppable",t.ui.droppable,{options:{hoverClass:!1,activeClass:!1},_addActiveClass:function(){this._super(),this.options.activeClass&&this.element.addClass(this.options.activeClass)},_removeActiveClass:function(){this._super(),this.options.activeClass&&this.element.removeClass(this.options.activeClass)},_addHoverClass:function(){this._super(),this.options.hoverClass&&this.element.addClass(this.options.hoverClass)},_removeHoverClass:function(){this._super(),this.options.hoverClass&&this.element.removeClass(this.options.hoverClass)}});return t.ui.droppable},void 0===(i="function"==typeof n?n.apply(e,o):n)||(t.exports=i)}()},6177:(t,e,r)=>{var n,o,i;!function(a){"use strict";o=[r(9755),r(1870),r(5592),r(6891)],void 0===(i="function"==typeof(n=function(t){var e=!1;return t(document).on("mouseup",(function(){e=!1})),t.widget("ui.mouse",{version:"1.13.1",options:{cancel:"input, textarea, button, select, option",distance:1,delay:0},_mouseInit:function(){var e=this;this.element.on("mousedown."+this.widgetName,(function(t){return e._mouseDown(t)})).on("click."+this.widgetName,(function(r){if(!0===t.data(r.target,e.widgetName+".preventClickEvent"))return t.removeData(r.target,e.widgetName+".preventClickEvent"),r.stopImmediatePropagation(),!1})),this.started=!1},_mouseDestroy:function(){this.element.off("."+this.widgetName),this._mouseMoveDelegate&&this.document.off("mousemove."+this.widgetName,this._mouseMoveDelegate).off("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(r){if(!e){this._mouseMoved=!1,this._mouseStarted&&this._mouseUp(r),this._mouseDownEvent=r;var n=this,o=1===r.which,i=!("string"!=typeof this.options.cancel||!r.target.nodeName)&&t(r.target).closest(this.options.cancel).length;return!(o&&!i&&this._mouseCapture(r))||(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout((function(){n.mouseDelayMet=!0}),this.options.delay)),this._mouseDistanceMet(r)&&this._mouseDelayMet(r)&&(this._mouseStarted=!1!==this._mouseStart(r),!this._mouseStarted)?(r.preventDefault(),!0):(!0===t.data(r.target,this.widgetName+".preventClickEvent")&&t.removeData(r.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(t){return n._mouseMove(t)},this._mouseUpDelegate=function(t){return n._mouseUp(t)},this.document.on("mousemove."+this.widgetName,this._mouseMoveDelegate).on("mouseup."+this.widgetName,this._mouseUpDelegate),r.preventDefault(),e=!0,!0))}},_mouseMove:function(e){if(this._mouseMoved){if(t.ui.ie&&(!document.documentMode||document.documentMode<9)&&!e.button)return this._mouseUp(e);if(!e.which)if(e.originalEvent.altKey||e.originalEvent.ctrlKey||e.originalEvent.metaKey||e.originalEvent.shiftKey)this.ignoreMissingWhich=!0;else if(!this.ignoreMissingWhich)return this._mouseUp(e)}return(e.which||e.button)&&(this._mouseMoved=!0),this._mouseStarted?(this._mouseDrag(e),e.preventDefault()):(this._mouseDistanceMet(e)&&this._mouseDelayMet(e)&&(this._mouseStarted=!1!==this._mouseStart(this._mouseDownEvent,e),this._mouseStarted?this._mouseDrag(e):this._mouseUp(e)),!this._mouseStarted)},_mouseUp:function(r){this.document.off("mousemove."+this.widgetName,this._mouseMoveDelegate).off("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,r.target===this._mouseDownEvent.target&&t.data(r.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(r)),this._mouseDelayTimer&&(clearTimeout(this._mouseDelayTimer),delete this._mouseDelayTimer),this.ignoreMissingWhich=!1,e=!1,r.preventDefault()},_mouseDistanceMet:function(t){return Math.max(Math.abs(this._mouseDownEvent.pageX-t.pageX),Math.abs(this._mouseDownEvent.pageY-t.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}})})?n.apply(e,o):n)||(t.exports=i)}()},5067:()=>{},6700:(t,e,r)=>{var n={"./af":2786,"./af.js":2786,"./ar":867,"./ar-dz":4130,"./ar-dz.js":4130,"./ar-kw":6135,"./ar-kw.js":6135,"./ar-ly":6440,"./ar-ly.js":6440,"./ar-ma":7702,"./ar-ma.js":7702,"./ar-ps":315,"./ar-ps.js":315,"./ar-sa":6040,"./ar-sa.js":6040,"./ar-tn":7100,"./ar-tn.js":7100,"./ar.js":867,"./az":1083,"./az.js":1083,"./be":9808,"./be.js":9808,"./bg":8338,"./bg.js":8338,"./bm":7438,"./bm.js":7438,"./bn":8905,"./bn-bd":6225,"./bn-bd.js":6225,"./bn.js":8905,"./bo":1560,"./bo.js":1560,"./br":1278,"./br.js":1278,"./bs":622,"./bs.js":622,"./ca":2468,"./ca.js":2468,"./cs":5822,"./cs.js":5822,"./cv":877,"./cv.js":877,"./cy":7373,"./cy.js":7373,"./da":4780,"./da.js":4780,"./de":9740,"./de-at":217,"./de-at.js":217,"./de-ch":894,"./de-ch.js":894,"./de.js":9740,"./dv":5300,"./dv.js":5300,"./el":837,"./el.js":837,"./en-au":8348,"./en-au.js":8348,"./en-ca":7925,"./en-ca.js":7925,"./en-gb":2243,"./en-gb.js":2243,"./en-ie":6436,"./en-ie.js":6436,"./en-il":7207,"./en-il.js":7207,"./en-in":4175,"./en-in.js":4175,"./en-nz":6319,"./en-nz.js":6319,"./en-sg":1662,"./en-sg.js":1662,"./eo":2915,"./eo.js":2915,"./es":7093,"./es-do":5251,"./es-do.js":5251,"./es-mx":6112,"./es-mx.js":6112,"./es-us":1146,"./es-us.js":1146,"./es.js":7093,"./et":5603,"./et.js":5603,"./eu":7763,"./eu.js":7763,"./fa":6959,"./fa.js":6959,"./fi":1897,"./fi.js":1897,"./fil":2549,"./fil.js":2549,"./fo":4694,"./fo.js":4694,"./fr":4470,"./fr-ca":3049,"./fr-ca.js":3049,"./fr-ch":2330,"./fr-ch.js":2330,"./fr.js":4470,"./fy":5044,"./fy.js":5044,"./ga":9295,"./ga.js":9295,"./gd":2101,"./gd.js":2101,"./gl":8794,"./gl.js":8794,"./gom-deva":7884,"./gom-deva.js":7884,"./gom-latn":3168,"./gom-latn.js":3168,"./gu":5349,"./gu.js":5349,"./he":4206,"./he.js":4206,"./hi":94,"./hi.js":94,"./hr":316,"./hr.js":316,"./hu":2138,"./hu.js":2138,"./hy-am":1423,"./hy-am.js":1423,"./id":9218,"./id.js":9218,"./is":135,"./is.js":135,"./it":626,"./it-ch":150,"./it-ch.js":150,"./it.js":626,"./ja":9183,"./ja.js":9183,"./jv":4286,"./jv.js":4286,"./ka":2105,"./ka.js":2105,"./kk":7772,"./kk.js":7772,"./km":8758,"./km.js":8758,"./kn":9282,"./kn.js":9282,"./ko":3730,"./ko.js":3730,"./ku":1408,"./ku-kmr":563,"./ku-kmr.js":563,"./ku.js":1408,"./ky":3291,"./ky.js":3291,"./lb":6841,"./lb.js":6841,"./lo":5466,"./lo.js":5466,"./lt":7010,"./lt.js":7010,"./lv":7595,"./lv.js":7595,"./me":9861,"./me.js":9861,"./mi":5493,"./mi.js":5493,"./mk":5966,"./mk.js":5966,"./ml":7341,"./ml.js":7341,"./mn":5115,"./mn.js":5115,"./mr":370,"./mr.js":370,"./ms":9847,"./ms-my":1237,"./ms-my.js":1237,"./ms.js":9847,"./mt":2126,"./mt.js":2126,"./my":6165,"./my.js":6165,"./nb":4924,"./nb.js":4924,"./ne":6744,"./ne.js":6744,"./nl":3901,"./nl-be":9814,"./nl-be.js":9814,"./nl.js":3901,"./nn":3877,"./nn.js":3877,"./oc-lnc":2135,"./oc-lnc.js":2135,"./pa-in":5858,"./pa-in.js":5858,"./pl":4495,"./pl.js":4495,"./pt":9520,"./pt-br":7971,"./pt-br.js":7971,"./pt.js":9520,"./ro":6459,"./ro.js":6459,"./ru":238,"./ru.js":238,"./sd":950,"./sd.js":950,"./se":490,"./se.js":490,"./si":124,"./si.js":124,"./sk":4249,"./sk.js":4249,"./sl":4985,"./sl.js":4985,"./sq":1104,"./sq.js":1104,"./sr":9131,"./sr-cyrl":9915,"./sr-cyrl.js":9915,"./sr.js":9131,"./ss":5893,"./ss.js":5893,"./sv":8760,"./sv.js":8760,"./sw":1172,"./sw.js":1172,"./ta":7333,"./ta.js":7333,"./te":3110,"./te.js":3110,"./tet":2095,"./tet.js":2095,"./tg":7321,"./tg.js":7321,"./th":9041,"./th.js":9041,"./tk":9005,"./tk.js":9005,"./tl-ph":5768,"./tl-ph.js":5768,"./tlh":9444,"./tlh.js":9444,"./tr":2397,"./tr.js":2397,"./tzl":8254,"./tzl.js":8254,"./tzm":1106,"./tzm-latn":699,"./tzm-latn.js":699,"./tzm.js":1106,"./ug-cn":9288,"./ug-cn.js":9288,"./uk":7691,"./uk.js":7691,"./ur":3795,"./ur.js":3795,"./uz":6791,"./uz-latn":588,"./uz-latn.js":588,"./uz.js":6791,"./vi":5666,"./vi.js":5666,"./x-pseudo":4378,"./x-pseudo.js":4378,"./yo":5805,"./yo.js":5805,"./zh-cn":3839,"./zh-cn.js":3839,"./zh-hk":5726,"./zh-hk.js":5726,"./zh-mo":9807,"./zh-mo.js":9807,"./zh-tw":4152,"./zh-tw.js":4152};function o(t){var e=i(t);return r(e)}function i(t){if(!r.o(n,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return n[t]}o.keys=function(){return Object.keys(n)},o.resolve=i,t.exports=o,o.id=6700},4155:t=>{var e,r,n=t.exports={};function o(){throw new Error("setTimeout has not been defined")}function i(){throw new Error("clearTimeout has not been defined")}function a(t){if(e===setTimeout)return setTimeout(t,0);if((e===o||!e)&&setTimeout)return e=setTimeout,setTimeout(t,0);try{return e(t,0)}catch(r){try{return e.call(null,t,0)}catch(r){return e.call(this,t,0)}}}!function(){try{e="function"==typeof setTimeout?setTimeout:o}catch(t){e=o}try{r="function"==typeof clearTimeout?clearTimeout:i}catch(t){r=i}}();var s,c=[],l=!1,u=-1;function d(){l&&s&&(l=!1,s.length?c=s.concat(c):u=-1,c.length&&h())}function h(){if(!l){var t=a(d);l=!0;for(var e=c.length;e;){for(s=c,c=[];++u<e;)s&&s[u].run();u=-1,e=c.length}s=null,l=!1,function(t){if(r===clearTimeout)return clearTimeout(t);if((r===i||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(t);try{r(t)}catch(e){try{return r.call(null,t)}catch(e){return r.call(this,t)}}}(t)}}function f(t,e){this.fun=t,this.array=e}function p(){}n.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)e[r-1]=arguments[r];c.push(new f(t,e)),1!==c.length||l||a(h)},f.prototype.run=function(){this.fun.apply(null,this.array)},n.title="browser",n.browser=!0,n.env={},n.argv=[],n.version="",n.versions={},n.on=p,n.addListener=p,n.once=p,n.off=p,n.removeListener=p,n.removeAllListeners=p,n.emit=p,n.prependListener=p,n.prependOnceListener=p,n.listeners=function(t){return[]},n.binding=function(t){throw new Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(t){throw new Error("process.chdir is not supported")},n.umask=function(){return 0}},3379:(t,e,r)=>{"use strict";var n,o=function(){return void 0===n&&(n=Boolean(window&&document&&document.all&&!window.atob)),n},i=function(){var t={};return function(e){if(void 0===t[e]){var r=document.querySelector(e);if(window.HTMLIFrameElement&&r instanceof window.HTMLIFrameElement)try{r=r.contentDocument.head}catch(t){r=null}t[e]=r}return t[e]}}(),a=[];function s(t){for(var e=-1,r=0;r<a.length;r++)if(a[r].identifier===t){e=r;break}return e}function c(t,e){for(var r={},n=[],o=0;o<t.length;o++){var i=t[o],c=e.base?i[0]+e.base:i[0],l=r[c]||0,u="".concat(c," ").concat(l);r[c]=l+1;var d=s(u),h={css:i[1],media:i[2],sourceMap:i[3]};-1!==d?(a[d].references++,a[d].updater(h)):a.push({identifier:u,updater:v(h,e),references:1}),n.push(u)}return n}function l(t){var e=document.createElement("style"),n=t.attributes||{};if(void 0===n.nonce){var o=r.nc;o&&(n.nonce=o)}if(Object.keys(n).forEach((function(t){e.setAttribute(t,n[t])})),"function"==typeof t.insert)t.insert(e);else{var a=i(t.insert||"head");if(!a)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");a.appendChild(e)}return e}var u,d=(u=[],function(t,e){return u[t]=e,u.filter(Boolean).join("\n")});function h(t,e,r,n){var o=r?"":n.media?"@media ".concat(n.media," {").concat(n.css,"}"):n.css;if(t.styleSheet)t.styleSheet.cssText=d(e,o);else{var i=document.createTextNode(o),a=t.childNodes;a[e]&&t.removeChild(a[e]),a.length?t.insertBefore(i,a[e]):t.appendChild(i)}}function f(t,e,r){var n=r.css,o=r.media,i=r.sourceMap;if(o?t.setAttribute("media",o):t.removeAttribute("media"),i&&"undefined"!=typeof btoa&&(n+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(i))))," */")),t.styleSheet)t.styleSheet.cssText=n;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(n))}}var p=null,m=0;function v(t,e){var r,n,o;if(e.singleton){var i=m++;r=p||(p=l(e)),n=h.bind(null,r,i,!1),o=h.bind(null,r,i,!0)}else r=l(e),n=f.bind(null,r,e),o=function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(r)};return n(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;n(t=e)}else o()}}t.exports=function(t,e){(e=e||{}).singleton||"boolean"==typeof e.singleton||(e.singleton=o());var r=c(t=t||[],e);return function(t){if(t=t||[],"[object Array]"===Object.prototype.toString.call(t)){for(var n=0;n<r.length;n++){var o=s(r[n]);a[o].references--}for(var i=c(t,e),l=0;l<r.length;l++){var u=s(r[l]);0===a[u].references&&(a[u].updater(),a.splice(u,1))}r=i}}}},9038:(t,e,r)=>{"use strict";r.d(e,{Z:()=>c});const n={name:"ClipLoader",props:{loading:{type:Boolean,default:!0},color:{type:String,default:"#5dc596"},size:{type:String,default:"35px"},radius:{type:String,default:"100%"}},computed:{spinnerStyle(){return{height:this.size,width:this.size,borderWidth:"2px",borderStyle:"solid",borderColor:this.color+" "+this.color+" transparent",borderRadius:this.radius,background:"transparent"}}}};var o=r(3379),i=r.n(o),a=r(3998),s={insert:"head",singleton:!1};i()(a.Z,s);a.Z.locals;const c=(0,r(1900).Z)(n,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{directives:[{name:"show",rawName:"v-show",value:t.loading,expression:"loading"}],staticClass:"v-spinner"},[r("div",{staticClass:"v-clip",style:t.spinnerStyle})])}),[],!1,null,null,null).exports},9464:(t,e,r)=>{"use strict";r.d(e,{Z:()=>S});var n=r(6486),o=r.n(n),i=r(9669),a=r.n(i),s=r(629),c=r(8495),l=r(9038);const u={name:"PollutionConditionColorInput",props:{value:{type:Object,default:function(){return{}}},disabled:{type:Boolean,default:!1}},computed:{colorValue:{get:function(){return this.value&&this.value.color?this.value.color:"#ffffff"},set:function(t){this.$set(this.form,"color",t),this.$emit("input",this.form)}}},watch:{value:function(t){this.form=t}},data:function(){return{sending:!1,form:{}}},mounted:function(){this.form=o().cloneDeep(this.value)}};var d=r(3379),h=r.n(d),f=r(2928),p={insert:"head",singleton:!1};h()(f.Z,p);f.Z.locals;var m=r(1900);function v(t){return v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},v(t)}function g(){g=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function c(t,e,r,n){var o=e&&e.prototype instanceof d?e:d,i=Object.create(o.prototype),a=new L(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return E()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var s=w(a,r);if(s){if(s===u)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=l(t,e,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===u)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}(t,r,a),i}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var u={};function d(){}function h(){}function f(){}var p={};s(p,o,(function(){return this}));var m=Object.getPrototypeOf,y=m&&m(m(S([])));y&&y!==e&&r.call(y,o)&&(p=y);var _=f.prototype=d.prototype=Object.create(p);function b(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function x(t,e){function n(o,i,a,s){var c=l(t[o],t,i);if("throw"!==c.type){var u=c.arg,d=u.value;return d&&"object"==v(d)&&r.call(d,"__await")?e.resolve(d.__await).then((function(t){n("next",t,a,s)}),(function(t){n("throw",t,a,s)})):e.resolve(d).then((function(t){u.value=t,a(u)}),(function(t){return n("throw",t,a,s)}))}s(c.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return u;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var n=l(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,u;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,u):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,u)}function C(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function k(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function L(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(C,this),this.reset(!0)}function S(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:E}}function E(){return{value:void 0,done:!0}}return h.prototype=f,s(_,"constructor",f),s(f,"constructor",h),h.displayName=s(f,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===h||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,f):(t.__proto__=f,s(t,a,"GeneratorFunction")),t.prototype=Object.create(_),t},t.awrap=function(t){return{__await:t}},b(x.prototype),s(x.prototype,i,(function(){return this})),t.AsyncIterator=x,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new x(c(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},b(_),s(_,a,"Generator"),s(_,o,(function(){return this})),s(_,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=S,L.prototype={constructor:L,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(k),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=r.call(i,"catchLoc"),c=r.call(i,"finallyLoc");if(s&&c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,u):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),u},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),k(r),u}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;k(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:S(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),u}},t}function y(t,e,r,n,o,i,a){try{var s=t[i](a),c=s.value}catch(t){return void r(t)}s.done?e(c):Promise.resolve(c).then(n,o)}function _(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){y(i,n,o,a,s,"next",t)}function s(t){y(i,n,o,a,s,"throw",t)}a(void 0)}))}}function b(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function x(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?b(Object(r),!0).forEach((function(e){w(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):b(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function w(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}const C={name:"AcceptanceGradeListPage",components:{PollutionConditionColorInput:(0,m.Z)(u,(function(){var t=this,e=t.$createElement;return(t._self._c||e)("input",{directives:[{name:"model",rawName:"v-model.lazy",value:t.colorValue,expression:"colorValue",modifiers:{lazy:!0}}],staticClass:"pollute-color-selector",attrs:{type:"color",disabled:t.disabled||t.sending},domProps:{value:t.colorValue},on:{change:function(e){t.colorValue=e.target.value}}})}),[],!1,null,"43e56941",null).exports,ClipLoader:l.Z},computed:x(x({},(0,s.Se)({permissions:"user/permissions"})),{},{microparticle5:{get:function(){return this.acceptanceGradesForTable.length>0&&this.acceptanceGradesForTable[0].microparticle_5?this.acceptanceGradesForTable[0].microparticle_5:null},set:function(t){this.setOtherAcceptanceGrades("microparticle_5",t),this.dataColumnToRow()}},microparticleDot5:{get:function(){return this.acceptanceGradesForTable.length>0&&this.acceptanceGradesForTable[0].microparticle_dot_5?this.acceptanceGradesForTable[0].microparticle_dot_5:null},set:function(t){this.setOtherAcceptanceGrades("microparticle_dot_5",t),this.dataColumnToRow()}},suspended:{get:function(){return this.acceptanceGradesForTable.length>0&&this.acceptanceGradesForTable[0].suspended?this.acceptanceGradesForTable[0].suspended:null},set:function(t){this.setOtherAcceptanceGrades("suspended",t),this.dataColumnToRow()}},falling:{get:function(){return this.acceptanceGradesForTable.length>0&&this.acceptanceGradesForTable[0].falling?this.acceptanceGradesForTable[0].falling:null},set:function(t){this.setOtherAcceptanceGrades("falling",t),this.dataColumnToRow()}},contact:{get:function(){return this.acceptanceGradesForTable.length>0&&this.acceptanceGradesForTable[0].contact?this.acceptanceGradesForTable[0].contact:null},set:function(t){this.setOtherAcceptanceGrades("contact",t),this.dataColumnToRow()}},newMd5:function(){var t=c.md5.create();return t.update(JSON.stringify(this.acceptanceGrades)),t.hex()},hasAnyWritePermission:function(){return this.permissions.contains(["suspended-exceeds-write","falling-exceeds-write","contact-exceeds-write","microparticle-exceeds-write"])},microorganismColspanCount:function(){var t=this,e=0;return o().forEach(["suspended-exceeds-read","falling-exceeds-read","contact-exceeds-read"],(function(r){t.permissions.contains(r)&&e++})),e}}),data:function(){return{loading:!1,sending:!1,mode:"read",acceptanceGrades:[],acceptanceGradesForTable:[],form:{grade:"A"},oldGrade:"A",oldMd5:null,pollutionConditions:[],columns:["action","warn","general","normal"]}},created:function(){this.fetchData(),this.fetchPollutionConditionData()},methods:{fetchData:function(){var t=this;return _(g().mark((function e(){var r,n;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.loading=!0,e.prev=1,e.next=4,a().get("/api/acceptanceGrades",{params:{grade:t.form.grade}});case 4:0==(r=(r=e.sent).data).status&&(n=r.data,t.acceptanceGrades=n.acceptanceGrades,t.dataColumnToRow()),e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(1),e.next=13,t.guestRedirectHome(e.t0);case 13:t.oldMd5=t.newMd5,t.loading=!1;case 15:case"end":return e.stop()}}),e,null,[[1,9]])})))()},fetchPollutionConditionData:function(){var t=this;return _(g().mark((function e(){var r,n;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.loading=!0,e.prev=1,e.next=4,a().get("/api/pollutionConditions");case 4:0==(r=(r=e.sent).data).status&&(n=r.data,t.pollutionConditions=[],o().forEach(t.columns,(function(e){var r=o().find(n.pollutionConditions,{name:e});r&&t.pollutionConditions.push(r)}))),e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(1),e.next=13,t.guestRedirectHome(e.t0);case 13:t.loading=!1;case 14:case"end":return e.stop()}}),e,null,[[1,9]])})))()},submit:function(){var t=this;return _(g().mark((function e(){var r,n;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t.sending=!0,r=null,e.next=5,a().patch("/api/acceptanceGrades/batch",{acceptance_grades:t.acceptanceGrades,pollution_conditions:t.pollutionConditions});case 5:0==(r=(r=e.sent).data).status&&(n=r.data,t.acceptanceGrades=n.acceptanceGrades,t.dataColumnToRow(),t.$toast.success({title:"成功訊息",message:"儲存成功"})),e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(0),e.next=14,t.guestRedirectHome(e.t0);case 14:t.oldMd5=t.newMd5,t.sending=!1;case 16:case"end":return e.stop()}}),e,null,[[0,10]])})))()},dataColumnToRow:function(){var t=this,e=["microparticle_dot_5","microparticle_5","suspended","falling","contact"],r={id:null,organism_kind:null,grade:null,action:0,warn:0,general:0,normal:0},n=o().find(this.acceptanceGrades,{organism_kind:"microparticle_dot_5"}),i=o().find(this.acceptanceGrades,{organism_kind:"microparticle_5"}),a=o().find(this.acceptanceGrades,{organism_kind:"suspended"}),s=o().find(this.acceptanceGrades,{organism_kind:"falling"}),c=o().find(this.acceptanceGrades,{organism_kind:"contact"}),l=-1;n||((n=o().cloneDeep(r)).id=l,n.organism_kind="microparticle_dot_5",n.grade=this.form.grade,this.acceptanceGrades.push(n),l--),i||((i=o().cloneDeep(r)).id=l,i.organism_kind="microparticle_5",i.grade=this.form.grade,this.acceptanceGrades.push(i),l--),a||((a=o().cloneDeep(r)).id=l,a.organism_kind="suspended",a.grade=this.form.grade,this.acceptanceGrades.push(a),l--),s||((s=o().cloneDeep(r)).id=l,s.organism_kind="falling",s.grade=this.form.grade,this.acceptanceGrades.push(s),l--),c||((c=o().cloneDeep(r)).id=l,c.organism_kind="contact",c.grade=this.form.grade,this.acceptanceGrades.push(c),l--);var u=[];u.push(n),u.push(i),u.push(a),u.push(s),u.push(c);for(var d=[],h=function(r){var n={};o().forEach(e,(function(e,o){n[e]=u[o][t.columns[r]]})),d.push(n)},f=0;f<4;f++)h(f);this.acceptanceGradesForTable=d},setOtherAcceptanceGrades:function(t,e){var r=o().find(this.acceptanceGrades,(function(e){return e.organism_kind==t}));r&&(r.action=e?parseInt(e):0,r.warn=parseInt((.8*e).toFixed(0)),r.normal=r.general=parseInt((.5*e).toFixed(0)))},checkIsSaved:function(){return!(this.oldMd5!=this.newMd5&&!confirm("資料尚未儲存，確定要切換？"))},onGradeChange:function(){this.checkIsSaved()?(this.oldGrade=this.form.grade,this.fetchData()):this.form.grade=this.oldGrade},onClickCancelEditBtn:function(){this.checkIsSaved()&&(this.mode="read",this.fetchData())},setValue:function(t,e,r){var n=t.target._value,i=o().find(this.acceptanceGrades,["organism_kind",e]);i&&(i[this.columns[r]]=n)},getUpperAcceptanceGrade:function(t,e){var r=null;if(0==e||e+1==this.acceptanceGradesForTable.length||e-2<0||this.acceptanceGradesForTable[e-1][t])return null;for(var n=e-2;n>=0;n--)this.acceptanceGradesForTable[n][t]&&(r=this.acceptanceGradesForTable[n][t]);return r?" ~ ".concat(r):null},resetAcceptanceGrades:function(){var t=this;return _(g().mark((function e(){return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(confirm("確定要恢復原廠設定嗎？")){e.next=2;break}return e.abrupt("return");case 2:return t.sending=!0,e.prev=3,t.$toast.info({title:"提示訊息",message:"正在進行「恢復原廠設定」　，完成後，將自動重新整理畫面。"}),e.next=7,a().delete("/api/acceptanceGrades/resets");case 7:0==e.sent.data.status&&t.$router.go(0),e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(3),e.next=16,t.guestRedirectHome(e.t0);case 16:return e.prev=16,t.sending=!1,e.finish(16);case 19:case"end":return e.stop()}}),e,null,[[3,12,16,19]])})))()}}};var k=r(8370),L={insert:"head",singleton:!1};h()(k.Z,L);k.Z.locals;const S=(0,m.Z)(C,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("section",{staticClass:"content-header clearfix"},[r("span",[t._v("參數設定 ")]),t._v(" "),t.hasAnyWritePermission?["edit"!=t.mode?r("button",{staticClass:"btn btn-light-green op-btn",on:{click:function(e){t.mode="edit"}}},[r("i",{staticClass:"fa fa-pencil",attrs:{"aria-hidden":"true"}}),t._v(" 編輯\n            ")]):"edit"==t.mode?r("button",{staticClass:"btn btn-delete op-btn",on:{click:t.onClickCancelEditBtn}},[r("i",{staticClass:"fa fa-times-circle",attrs:{"aria-hidden":"true"}}),t._v(" 取消編輯\n            ")]):t._e(),t._v(" "),r("button",{staticClass:"btn btn-delete op-btn reset-btn",attrs:{disabled:t.sending},on:{click:t.resetAcceptanceGrades}},[r("i",{staticClass:"fa fa-undo",attrs:{"aria-hidden":"true"}}),t._v(" 恢復原廠設定\n            ")])]:t._e()],2),t._v(" "),r("section",{staticClass:"content"},[r("div",{staticClass:"row"},[r("div",{staticClass:"col-xs-12"},[r("div",{staticClass:"box"},[r("div",{staticClass:"box-body"},[t.loading?t._e():r("div",[r("h3",{staticClass:"table-title text-center"},[t._v("環境監控汙染地圖允收標準/級距設定")]),t._v(" "),r("table",{staticClass:"table table-bordered table-hover break-table"},[r("colgroup",[r("col",{staticStyle:{"background-color":"#f0f4fa"},attrs:{span:"2"}}),t._v(" "),t.permissions.contains("microparticle-exceeds-read")?r("col",{staticStyle:{"background-color":"#eef6e8"},attrs:{span:"2"}}):t._e(),t._v(" "),t.permissions.contains(["suspended-exceeds-read","falling-exceeds-read","contact-exceeds-read"])?r("col",{staticStyle:{"background-color":"#fff5d6"},attrs:{span:t.microorganismColspanCount}}):t._e()]),t._v(" "),r("thead",[r("tr",{staticClass:"table-head"},[r("th",{staticClass:"text-center hide-td vertical-middle",attrs:{rowspan:"2"}},[t._v("允收/項目")]),t._v(" "),r("th",{staticClass:"text-center hide-td vertical-middle",attrs:{rowspan:"2"}},[t._v("汙染狀態")]),t._v(" "),t.permissions.contains("microparticle-exceeds-read")?[t._m(0),t._v(" "),t._m(1)]:t._e(),t._v(" "),t.permissions.contains(["suspended-exceeds-read","falling-exceeds-read","contact-exceeds-read"])?r("th",{staticClass:"text-center vertical-middle hide-td",attrs:{colspan:t.microorganismColspanCount}},[t._v("微生物(cfu/m"),r("sup",[t._v("3")]),t._v(")\n                                    ")]):t._e()],2),t._v(" "),r("tr",[t.permissions.contains("suspended-exceeds-read")?r("th",{staticClass:"text-center vertical-middle hide-td"},[t._v("懸浮菌")]):t._e(),t._v(" "),t.permissions.contains("falling-exceeds-read")?r("th",{staticClass:"text-center vertical-middle hide-td"},[t._v("落下菌")]):t._e(),t._v(" "),t.permissions.contains("contact-exceeds-read")?r("th",{staticClass:"text-center vertical-middle hide-td"},[t._v("接觸菌")]):t._e()]),t._v(" "),r("tr",[r("th",{staticClass:"text-center vertical-middle",attrs:{colspan:"2",rowspan:"2"}},[t._v("允收/顏色(定義)")]),t._v(" "),t.permissions.contains("microparticle-exceeds-read")?r("th",{staticClass:"text-center hide-td th-grade",attrs:{colspan:"5"}},[t._v("\n                                        Class\n                                        "),"A"==t.form.grade?[t._v(t._s(t._f("withComma")(100)))]:"B"==t.form.grade?[t._v(t._s(t._f("withComma")(1e3)))]:"C"==t.form.grade?[t._v(t._s(t._f("withComma")(1e4)))]:[t._v(t._s(t._f("withComma")(1e5)))],t._v(" "),r("br"),t._v("\n                                        (Grade\n                                        "),r("select",{directives:[{name:"model",rawName:"v-model",value:t.form.grade,expression:"form.grade"}],on:{change:[function(e){var r=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(t.form,"grade",e.target.multiple?r:r[0])},t.onGradeChange]}},[r("option",{attrs:{value:"A"}},[t._v("A")]),t._v(" "),r("option",{attrs:{value:"B"}},[t._v("B")]),t._v(" "),r("option",{attrs:{value:"C"}},[t._v("C")]),t._v(" "),r("option",{attrs:{value:"D"}},[t._v("D")])]),t._v(")\n                                    ")],2):t._e()]),t._v(" "),r("tr",[t.permissions.contains("microparticle-exceeds-read")?[r("th",{staticClass:"text-center hide-td"},[r("span",[t._v("  ")]),t._v(" "),"edit"==t.mode?r("input",{directives:[{name:"model",rawName:"v-model",value:t.microparticleDot5,expression:"microparticleDot5"}],staticClass:"text-center",attrs:{disabled:!t.permissions.contains("microparticle-exceeds-write")},domProps:{value:t.microparticleDot5},on:{input:function(e){e.target.composing||(t.microparticleDot5=e.target.value)}}}):t.microparticleDot5?r("span",[t._v(t._s(t._f("withComma")(t.microparticleDot5)))]):t._e()]),t._v(" "),r("th",{staticClass:"text-center hide-td"},[r("span",[t._v("  ")]),t._v(" "),"edit"==t.mode?r("input",{directives:[{name:"model",rawName:"v-model",value:t.microparticle5,expression:"microparticle5"}],staticClass:"text-center",attrs:{disabled:!t.permissions.contains("microparticle-exceeds-write")},domProps:{value:t.microparticle5},on:{input:function(e){e.target.composing||(t.microparticle5=e.target.value)}}}):t.microparticle5?r("span",[t._v(t._s(t._f("withComma")(t.microparticle5)))]):t._e()])]:t._e(),t._v(" "),t.permissions.contains("suspended-exceeds-read")?r("th",{staticClass:"text-center hide-td"},[r("span",[t._v("  ")]),t._v(" "),"edit"==t.mode?r("input",{directives:[{name:"model",rawName:"v-model",value:t.suspended,expression:"suspended"}],staticClass:"text-center",attrs:{disabled:!t.permissions.contains("suspended-exceeds-write")},domProps:{value:t.suspended},on:{input:function(e){e.target.composing||(t.suspended=e.target.value)}}}):t.suspended?r("span",[t._v(t._s(t._f("withComma")(t.suspended)))]):t._e()]):t._e(),t._v(" "),t.permissions.contains("falling-exceeds-read")?r("th",{staticClass:"text-center hide-td"},[r("span",[t._v("  ")]),t._v(" "),"edit"==t.mode?r("input",{directives:[{name:"model",rawName:"v-model",value:t.falling,expression:"falling"}],staticClass:"text-center",attrs:{disabled:!t.permissions.contains("falling-exceeds-write")},domProps:{value:t.falling},on:{input:function(e){e.target.composing||(t.falling=e.target.value)}}}):t.falling?r("span",[t._v(t._s(t._f("withComma")(t.falling)))]):t._e()]):t._e(),t._v(" "),t.permissions.contains("contact-exceeds-read")?r("th",{staticClass:"text-center hide-td"},[r("span",[t._v("  ")]),t._v(" "),"edit"==t.mode?r("input",{directives:[{name:"model",rawName:"v-model",value:t.contact,expression:"contact"}],staticClass:"text-center",attrs:{disabled:!t.permissions.contains("contact-exceeds-write")},domProps:{value:t.contact},on:{input:function(e){e.target.composing||(t.contact=e.target.value)}}}):t.contact?r("span",[t._v(t._s(t._f("withComma")(t.contact)))]):t._e()]):t._e()],2)]),t._v(" "),r("tbody",t._l(t.acceptanceGradesForTable,(function(e,n){return r("tr",[r("td",{staticClass:"text-center",attrs:{"data-title":"允收/項目"}},[0==n?r("span",[t._v(">允收")]):n==t.acceptanceGradesForTable.length-1?r("span",[t._v("<允收")]):r("span",[t._v("允收 x "+t._s(1==n?80:50)+" %")])]),t._v(" "),r("td",{staticClass:"text-center",attrs:{"data-title":"汙染狀態"}},[t.pollutionConditions.length==t.acceptanceGradesForTable.length?[r("pollution-condition-color-input",{staticClass:"vertical-middle",attrs:{disabled:"edit"!=t.mode},model:{value:t.pollutionConditions[n],callback:function(e){t.$set(t.pollutionConditions,n,e)},expression:"pollutionConditions[i]"}}),t._v(" "),r("span",[t._v(t._s(t.pollutionConditions[n].display_name))])]:t._e()],2),t._v(" "),t.permissions.contains("microparticle-exceeds-read")?[r("td",{staticClass:"text-center",attrs:{"data-title":"微粒子(28.3L/5µm)"}},[e.microparticle_dot_5?[0==n?r("span",[t._v(">")]):n==t.acceptanceGradesForTable.length-1?r("span",[t._v("<")]):r("span",[t._v("  ")])]:"read"==t.mode?[t._v("  -")]:t._e(),t._v(" "),"edit"==t.mode&&0!=n?r("input",{directives:[{name:"model",rawName:"v-model.number",value:e.microparticle_dot_5,expression:"acceptanceGrade.microparticle_dot_5",modifiers:{number:!0}}],staticClass:"text-center",attrs:{disabled:!t.permissions.contains("microparticle-exceeds-write")},domProps:{value:e.microparticle_dot_5},on:{blur:[function(e){return t.setValue(e,"microparticle_dot_5",n)},function(e){return t.$forceUpdate()}],input:function(r){r.target.composing||t.$set(e,"microparticle_dot_5",t._n(r.target.value))}}}):e.microparticle_dot_5?[t._v(t._s(t._f("withComma")(e.microparticle_dot_5))+"\n                                                "),t.getUpperAcceptanceGrade("microparticle_dot_5",n)?r("span",[t._v(t._s(t._f("withComma")(t.getUpperAcceptanceGrade("microparticle_dot_5",n))))]):t._e()]:t._e()],2),t._v(" "),r("td",{staticClass:"text-center",attrs:{"data-title":"微粒子(28.3L/0.5µm)"}},[e.microparticle_5?[0==n?r("span",[t._v(">")]):n==t.acceptanceGradesForTable.length-1?r("span",[t._v("<")]):r("span",[t._v("  ")])]:"read"==t.mode?[t._v("  -")]:t._e(),t._v(" "),"edit"==t.mode&&0!=n?r("input",{directives:[{name:"model",rawName:"v-model.number",value:e.microparticle_5,expression:"acceptanceGrade.microparticle_5",modifiers:{number:!0}}],staticClass:"text-center",attrs:{disabled:!t.permissions.contains("microparticle-exceeds-write")},domProps:{value:e.microparticle_5},on:{blur:[function(e){return t.setValue(e,"microparticle_5",n)},function(e){return t.$forceUpdate()}],input:function(r){r.target.composing||t.$set(e,"microparticle_5",t._n(r.target.value))}}}):e.microparticle_5?[t._v(t._s(t._f("withComma")(e.microparticle_5))+"\n                                                "),t.getUpperAcceptanceGrade("microparticle_5",n)?r("span",[t._v(t._s(t._f("withComma")(t.getUpperAcceptanceGrade("microparticle_5",n))))]):t._e()]:t._e()],2)]:t._e(),t._v(" "),t.permissions.contains("suspended-exceeds-read")?r("td",{staticClass:"text-center",attrs:{"data-title":"懸浮菌"}},[e.suspended?[0==n?r("span",[t._v(">")]):n==t.acceptanceGradesForTable.length-1?r("span",[t._v("<")]):r("span",[t._v("  ")])]:"read"==t.mode?[t._v("  -")]:t._e(),t._v(" "),"edit"==t.mode&&0!=n?r("input",{directives:[{name:"model",rawName:"v-model.number",value:e.suspended,expression:"acceptanceGrade.suspended",modifiers:{number:!0}}],staticClass:"text-center",attrs:{disabled:!t.permissions.contains("suspended-exceeds-write")},domProps:{value:e.suspended},on:{blur:[function(e){return t.setValue(e,"suspended",n)},function(e){return t.$forceUpdate()}],input:function(r){r.target.composing||t.$set(e,"suspended",t._n(r.target.value))}}}):e.suspended?[t._v(t._s(t._f("withComma")(e.suspended))+"\n                                            "),t.getUpperAcceptanceGrade("suspended",n)?r("span",[t._v(t._s(t._f("withComma")(t.getUpperAcceptanceGrade("suspended",n))))]):t._e()]:t._e()],2):t._e(),t._v(" "),t.permissions.contains("falling-exceeds-read")?r("td",{staticClass:"text-center",attrs:{"data-title":"落下菌"}},[e.falling?[0==n?r("span",[t._v(">")]):n==t.acceptanceGradesForTable.length-1?r("span",[t._v("<")]):r("span",[t._v("  ")])]:"read"==t.mode?[t._v("  -")]:t._e(),t._v(" "),"edit"==t.mode&&0!=n?r("input",{directives:[{name:"model",rawName:"v-model.number",value:e.falling,expression:"acceptanceGrade.falling",modifiers:{number:!0}}],staticClass:"text-center",attrs:{disabled:!t.permissions.contains("falling-exceeds-write")},domProps:{value:e.falling},on:{blur:[function(e){return t.setValue(e,"falling",n)},function(e){return t.$forceUpdate()}],input:function(r){r.target.composing||t.$set(e,"falling",t._n(r.target.value))}}}):e.falling?[t._v(t._s(t._f("withComma")(e.falling))+"\n                                            "),t.getUpperAcceptanceGrade("falling",n)?r("span",[t._v(t._s(t._f("withComma")(t.getUpperAcceptanceGrade("falling",n))))]):t._e()]:t._e()],2):t._e(),t._v(" "),t.permissions.contains("contact-exceeds-read")?r("td",{staticClass:"text-center",attrs:{"data-title":"接觸菌"}},[e.contact?[0==n?r("span",[t._v(">")]):n==t.acceptanceGradesForTable.length-1?r("span",[t._v("<")]):r("span",[t._v("  ")])]:"read"==t.mode?[t._v("  -")]:t._e(),t._v(" "),"edit"==t.mode&&0!=n?r("input",{directives:[{name:"model",rawName:"v-model.number",value:e.contact,expression:"acceptanceGrade.contact",modifiers:{number:!0}}],staticClass:"text-center",attrs:{disabled:!t.permissions.contains("contact-exceeds-write")},domProps:{value:e.contact},on:{blur:[function(e){return t.setValue(e,"contact",n)},function(e){return t.$forceUpdate()}],input:function(r){r.target.composing||t.$set(e,"contact",t._n(r.target.value))}}}):e.contact?[t._v(t._s(t._f("withComma")(e.contact))+"\n                                            "),t.getUpperAcceptanceGrade("contact",n)?r("span",[t._v(t._s(t._f("withComma")(t.getUpperAcceptanceGrade("contact",n))))]):t._e()]:t._e()],2):t._e()],2)})),0)]),t._v(" "),r("div",{staticClass:"text-right"},["edit"==t.mode?r("button",{staticClass:"btn btn-light-green op-btn",attrs:{type:"button",disabled:t.sending},on:{click:t.submit}},[r("i",{staticClass:"fa fa-floppy-o"}),t._v(" 儲存\n                                ")]):t._e()])]),t._v(" "),t.loading?r("clip-loader",{staticClass:"loading",attrs:{color:"gray",size:"30px"}}):t._e()],1)])])])])])}),[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("th",{staticClass:"text-center hide-td vertical-middle",attrs:{rowspan:"2"}},[t._v("微粒子"),r("br"),t._v("(28.3L/0.5µm)\n                                        ")])},function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("th",{staticClass:"text-center hide-td vertical-middle",attrs:{rowspan:"2"}},[t._v("微粒子"),r("br"),t._v("(28.3L/5µm)\n                                        ")])}],!1,null,"508deb8d",null).exports},6768:(t,e,r)=>{"use strict";r.d(e,{Z:()=>g});var n=r(9669),o=r.n(n),i=r(9038),a=r(6486),s=r.n(a);function c(t){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},c(t)}function l(){l=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function u(t,e,r,n){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new L(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return E()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var s=w(a,r);if(s){if(s===h)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=d(t,e,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===h)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}(t,r,a),i}function d(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var h={};function f(){}function p(){}function m(){}var v={};s(v,o,(function(){return this}));var g=Object.getPrototypeOf,y=g&&g(g(S([])));y&&y!==e&&r.call(y,o)&&(v=y);var _=m.prototype=f.prototype=Object.create(v);function b(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function x(t,e){function n(o,i,a,s){var l=d(t[o],t,i);if("throw"!==l.type){var u=l.arg,h=u.value;return h&&"object"==c(h)&&r.call(h,"__await")?e.resolve(h.__await).then((function(t){n("next",t,a,s)}),(function(t){n("throw",t,a,s)})):e.resolve(h).then((function(t){u.value=t,a(u)}),(function(t){return n("throw",t,a,s)}))}s(l.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return h;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return h}var n=d(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,h;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,h):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,h)}function C(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function k(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function L(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(C,this),this.reset(!0)}function S(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:E}}function E(){return{value:void 0,done:!0}}return p.prototype=m,s(_,"constructor",m),s(m,"constructor",p),p.displayName=s(m,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,m):(t.__proto__=m,s(t,a,"GeneratorFunction")),t.prototype=Object.create(_),t},t.awrap=function(t){return{__await:t}},b(x.prototype),s(x.prototype,i,(function(){return this})),t.AsyncIterator=x,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new x(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},b(_),s(_,a,"Generator"),s(_,o,(function(){return this})),s(_,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=S,L.prototype={constructor:L,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(k),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=r.call(i,"catchLoc"),c=r.call(i,"finallyLoc");if(s&&c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,h):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),k(r),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;k(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:S(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),h}},t}function u(t,e,r,n,o,i,a){try{var s=t[i](a),c=s.value}catch(t){return void r(t)}s.done?e(c):Promise.resolve(c).then(n,o)}function d(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){u(i,n,o,a,s,"next",t)}function s(t){u(i,n,o,a,s,"throw",t)}a(void 0)}))}}const h={name:"CleanAreaListView",components:{ClipLoader:i.Z},data:function(){return{loading:!1,cleanAreas:[]}},created:function(){var t=this;return d(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.loading=!0,e.next=3,t.fetchData();case 3:t.loading=!1,t.subScribe();case 5:case"end":return e.stop()}}),e)})))()},destroyed:function(){window.Echo.leave("cleanAreas")},methods:{fetchData:function(){var t=this;return d(l().mark((function e(){var r,n;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,o().get("/api/cleanAreas");case 3:0==(r=(r=e.sent).data).status&&(n=r.data,t.cleanAreas=n.cleanAreas),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),t.guestRedirectHome(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))()},subScribe:function(){var t=this;window.Echo.private("cleanAreas").listen("CleanAreaCreated",(function(e){var r=e.cleanArea;r.enable&&t.cleanAreas.push(r)})).listen("CleanAreaUpdated",(function(e){var r=e.cleanArea;if(r.enable){var n=s().findIndex(t.cleanAreas,["id",r.id]);-1!=n?t.cleanAreas.splice(n,1,r):t.cleanAreas.push(r)}else t.cleanAreas=s().filter(t.cleanAreas,(function(t){return t.id!=r.id}))}))}}};var f=r(3379),p=r.n(f),m=r(5165),v={insert:"head",singleton:!1};p()(m.Z,v);m.Z.locals;const g=(0,r(1900).Z)(h,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[t._m(0),t._v(" "),r("section",{staticClass:"content"},[r("div",{staticClass:"row"},[r("div",{staticClass:"col-xs-12"},[r("div",{staticClass:"box"},[r("div",{staticClass:"box-body"},[t.loading?t._e():r("div",[r("table",{staticClass:"table table-bordered table-hover break-table size-sm"},[t._m(1),t._v(" "),r("tbody",t._l(t.cleanAreas,(function(e){return r("tr",[r("td",{staticClass:"text-center",attrs:{"data-title":"清潔區域起點 (x, y)"}},[t._v("\n                                        "+t._s("("+e.start_goal_x+", "+e.start_goal_y+")")+"\n                                    ")]),t._v(" "),r("td",{staticClass:"text-center",attrs:{"data-title":"清潔區域終點 (x, y)"}},[t._v("\n                                        "+t._s("("+e.end_goal_x+", "+e.end_goal_y+")")+"\n                                    ")])])})),0)])]),t._v(" "),t.loading?r("clip-loader",{staticClass:"loading",attrs:{color:"gray",size:"30px"}}):t._e()],1)])])])])])}),[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("section",{staticClass:"content-header"},[r("h1",[t._v("清潔區域狀態列表")])])},function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("thead",{staticClass:"table-head"},[r("tr",[r("th",{staticClass:"text-center hide-td"},[t._v("清潔區域起點 (x, y)")]),t._v(" "),r("th",{staticClass:"text-center hide-td"},[t._v("清潔區域終點 (x, y)")])])])}],!1,null,"e5d71a1c",null).exports},6011:(t,e,r)=>{"use strict";r.d(e,{Z:()=>c});const n={name:"Reload"};var o=r(3379),i=r.n(o),a=r(1718),s={insert:"head",singleton:!1};i()(a.Z,s);a.Z.locals;const c=(0,r(1900).Z)(n,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"text-center reload-div clearfix"},[r("span",[t._v("MIR車輛未開機，請稍後再試，或點擊")]),t._v(" "),r("button",{staticClass:"btn btn-default",on:{click:function(e){return t.$emit("click")}}},[r("i",{staticClass:"fa fa-refresh"}),t._v("重新連線")])])}),[],!1,null,"bf428606",null).exports},7450:(t,e,r)=>{"use strict";r.d(e,{Z:()=>M});var n=r(6486),o=r.n(n),i=r(7757),a=r.n(i),s=r(9523),c=r.n(s),l=r(1049),u=r.n(l),d=r(9669),h=r.n(d),f=r(381),p=r.n(f),m=r(6875),v=r(8813),g=r(1748),y=r(9755);function _(t){return _="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_(t)}function b(){b=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function c(t,e,r,n){var o=e&&e.prototype instanceof d?e:d,i=Object.create(o.prototype),a=new L(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return E()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var s=w(a,r);if(s){if(s===u)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=l(t,e,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===u)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}(t,r,a),i}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var u={};function d(){}function h(){}function f(){}var p={};s(p,o,(function(){return this}));var m=Object.getPrototypeOf,v=m&&m(m(S([])));v&&v!==e&&r.call(v,o)&&(p=v);var g=f.prototype=d.prototype=Object.create(p);function y(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function x(t,e){function n(o,i,a,s){var c=l(t[o],t,i);if("throw"!==c.type){var u=c.arg,d=u.value;return d&&"object"==_(d)&&r.call(d,"__await")?e.resolve(d.__await).then((function(t){n("next",t,a,s)}),(function(t){n("throw",t,a,s)})):e.resolve(d).then((function(t){u.value=t,a(u)}),(function(t){return n("throw",t,a,s)}))}s(c.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return u;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var n=l(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,u;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,u):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,u)}function C(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function k(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function L(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(C,this),this.reset(!0)}function S(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:E}}function E(){return{value:void 0,done:!0}}return h.prototype=f,s(g,"constructor",f),s(f,"constructor",h),h.displayName=s(f,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===h||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,f):(t.__proto__=f,s(t,a,"GeneratorFunction")),t.prototype=Object.create(g),t},t.awrap=function(t){return{__await:t}},y(x.prototype),s(x.prototype,i,(function(){return this})),t.AsyncIterator=x,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new x(c(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},y(g),s(g,a,"Generator"),s(g,o,(function(){return this})),s(g,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=S,L.prototype={constructor:L,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(k),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=r.call(i,"catchLoc"),c=r.call(i,"finallyLoc");if(s&&c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,u):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),u},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),k(r),u}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;k(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:S(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),u}},t}function x(t,e,r,n,o,i,a){try{var s=t[i](a),c=s.value}catch(t){return void r(t)}s.done?e(c):Promise.resolve(c).then(n,o)}function w(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){x(i,n,o,a,s,"next",t)}function s(t){x(i,n,o,a,s,"throw",t)}a(void 0)}))}}const C={name:"DashboardListPage",components:{RoomEnvironmentSelect:g.Z,MicroOrganismKindListSelect:v.Z,Datetimepicker:m.Z},computed:{today:function(){return p()().format("yyyy-MM-DD")},isOverHalfYearForChart1:function(){return!(!this.form.chart1.start_date||!this.form.chart1.end_date)&&p()(this.form.chart1.start_date).add(6,"months").toISOString()<p()(this.form.chart1.end_date).toISOString()},isOverSeasonForChart2:function(){return!(!this.form.chart2.start_date||!this.form.chart2.end_date)&&p()(this.form.chart2.start_date).add(3,"months").toISOString()<p()(this.form.chart2.end_date).toISOString()},isStartDateLaterEndDateForChart1:function(){return p()(this.form.chart1.start_date).unix()>p()(this.form.chart1.end_date).unix()},isStartDateLaterEndDateForChart2:function(){return p()(this.form.chart2.start_date).unix()>p()(this.form.chart2.end_date).unix()},organismKindsForChart1:function(){var t=this;return o().filter(this.organismKinds,(function(e){return 1==t.organismTypeChart1?!e.id.contains("microparticle"):e.id.contains("microparticle")}))},organismKindsForChart2:function(){var t=this;return o().filter(this.organismKinds,(function(e){return 1==t.organismTypeChart2?!e.id.contains("microparticle"):e.id.contains("microparticle")}))}},watch:{"form.chart1.organism_kinds":{handler:function(t){t.length>0&&(this.showRequireChart1OrganismKinds=!1)},deep:!0},"form.chart2.organism_kinds":{handler:function(t){t.length>0&&(this.showRequireChart2OrganismKinds=!1)},deep:!0}},data:function(){return{dashboards:[],roomEnvironments:[],organismKinds:[{id:"microparticle_dot_5",name:"微粒子(0.5µm)"},{id:"microparticle_5",name:"微粒子(5µm)"},{id:"suspended",name:"懸浮微生物"},{id:"falling",name:"落下微生物"},{id:"contact",name:"接觸微生物"}],organismTypes:[{id:1,name:"微生物"},{id:2,name:"微粒子"}],organismTypeChart1:1,organismTypeChart2:1,form:{},chart:{chart1:null,chart2:null},color:"#ffffff",tempChart:{type:null,element_id:null,labels:[],datasets:[],change_idx:null},showRequireChart1OrganismKinds:!1,showRequireChart2OrganismKinds:!1,showRequireChart1RoomName:!1,showRequireChart2RoomName:!1}},created:function(){this.resetForm()},methods:{fetchChart1Data:function(){var t=this;return w(b().mark((function e(){var r,n,o,i;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.isStartDateLaterEndDateForChart1&&!t.isOverHalfYearForChart1){e.next=2;break}return e.abrupt("return");case 2:if(!(t.form.chart1.room_names.length<=0)){e.next=5;break}return t.showRequireChart1RoomName=!0,e.abrupt("return");case 5:if(!(t.form.chart1.organism_kinds.length<1)){e.next=8;break}return t.showRequireChart1OrganismKinds=!0,e.abrupt("return");case 8:return t.showRequireChart1OrganismKinds=!1,t.showRequireChart1RoomName=!1,r=t.getPureForm(t.form.chart1),e.prev=11,e.next=14,h().get("/api/chart1",{params:r});case 14:0==(n=(n=e.sent).data).status&&(o=n.data,i=o.cultureResult,t.generateChart("bar","chart1",i.labels,i.datasets,"".concat(r.room_names[0],"檢測位置和微生物類別之比較表(").concat(r.start_date,"~").concat(r.end_date,")"))),e.next=23;break;case 19:return e.prev=19,e.t0=e.catch(11),e.next=23,t.guestRedirectHome(e.t0);case 23:case"end":return e.stop()}}),e,null,[[11,19]])})))()},fetchChart2Data:function(){var t=this;return w(b().mark((function e(){var r,n,o,i;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.isStartDateLaterEndDateForChart2&&!t.isOverSeasonForChart2){e.next=2;break}return e.abrupt("return");case 2:if(!(t.form.chart2.organism_kinds.length<1)){e.next=5;break}return t.showRequireChart2OrganismKinds=!0,e.abrupt("return");case 5:if(!(t.form.chart2.room_names.length<=0)){e.next=8;break}return t.showRequireChart2RoomName=!0,e.abrupt("return");case 8:return t.showRequireChart2OrganismKinds=!1,t.showRequireChart2RoomName=!1,r=t.getPureForm(t.form.chart2),e.prev=11,e.next=14,h().get("/api/chart2",{params:r});case 14:0==(n=(n=e.sent).data).status&&(o=n.data,i=o.informationResult,t.generateChart("bar","chart2",i.labels,i.datasets,"".concat(r.room_names[0],"...等各房間資訊數據分析表(").concat(r.start_date,"~").concat(r.end_date,")"))),e.next=23;break;case 19:return e.prev=19,e.t0=e.catch(11),e.next=23,t.guestRedirectHome(e.t0);case 23:case"end":return e.stop()}}),e,null,[[11,19]])})))()},generateChart:function(t,e,r,n,i){var s=this,l=y("#".concat(e));this.chart[e]&&this.chart[e].destroy();var d=null;"chart1"==e?d=1==this.organismTypeChart1?"cfu":"顆/m³":"chart2"==e&&(d=1==this.organismTypeChart2?"cfu":"顆/m³");var h={type:t,data:{labels:r,datasets:n},plugins:[c(),u()],options:{title:{display:!!i,text:i,fontSize:30},legend:{labels:{fontSize:14},onClick:["bar","line"].contains(t)?function(i,a){"bar"==t?s.color=o().cloneDeep(n[a.datasetIndex].backgroundColor):"line"==t&&(s.color=o().cloneDeep(n[a.datasetIndex].borderColor)),s.$refs["color_picker_".concat(e)].value=s.color,s.$refs["color_picker_".concat(e)].click(),s.tempChart.type=o().cloneDeep(t),s.tempChart.element_id=o().cloneDeep(e),s.tempChart.labels=o().cloneDeep(r),s.tempChart.datasets=o().cloneDeep(n),s.tempChart.change_idx=o().cloneDeep(a.datasetIndex)}:a().defaults.global.legend.onClick},scales:{xAxes:[{scaleLabel:{display:!0,labelString:"檢測位置",fontSize:18},ticks:{fontSize:14}}],yAxes:[{scaleLabel:{display:!0,labelString:d,fontSize:18},ticks:{beginAtZero:!0,fontSize:14}}]},responsive:!0,plugins:{datalabels:{anchor:"end",align:"end"},zoom:{zoom:{enabled:!0,mode:"xy",speed:.01,onZoom:function(t){var e=t.chart;e.scales["x-axis-0"].options.scaleLabel={display:!0,labelString:"檢測位置",fontSize:18},e.scales["y-axis-0"].options.scaleLabel={display:!0,labelString:d,fontSize:18}}},pan:{enabled:!0,mode:"xy"}}}}};a().Legend.prototype.afterFit=function(){this.height=this.height+50},this.chart[e]=new(a())(l,h)},resetForm:function(){this.form={chart1:{start_date:this.today,end_date:this.today,room_names:[],organism_kinds:[]},chart2:{start_date:p()(this.today).subtract(2,"weeks").format("yyyy-MM-DD"),end_date:this.today,room_names:[],organism_kinds:[]}}},onColorPickerChange:function(){var t=this;return w(b().mark((function e(){return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.tempChart.change_idx&&0!=t.tempChart.change_idx){e.next=8;break}return"bar"==t.tempChart.type?t.tempChart.datasets[t.tempChart.change_idx].backgroundColor=t.color:"line"==t.tempChart.type&&(t.tempChart.datasets[t.tempChart.change_idx].borderColor=t.color),t.generateChart(t.tempChart.type,t.tempChart.element_id,t.tempChart.labels,t.tempChart.datasets),t.$refs["color_picker_".concat(t.tempChart.element_id)].type="text",t.$refs["color_picker_".concat(t.tempChart.element_id)].type="color",e.next=7,t.submitChartColor(t.tempChart.datasets[t.tempChart.change_idx].chartColorId,t.color);case 7:t.tempChart={type:null,element_id:null,labels:[],datasets:[],change_idx:null};case 8:case"end":return e.stop()}}),e)})))()},submitChartColor:function(t,e){var r=this;return w(b().mark((function n(){return b().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,h().patch("/api/chartColors/".concat(t),{color:e});case 3:0==n.sent.data.status&&r.$toast.success({title:"成功訊息",message:"更新成功"}),n.next=11;break;case 8:n.prev=8,n.t0=n.catch(0),r.guestRedirectHome(n.t0);case 11:case"end":return n.stop()}}),n,null,[[0,8]])})))()},selectAllMicroOrganism:function(t){switch(t){case"chart1":this.form.chart1.organism_kinds=o().map(this.organismKindsForChart1,(function(t){return t.id}));break;case"chart2":this.form.chart2.organism_kinds=o().map(this.organismKindsForChart2,(function(t){return t.id}))}},selectAllRoomName:function(t){switch(t){case"chart1":this.form.chart1.room_names=o().map(this.roomEnvironments,(function(t){return t.room_name}));break;case"chart2":this.form.chart2.room_names=o().map(this.roomEnvironments,(function(t){return t.room_name}))}},exportChart:function(t){var e=this;return w(b().mark((function r(){var n,o,i,a,s,c,l;return b().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n=document.getElementById(t).toDataURL("image/png"),o=new FormData,i=e.b64toBlob(n),a=new File([i],"chart.png"),o.append("file",a),r.prev=5,r.next=8,h().post("/uploadChart",o,{headers:{"Content-Type":"multipart/form-data"}});case 8:s=(s=r.sent).data,c=s.data,l=null,l="chart1"==t?"".concat(e.form.chart1.room_names[0],"檢測位置和微生物類別之比較表(").concat(e.form.chart1.start_date,"~").concat(e.form.chart1.end_date,")"):"".concat(e.form.chart2.room_names[0],"...等各房間資訊數據分析表(").concat(e.form.chart2.start_date,"~").concat(e.form.chart2.end_date,")"),window.open("/chart.pdf?filename=".concat(c.filename,"&chart_name=").concat(l),"_blank"),r.next=19;break;case 16:r.prev=16,r.t0=r.catch(5),e.guestRedirectHome(r.t0);case 19:case"end":return r.stop()}}),r,null,[[5,16]])})))()},b64toBlob:function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:512,n=atob(t.split(",")[1]),o=[],i=0;i<n.length;i+=r){for(var a=n.slice(i,i+r),s=new Array(a.length),c=0;c<a.length;c++)s[c]=a.charCodeAt(c);var l=new Uint8Array(s);o.push(l)}return new Blob(o,{type:e})}}};var k=r(3379),L=r.n(k),S=r(4932),E={insert:"head",singleton:!1};L()(S.Z,E);S.Z.locals;const M=(0,r(1900).Z)(C,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("section",{staticClass:"content-header"},[t._v("\n        數據分析表\n    ")]),t._v(" "),r("section",{staticClass:"content"},[r("div",{staticClass:"row"},[r("div",{staticClass:"col-md-12"},[r("div",{staticClass:"box box-default"},[t._m(0),t._v(" "),r("div",{staticClass:"box-body"},[r("div",{staticClass:"row"},[r("div",{staticClass:"col-md-offset-1 col-md-10"},[r("label",{staticClass:"col-lg-2 text-right",attrs:{for:"timeForChart1"}},[t._v("起始日期  ")]),t._v(" "),r("div",{staticClass:"col-lg-4"},[r("datetimepicker",{staticStyle:{width:"100%"},attrs:{"datetime-input-id":"timeForChart1",type:"date",format:"yyyy-MM-dd","input-class":"form-control","picker-class":"theme-light-green",placeholder:"請選擇","max-datetime":t.today},model:{value:t.form.chart1.start_date,callback:function(e){t.$set(t.form.chart1,"start_date",e)},expression:"form.chart1.start_date"}})],1),t._v(" "),r("label",{staticClass:"col-lg-2 text-right",attrs:{for:"endDateForChart1"}},[t._v("結束日期  ")]),t._v(" "),r("div",{staticClass:"col-lg-4"},[r("datetimepicker",{staticStyle:{width:"100%"},attrs:{"datetime-input-id":"endDateForChart1",type:"date",format:"yyyy-MM-dd","input-class":"form-control","picker-class":"theme-light-green",placeholder:"請選擇","max-datetime":t.today},model:{value:t.form.chart1.end_date,callback:function(e){t.$set(t.form.chart1,"end_date",e)},expression:"form.chart1.end_date"}})],1)]),t._v(" "),r("div",{staticClass:"col-md-1"}),t._v(" "),r("div",{staticClass:"col-md-offset-1 col-md-10"},[r("div",{staticClass:"col-lg-2"}),t._v(" "),r("div",{staticClass:"col-lg-4"},[t.isStartDateLaterEndDateForChart1?r("span",{staticClass:"red"},[t._v("起始日期不得晚於結束日期。")]):t.isOverHalfYearForChart1?r("span",{staticClass:"red"},[t._v("日期範圍超過半年，請重新選擇。")]):t._e()])])]),t._v(" "),r("div",{staticClass:"row",staticStyle:{"margin-top":"10px"}},[r("div",{staticClass:"col-md-offset-1 col-md-10"},[t._m(1),t._v(" "),r("div",{staticClass:"col-lg-4"},[r("room-environment-select",{attrs:{id:"chart1RoomName","select-class":"form-control",placeholder:"請選擇"},model:{value:t.form.chart1.room_names[0],callback:function(e){t.$set(t.form.chart1.room_names,0,e)},expression:"form.chart1.room_names[0]"}}),t._v(" "),r("span",{directives:[{name:"show",rawName:"v-show",value:t.showRequireChart1RoomName,expression:"showRequireChart1RoomName"}],staticClass:"red"},[t._v("請選擇房間名稱")])],1)])]),t._v(" "),r("div",{staticClass:"row",staticStyle:{"margin-top":"10px"}},[r("div",{staticClass:"col-md-offset-1 col-md-10"},[t._m(2),t._v(" "),r("div",{staticClass:"col-lg-10"},[r("div",{staticClass:"select-block"},[r("select",{directives:[{name:"model",rawName:"v-model",value:t.organismTypeChart1,expression:"organismTypeChart1"}],staticClass:"form-control organism-type-select1",on:{change:[function(e){var r=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.organismTypeChart1=e.target.multiple?r:r[0]},function(e){t.form.chart1.organism_kinds=[]}]}},t._l(t.organismTypes,(function(e){return r("option",{domProps:{value:e.id}},[t._v(t._s(e.name))])})),0),t._v(" "),r("micro-organism-kind-list-select",{staticClass:"micro-organism-select1",attrs:{id:"chart1OrganismKinds","select-class":"form-control",items:t.organismKindsForChart1,multiple:!0},model:{value:t.form.chart1.organism_kinds,callback:function(e){t.$set(t.form.chart1,"organism_kinds",e)},expression:"form.chart1.organism_kinds"}}),t._v(" "),r("button",{staticClass:"btn btn-light-green op-btn vertical-middle",attrs:{type:"button"},on:{click:function(e){return t.selectAllMicroOrganism("chart1")}}},[t._v("全選")])],1),t._v(" "),r("span",{directives:[{name:"show",rawName:"v-show",value:t.showRequireChart1OrganismKinds,expression:"showRequireChart1OrganismKinds"}],staticClass:"red"},[t._v("請至少選擇一樣微生物類別")])])])]),t._v(" "),r("div",{staticClass:"row",staticStyle:{"margin-top":"20px"}},[r("div",{staticClass:"col-md-offset-1 col-md-10"},[r("div",{staticClass:"col-lg-12 text-center"},[r("button",{staticClass:"btn btn-light-green btn-rounded",attrs:{type:"button"},on:{click:t.fetchChart1Data}},[t._v("查詢")]),t._v(" "),r("button",{staticClass:"btn btn-default btn-rounded",attrs:{type:"button",disabled:!t.chart.chart1},on:{click:function(e){return t.exportChart("chart1")}}},[t._v("匯出")])])])]),t._v(" "),r("div",{staticClass:"row",staticStyle:{margin:"10px"}},[r("div",{staticClass:"col-md-offset-1 col-md-10 relative"},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.color,expression:"color"}],ref:"color_picker_chart1",staticClass:"color-picker",attrs:{type:"color"},domProps:{value:t.color},on:{change:t.onColorPickerChange,input:function(e){e.target.composing||(t.color=e.target.value)}}}),t._v(" "),r("canvas",{attrs:{id:"chart1"}}),t._v(" "),t.chart.chart1?r("button",{staticClass:"btn btn-default btn-rounded btn-reset-chart-scale",attrs:{type:"button"},on:{click:t.fetchChart1Data}},[t._v("取消縮放")]):t._e()])])])])])]),t._v(" "),r("div",{staticClass:"row"},[r("div",{staticClass:"col-md-12"},[r("div",{staticClass:"box box-default"},[t._m(3),t._v(" "),r("div",{staticClass:"box-body"},[r("div",{staticClass:"row"},[r("div",{staticClass:"col-md-offset-1 col-md-10"},[r("label",{staticClass:"col-lg-2 text-right",attrs:{for:"startDateForChart2"}},[t._v("起始日期  ")]),t._v(" "),r("div",{staticClass:"col-lg-4"},[r("datetimepicker",{staticStyle:{width:"100%"},attrs:{"datetime-input-id":"startDateForChart2",type:"date",format:"yyyy-MM-dd","input-class":"form-control","picker-class":"theme-light-green",placeholder:"請選擇","max-datetime":t.today},model:{value:t.form.chart2.start_date,callback:function(e){t.$set(t.form.chart2,"start_date",e)},expression:"form.chart2.start_date"}})],1),t._v(" "),r("label",{staticClass:"col-lg-2 text-right",attrs:{for:"endDateForChart2"}},[t._v("結束日期  ")]),t._v(" "),r("div",{staticClass:"col-lg-4"},[r("datetimepicker",{staticStyle:{width:"100%"},attrs:{"datetime-input-id":"endDateForChart2",type:"date",format:"yyyy-MM-dd","input-class":"form-control","picker-class":"theme-light-green",placeholder:"請選擇","max-datetime":t.today},model:{value:t.form.chart2.end_date,callback:function(e){t.$set(t.form.chart2,"end_date",e)},expression:"form.chart2.end_date"}})],1)]),t._v(" "),r("div",{staticClass:"col-md-1"}),t._v(" "),r("div",{staticClass:"col-md-offset-1 col-md-10"},[r("div",{staticClass:"col-lg-2"}),t._v(" "),r("div",{staticClass:"col-lg-4"},[t.isStartDateLaterEndDateForChart2?r("span",{staticClass:"red"},[t._v("起始日期不得晚於結束日期。")]):t.isOverSeasonForChart2?r("span",{staticClass:"red"},[t._v("日期範圍超過一季，請重新選擇。")]):t._e()])])]),t._v(" "),r("div",{staticClass:"row",staticStyle:{"margin-top":"10px"}},[r("div",{staticClass:"col-md-offset-1 col-md-10"},[t._m(4),t._v(" "),r("div",{staticClass:"col-lg-4"},[r("select",{directives:[{name:"model",rawName:"v-model",value:t.organismTypeChart2,expression:"organismTypeChart2"}],staticClass:"form-control organism-type-select",on:{change:[function(e){var r=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.organismTypeChart2=e.target.multiple?r:r[0]},function(e){t.form.chart2.organism_kinds=[]}]}},t._l(t.organismTypes,(function(e){return r("option",{domProps:{value:e.id}},[t._v(t._s(e.name))])})),0),t._v(" "),r("micro-organism-kind-list-select",{staticClass:"micro-organism-select",attrs:{id:"chart2OrganismKinds","select-class":"form-control",items:t.organismKindsForChart2},model:{value:t.form.chart2.organism_kinds[0],callback:function(e){t.$set(t.form.chart2.organism_kinds,0,e)},expression:"form.chart2.organism_kinds[0]"}}),t._v(" "),r("span",{directives:[{name:"show",rawName:"v-show",value:t.showRequireChart2OrganismKinds,expression:"showRequireChart2OrganismKinds"}],staticClass:"red"},[t._v("請選擇微生物類別")])],1),t._v(" "),t._m(5),t._v(" "),r("div",{staticClass:"col-lg-4"},[r("div",{staticClass:"select-block"},[r("room-environment-select",{attrs:{id:"chart2RoomName","select-class":"form-control",placeholder:"請選擇",multiple:!0,"room-environments":t.roomEnvironments},on:{"update:roomEnvironments":function(e){t.roomEnvironments=e},"update:room-environments":function(e){t.roomEnvironments=e}},model:{value:t.form.chart2.room_names,callback:function(e){t.$set(t.form.chart2,"room_names",e)},expression:"form.chart2.room_names"}})],1),t._v(" "),r("button",{staticClass:"btn btn-light-green op-btn vertical-middle",attrs:{type:"button"},on:{click:function(e){return t.selectAllRoomName("chart2")}}},[t._v("全選")]),t._v(" "),r("span",{directives:[{name:"show",rawName:"v-show",value:t.showRequireChart2RoomName,expression:"showRequireChart2RoomName"}],staticClass:"red"},[t._v("請至少選擇一個房間名稱")])])])]),t._v(" "),r("div",{staticClass:"row",staticStyle:{"margin-top":"20px"}},[r("div",{staticClass:"col-md-offset-1 col-md-10"},[r("div",{staticClass:"col-lg-12 text-center"},[r("button",{staticClass:"btn btn-light-green btn-rounded",attrs:{type:"button"},on:{click:t.fetchChart2Data}},[t._v("查詢")]),t._v(" "),r("button",{staticClass:"btn btn-default btn-rounded",attrs:{type:"button",disabled:!t.chart.chart2},on:{click:function(e){return t.exportChart("chart2")}}},[t._v("匯出")])])])]),t._v(" "),r("div",{staticClass:"row",staticStyle:{margin:"10px"}},[r("div",{staticClass:"col-md-offset-1 col-md-10 relative"},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.color,expression:"color"}],ref:"color_picker_chart2",staticClass:"color-picker",attrs:{type:"color"},domProps:{value:t.color},on:{change:t.onColorPickerChange,input:function(e){e.target.composing||(t.color=e.target.value)}}}),t._v(" "),r("canvas",{attrs:{id:"chart2"}}),t._v(" "),t.chart.chart2?r("button",{staticClass:"btn btn-default btn-rounded btn-reset-chart-scale",attrs:{type:"button"},on:{click:t.fetchChart2Data}},[t._v("取消縮放")]):t._e()])])])])])])])])}),[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"box-header with-border"},[r("h3",{staticClass:"box-title"},[t._v("檢測位置和微生物類別之比較表")])])},function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("label",{staticClass:"col-lg-2 text-right",attrs:{for:"chart1RoomName"}},[t._v("房間名稱"),r("span",{staticClass:"red"},[t._v("*")])])},function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("label",{staticClass:"col-lg-2 text-right",attrs:{for:"chart1OrganismKinds"}},[t._v("微生物類別"),r("span",{staticClass:"red"},[t._v("*")])])},function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"box-header with-border"},[r("h3",{staticClass:"box-title"},[t._v("資訊數據分析表")])])},function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("label",{staticClass:"col-lg-2 text-right",attrs:{for:"chart2OrganismKinds"}},[t._v("微生物類別"),r("span",{staticClass:"red"},[t._v("*")])])},function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("label",{staticClass:"col-lg-2 text-right",attrs:{for:"chart2RoomName"}},[t._v("房間名稱"),r("span",{staticClass:"red"},[t._v("*")])])}],!1,null,"046380bf",null).exports},3799:(t,e,r)=>{"use strict";r.d(e,{Z:()=>E});var n=r(9038),o=r(9669),i=r.n(o);function a(t){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a(t)}function s(){s=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",c=n.toStringTag||"@@toStringTag";function l(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,r){return t[e]=r}}function u(t,e,r,n){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new L(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return E()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var s=w(a,r);if(s){if(s===h)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=d(t,e,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===h)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}(t,r,a),i}function d(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var h={};function f(){}function p(){}function m(){}var v={};l(v,o,(function(){return this}));var g=Object.getPrototypeOf,y=g&&g(g(S([])));y&&y!==e&&r.call(y,o)&&(v=y);var _=m.prototype=f.prototype=Object.create(v);function b(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function x(t,e){function n(o,i,s,c){var l=d(t[o],t,i);if("throw"!==l.type){var u=l.arg,h=u.value;return h&&"object"==a(h)&&r.call(h,"__await")?e.resolve(h.__await).then((function(t){n("next",t,s,c)}),(function(t){n("throw",t,s,c)})):e.resolve(h).then((function(t){u.value=t,s(u)}),(function(t){return n("throw",t,s,c)}))}c(l.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return h;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return h}var n=d(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,h;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,h):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,h)}function C(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function k(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function L(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(C,this),this.reset(!0)}function S(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:E}}function E(){return{value:void 0,done:!0}}return p.prototype=m,l(_,"constructor",m),l(m,"constructor",p),p.displayName=l(m,c,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,m):(t.__proto__=m,l(t,c,"GeneratorFunction")),t.prototype=Object.create(_),t},t.awrap=function(t){return{__await:t}},b(x.prototype),l(x.prototype,i,(function(){return this})),t.AsyncIterator=x,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new x(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},b(_),l(_,c,"Generator"),l(_,o,(function(){return this})),l(_,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=S,L.prototype={constructor:L,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(k),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=r.call(i,"catchLoc"),c=r.call(i,"finallyLoc");if(s&&c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,h):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),k(r),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;k(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:S(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),h}},t}function c(t,e,r,n,o,i,a){try{var s=t[i](a),c=s.value}catch(t){return void r(t)}s.done?e(c):Promise.resolve(c).then(n,o)}function l(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){c(i,n,o,a,s,"next",t)}function s(t){c(i,n,o,a,s,"throw",t)}a(void 0)}))}}const u={name:"DeviceModal",$_veeValidate:{validator:"new"},components:{ClipLoader:n.Z},props:{value:{type:Boolean,default:!1},dataId:Number},watch:{value:function(t){this.showModal=t},allowInputColumn:function(t){switch(t){case"ip":this.form.ap=null;break;case"ap":this.form.ip=null}}},data:function(){return{loading:!0,sending:!1,showModal:this.value,form:{},formErrors:[],nameDuplicate:!1,allowInputColumn:"ip"}},created:function(){this.resetForm()},methods:{fetchData:function(){var t=this;return l(s().mark((function e(){var r,n;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,i().get("/api/devices/".concat(t.dataId));case 3:0==(r=(r=e.sent).data).status&&(n=r.data,t.form=n.device),e.next=12;break;case 8:return e.prev=8,e.t0=e.catch(0),e.next=12,t.guestRedirectHome(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,8]])})))()},onShowModal:function(){var t=this;return l(s().mark((function e(){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.resetForm(),!t.dataId){e.next=5;break}return t.loading=!0,e.next=5,t.fetchData();case 5:t.loading=!1;case 6:case"end":return e.stop()}}),e)})))()},onHideModal:function(){this.formErrors=[],this.resetForm(),this.$emit("input",!1)},submit:function(){var t=this;return l(s().mark((function e(){var r,n,o;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.validate();case 2:if(e.sent){e.next=5;break}return e.abrupt("return");case 5:if(e.prev=5,t.sending=!0,r=null,t.dataId){e.next=14;break}return e.next=11,i().post("/api/devices",t.form);case 11:r=e.sent,e.next=17;break;case 14:return e.next=16,i().patch("/api/devices/".concat(t.dataId),t.form);case 16:r=e.sent;case 17:0==(r=r.data).status?(n=r.data,t.form=n.device,t.$toast.success({title:"成功訊息",message:"".concat(t.dataId?"更新":"創建","成功")}),t.$emit("update",t.form),t.showModal=!1,t.formErrors=[]):-7==r.status&&(o=r.data,t.formErrors=o.errors,t.scrollTo(Object.keys(t.formErrors)[0])),e.next=25;break;case 21:return e.prev=21,e.t0=e.catch(5),e.next=25,t.guestRedirectHome(e.t0);case 25:return e.prev=25,t.sending=!1,e.finish(25);case 28:case"end":return e.stop()}}),e,null,[[5,21,25,28]])})))()},resetForm:function(){this.form={name:null,ip:null,ap:null,mir_status:{initial_petri_count:0}},this.nameDuplicate=!1,this.resetFormValidate()}}};var d=r(1900);const h=(0,d.Z)(u,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("modal",{attrs:{footer:!1,backdrop:!1,"append-to-body":!0,keyboard:!1},on:{show:t.onShowModal,hide:t.onHideModal},model:{value:t.showModal,callback:function(e){t.showModal=e},expression:"showModal"}},[r("div",{attrs:{slot:"title"},slot:"title"},[t._v(t._s(t.dataId?"更新連接":"創建連接"))]),t._v(" "),r("div",{attrs:{slot:"default"},slot:"default"},[t.loading?r("clip-loader",{staticClass:"loading",attrs:{color:"gray",size:"30px"}}):r("form",{staticClass:"form-horizontal",attrs:{novalidate:""},on:{submit:function(e){return e.preventDefault(),t.submit.apply(null,arguments)}}},[r("div",{staticClass:"form-group"},[r("label",{staticClass:"col-md-4 control-label"},[t._v("名稱"),r("span",{staticClass:"is-danger"},[t._v(" *")])]),t._v(" "),r("div",{staticClass:"col-md-8"},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.form.name,expression:"form.name"},{name:"validate",rawName:"v-validate",value:"required|max:100",expression:"'required|max:100'"}],staticClass:"form-control",attrs:{name:"name",placeholder:"請輸入名稱"},domProps:{value:t.form.name},on:{input:function(e){e.target.composing||t.$set(t.form,"name",e.target.value)}}}),t._v(" "),r("span",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("name:required"),expression:"errors.has('name:required')"}],staticClass:"help is-danger"},[t._v("請輸入名稱")]),t._v(" "),r("span",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("name:max"),expression:"errors.has('name:max')"}],staticClass:"help is-danger"},[t._v("長度不得超過100字元")]),t._v(" "),t.formErrors.name?r("span",{staticClass:"help is-danger"},[t._v(t._s(t.formErrors.name[0]))]):t._e()])]),t._v(" "),r("div",{staticClass:"form-group"},[r("label",{staticClass:"col-md-4 control-label"},[t._v("IP連線"),r("span",{staticClass:"is-danger"},[t._v(" *")])]),t._v(" "),r("div",{staticClass:"col-md-8"},[r("div",{staticClass:"input-group"},[r("span",{staticClass:"input-group-addon"},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.allowInputColumn,expression:"allowInputColumn"}],attrs:{type:"radio",value:"ip"},domProps:{checked:t._q(t.allowInputColumn,"ip")},on:{change:function(e){t.allowInputColumn="ip"}}})]),t._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:t.form.ip,expression:"form.ip"},{name:"validate",rawName:"v-validate",value:{regex:/(?:(?:2(?:[0-4][0-9]|5[0-5])|[0-1]?[0-9]?[0-9])\.){3}(?:(?:2([0-4][0-9]|5[0-5])|[0-1]?[0-9]?[0-9]))(\/([0-9]|[12][0-9]|3[0-2]))?$/},expression:"{regex: /(?:(?:2(?:[0-4][0-9]|5[0-5])|[0-1]?[0-9]?[0-9])\\.){3}(?:(?:2([0-4][0-9]|5[0-5])|[0-1]?[0-9]?[0-9]))(\\/([0-9]|[12][0-9]|3[0-2]))?$/}"}],staticClass:"form-control",attrs:{name:"ip",placeholder:"請輸入IP連線",disabled:"ip"!=t.allowInputColumn},domProps:{value:t.form.ip},on:{input:function(e){e.target.composing||t.$set(t.form,"ip",e.target.value)}}})]),t._v(" "),r("span",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("ip:regex"),expression:"errors.has('ip:regex')"}],staticClass:"help is-danger"},[t._v("請輸入有效的IP連線")]),t._v(" "),t.formErrors.ip?r("span",{staticClass:"help is-danger"},[t._v(t._s(t.formErrors.ip[0]))]):t._e()])]),t._v(" "),r("div",{staticClass:"form-group"},[r("label",{staticClass:"col-md-4 control-label"},[t._v("AP連線"),r("span",{staticClass:"is-danger"},[t._v(" *")])]),t._v(" "),r("div",{staticClass:"col-md-8"},[r("div",{staticClass:"input-group"},[r("span",{staticClass:"input-group-addon"},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.allowInputColumn,expression:"allowInputColumn"}],attrs:{type:"radio",value:"ap"},domProps:{checked:t._q(t.allowInputColumn,"ap")},on:{change:function(e){t.allowInputColumn="ap"}}})]),t._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:t.form.ap,expression:"form.ap"}],staticClass:"form-control",attrs:{name:"ap",placeholder:"請輸入AP連線",disabled:"ap"!=t.allowInputColumn},domProps:{value:t.form.ap},on:{input:function(e){e.target.composing||t.$set(t.form,"ap",e.target.value)}}})]),t._v(" "),t.formErrors.ap?r("span",{staticClass:"help is-danger"},[t._v(t._s(t.formErrors.ap[0]))]):t._e()])]),t._v(" "),r("div",{staticClass:"form-group"},[r("label",{staticClass:"col-md-4 control-label"},[t._v("暫存區培養皿數量"),r("span",{staticClass:"is-danger"},[t._v("  ")])]),t._v(" "),r("div",{staticClass:"col-md-8"},[r("input",{directives:[{name:"model",rawName:"v-model.number",value:t.form.mir_status.initial_petri_count,expression:"form.mir_status.initial_petri_count",modifiers:{number:!0}},{name:"validate",rawName:"v-validate",value:"regex:^[1-9]\\d*$",expression:"'regex:^[1-9]\\\\d*$'"}],staticClass:"form-control",attrs:{type:"number",min:0,name:"mirStatusInitialPetriCount",placeholder:"請輸入暫存區培養皿數量"},domProps:{value:t.form.mir_status.initial_petri_count},on:{input:function(e){e.target.composing||t.$set(t.form.mir_status,"initial_petri_count",t._n(e.target.value))},blur:function(e){return t.$forceUpdate()}}}),t._v(" "),t.errors.has("mirStatusInitialPetriCount:regex")?r("span",{staticClass:"help is-danger"},[t._v("請輸入正整數")]):t.formErrors["mir_status.initial_petri_count"]?r("span",{staticClass:"help is-danger"},[t._v(t._s(t.formErrors["mir_status.initial_petri_count"][0]))]):t._e()])]),t._v(" "),r("div",{staticClass:"text-right"},[r("button",{staticClass:"btn btn-light-green",attrs:{disabled:t.sending}},[t._v("送出")]),t._v(" "),r("button",{staticClass:"btn btn-default",attrs:{type:"button"},on:{click:function(e){t.showModal=!1}}},[t._v("取消")])])])],1)])}),[],!1,null,"d622c750",null).exports;var f=r(6486),p=r.n(f),m=r(629);function v(t){return v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},v(t)}function g(){g=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function c(t,e,r,n){var o=e&&e.prototype instanceof d?e:d,i=Object.create(o.prototype),a=new L(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return E()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var s=w(a,r);if(s){if(s===u)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=l(t,e,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===u)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}(t,r,a),i}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var u={};function d(){}function h(){}function f(){}var p={};s(p,o,(function(){return this}));var m=Object.getPrototypeOf,y=m&&m(m(S([])));y&&y!==e&&r.call(y,o)&&(p=y);var _=f.prototype=d.prototype=Object.create(p);function b(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function x(t,e){function n(o,i,a,s){var c=l(t[o],t,i);if("throw"!==c.type){var u=c.arg,d=u.value;return d&&"object"==v(d)&&r.call(d,"__await")?e.resolve(d.__await).then((function(t){n("next",t,a,s)}),(function(t){n("throw",t,a,s)})):e.resolve(d).then((function(t){u.value=t,a(u)}),(function(t){return n("throw",t,a,s)}))}s(c.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return u;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var n=l(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,u;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,u):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,u)}function C(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function k(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function L(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(C,this),this.reset(!0)}function S(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:E}}function E(){return{value:void 0,done:!0}}return h.prototype=f,s(_,"constructor",f),s(f,"constructor",h),h.displayName=s(f,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===h||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,f):(t.__proto__=f,s(t,a,"GeneratorFunction")),t.prototype=Object.create(_),t},t.awrap=function(t){return{__await:t}},b(x.prototype),s(x.prototype,i,(function(){return this})),t.AsyncIterator=x,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new x(c(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},b(_),s(_,a,"Generator"),s(_,o,(function(){return this})),s(_,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=S,L.prototype={constructor:L,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(k),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=r.call(i,"catchLoc"),c=r.call(i,"finallyLoc");if(s&&c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,u):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),u},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),k(r),u}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;k(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:S(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),u}},t}function y(t,e,r,n,o,i,a){try{var s=t[i](a),c=s.value}catch(t){return void r(t)}s.done?e(c):Promise.resolve(c).then(n,o)}function _(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){y(i,n,o,a,s,"next",t)}function s(t){y(i,n,o,a,s,"throw",t)}a(void 0)}))}}function b(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function x(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}const w={name:"DeviceListPage",components:{DeviceModal:h,ClipLoader:n.Z},computed:function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?b(Object(r),!0).forEach((function(e){x(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):b(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({},(0,m.Se)({device:"device/device"})),watch:{device:function(t){this.fetchData()}},data:function(){return{loading:!0,sending:!1,devices:[],modal:{id:null,show:!1}}},created:function(){this.fetchData()},methods:{fetchData:function(){var t=this;return _(g().mark((function e(){var r,n;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.loading=!0,e.prev=1,e.next=4,i().get("/api/devices");case 4:0==(r=(r=e.sent).data).status&&(n=r.data,t.devices=n.devices,n.pagination&&(t.pagination=n.pagination)),e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(1),e.next=13,t.guestRedirectHome(e.t0);case 13:t.loading=!1;case 14:case"end":return e.stop()}}),e,null,[[1,9]])})))()},showModal:function(t){this.modal.id=t,this.modal.show=!0},resetRow:function(t){var e=p().findIndex(this.devices,(function(e){return e.id==t.id}));-1!=e?this.devices.splice(e,1,t):this.devices.unshift(t)},updateIsConnected:function(t,e){var r=this;return _(g().mark((function n(){var o,a,s,c;return g().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r.sending=!0,n.prev=1,n.next=4,i().patch("/api/devices/".concat(t,"/is-connected"),{is_connected:e});case 4:if(0!=(o=(o=n.sent).data).status){n.next=14;break}return a=o.data,s=a.device,-1!=(c=p().findIndex(r.devices,["id",s.id]))&&r.devices.splice(c,1,s),n.next=13,r.syncUser();case 13:s.is_connected==e?r.$toast.success({title:"成功訊息",message:"".concat(e?"已連接":"已斷開連接")}):r.$toast.error({title:"錯誤訊息",message:"MIR車輛未開機，請稍後再試！"});case 14:n.next=20;break;case 16:return n.prev=16,n.t0=n.catch(1),n.next=20,r.guestRedirectHome(n.t0);case 20:r.sending=!1;case 21:case"end":return n.stop()}}),n,null,[[1,16]])})))()}}};var C=r(3379),k=r.n(C),L=r(4512),S={insert:"head",singleton:!1};k()(L.Z,S);L.Z.locals;const E=(0,d.Z)(w,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[t._m(0),t._v(" "),r("section",{staticClass:"content"},[r("div",{staticClass:"box box-top"},[r("div",{staticClass:"box-body"},[t.loading?r("clip-loader",{staticClass:"loading",attrs:{color:"gray",size:"30px"}}):r("div",{staticClass:"device-block"},[t.devices.length>0&&t.devices[0]?[r("div",[r("div",{staticClass:"status-grid"},[r("i",{staticClass:"fa fa-wifi",class:{green:t.devices[0].is_connected}})]),t._v(" "),r("div",{staticClass:"status-grid"},[t.devices[0].is_connected?[r("span",{staticClass:"green"},[t._v("當前已連接")])]:t.devices[0].connected_at?[t._v("上次連接")]:[t._v("未曾連接")]],2),t._v(" "),r("div",{staticClass:"status-grid"},[t.devices[0].connected_at?[t._v(t._s(t._f("datetime")(t.devices[0].connected_at)))]:t._e()],2)]),t._v(" "),r("div",{staticClass:"device-info-block"},[r("h3",{staticClass:"device-name"},[t._v(t._s(t.devices[0].name))]),t._v(" "),r("div",{staticClass:"device-info"},[r("i",{staticClass:"fa fa-cog green"}),t._v("\n                                IP連線\n                                "),r("div",{staticClass:"device-info-right"},[t._v(t._s(t.devices[0].ip?t.devices[0].ip:"不可用"))])]),t._v(" "),r("div",{staticClass:"device-info"},[r("i",{staticClass:"fa fa-cog green"}),t._v("\n                                AP連線\n                                "),r("div",{staticClass:"device-info-right"},[t._v(t._s(t.devices[0].ap?t.devices[0].ap:"不可用"))])]),t._v(" "),r("div",{staticClass:"device-info"},[r("i",{staticClass:"fa fa-cog green"}),t._v("\n                                暫存區培養皿數量\n                                "),r("div",{staticClass:"device-info-right"},[t._v(t._s(t.devices[0].mir_status&&t.devices[0].mir_status.initial_petri_count?t.devices[0].mir_status.initial_petri_count:"未知"))])])]),t._v(" "),r("div",{staticClass:"device-button-bar"},[t.devices[0].is_connected?r("button",{staticClass:"btn btn-danger",attrs:{type:"button",disabled:t.sending},on:{click:function(e){return t.updateIsConnected(t.devices[0].id,0)}}},[r("i",{staticClass:"fa fa-chain-broken"}),t._v("\n                                斷開連接\n                            ")]):r("button",{staticClass:"btn btn-success",attrs:{type:"button",disabled:t.sending},on:{click:function(e){return t.updateIsConnected(t.devices[0].id,1)}}},[r("i",{staticClass:"fa fa-wifi"}),t._v("\n                                連接\n                            ")]),t._v(" "),r("button",{staticClass:"btn btn-success",attrs:{type:"button",disabled:t.sending},on:{click:function(e){return t.showModal(t.devices[0].id)}}},[r("i",{staticClass:"fa fa-pencil"}),t._v("\n                                編輯\n                            ")])])]:t._e()],2)],1)])]),t._v(" "),r("device-modal",{attrs:{"data-id":t.modal.id},on:{update:t.resetRow},model:{value:t.modal.show,callback:function(e){t.$set(t.modal,"show",e)},expression:"modal.show"}})],1)}),[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("section",{staticClass:"content-header clearfix"},[r("span",[t._v("AP連線 / IP連線 ")])])}],!1,null,"77134fd4",null).exports},1453:(t,e,r)=>{"use strict";r.d(e,{Z:()=>O});var n=r(6486),o=r.n(n),i=r(9669),a=r.n(i),s=r(9038),c=r(130),l=r(9014),u=r(7446);function d(t){return d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},d(t)}function h(){h=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function c(t,e,r,n){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new L(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return E()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var s=w(a,r);if(s){if(s===u)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=l(t,e,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===u)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}(t,r,a),i}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var u={};function f(){}function p(){}function m(){}var v={};s(v,o,(function(){return this}));var g=Object.getPrototypeOf,y=g&&g(g(S([])));y&&y!==e&&r.call(y,o)&&(v=y);var _=m.prototype=f.prototype=Object.create(v);function b(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function x(t,e){function n(o,i,a,s){var c=l(t[o],t,i);if("throw"!==c.type){var u=c.arg,h=u.value;return h&&"object"==d(h)&&r.call(h,"__await")?e.resolve(h.__await).then((function(t){n("next",t,a,s)}),(function(t){n("throw",t,a,s)})):e.resolve(h).then((function(t){u.value=t,a(u)}),(function(t){return n("throw",t,a,s)}))}s(c.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return u;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var n=l(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,u;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,u):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,u)}function C(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function k(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function L(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(C,this),this.reset(!0)}function S(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:E}}function E(){return{value:void 0,done:!0}}return p.prototype=m,s(_,"constructor",m),s(m,"constructor",p),p.displayName=s(m,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,m):(t.__proto__=m,s(t,a,"GeneratorFunction")),t.prototype=Object.create(_),t},t.awrap=function(t){return{__await:t}},b(x.prototype),s(x.prototype,i,(function(){return this})),t.AsyncIterator=x,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new x(c(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},b(_),s(_,a,"Generator"),s(_,o,(function(){return this})),s(_,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=S,L.prototype={constructor:L,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(k),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=r.call(i,"catchLoc"),c=r.call(i,"finallyLoc");if(s&&c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,u):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),u},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),k(r),u}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;k(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:S(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),u}},t}function f(t,e,r,n,o,i,a){try{var s=t[i](a),c=s.value}catch(t){return void r(t)}s.done?e(c):Promise.resolve(c).then(n,o)}function p(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){f(i,n,o,a,s,"next",t)}function s(t){f(i,n,o,a,s,"throw",t)}a(void 0)}))}}const m={name:"ElevatorMgmtModal",$_veeValidate:{validator:"new"},components:{VertexListSelect:r(2059).Z,ClipLoader:s.Z,VehicleMgmtListSelect:u.Z,RegionMgmtListSelect:l.Z,ProjectListSelect:c.Z},props:{value:{type:Boolean,default:!1},eid:{type:String,default:null}},watch:{value:function(t){this.showModal=t},preferVehicleIds:function(t){var e="";o().forEach(t,(function(t){e+=t.vehicle_id+","})),e=e.slice(0,e.length-1),this.form.prefer_vehicle=e}},data:function(){return{loading:!0,sending:!1,showModal:this.value,form:{},idDuplicate:!1,locationDuplicate:!1,preferVehicleIds:[],vertexNameDuplicate:!1,projectId:null}},created:function(){this.resetForm()},methods:{onShowModal:function(){var t=this;return p(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.resetForm(),!t.eid){e.next=5;break}return t.loading=!0,e.next=5,t.fetchData();case 5:t.loading=!1;case 6:case"end":return e.stop()}}),e)})))()},onHideModal:function(){this.resetForm(),this.$emit("input",!1)},fetchData:function(){var t=this;return p(h().mark((function e(){var r,n,i,s;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,a().get("/api/elevatorMgmts/".concat(t.eid));case 3:0==(r=(r=e.sent).data).status&&(n=r.data,(i=n.elevatorMgmt).vertex||(i.vertex={region_mgmt_id:null}),t.form=i,n.elevatorMgmt.prefer_vehicle&&(s=n.elevatorMgmt.prefer_vehicle.split(","),s=o().map(s,(function(t){return{vehicle_id:t}})),t.preferVehicleIds=s)),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),t.guestRedirectHome(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))()},submit:function(){var t=this;return p(h().mark((function e(){var r,n,o;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.validate();case 3:if(e.sent){e.next=6;break}return e.abrupt("return");case 6:if(t.form.vertex.region_mgmt_id||(t.form.location=null),t.sending=!0,r=null,!t.eid){e.next=15;break}return e.next=12,a().patch("/api/elevatorMgmts/".concat(t.eid),t.form);case 12:r=e.sent,e.next=18;break;case 15:return e.next=17,a().post("/api/elevatorMgmts",t.form);case 17:r=e.sent;case 18:0==(r=r.data).status?(n=r.data,(o=n.elevatorMgmt).vertex||(o.vertex={region_mgmt_id:null}),t.form=o,t.$toast.success({title:"成功訊息",message:"".concat(t.eid?"更新":"新增","成功")}),t.$emit("update",t.form),t.showModal=!1):-7==r.status?(t.idDuplicate=!0,t.locationDuplicate=!1,t.scrollTo("id")):-9==r.status&&(t.vertexNameDuplicate=!0,t.scrollTo("vertex_id")),e.next=25;break;case 22:e.prev=22,e.t0=e.catch(0),t.guestRedirectHome(e.t0);case 25:t.sending=!1;case 26:case"end":return e.stop()}}),e,null,[[0,22]])})))()},resetForm:function(){this.form={id:null,location:null,prefer_vehicle:null,vertex:{region_mgmt_id:null}},this.preferVehicleIds=[],this.idDuplicate=!1,this.locationDuplicate=!1,this.projectId=null,this.vertexNameDuplicate=!1,this.resetFormValidate()}}};var v=r(3379),g=r.n(v),y=r(5904),_={insert:"head",singleton:!1};g()(y.Z,_);y.Z.locals;var b=r(1900);const x=(0,b.Z)(m,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("modal",{attrs:{footer:!1,backdrop:!1,"append-to-body":!0,keyboard:!1},on:{show:t.onShowModal,hide:t.onHideModal},model:{value:t.showModal,callback:function(e){t.showModal=e},expression:"showModal"}},[r("div",{attrs:{slot:"title"},slot:"title"},[t._v(t._s(t.eid?"更新電梯點":"創建電梯點"))]),t._v(" "),r("div",{attrs:{slot:"default"},slot:"default"},[t.loading?t._e():r("form",{staticClass:"form-horizontal",attrs:{novalidate:""},on:{submit:function(e){return e.preventDefault(),t.submit.apply(null,arguments)}}},[r("div",{staticClass:"form-group"},[r("label",{staticClass:"col-md-3 control-label"},[t._v("電梯點編號"),r("span",{staticClass:"is-danger"},[t._v(" *")])]),t._v(" "),r("div",{staticClass:"col-md-9"},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.form.id,expression:"form.id"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"form-control",attrs:{name:"id",placeholder:"請填寫電梯點編號",disabled:t.eid},domProps:{value:t.form.id},on:{input:function(e){e.target.composing||t.$set(t.form,"id",e.target.value)}}}),t._v(" "),r("span",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("id:required"),expression:"errors.has('id:required')"}],staticClass:"help is-danger"},[t._v("請填寫電梯點編號")]),t._v(" "),r("span",{directives:[{name:"show",rawName:"v-show",value:t.idDuplicate,expression:"idDuplicate"}],staticClass:"help is-danger"},[t._v("該電梯點編號已存在！")])])]),t._v(" "),r("div",{staticClass:"form-group"},[r("label",{staticClass:"col-md-3 control-label"},[t._v("專案   ")]),t._v(" "),r("div",{staticClass:"col-md-9"},[r("project-list-select",{attrs:{"select-class":"form-control select-only-read",defaultText:"請選擇","is-deploy":1,disabled:!0},model:{value:t.projectId,callback:function(e){t.projectId=e},expression:"projectId"}})],1)]),t._v(" "),r("div",{staticClass:"form-group"},[r("label",{staticClass:"col-md-3 control-label"},[t._v("區域   ")]),t._v(" "),r("div",{staticClass:"col-md-9"},[r("region-mgmt-list-select",{attrs:{name:"region_mgmt_id","single-select2":!0,"min-num-for-search":5,disabled:!t.projectId,"project-id":t.projectId},on:{"update:projectId":function(e){t.projectId=e},"update:project-id":function(e){t.projectId=e}},model:{value:t.form.vertex.region_mgmt_id,callback:function(e){t.$set(t.form.vertex,"region_mgmt_id",e)},expression:"form.vertex.region_mgmt_id"}})],1)]),t._v(" "),r("div",{staticClass:"form-group"},[r("label",{staticClass:"col-md-3 control-label"},[t._v("站點名稱"),r("span",{staticClass:"is-danger"},[t._v(" *")])]),t._v(" "),r("div",{staticClass:"col-md-9"},[r("vertex-list-select",{directives:[{name:"validate",rawName:"v-validate",value:{required:!0,vertex_deploy:!(!t.form.vertex||!t.form.vertex.id)&&t.form.vertex},expression:"{\n                                                required: true,\n                                                vertex_deploy: form.vertex && form.vertex.id ? form.vertex : false\n                                            }"}],attrs:{name:"vertex_id","region-mgmt-id":t.form.vertex.region_mgmt_id,"vertex-name":t.form.vertex_name,"allow-clear":!0,"is-deploy":1,disabled:!t.form.vertex.region_mgmt_id},on:{"update:vertexName":function(e){return t.$set(t.form,"vertex_name",e)},"update:vertex-name":function(e){return t.$set(t.form,"vertex_name",e)}},model:{value:t.form.vertex_id,callback:function(e){t.$set(t.form,"vertex_id",e)},expression:"form.vertex_id"}}),t._v(" "),t.errors.has("vertex_id:required")?r("span",{staticClass:"help is-danger"},[t._v(t._s(t.form.vertex&&t.form.vertex.region_mgmt_id?"請選擇站點名稱":"請先選擇區域，再選擇站點名稱"))]):t.errors.has("vertex_id:vertex_deploy")?r("span",{staticClass:"help is-danger"},[t._v("該站點尚未被燒入")]):t.vertexNameDuplicate?r("span",{staticClass:"help is-danger"},[t._v("此站點名稱已綁定於其他電梯點！")]):t._e()],1)]),t._v(" "),r("div",{staticClass:"form-group"},[r("label",{staticClass:"col-md-3 control-label"},[t._v("特定車輛"),r("span",{staticClass:"is-danger"},[t._v(" *")])]),t._v(" "),r("div",{staticClass:"col-md-9"},[r("vehicle-mgmt-list-select",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{placeholder:"請選擇特定車輛",name:"preferVehicleIds","region-mgmt-id":t.form.vertex.region_mgmt_id,multiple:!0},model:{value:t.preferVehicleIds,callback:function(e){t.preferVehicleIds=e},expression:"preferVehicleIds"}}),t._v(" "),r("span",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("preferVehicleIds:required"),expression:"errors.has('preferVehicleIds:required')"}],staticClass:"help is-danger"},[t._v("請選擇特定車輛")])],1)]),t._v(" "),r("div",{staticClass:"text-right"},[r("button",{staticClass:"btn btn-light-green",attrs:{disabled:t.sending}},[t._v("送出")]),t._v(" "),r("button",{staticClass:"btn btn-default",attrs:{type:"button"},on:{click:function(e){t.showModal=!1}}},[t._v("取消")])])]),t._v(" "),t.loading?r("clip-loader",{staticClass:"loading",attrs:{color:"gray",size:"30px"}}):t._e()],1)])}),[],!1,null,"7e12537e",null).exports;function w(t){return w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},w(t)}function C(){C=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function c(t,e,r,n){var o=e&&e.prototype instanceof d?e:d,i=Object.create(o.prototype),a=new L(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return E()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var s=b(a,r);if(s){if(s===u)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=l(t,e,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===u)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}(t,r,a),i}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var u={};function d(){}function h(){}function f(){}var p={};s(p,o,(function(){return this}));var m=Object.getPrototypeOf,v=m&&m(m(S([])));v&&v!==e&&r.call(v,o)&&(p=v);var g=f.prototype=d.prototype=Object.create(p);function y(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function _(t,e){function n(o,i,a,s){var c=l(t[o],t,i);if("throw"!==c.type){var u=c.arg,d=u.value;return d&&"object"==w(d)&&r.call(d,"__await")?e.resolve(d.__await).then((function(t){n("next",t,a,s)}),(function(t){n("throw",t,a,s)})):e.resolve(d).then((function(t){u.value=t,a(u)}),(function(t){return n("throw",t,a,s)}))}s(c.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function b(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,b(t,e),"throw"===e.method))return u;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var n=l(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,u;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,u):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,u)}function x(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function k(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function L(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(x,this),this.reset(!0)}function S(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:E}}function E(){return{value:void 0,done:!0}}return h.prototype=f,s(g,"constructor",f),s(f,"constructor",h),h.displayName=s(f,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===h||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,f):(t.__proto__=f,s(t,a,"GeneratorFunction")),t.prototype=Object.create(g),t},t.awrap=function(t){return{__await:t}},y(_.prototype),s(_.prototype,i,(function(){return this})),t.AsyncIterator=_,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new _(c(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},y(g),s(g,a,"Generator"),s(g,o,(function(){return this})),s(g,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=S,L.prototype={constructor:L,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(k),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=r.call(i,"catchLoc"),c=r.call(i,"finallyLoc");if(s&&c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,u):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),u},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),k(r),u}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;k(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:S(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),u}},t}function k(t,e,r,n,o,i,a){try{var s=t[i](a),c=s.value}catch(t){return void r(t)}s.done?e(c):Promise.resolve(c).then(n,o)}function L(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){k(i,n,o,a,s,"next",t)}function s(t){k(i,n,o,a,s,"throw",t)}a(void 0)}))}}const S={name:"ElevatorMgmtListView",components:{ClipLoader:s.Z,ElevatorMgmtModal:x},props:{viewType:{type:String,default:"management"}},data:function(){return{loading:!1,elevatorMgmts:[],mqttCommandId:null,modal:{show:!1,id:null}}},created:function(){var t=this;return L(C().mark((function e(){var r;return C().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.loading=!0,e.next=3,t.fetchData();case 3:t.loading=!1,r=t,window.Echo.private("elevatorMgmts").listen("ElevatorMgmtCreated",(function(t){r.elevatorMgmts.unshift(t.elevatorMgmt)})).listen("ElevatorMgmtUpdated",(function(t){var e=o().findIndex(r.elevatorMgmts,["elevator_id",t.elevatorMgmt.elevator_id]);-1!=e&&r.elevatorMgmts.splice(e,1,t.elevatorMgmt)})).listen("ElevatorMgmtDeleted",(function(t){var e=o().findIndex(r.elevatorMgmts,["elevator_id",t.elevatorMgmt.elevator_id]);-1!=e&&r.elevatorMgmts.splice(e,1)})),window.Echo.private("elevatorStatuses").listen("ElevatorStatusUpdated",(function(t){var e=t.elevatorStatus,n=e.elevator_mgmt;delete e.elevator_mgmt,n.elevator_status=e;var i=o().findIndex(r.elevatorMgmts,["elevator_id",n.elevator_id]);-1!=i&&r.elevatorMgmts.splice(i,1,n)}));case 7:case"end":return e.stop()}}),e)})))()},destroyed:function(){this.mqttCommandId&&window.Echo.leave("mqttCommands.".concat(this.mqttCommandId)),window.Echo.leave("elevatorMgmts"),window.Echo.leave("elevatorStatuses")},methods:{fetchData:function(){var t=this;return L(C().mark((function e(){var r,n;return C().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,a().get("/api/elevatorMgmts");case 3:0==(r=(r=e.sent).data).status&&(n=r.data,t.elevatorMgmts=o().map(n.elevatorMgmts,(function(t){return t.sending=!1,t}))),e.next=12;break;case 8:return e.prev=8,e.t0=e.catch(0),e.next=12,t.guestRedirectHome(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,8]])})))()},submitMqttCommand:function(t,e){var r=arguments,n=this;return L(C().mark((function i(){var s,c,l,u,d;return C().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(s=r.length>2&&void 0!==r[2]?r[2]:null,33!=t){i.next=7;break}if(s){i.next=6;break}return alert("請先輸入樓層。"),document.getElementById("targetFloorInput").focus(),i.abrupt("return");case 6:s+="F";case 7:return i.prev=7,-1!=(c=o().findIndex(n.elevatorMgmts,(function(t){return t.elevator_id==e})))&&(n.elevatorMgmts[c].sending=!0),i.next=12,a().post("/api/mqttCommands",{mqtt_command_type_id:t,target_floor:s,elevator_id:e});case 12:0==(l=(l=i.sent).data).status&&(n.mqttCommandId&&window.Echo.leave("mqttCommands.".concat(n.mqttCommandId)),u=l.data,n.mqttCommandId=u.mqttCommand.id,d=n,window.Echo.private("mqttCommands.".concat(n.mqttCommandId)).listen("MqttCommandUpdated",(function(t){d.$toast.success({title:"成功訊息",message:"命令送出成功！"}),-1!=c&&(d.elevatorMgmts[c].sending=!1)}))),i.next=21;break;case 17:return i.prev=17,i.t0=i.catch(7),i.next=21,n.guestRedirectHome(i.t0);case 21:case"end":return i.stop()}}),i,null,[[7,17]])})))()},resetRow:function(t){var e=o().findIndex(this.elevatorMgmts,(function(e){return e.elevator_id==t.elevator_id}));-1==e?this.elevatorMgmts.splice(0,0,t):this.elevatorMgmts[e]=t},showModal:function(t){this.modal.id=t,this.modal.show=!0},deleteRow:function(t){var e=this;return L(C().mark((function r(){return C().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(confirm("確定要刪除".concat(t.elevator_id,"?"))){r.next=2;break}return r.abrupt("return");case 2:return r.prev=2,r.next=5,a().delete("/api/elevatorMgmts/".concat(t.elevator_id));case 5:0==r.sent.data.status&&(e.$toast.success({title:"成功訊息",message:"刪除成功"}),e.elevatorMgmts=o().filter(e.elevatorMgmts,(function(e){return e.elevator_id!=t.elevator_id}))),r.next=13;break;case 10:r.prev=10,r.t0=r.catch(2),e.guestRedirectHome(r.t0);case 13:case"end":return r.stop()}}),r,null,[[2,10]])})))()}}};var E=r(5419),M={insert:"head",singleton:!1};g()(E.Z,M);E.Z.locals;const O=(0,b.Z)(S,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("section",{staticClass:"content-header clearfix"},[r("span",{style:"color: "+("management"==t.viewType?"#FFFFFF":"#000000")},[t._v(t._s("management"==t.viewType?"電梯點管理":"電梯點狀態")+" ")]),t._v(" "),"management"==t.viewType?r("button",{staticClass:"btn btn-light-green op-btn",on:{click:function(e){return t.showModal(null)}}},[r("i",{staticClass:"fa fa-plus",attrs:{"aria-hidden":"true"}}),t._v(" 創建電梯點\n        ")]):t._e()]),t._v(" "),r("section",{staticClass:"content"},[r("div",{staticClass:"row"},[r("div",{staticClass:"col-xs-12"},[r("div",{staticClass:"box"},[r("div",{staticClass:"box-body"},[t.loading?t._e():r("div",[r("table",{staticClass:"table table-bordered table-hover break-table"},[t._m(0),t._v(" "),r("tbody",t._l(t.elevatorMgmts,(function(e,n){return r("tr",{class:{"tr-gray":n%2==1}},[r("td",{staticClass:"text-center",attrs:{"data-title":"電梯點編號"}},[t._v(t._s(e.elevator_id))]),t._v(" "),r("td",{staticClass:"text-center",attrs:{"data-title":"電梯點位置"}},[t._v(t._s(e.vertex_name))]),t._v(" "),r("td",{staticClass:"text-center",attrs:{"data-title":"特定車輛"}},[t._v(t._s(e.prefer_vehicle))]),t._v(" "),r("td",{staticClass:"text-center vertical-center",attrs:{"data-title":"啟用狀態"}},[r("b",{class:{red:!e.enable,green:e.enable}},[t._v(t._s(e.enable?"已啟用":"未啟用"))])]),t._v(" "),r("td",{staticClass:"text-center",attrs:{"data-title":"電梯MAC"}},[t._v(t._s(e.macaddr))]),t._v(" "),r("td",{staticClass:"text-center",attrs:{"data-title":"電梯IP"}},[t._v(t._s(e.ipaddr))]),t._v(" "),r("td",{staticClass:"text-center",attrs:{"data-title":"狀態"}},[e.elevator_status?["idle"==e.elevator_status.elevator_status?[t._v("閒置")]:"busy"==e.elevator_status.elevator_status?[t._v("運轉")]:"disable"==e.elevator_status.elevator_status?[t._v("故障")]:t._e(),t._v(" "),e.elevator_status.elevator_status&&e.elevator_status.elevator_door_status?r("span",[t._v(" | ")]):t._e(),t._v(" "),"open"==e.elevator_status.elevator_door_status?[t._v("開門")]:"closed"==e.elevator_status.elevator_door_status?[t._v("關門")]:t._e()]:t._e()],2),t._v(" "),r("td",{staticClass:"text-center",attrs:{"data-title":"授權狀態"}},[e.elevator_status?[r("div",{class:{green:e.elevator_status.elevator_authorization_state,gray:!e.elevator_status.elevator_authorization_state}},[t._v("\n                                                "+t._s(e.elevator_status.elevator_authorization_state?"已授權":"未授權")+"\n                                            ")])]:t._e()],2),t._v(" "),r("td",{staticClass:"text-center vertical-center",attrs:{"data-title":"樓層"}},[e.elevator_status&&e.elevator_status.elevator_position?[t._v(t._s(e.elevator_status.elevator_position))]:t._e()],2),t._v(" "),r("td",{staticClass:"text-center vertical-center",attrs:{"data-title":"接收時間"}},[e.elevator_status?[t._v(t._s(t._f("datetime")(e.elevator_status.update_ts)))]:t._e()],2),t._v(" "),r("td",{staticClass:"text-center",attrs:{"data-title":"操作"}},["management"==t.viewType?[r("button",{staticClass:"btn btn-light-green btn-sm",attrs:{title:"修改"},on:{click:function(r){return t.showModal(e.elevator_id)}}},[r("i",{staticClass:"glyphicon glyphicon-pencil"}),t._v("\n                                                修改\n                                            ")]),t._v(" "),r("button",{staticClass:"btn btn-delete btn-sm",attrs:{title:"刪除"},on:{click:function(r){return t.deleteRow(e)}}},[r("i",{staticClass:"glyphicon glyphicon-trash"}),t._v("\n                                                刪除\n                                            ")])]:[r("div",{staticClass:"btn-list"},[r("button",{staticClass:"btn btn-default btn-sm border-gray",attrs:{type:"button",disabled:e.sending},on:{click:function(r){return t.submitMqttCommand(31,e.elevator_id)}}},[t._v("\n                                                    要授權\n                                                ")]),t._v(" "),r("button",{staticClass:"btn btn-default btn-sm border-gray",attrs:{type:"button",disabled:e.sending},on:{click:function(r){return t.submitMqttCommand(32,e.elevator_id)}}},[t._v("\n                                                    還授權\n                                                ")])]),t._v(" "),r("div",{staticClass:"btn-list"},[r("div",{staticClass:"input-group"},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.elevator_position,expression:"elevator.elevator_position"}],staticClass:"form-control input-sm input-floor",attrs:{type:"text",id:"targetFloorInput","aria-describedby":"basic-addon1",disabled:e.sending},domProps:{value:e.elevator_position},on:{input:function(r){r.target.composing||t.$set(e,"elevator_position",r.target.value)}}}),t._v(" "),r("span",{staticClass:"input-group-addon",attrs:{id:"basic-addon1"}},[t._v("F")]),t._v(" "),r("span",{staticClass:"input-group-btn"},[r("button",{staticClass:"btn btn-default btn-sm border-gray",attrs:{type:"button",disabled:e.sending},on:{click:function(r){return t.submitMqttCommand(33,e.elevator_id,e.elevator_position)}}},[r("i",{staticClass:"fa fa-arrow-up"}),r("i",{staticClass:"fa fa-arrow-down"})])])])]),t._v(" "),r("div",{staticClass:"btn-list"},[r("button",{staticClass:"btn btn-default btn-sm border-gray",attrs:{type:"button",disabled:e.sending},on:{click:function(r){return t.submitMqttCommand(35,e.elevator_id)}}},[t._v("\n                                                    開門\n                                                ")]),t._v(" "),r("button",{staticClass:"btn btn-default btn-sm border-gray",attrs:{type:"button",disabled:e.sending},on:{click:function(r){return t.submitMqttCommand(34,e.elevator_id)}}},[t._v("\n                                                    關門\n                                                ")])])]],2)])})),0)])]),t._v(" "),t.loading?r("clip-loader",{staticClass:"loading",attrs:{color:"gray",size:"30px"}}):t._e()],1)])])])]),t._v(" "),r("elevator-mgmt-modal",{attrs:{eid:t.modal.id},on:{update:t.resetRow,refresh:t.fetchData},model:{value:t.modal.show,callback:function(e){t.$set(t.modal,"show",e)},expression:"modal.show"}})],1)}),[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("thead",{staticClass:"table-head"},[r("tr",[r("th",{staticClass:"text-center hide-td",attrs:{colspan:"6"}},[t._v("電梯點資訊")]),t._v(" "),r("th",{staticClass:"text-center hide-td",attrs:{colspan:"4"}},[t._v("即時狀態")]),t._v(" "),r("th",{staticClass:"text-center hide-td operate-td",attrs:{rowspan:"2"}},[t._v("操作")])]),t._v(" "),r("tr",[r("th",{staticClass:"text-center hide-td"},[t._v("電梯點編號")]),t._v(" "),r("th",{staticClass:"text-center hide-td"},[t._v("電梯點位置")]),t._v(" "),r("th",{staticClass:"text-center hide-td"},[t._v("特定車輛")]),t._v(" "),r("th",{staticClass:"text-center hide-td"},[t._v("啟用狀態")]),t._v(" "),r("th",{staticClass:"text-center hide-td"},[t._v("電梯MAC")]),t._v(" "),r("th",{staticClass:"text-center hide-td"},[t._v("電梯IP")]),t._v(" "),r("th",{staticClass:"text-center hide-td"},[t._v("狀態")]),t._v(" "),r("th",{staticClass:"text-center hide-td"},[t._v("授權狀態")]),t._v(" "),r("th",{staticClass:"text-center hide-td"},[t._v("樓層")]),t._v(" "),r("th",{staticClass:"text-center hide-td"},[t._v("接收時間")])])])}],!1,null,"5de08ebd",null).exports},5554:(t,e,r)=>{"use strict";r.d(e,{Z:()=>v});var n=r(9669),o=r.n(n),i=r(6486),a=r.n(i);function s(t){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},s(t)}function c(){c=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function l(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,r){return t[e]=r}}function u(t,e,r,n){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new L(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return E()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var s=w(a,r);if(s){if(s===h)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=d(t,e,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===h)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}(t,r,a),i}function d(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var h={};function f(){}function p(){}function m(){}var v={};l(v,o,(function(){return this}));var g=Object.getPrototypeOf,y=g&&g(g(S([])));y&&y!==e&&r.call(y,o)&&(v=y);var _=m.prototype=f.prototype=Object.create(v);function b(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function x(t,e){function n(o,i,a,c){var l=d(t[o],t,i);if("throw"!==l.type){var u=l.arg,h=u.value;return h&&"object"==s(h)&&r.call(h,"__await")?e.resolve(h.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(h).then((function(t){u.value=t,a(u)}),(function(t){return n("throw",t,a,c)}))}c(l.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return h;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return h}var n=d(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,h;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,h):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,h)}function C(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function k(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function L(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(C,this),this.reset(!0)}function S(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:E}}function E(){return{value:void 0,done:!0}}return p.prototype=m,l(_,"constructor",m),l(m,"constructor",p),p.displayName=l(m,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,m):(t.__proto__=m,l(t,a,"GeneratorFunction")),t.prototype=Object.create(_),t},t.awrap=function(t){return{__await:t}},b(x.prototype),l(x.prototype,i,(function(){return this})),t.AsyncIterator=x,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new x(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},b(_),l(_,a,"Generator"),l(_,o,(function(){return this})),l(_,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=S,L.prototype={constructor:L,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(k),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=r.call(i,"catchLoc"),c=r.call(i,"finallyLoc");if(s&&c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,h):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),k(r),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;k(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:S(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),h}},t}function l(t,e,r,n,o,i,a){try{var s=t[i](a),c=s.value}catch(t){return void r(t)}s.done?e(c):Promise.resolve(c).then(n,o)}function u(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){l(i,n,o,a,s,"next",t)}function s(t){l(i,n,o,a,s,"throw",t)}a(void 0)}))}}const d={name:"EventListPage",components:{ClipLoader:r(9038).Z},data:function(){return{loading:!1,events:[],pagination:{last_page:1,current_page:this.$route.query.page?parseInt(this.$route.query.page):1},form:{event_level:this.$route.query.event_level?this.$route.query.event_level:null,event_name:this.$route.query.event_name?this.$route.query.event_name:null,system_id:this.$route.query.system_id?this.$route.query.system_id:null,event_code:this.$route.query.event_code?this.$route.query.event_code:null},eventType:this.$route.query.event_type?this.$route.query.event_type:"system"}},created:function(){var t=this;return u(c().mark((function e(){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.fetchData();case 2:t.pagination.current_page>t.pagination.last_page&&t.changePage(1,t.eventType,!0);case 3:case"end":return e.stop()}}),e)})))()},methods:{fetchData:function(){var t=this;return u(c().mark((function e(){var r;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.loading=!0,e.prev=1,e.next=4,o().get("/api/".concat(t.eventType,"Events"),{params:{page:t.pagination.current_page,event_name:t.form.event_name,event_level:t.form.event_level,system_id:t.form.system_id,event_code:t.form.event_code}});case 4:r=(r=e.sent).data,t.events=r["".concat(t.eventType,"Events")].data,t.pagination.current_page=r["".concat(t.eventType,"Events")].current_page,t.pagination.last_page=r["".concat(t.eventType,"Events")].last_page,e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),t.guestRedirectHome(e.t0);case 14:t.loading=!1;case 15:case"end":return e.stop()}}),e,null,[[1,11]])})))()},changePage:function(t,e,r){var n=a().pickBy({event_type:e,event_name:r?this.form.event_name:null,event_level:r?this.form.event_level:null,system_id:r?this.form.system_id:null,event_code:r?this.form.event_code:null,page:t},a().identity());this.$router.push({path:"/events",query:n})}}};var h=r(3379),f=r.n(h),p=r(6613),m={insert:"head",singleton:!1};f()(p.Z,m);p.Z.locals;const v=(0,r(1900).Z)(d,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[t._m(0),t._v(" "),r("section",{staticClass:"content"},[r("div",{staticClass:"row"},[r("div",{staticClass:"col-xs-12"},[r("ul",{staticClass:"nav nav-tabs"},[r("li",{class:{active:"system"==t.eventType}},[r("a",{attrs:{href:"javascript:void(0)"},on:{click:function(e){return t.changePage(1,"system",!1)}}},[t._v("系統事件")])]),t._v(" "),r("li",{class:{active:"vehicle"==t.eventType}},[r("a",{attrs:{href:"javascript:void(0)"},on:{click:function(e){return t.changePage(1,"vehicle",!1)}}},[t._v("車輛事件")])])]),t._v(" "),r("div",{staticClass:"box"},[r("div",{staticClass:"box-body"},[t.loading?t._e():r("div",[r("div",{staticClass:"scroll"},[r("table",{staticClass:"table table-bordered table-hover break-table"},[r("thead",{staticClass:"table-head"},[r("tr",[r("th",{staticClass:"hide-td"},[t._v("接收時間")]),t._v(" "),r("th",{staticClass:"hide-td text-center"},[t._v("系統類型")]),t._v(" "),r("th",{staticClass:"hide-td text-center"},[t._v("系統編號")]),t._v(" "),r("th",{staticClass:"hide-td"},[t._v("事件編號")]),t._v(" "),r("th",{staticClass:"hide-td"},[t._v("事件名稱")]),t._v(" "),r("th",{staticClass:"hide-td text-center",staticStyle:{"min-width":"140px"}},[t._v("事件等級")]),t._v(" "),"vehicle"==t.eventType?[r("th",{staticClass:"hide-td"},[t._v("車輛狀態")]),t._v(" "),r("th",{staticClass:"hide-td"},[t._v("車輛位置")]),t._v(" "),r("th",{staticClass:"hide-td"},[t._v("車輛座標")]),t._v(" "),r("th",{staticClass:"hide-td"},[t._v("車輛任務編號")])]:t._e(),t._v(" "),r("th",{staticClass:"hide-td"},[t._v("備註")])],2)]),t._v(" "),r("tbody",[t._m(1),t._v(" "),r("tr",[r("td",{staticClass:"hide-td"}),t._v(" "),r("td",{staticClass:"hide-td"}),t._v(" "),r("td",{attrs:{"data-title":"系統編號"}},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.form.system_id,expression:"form.system_id"}],staticClass:"form-control",attrs:{placeholder:"請輸入"},domProps:{value:t.form.system_id},on:{change:function(e){return t.changePage(1,t.eventType,!0)},input:function(e){e.target.composing||t.$set(t.form,"system_id",e.target.value)}}})]),t._v(" "),r("td",{attrs:{"data-title":"事件編號"}},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.form.event_code,expression:"form.event_code"}],staticClass:"form-control",attrs:{placeholder:"請輸入"},domProps:{value:t.form.event_code},on:{change:function(e){return t.changePage(1,t.eventType,!0)},input:function(e){e.target.composing||t.$set(t.form,"event_code",e.target.value)}}})]),t._v(" "),r("td",{staticStyle:{"max-width":"100px","min-width":"100%"},attrs:{"data-title":"事件名稱"}},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.form.event_name,expression:"form.event_name"}],staticClass:"form-control",attrs:{placeholder:"請輸入"},domProps:{value:t.form.event_name},on:{change:function(e){return t.changePage(1,t.eventType,!0)},input:function(e){e.target.composing||t.$set(t.form,"event_name",e.target.value)}}})]),t._v(" "),r("td",{staticStyle:{"max-width":"100px","min-width":"100%"},attrs:{"data-title":"事件等級"}},[r("select",{directives:[{name:"model",rawName:"v-model",value:t.form.event_level,expression:"form.event_level"}],staticClass:"form-control",on:{change:[function(e){var r=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(t.form,"event_level",e.target.multiple?r:r[0])},function(e){return t.changePage(1,t.eventType,!0)}]}},[r("option",{domProps:{value:null}},[t._v("請選擇")]),t._v(" "),r("option",{attrs:{value:"ERROR"}},[t._v("ERROR")]),t._v(" "),r("option",{attrs:{value:"WARNING"}},[t._v("WARNING")]),t._v(" "),r("option",{attrs:{value:"INFO"}},[t._v("INFO")])])]),t._v(" "),"vehicle"==t.eventType?[r("td",{staticClass:"hide-td"}),t._v(" "),r("td",{staticClass:"hide-td"}),t._v(" "),r("td",{staticClass:"hide-td"}),t._v(" "),r("td",{staticClass:"hide-td"})]:t._e(),t._v(" "),r("td",{staticClass:"hide-td"})],2),t._v(" "),t._l(t.events,(function(e,n){return r("tr",{class:[n%2==1?"tr-gray":""]},[r("td",{attrs:{"data-title":"接收時間"}},[t._v(t._s(t._f("datetime")(e.receive_time)))]),t._v(" "),r("td",{staticClass:"text-center",attrs:{"data-title":"系統類型"}},[t._v(t._s(e.system_type))]),t._v(" "),r("td",{staticClass:"text-center",attrs:{"data-title":"系統編號"}},[t._v(t._s(e.system_id))]),t._v(" "),r("td",{attrs:{"data-title":"事件編號"}},[t._v(t._s(e.event_code))]),t._v(" "),r("td",{attrs:{"data-title":"事件名稱"}},[t._v(t._s(e.event_name))]),t._v(" "),r("td",{staticClass:"text-center",attrs:{"data-title":"事件等級"}},[t._v(t._s(e.event_level))]),t._v(" "),"vehicle"==t.eventType?[r("td",{attrs:{"data-title":"車輛狀態"}},[t._v(t._s(e.vehicle_status))]),t._v(" "),r("td",{attrs:{"data-title":"車輛位置"}},[t._v(t._s(e.vehicle_location))]),t._v(" "),r("td",{attrs:{"data-title":"車輛座標"}},[t._v(t._s(e.vehicle_coordinate))]),t._v(" "),r("td",{attrs:{"data-title":"車輛任務編號"}},[t._v(t._s(e.vehicle_mission_uuid))])]:t._e(),t._v(" "),r("td",{attrs:{"data-title":"備註"}},[t._v(t._s(e.comment))])],2)}))],2)])]),t._v(" "),r("div",{staticClass:"text-center"},[r("pagination",{attrs:{"direction-links":!1,"boundary-links":!0,size:"sm","total-page":t.pagination.last_page,"max-size":10},on:{change:function(e){return t.changePage(t.pagination.current_page,t.eventType,!0)}},model:{value:t.pagination.current_page,callback:function(e){t.$set(t.pagination,"current_page",e)},expression:"pagination.current_page"}})],1)]),t._v(" "),t.loading?r("clip-loader",{staticClass:"loading",attrs:{color:"gray",size:"30px"}}):t._e()],1)])])])])])}),[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("section",{staticClass:"content-header clearfix list-page-title"},[r("span",[t._v("事件列表")])])},function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("tr",[r("td",{staticStyle:{"line-height":"5px"},attrs:{colspan:"11"}},[r("span",{staticClass:"red font-bold",staticStyle:{"font-size":"8pt"}},[t._v("搜尋欄位輸入後請按Enter鍵")])])])}],!1,null,"f944344c",null).exports},1303:(t,e,r)=>{"use strict";r.d(e,{Z:()=>p});var n=r(9038),o=r(9669),i=r.n(o);function a(t){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a(t)}function s(){s=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",c=n.toStringTag||"@@toStringTag";function l(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,r){return t[e]=r}}function u(t,e,r,n){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new L(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return E()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var s=w(a,r);if(s){if(s===h)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=d(t,e,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===h)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}(t,r,a),i}function d(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var h={};function f(){}function p(){}function m(){}var v={};l(v,o,(function(){return this}));var g=Object.getPrototypeOf,y=g&&g(g(S([])));y&&y!==e&&r.call(y,o)&&(v=y);var _=m.prototype=f.prototype=Object.create(v);function b(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function x(t,e){function n(o,i,s,c){var l=d(t[o],t,i);if("throw"!==l.type){var u=l.arg,h=u.value;return h&&"object"==a(h)&&r.call(h,"__await")?e.resolve(h.__await).then((function(t){n("next",t,s,c)}),(function(t){n("throw",t,s,c)})):e.resolve(h).then((function(t){u.value=t,s(u)}),(function(t){return n("throw",t,s,c)}))}c(l.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return h;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return h}var n=d(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,h;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,h):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,h)}function C(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function k(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function L(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(C,this),this.reset(!0)}function S(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:E}}function E(){return{value:void 0,done:!0}}return p.prototype=m,l(_,"constructor",m),l(m,"constructor",p),p.displayName=l(m,c,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,m):(t.__proto__=m,l(t,c,"GeneratorFunction")),t.prototype=Object.create(_),t},t.awrap=function(t){return{__await:t}},b(x.prototype),l(x.prototype,i,(function(){return this})),t.AsyncIterator=x,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new x(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},b(_),l(_,c,"Generator"),l(_,o,(function(){return this})),l(_,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=S,L.prototype={constructor:L,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(k),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=r.call(i,"catchLoc"),c=r.call(i,"finallyLoc");if(s&&c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,h):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),k(r),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;k(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:S(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),h}},t}function c(t,e,r,n,o,i,a){try{var s=t[i](a),c=s.value}catch(t){return void r(t)}s.done?e(c):Promise.resolve(c).then(n,o)}const l={name:"HookStatusListPage",components:{Reload:r(6011).Z,ClipLoader:n.Z},data:function(){return{loading:!0,hookStatus:{},showReload:!1}},created:function(){this.fetchData()},methods:{fetchData:function(){var t,e=this;return(t=s().mark((function t(){var r,n;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.loading=!0,t.prev=1,t.next=4,i().get("/api/hook-status");case 4:0==(r=(r=t.sent).data).status?(n=r.data,e.hookStatus=n.hookStatus,e.device=n.device):-21==r.status&&(e.showReload=!0),t.next=13;break;case 9:return t.prev=9,t.t0=t.catch(1),t.next=13,e.guestRedirectHome(t.t0);case 13:return t.prev=13,e.loading=!1,t.finish(13);case 16:case"end":return t.stop()}}),t,null,[[1,9,13,16]])})),function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){c(i,n,o,a,s,"next",t)}function s(t){c(i,n,o,a,s,"throw",t)}a(void 0)}))})()}}};var u=r(3379),d=r.n(u),h=r(3126),f={insert:"head",singleton:!1};d()(h.Z,f);h.Z.locals;const p=(0,r(1900).Z)(l,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[t._m(0),t._v(" "),r("section",{staticClass:"content"},[r("div",{staticClass:"col-xs-12"},[r("div",{staticClass:"box"},[r("div",{staticClass:"box-body"},[t.loading?r("clip-loader",{staticClass:"loading",attrs:{color:"gray",size:"30px"}}):r("div",[t.showReload?r("reload",{on:{click:function(e){t.showReload=!1,t.fetchData()}}}):r("table",{staticClass:"table table-bordered table-hover break-table"},[t._m(1),t._v(" "),r("tbody",[r("tr",[r("td",{staticClass:"vertical-middle",attrs:{"data-title":""}},[t._v("手臂")]),t._v(" "),r("td",{attrs:{"data-title":"State String"}},[t._v(t._s(t.hookStatus.available?"可使用的":"無法使用的"))]),t._v(" "),r("td",{attrs:{"data-title":"data"}},[t._v("角度："+t._s(t.hookStatus.angle)+"度")])]),t._v(" "),t._l(t.hookStatus,(function(e,n){return["angle"!==n&&"available"!==n?r("tr",[r("td",{staticClass:"vertical-middle",attrs:{"data-title":""}},[r("span","height"==n?[t._v("高度")]:"brake"==n?[t._v("剎車")]:"gripper"==n?[t._v("夾持器")]:[t._v(t._s(n))])]),t._v(" "),r("td",{attrs:{"data-title":"State String"}},[t._v(t._s("Unknown"==e.state_string?"-":e.state_string))]),t._v(" "),r("td",{attrs:{"data-title":"data"}},["brake"==n?[t._v("\n                                            "+t._s(e.braked?"煞車":"未煞車")+"\n                                        ")]:t._e(),t._v(" "),"gripper"==n?[t._v("\n                                            "+t._s(e.closed?"關閉":"開啟")+"\n                                        ")]:t._e(),t._v(" "),"height"==n?[t._v("\n                                            "+t._s(e.height)+"\n                                        ")]:t._e()],2)]):t._e()]}))],2)])],1)],1)])])])])}),[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("section",{staticClass:"content-header clearfix"},[r("span",[t._v("手臂資訊")]),t._v(" "),r("div",{staticClass:"title-right-block"})])},function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("thead",[r("tr",{staticClass:"table-head"},[r("th",{staticClass:"hide-td"},[t._v("名稱")]),t._v(" "),r("th",{staticClass:"hide-td"},[t._v("狀態")]),t._v(" "),r("th",{staticClass:"hide-td"},[t._v("資料")])])])}],!1,null,"72e987ae",null).exports},9936:(t,e,r)=>{"use strict";r.d(e,{Z:()=>X});var n=r(381),o=r.n(n),i=r(629),a=r(6486),s=r.n(a),c=r(9669),l=r.n(c),u=r(7152),d=r(9038);function h(t){return h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},h(t)}function f(){f=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function c(t,e,r,n){var o=e&&e.prototype instanceof d?e:d,i=Object.create(o.prototype),a=new L(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return E()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var s=w(a,r);if(s){if(s===u)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=l(t,e,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===u)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}(t,r,a),i}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var u={};function d(){}function p(){}function m(){}var v={};s(v,o,(function(){return this}));var g=Object.getPrototypeOf,y=g&&g(g(S([])));y&&y!==e&&r.call(y,o)&&(v=y);var _=m.prototype=d.prototype=Object.create(v);function b(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function x(t,e){function n(o,i,a,s){var c=l(t[o],t,i);if("throw"!==c.type){var u=c.arg,d=u.value;return d&&"object"==h(d)&&r.call(d,"__await")?e.resolve(d.__await).then((function(t){n("next",t,a,s)}),(function(t){n("throw",t,a,s)})):e.resolve(d).then((function(t){u.value=t,a(u)}),(function(t){return n("throw",t,a,s)}))}s(c.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return u;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var n=l(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,u;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,u):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,u)}function C(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function k(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function L(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(C,this),this.reset(!0)}function S(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:E}}function E(){return{value:void 0,done:!0}}return p.prototype=m,s(_,"constructor",m),s(m,"constructor",p),p.displayName=s(m,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,m):(t.__proto__=m,s(t,a,"GeneratorFunction")),t.prototype=Object.create(_),t},t.awrap=function(t){return{__await:t}},b(x.prototype),s(x.prototype,i,(function(){return this})),t.AsyncIterator=x,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new x(c(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},b(_),s(_,a,"Generator"),s(_,o,(function(){return this})),s(_,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=S,L.prototype={constructor:L,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(k),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=r.call(i,"catchLoc"),c=r.call(i,"finallyLoc");if(s&&c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,u):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),u},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),k(r),u}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;k(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:S(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),u}},t}function p(t,e,r,n,o,i,a){try{var s=t[i](a),c=s.value}catch(t){return void r(t)}s.done?e(c):Promise.resolve(c).then(n,o)}const m={name:"VehicleErrorTypeModal",$_veeValidate:{validator:"new"},components:{ClipLoader:d.Z},props:{value:{type:Boolean,default:!1},mirStatus:Object},watch:{value:function(t){this.showModal=t}},data:function(){return{showModal:this.value,sending:!1}},created:function(){},methods:{onShowModal:function(){},onHideModal:function(){this.$emit("input",!1)},submit:function(){var t,e=this;return(t=f().mark((function t(){return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(confirm("確定要重置？")){t.next=2;break}return t.abrupt("return");case 2:return t.prev=2,e.sending=!0,t.next=6,l().patch("/api/mir-statuses/".concat(e.mirStatus.id,"/clear-error"));case 6:0==t.sent.data.status&&(e.$toast.success({title:"成功訊息",message:"重置成功"}),e.showModal=!1),t.next=15;break;case 11:return t.prev=11,t.t0=t.catch(2),t.next=15,e.guestRedirectHome(t.t0);case 15:return t.prev=15,e.sending=!1,t.finish(15);case 18:case"end":return t.stop()}}),t,null,[[2,11,15,18]])})),function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){p(i,n,o,a,s,"next",t)}function s(t){p(i,n,o,a,s,"throw",t)}a(void 0)}))})()}}};var v=r(1900);const g=(0,v.Z)(m,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("modal",{attrs:{backdrop:!1,"append-to-body":!0,keyboard:!1,"cancel-text":"取消","ok-text":"確定"},on:{show:t.onShowModal,hide:t.onHideModal},model:{value:t.showModal,callback:function(e){t.showModal=e},expression:"showModal"}},[r("div",{attrs:{slot:"title"},slot:"title"},[t.mirStatus&&t.mirStatus.vehicle_error_type?[t._v(t._s(t.mirStatus.vehicle_error_type.name))]:t._e()],2),t._v(" "),r("div",{attrs:{slot:"default"},slot:"default"},[r("div",{staticClass:"is-danger"},[t.mirStatus?[t._v("\n                "+t._s(t.mirStatus.vehicle_error_message)+"\n            ")]:t._e()],2)]),t._v(" "),r("div",{attrs:{slot:"footer"},slot:"footer"},[r("button",{staticClass:"btn btn-delete",attrs:{type:"button",disabled:t.sending},on:{click:t.submit}},[t._v("重置")]),t._v(" "),r("button",{staticClass:"btn btn-default",attrs:{type:"button"},on:{click:function(e){t.showModal=!1}}},[t._v("關閉")])])])}),[],!1,null,"01e01408",null).exports;function y(t){return y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},y(t)}function _(){_=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function c(t,e,r,n){var o=e&&e.prototype instanceof d?e:d,i=Object.create(o.prototype),a=new L(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return E()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var s=w(a,r);if(s){if(s===u)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=l(t,e,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===u)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}(t,r,a),i}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var u={};function d(){}function h(){}function f(){}var p={};s(p,o,(function(){return this}));var m=Object.getPrototypeOf,v=m&&m(m(S([])));v&&v!==e&&r.call(v,o)&&(p=v);var g=f.prototype=d.prototype=Object.create(p);function b(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function x(t,e){function n(o,i,a,s){var c=l(t[o],t,i);if("throw"!==c.type){var u=c.arg,d=u.value;return d&&"object"==y(d)&&r.call(d,"__await")?e.resolve(d.__await).then((function(t){n("next",t,a,s)}),(function(t){n("throw",t,a,s)})):e.resolve(d).then((function(t){u.value=t,a(u)}),(function(t){return n("throw",t,a,s)}))}s(c.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return u;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var n=l(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,u;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,u):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,u)}function C(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function k(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function L(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(C,this),this.reset(!0)}function S(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:E}}function E(){return{value:void 0,done:!0}}return h.prototype=f,s(g,"constructor",f),s(f,"constructor",h),h.displayName=s(f,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===h||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,f):(t.__proto__=f,s(t,a,"GeneratorFunction")),t.prototype=Object.create(g),t},t.awrap=function(t){return{__await:t}},b(x.prototype),s(x.prototype,i,(function(){return this})),t.AsyncIterator=x,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new x(c(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},b(g),s(g,a,"Generator"),s(g,o,(function(){return this})),s(g,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=S,L.prototype={constructor:L,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(k),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=r.call(i,"catchLoc"),c=r.call(i,"finallyLoc");if(s&&c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,u):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),u},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),k(r),u}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;k(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:S(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),u}},t}function b(t,e,r,n,o,i,a){try{var s=t[i](a),c=s.value}catch(t){return void r(t)}s.done?e(c):Promise.resolve(c).then(n,o)}function x(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){b(i,n,o,a,s,"next",t)}function s(t){b(i,n,o,a,s,"throw",t)}a(void 0)}))}}function w(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function C(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?w(Object(r),!0).forEach((function(e){k(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):w(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function k(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}const L={name:"HeaderView",components:{MapModal:r(6518).Z,VehicleErrorTypeModal:g,VueI18n:u.Z},computed:C(C(C({},(0,i.rn)({userAccount:function(t){return t.user.user.account},userId:function(t){return t.user.user.id}})),(0,i.Se)({user:"user/user",roles:"user/roles",permissions:"user/permissions",device:"device/device"})),{},{batteryIconClass:function(){var t="fa-battery-empty";return this.device.mir_status&&(this.device.mir_status.battery_percentage>75?t="fa-battery-full":this.device.mir_status.battery_percentage>50?t="fa-battery-three-quarters":this.device.mir_status.battery_percentage>25?t="fa-battery-half":this.device.mir_status.battery_percentage>10&&(t="fa-battery-quarter")),"fa ".concat(t)}}),data:function(){return{vehicleErrorTypeModal:{show:!1,mir_status:null}}},created:function(){this.subscribe()},methods:{logout:function(){var t=this;return x(_().mark((function e(){var r;return _().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,l().post("/logout");case 3:if(r=e.sent,0!=r.data.status){e.next=11;break}return t.$toast.success({title:"成功訊息",message:"登出成功"}),e.next=9,t.syncCsrfToken();case 9:t.$store.commit("user/UPDATE_USER",null),t.$router.push("/");case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),t.$store.commit("user/UPDATE_USER",null);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})))()},setLang:function(t){this.$store.commit("UPDATE_LANG",t),this.$i18n.locale=t,localStorage.setItem("local-lang",t)},updateDevice:function(t,e){var r=this;return x(_().mark((function n(){var o,i;return _().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,l().patch("/api/devices/".concat(t,"/is-connected"),{is_connected:e});case 3:if(0!=(o=(o=n.sent).data).status){n.next=11;break}return n.next=8,r.syncUser();case 8:i=o.data,i.device.is_connected==e?r.$toast.success({title:"成功訊息",message:"".concat(e?"已連接":"已斷開連接")}):r.$toast.error({title:"錯誤訊息",message:"MIR車輛未開機，請稍後再試！"});case 11:n.next=17;break;case 13:return n.prev=13,n.t0=n.catch(0),n.next=17,r.guestRedirectHome(n.t0);case 17:case"end":return n.stop()}}),n,null,[[0,13]])})))()},updateMissionQueues:function(t,e){var r=this;return x(_().mark((function n(){var o;return _().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r.sending=!0,n.prev=1,n.next=4,l().put("/api/missionQueues/".concat(e),{state_id:t});case 4:0==(o=(o=n.sent).data).status?(r.device.mir_status.state_id=t,3==t?r.$toast.success({title:"成功訊息",message:"開始成功！"}):r.$toast.success({title:"成功訊息",message:"暫停成功！"})):-19==o.status&&r.$toast.error({title:"錯誤訊息",message:"任務執行失敗！"}),n.next=13;break;case 9:return n.prev=9,n.t0=n.catch(1),n.next=13,r.guestRedirectHome(n.t0);case 13:return n.prev=13,r.sending=!1,n.finish(13);case 16:case"end":return n.stop()}}),n,null,[[1,9,13,16]])})))()},subscribe:function(){var t=this;window.Echo.private("mirStatuses").listen("MirStatusCreated",(function(e){t.device.mir_status=e.mirStatus,t.vehicleErrorTypeModal.show&&(t.vehicleErrorTypeModal.mir_status=t.device.mir_status,t.vehicleErrorTypeModal.show=!!t.device.mir_status.vehicle_error_type_id)})).listen("MirStatusUpdated",(function(e){t.device.mir_status=e.mirStatus,t.vehicleErrorTypeModal.show&&(t.vehicleErrorTypeModal.mir_status=t.device.mir_status,t.vehicleErrorTypeModal.show=!!t.device.mir_status.vehicle_error_type_id)})).listen("DeviceUpdated",(function(e){t.$store.commit("device/UPDATE_DEVICE",e.device)}))},showVehicleErrorTypeModal:function(){this.vehicleErrorTypeModal.mir_status=this.device&&this.device.mir_status?this.device.mir_status:null,this.vehicleErrorTypeModal.show=!0}}};var S=r(3379),E=r.n(S),M=r(1133),O={insert:"head",singleton:!1};E()(M.Z,O);M.Z.locals;const P=(0,v.Z)(L,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("header",{staticClass:"main-header"},[r("router-link",{staticClass:"logo",attrs:{to:"/regionMgmts?is_deploy=1",draggable:"false"}},[r("span",{staticClass:"logo-mini"},[t._v("CD"),r("br"),t._v("MO")]),t._v(" "),r("span",{staticClass:"logo-lg"},[t._v("GMP廠環境檢測和統計")])]),t._v(" "),r("nav",{staticClass:"navbar navbar-static-top",class:{"device-connected":t.device.is_connected,"device-disconnected":!t.device.is_connected}},[r("a",{staticClass:"sidebar-toggle",class:{"device-connected":t.device.is_connected,"device-disconnected":!t.device.is_connected},attrs:{href:"#","data-toggle":"push-menu",role:"button",draggable:"false"}},[r("span",{staticClass:"sr-only"},[t._v("Toggle navigation")])]),t._v(" "),t.device?r("a",{staticClass:"device-name",class:{"device-connected":t.device.is_connected,"device-disconnected":!t.device.is_connected},attrs:{href:"#",draggable:"false"}},[r("span",[t._v(t._s(t.device.name))])]):t._e(),t._v(" "),r("div",{staticClass:"navbar-custom-menu",class:{"device-connected":t.device.is_connected,"device-disconnected":!t.device.is_connected}},[r("ul",{staticClass:"nav navbar-nav"},[t.device.is_connected&&t.device.mir_status?r("li",[r("a",{staticClass:"no-hover",staticStyle:{cursor:"default"},attrs:{href:"javascript:void(0)",draggable:"false"}},[r("svg",{staticClass:"petri-count",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"8 20 48 32",fill:"none",stroke:"currentColor"}},[r("ellipse",{attrs:{cx:"32",cy:"28",rx:"24",ry:"10","stroke-width":"3.5",fill:"none"}}),t._v(" "),r("ellipse",{attrs:{cx:"32",cy:"36",rx:"24",ry:"10","stroke-width":"3.5",fill:"none"}}),t._v(" "),r("line",{attrs:{x1:"8",y1:"28",x2:"8",y2:"36","stroke-width":"3.5"}}),t._v(" "),r("line",{attrs:{x1:"56",y1:"28",x2:"56",y2:"36","stroke-width":"3.5"}}),t._v(" "),r("circle",{attrs:{cx:"24",cy:"32",r:"2.5",fill:"currentColor"}}),t._v(" "),r("circle",{attrs:{cx:"34",cy:"30",r:"2.5",fill:"currentColor"}}),t._v(" "),r("circle",{attrs:{cx:"42",cy:"34",r:"2.5",fill:"currentColor"}})]),t._v(" "),r("span",{attrs:{title:"目前培養皿數量 / 暫存區培養皿數量"}},[t._v(" "+t._s(t.device.mir_status.remaining_petri_count||0)+" / "+t._s(t.device.mir_status.initial_petri_count||0))])])]):t._e(),t._v(" "),t._m(0),t._v(" "),t.device.is_connected?r("li",[t.device.mir_status?r("div",{staticClass:"bar-link"},[t.device.mir_status.map?r("div",{staticClass:"map-name-div"},[t._v(t._s(t.device.mir_status.map.name))]):t._e(),t._v(" "),[3,4,5,11].contains(t.device.mir_status.state_id)?r("button",{staticClass:"bar control btn",on:{click:function(e){return t.updateMissionQueues(3==t.device.mir_status.state_id?11:3,t.device.mir_status.mission_queue_id)}}},[[3,5].contains(t.device.mir_status.state_id)?r("i",{staticClass:"fa fa-pause"}):[4,11].contains(t.device.mir_status.state_id)?r("i",{staticClass:"fa fa-play"}):t._e()]):t._e(),t._v(" "),r("div",{staticClass:"bar"},[r("span",[t.device.mir_status.mission_queue&&t.device.mir_status.mission_queue.mission?[t._v("\n                                   "+t._s(t.device.mir_status.mission_queue.mission.name)+"\n                                ")]:[t._v("無任務隊列")],t._v(" "),t.device.mir_status.location?[t._v(":"+t._s(t.device.mir_status.location.device_name))]:t._e(),t._v(" "),"Error"==t.device.mir_status.state_text?r("span",{staticClass:"state",staticStyle:{"background-color":"#FF001E"}},[t._v("\n                                    "+t._s(t.device.mir_status.state_text_zh)+"\n                                ")]):"ManualControl"==t.device.mir_status.state_text?r("span",{staticClass:"state",staticStyle:{"background-color":"#FFA500"}},[t._v("\n                                    "+t._s(t.device.mir_status.state_text_zh)+"\n                                ")]):"Ready"==t.device.mir_status.state_text||"Executing"==t.device.mir_status.state_text?r("span",{staticClass:"state",staticStyle:{"background-color":"#008000"}},[t._v("\n                                    "+t._s(t.device.mir_status.state_text_zh)+"\n                                ")]):"Emergency stop"==t.device.mir_status.state_text?r("span",{staticClass:"state",staticStyle:{"background-color":"#FF001E"}},[t._v("\n                                    "+t._s(t.device.mir_status.state_text_zh)+"\n                                ")]):"Pause"==t.device.mir_status.state_text?r("span",{staticClass:"state",staticStyle:{"background-color":"#FFA500"}},[t._v("\n                                    "+t._s(t.device.mir_status.state_text_zh)+"\n                                ")]):t._e(),t._v(" "),t.device.mir_status.vehicle_error_type_id?[r("i",{staticClass:"fa fa-info-circle is-danger vehicle-error-message-icon",attrs:{title:"有錯誤訊息，請點擊查看！"},on:{click:t.showVehicleErrorTypeModal}})]:t._e()],2)])]):t._e()]):t._e(),t._v(" "),t.device?[r("li",{staticClass:"dropdown device-menu-2",class:{"device-connected":t.device.is_connected,"device-disconnected":!t.device.is_connected}},[r("a",{staticClass:"dropdown-toggle",attrs:{href:"#","data-toggle":"dropdown",draggable:"false"}},[t.device.is_connected?[t._v("已連接")]:[t._v("已斷開連接")],t._v(" "),r("i",{staticClass:"fa fa-caret-down"})],2),t._v(" "),r("ul",{staticClass:"dropdown-menu"},[t.device.is_connected?r("li",[r("a",{attrs:{href:"#"},on:{click:function(e){return t.updateDevice(t.device.id,0)}}},[r("i",{staticClass:"fa fa-chain-broken"}),t._v("斷開連接")])]):r("li",[r("a",{attrs:{href:"#"},on:{click:function(e){return t.updateDevice(t.device.id,1)}}},[r("i",{staticClass:"fa fa-wifi"}),t._v("連接")])])])]),t._v(" "),t._m(1)]:t._e(),t._v(" "),r("li",{staticClass:"dropdown user user-menu"},[r("a",{staticClass:"no-hover",staticStyle:{cursor:"default"},attrs:{href:"javascript:void(0)",draggable:"false"}},[r("i",{staticClass:"fa fa-user",attrs:{"aria-hidden":"true"}}),t._v(" "),t.permissions.contains("user-role-manage")?r("i",{staticClass:"fa fa-cog icon-addon",attrs:{"aria-hidden":"true"}}):t._e(),t._v(" "),r("span",[t._v(t._s(t.userAccount))])])]),t._v(" "),t._m(2),t._v(" "),r("li",[r("a",{attrs:{href:"javascript:void(0)",draggable:"false"},on:{click:t.logout}},[t._v(t._s(t.$t("logOut")))])]),t._v(" "),t._m(3),t._v(" "),r("li",{staticClass:"battery"},[t.device.mir_status?r("a",{staticClass:"no-hover",staticStyle:{cursor:"default"},attrs:{href:"javascript:void(0)",draggable:"false"}},[r("i",{staticClass:"fa fa-map-marker",attrs:{id:"battery-icon"}}),t._v(" "),r("span",{staticClass:"battery-level"},[1==t.device.is_connected?[t._v("\n                                ("+t._s(JSON.parse(t.device.mir_status.position).x.toFixed(2))+", "+t._s(JSON.parse(t.device.mir_status.position).y.toFixed(2))+")\n                            ")]:[t._v("\n                                未知\n                            ")]],2),t._v(" "),1==t.device.is_connected?r("i",{class:[t.batteryIconClass],attrs:{id:"battery-icon"}}):r("i",{staticClass:"fa fa-battery-empty",attrs:{id:"battery-icon"}}),t._v(" "),r("span",{staticClass:"battery-level"},[1==t.device.is_connected?[t._v(t._s(t._f("integer")(t.device.mir_status.battery_percentage))+"%")]:[t._v("\n                                未知\n                            ")]],2)]):r("a",{staticClass:"no-hover",staticStyle:{cursor:"default"},attrs:{href:"javascript:void(0)",draggable:"false"}},[r("i",{staticClass:"fa fa-map-marker",attrs:{id:"battery-icon"}}),t._v(" "),r("span",{staticClass:"battery-level"},[t._v("\n                            (0.00, 0.00)\n                        ")]),t._v(" "),r("i",{staticClass:"fa fa-battery-empty",attrs:{id:"battery-icon"}}),t._v(" "),r("span",{staticClass:"battery-level"},[t._v("0%")])])])],2)])]),t._v(" "),r("vehicle-error-type-modal",{attrs:{"mir-status":t.vehicleErrorTypeModal.mir_status},model:{value:t.vehicleErrorTypeModal.show,callback:function(e){t.$set(t.vehicleErrorTypeModal,"show",e)},expression:"vehicleErrorTypeModal.show"}})],1)}),[function(){var t=this.$createElement,e=this._self._c||t;return e("li",[e("a",{staticClass:"no-hover"},[e("span",{staticClass:"split"})])])},function(){var t=this.$createElement,e=this._self._c||t;return e("li",[e("a",{staticClass:"no-hover"},[e("span",{staticClass:"split"})])])},function(){var t=this.$createElement,e=this._self._c||t;return e("li",[e("a",{staticClass:"no-hover"},[e("span",{staticClass:"split"})])])},function(){var t=this.$createElement,e=this._self._c||t;return e("li",[e("a",{staticClass:"no-hover"},[e("span",{staticClass:"split"})])])}],!1,null,"052a1dc5",null).exports;var j=r(9755);function N(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function T(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?N(Object(r),!0).forEach((function(e){$(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):N(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function $(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}const I={name:"sidebar-view",computed:T(T({},(0,i.Se)({roles:"user/roles",permissions:"user/permissions",device:"device/device"})),{},{regionQuery:function(){if(this.$route.path.contains("/regionMgmts")){var t=s().pickBy(this.$route.query,s().identity(null)),e=s().pickBy(this.$route.params,s().identity(null));return delete t.is_deploy,delete e.is_deploy,s().isEmpty(t)?s().isEmpty(e)?"":new URLSearchParams(e).toString():new URLSearchParams(t).toString()}return""}}),data:function(){return{}},mounted:function(){j('[data-widget="tree"]').tree(),setInterval((function(){var t=j(".admin-layout").innerHeight()-j(".main-header").innerHeight();j(".main-sidebar").height(t)}),100)},methods:{showUserModal:function(){this.$store.commit("user/UPDATE_USER_MODAL",!0)}}};const D=(0,v.Z)(I,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("aside",{staticClass:"main-sidebar"},[r("section",{staticClass:"sidebar",staticStyle:{height:"auto"}},[r("ul",{staticClass:"sidebar-menu",attrs:{"data-widget":"tree"}},[r("li",{staticClass:"header"},[t._v("主選單")]),t._v(" "),t.permissions.contains("user-role-manage")?r("li",{class:{active:t.$route.fullPath.match(/\/users/)}},[r("router-link",{attrs:{to:"/users"}},[r("i",{staticClass:"fa fa-user-circle-o"}),t._v(" "),r("span",[t._v(t._s(t.$t("AAPM")))])])],1):t._e(),t._v(" "),t.permissions.contains("sampling-robot")?r("li",{staticClass:"treeview",class:{active:t.$route.fullPath.match(/\/devices/)||t.$route.fullPath.match(/\/mirStatuses/)||t.$route.fullPath.match(/\/missions/)||t.$route.fullPath.match(/\/missionQueues/)||t.$route.fullPath.match(/\/regionMgmts/)||t.$route.fullPath.match(/\/maps/)||t.$route.fullPath.match(/\/microOrganisms/)&&"2"===t.$route.query.source||t.$route.fullPath.match(/\/locations/)||t.$route.fullPath.match(/\/hookStatuses/)||t.$route.fullPath.match(/\/missionBookings/)||t.$route.fullPath.match(/\/remoteManagementSystemStatuses/)}},[t._m(0),t._v(" "),r("ul",{staticClass:"treeview-menu"},[r("li",{staticClass:"treeview",class:{active:t.$route.fullPath.match(/\/mirStatuses/)||t.$route.fullPath.match(/\/missions/)||t.$route.fullPath.match(/\/missionQueues/)||t.$route.fullPath.match(/\/missionBookings/)}},[t._m(1),t._v(" "),r("ul",{staticClass:"treeview-menu"},[r("li",{class:{active:t.$route.fullPath.match(/\/missions/)&&!t.$route.fullPath.match(/\/missionQueues\/sample/)}},[r("router-link",{attrs:{to:"/missions"}},[r("i",{staticClass:"fa fa-circle-o"}),t._v(" "),r("span",[t._v("發送任務")])])],1),t._v(" "),r("li",{class:{active:t.$route.fullPath.match(/\/missionQueues\/current/)}},[r("router-link",{attrs:{to:{path:"/missionQueues/current"}}},[r("i",{staticClass:"fa fa-circle-o"}),t._v(" "),r("span",[t._v("目前任務列")])])],1),t._v(" "),r("li",{class:{active:t.$route.fullPath.match(/\/missionQueues\/history/)}},[r("router-link",{attrs:{to:{path:"/missionQueues/history"}}},[r("i",{staticClass:"fa fa-circle-o"}),t._v(" "),r("span",[t._v("歷史任務列")])])],1),t._v(" "),r("li",{class:{active:t.$route.fullPath.match(/\/missionBookings/)}},[r("router-link",{attrs:{to:"/missionBookings"}},[r("i",{staticClass:"fa fa-circle-o"}),t._v(" "),r("span",[t._v("預約任務")])])],1)])]),t._v(" "),r("li",{class:{active:t.$route.fullPath.match(/\/regionMgmts/)&&0==parseInt(t.$route.query.is_deploy)}},[r("router-link",{attrs:{to:"/regionMgmts?is_deploy=0&"+t.regionQuery}},[r("i",{staticClass:"fa fa-circle-o"}),t._v(" "),r("span",[t._v(t._s(t.$t("GDC")))])])],1),t._v(" "),r("li",{class:{active:t.$route.fullPath.match(/\/regionMgmts/)&&1==parseInt(t.$route.query.is_deploy)}},[r("router-link",{attrs:{to:"/regionMgmts?is_deploy=1&"+t.regionQuery}},[r("i",{staticClass:"fa fa-circle-o"}),t._v(" "),r("span",[t._v(t._s(t.$t("SR")))])])],1),t._v(" "),r("li",{class:{active:t.$route.fullPath.match(/\/maps/)}},[r("router-link",{attrs:{to:"/maps"}},[r("i",{staticClass:"fa fa-circle-o"}),t._v(" "),r("span",[t._v("地圖列")])])],1),t._v(" "),r("li",{class:{active:t.$route.fullPath.match(/\/missionQueues\/sample/)}},[r("router-link",{attrs:{to:"/missionQueues/sample"}},[r("i",{staticClass:"fa fa-circle-o"}),t._v(" "),r("span",[t._v("歷史採樣任務進度")])])],1),t._v(" "),r("li",{class:{active:"/hookStatuses"===t.$route.path}},[r("router-link",{attrs:{to:"/hookStatuses"}},[r("i",{staticClass:"fa fa-circle-o"}),t._v(" "),r("span",[t._v("手臂資訊")])])],1),t._v(" "),r("li",{class:{active:"/remoteManagementSystemStatuses"===t.$route.path}},[r("router-link",{attrs:{to:"/remoteManagementSystemStatuses"}},[r("i",{staticClass:"fa fa-circle-o"}),t._v(" "),r("span",[t._v("採樣任務進度")])])],1),t._v(" "),r("li",{class:{active:t.$route.fullPath.match(/\/devices/)}},[r("router-link",{attrs:{to:"/devices"}},[r("i",{staticClass:"fa fa-circle-o"}),t._v(" "),r("span",[t._v("AP連線 / IP連線")])])],1),t._v(" "),t.device&&(t.device.ip||t.device.ap)?r("li",[r("a",{attrs:{href:""+(t.device.ip?"http://"+t.device.ip:t.device.ap),target:"_blank"}},[r("i",{staticClass:"fa fa-circle-o"}),t._v(" "),r("span",[t._v("MIR 軟體")])])]):t._e()])]):t._e(),t._v(" "),t.permissions.contains("pollution-map")?r("li",{class:{active:t.$route.fullPath.match(/\/floorRegionMgmts/)||t.$route.fullPath.match(/\/regionMgmts\/[1-9]/)}},[r("router-link",{attrs:{to:"/floorRegionMgmts/1"}},[r("i",{staticClass:"fa fa-map"}),t._v(" "),r("span",[t._v("汙染地圖")])])],1):t._e(),t._v(" "),t.permissions.contains("parameter-settings")&&t.permissions.contains(["suspended-exceeds-read","falling-exceeds-read","contact-exceeds-read","microparticle-exceeds-read"])?r("li",{class:{active:t.$route.fullPath.match(/\/acceptanceGrades/)}},[r("router-link",{attrs:{to:"/acceptanceGrades"}},[r("i",{staticClass:"fa fa-cog"}),t._v(" "),r("span",[t._v("參數設定")])])],1):t._e(),t._v(" "),t.permissions.contains("microbiological-data-entry")&&t.permissions.contains("job-history-read")?r("li",{class:{active:t.$route.fullPath.match(/\/microOrganisms/)&&"2"!==t.$route.query.source}},[r("router-link",{attrs:{to:"/microOrganisms"}},[r("i",{staticClass:"fa fa-tag"}),t._v(" "),r("span",[t._v("數據輸入")])])],1):t._e(),t._v(" "),t.permissions.contains("data-analysis-table")?r("li",{class:{active:t.$route.fullPath.match(/\/dashboard/)}},[r("router-link",{attrs:{to:"/dashboard"}},[r("i",{staticClass:"fa fa-area-chart"}),t._v(" "),r("span",[t._v("數據分析表")])])],1):t._e()])])])}),[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("a",{attrs:{href:"javascript:void(0)"}},[r("i",{staticClass:"fa fa-car"}),t._v(" "),r("span",[t._v("採樣機器人")]),t._v(" "),r("span",{staticClass:"pull-right-container"},[r("i",{staticClass:"fa fa-angle-left pull-right"})])])},function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("a",{attrs:{href:"javascript:void(0)"}},[r("i",{staticClass:"fa fa-circle-o"}),t._v(" "),r("span",[t._v("任務")]),t._v(" "),r("span",{staticClass:"pull-right-container"},[r("i",{staticClass:"fa fa-angle-left pull-right"})])])}],!1,null,null,null).exports;const A={name:"AlarmView",props:{value:Object,title:{type:String,default:"提示訊息"},subTitle:String,content:[String,Number],alarmAt:String,borderTopColor:{type:String,default:"#FF0000"}}};var F=r(392),q={insert:"head",singleton:!1};E()(F.Z,q);F.Z.locals;const R=(0,v.Z)(A,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"alarm",class:{"alarm-collapsed":!t.alarmAt},style:"border-top: 10px solid "+t.borderTopColor+";"},[r("h1",[t._v(t._s(t.title))]),t._v(" "),r("div",{staticClass:"box-tools pull-right"},[r("button",{staticClass:"btn btn-box-tool",attrs:{type:"button"},on:{click:function(e){return t.$emit("close")}}},[r("i",{staticClass:"fa fa-times"})])]),t._v(" "),t.value?[r("div",{staticClass:"alarm-content"},[r("div",[t._v(t._s(t.subTitle))]),t._v(" "),r("div",[t._v(t._s(t.content))])]),t._v(" "),r("div",{staticClass:"alarm-ts"},[t._v("\n            "+t._s(t._f("datetime")(t.alarmAt))+"\n        ")])]:t._e()],2)}),[],!1,null,"690d3061",null).exports;function G(t){return G="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},G(t)}function z(){z=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function c(t,e,r,n){var o=e&&e.prototype instanceof d?e:d,i=Object.create(o.prototype),a=new C(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return L()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var s=b(a,r);if(s){if(s===u)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=l(t,e,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===u)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}(t,r,a),i}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var u={};function d(){}function h(){}function f(){}var p={};s(p,o,(function(){return this}));var m=Object.getPrototypeOf,v=m&&m(m(k([])));v&&v!==e&&r.call(v,o)&&(p=v);var g=f.prototype=d.prototype=Object.create(p);function y(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function _(t,e){function n(o,i,a,s){var c=l(t[o],t,i);if("throw"!==c.type){var u=c.arg,d=u.value;return d&&"object"==G(d)&&r.call(d,"__await")?e.resolve(d.__await).then((function(t){n("next",t,a,s)}),(function(t){n("throw",t,a,s)})):e.resolve(d).then((function(t){u.value=t,a(u)}),(function(t){return n("throw",t,a,s)}))}s(c.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function b(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,b(t,e),"throw"===e.method))return u;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var n=l(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,u;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,u):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,u)}function x(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function w(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function C(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(x,this),this.reset(!0)}function k(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:L}}function L(){return{value:void 0,done:!0}}return h.prototype=f,s(g,"constructor",f),s(f,"constructor",h),h.displayName=s(f,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===h||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,f):(t.__proto__=f,s(t,a,"GeneratorFunction")),t.prototype=Object.create(g),t},t.awrap=function(t){return{__await:t}},y(_.prototype),s(_.prototype,i,(function(){return this})),t.AsyncIterator=_,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new _(c(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},y(g),s(g,a,"Generator"),s(g,o,(function(){return this})),s(g,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=k,C.prototype={constructor:C,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(w),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=r.call(i,"catchLoc"),c=r.call(i,"finallyLoc");if(s&&c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,u):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),u},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),w(r),u}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;w(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:k(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),u}},t}function V(t,e,r,n,o,i,a){try{var s=t[i](a),c=s.value}catch(t){return void r(t)}s.done?e(c):Promise.resolve(c).then(n,o)}function Z(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function B(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Z(Object(r),!0).forEach((function(e){H(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Z(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function H(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}const U={components:{HeaderView:P,SidebarView:D,ClipLoader:d.Z,AlarmView:R},name:"AppLayout",computed:B(B({},(0,i.rn)({pageLoading:function(t){return t.pageLoading}})),{},{pollutionConditionActionColor:function(){var t=s().find(this.pollutionConditions,{name:"action"});return t?t.color:null}}),watch:{"modal.show":function(t){this.$store.commit("user/UPDATE_USER_MODAL",t)}},data:function(){return{alarms:[],microOrganisms:[{id:"microparticle_dot_5",name:"微粒子(0.5µm)"},{id:"microparticle_5",name:"微粒子(5µm)"},{id:"suspended",name:"懸浮微生物"},{id:"falling",name:"落下微生物"},{id:"contact",name:"接觸微生物"}],pollutionConditions:[]}},created:function(){document.body.className="skin-green-light sidebar-mini fixed wysihtml5-supported",this.fetchPollutionConditionData()},mounted:function(){var t=this;setInterval((function(){t.resizeContentHeight()}),100),this.subScribe()},beforeDestroy:function(){this.unSubscribe()},methods:{resizeContentHeight:function(){var t=document.getElementsByClassName("content-wrapper")[0];t&&(t.style.minHeight=window.innerHeight+"px")},subScribe:function(){var t=this;window.Echo.private("microOrganisms").listen("MicroOrganismCreated",(function(e){var r=e.microOrganism;r.score<=100||t.newMicroOrganismAlarm(r)})).listen("MicroOrganismUpdated",(function(e){var r=e.microOrganism;r.score<=100||t.newMicroOrganismAlarm(r)})),window.Echo.private("pollutionConditions").listen("PollutionConditionUpdated",(function(e){var r=e.pollutionCondition,n=s().findIndex(t.pollutionConditions,{id:r.id});-1!=n&&t.pollutionConditions.splice(n,1,r)}))},unSubscribe:function(){window.Echo.leave("microOrganisms"),window.Echo.leave("pollutionConditions")},getEmptyAlarm:function(){return{uuid:null,title:"行動值",sub_title:null,content:null,alarm_at:null,maintain_seconds:5,border_top_color:this.pollutionConditionActionColor}},clearAlarm:function(t){this.alarms[t].alarm_at=null;var e=this;setTimeout((function(){e.alarms.splice(t,1)}),800)},fetchPollutionConditionData:function(){var t,e=this;return(t=z().mark((function t(){var r,n,o;return z().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.loading=!0,t.prev=1,t.next=4,l().get("/api/pollutionConditions");case 4:0==(r=(r=t.sent).data).status&&(n=r.data,e.pollutionConditions=[],o=["action","warn","general","normal"],s().forEach(o,(function(t){var r=s().find(n.pollutionConditions,{name:t});r&&e.pollutionConditions.push(r)}))),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),e.guestRedirectHome(t.t0);case 12:e.loading=!1;case 13:case"end":return t.stop()}}),t,null,[[1,9]])})),function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){V(i,n,o,a,s,"next",t)}function s(t){V(i,n,o,a,s,"throw",t)}a(void 0)}))})()},newMicroOrganismAlarm:function(t){var e=this,r=s().find(this.microOrganisms,{id:t.organism_kind}),n=this.getEmptyAlarm();n.sub_title=r?"微生物類別：".concat(r.name):null,n.content="測量值：".concat(t.organism_value),n.alarm_at=o()().format("yyyy-MM-DD HH:mm:ss"),n.uuid=this.generateUUID(),n.maintain_seconds=1e3*(n.maintain_seconds+this.alarms.length),this.alarms.push(n),setTimeout((function(){var t=s().findIndex(e.alarms,{uuid:n.uuid});e.alarms[t].alarm_at=null,setTimeout((function(){var t=s().findIndex(e.alarms,{uuid:n.uuid});e.alarms.splice(t,1)}),800)}),n.maintain_seconds)}}};var Y=r(4106),W={insert:"head",singleton:!1};E()(Y.Z,W);Y.Z.locals;const X=(0,v.Z)(U,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[t.pageLoading?r("clip-loader",{staticClass:"loading",attrs:{color:"gray",size:"30px"}}):r("div",{staticClass:"app-layout"},[r("header-view"),t._v(" "),r("sidebar-view"),t._v(" "),r("div",{staticClass:"content-wrapper"},[r("router-view")],1)],1),t._v(" "),r("div",{staticClass:"alarms"},[t._l(t.alarms,(function(e,n){return[r("alarm-view",{key:e.uuid,attrs:{title:e.title,"sub-title":e.sub_title,content:e.content,"alarm-at":e.alarm_at,"border-top-color":e.border_top_color},on:{close:function(e){return t.clearAlarm(n)}},model:{value:t.alarms[n],callback:function(e){t.$set(t.alarms,n,e)},expression:"alarms[index]"}})]}))],2)],1)}),[],!1,null,"2b1aef27",null).exports},2001:(t,e,r)=>{"use strict";r.d(e,{Z:()=>u});function n(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function o(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}const i={computed:function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?n(Object(r),!0).forEach((function(e){o(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({},(0,r(629).rn)({pageLoading:function(t){return t.pageLoading}})),created:function(){document.body.style.overflow="auto",document.body.className="hold-transition login-page"}};var a=r(3379),s=r.n(a),c=r(8869),l={insert:"head",singleton:!1};s()(c.Z,l);c.Z.locals;const u=(0,r(1900).Z)(i,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return t.pageLoading?t._e():r("div",{staticClass:"auth-page"},[r("router-view")],1)}),[],!1,null,"3bb50fdc",null).exports},5234:(t,e,r)=>{"use strict";r.d(e,{Z:()=>O});var n=r(6486),o=r.n(n),i=r(2805),a=r(381),s=r.n(a);function c(t){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},c(t)}function l(){l=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function u(t,e,r,n){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new L(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return E()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var s=w(a,r);if(s){if(s===h)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=d(t,e,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===h)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}(t,r,a),i}function d(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var h={};function f(){}function p(){}function m(){}var v={};s(v,o,(function(){return this}));var g=Object.getPrototypeOf,y=g&&g(g(S([])));y&&y!==e&&r.call(y,o)&&(v=y);var _=m.prototype=f.prototype=Object.create(v);function b(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function x(t,e){function n(o,i,a,s){var l=d(t[o],t,i);if("throw"!==l.type){var u=l.arg,h=u.value;return h&&"object"==c(h)&&r.call(h,"__await")?e.resolve(h.__await).then((function(t){n("next",t,a,s)}),(function(t){n("throw",t,a,s)})):e.resolve(h).then((function(t){u.value=t,a(u)}),(function(t){return n("throw",t,a,s)}))}s(l.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return h;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return h}var n=d(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,h;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,h):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,h)}function C(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function k(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function L(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(C,this),this.reset(!0)}function S(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:E}}function E(){return{value:void 0,done:!0}}return p.prototype=m,s(_,"constructor",m),s(m,"constructor",p),p.displayName=s(m,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,m):(t.__proto__=m,s(t,a,"GeneratorFunction")),t.prototype=Object.create(_),t},t.awrap=function(t){return{__await:t}},b(x.prototype),s(x.prototype,i,(function(){return this})),t.AsyncIterator=x,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new x(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},b(_),s(_,a,"Generator"),s(_,o,(function(){return this})),s(_,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=S,L.prototype={constructor:L,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(k),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=r.call(i,"catchLoc"),c=r.call(i,"finallyLoc");if(s&&c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,h):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),k(r),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;k(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:S(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),h}},t}function u(t,e,r,n,o,i,a){try{var s=t[i](a),c=s.value}catch(t){return void r(t)}s.done?e(c):Promise.resolve(c).then(n,o)}var d=null;const h={name:"LocationPoint",components:{Drag:i.Z},props:{value:{type:Object,default:function(){return null}},scale:{type:Number,default:1},isDeploy:{type:Number,default:0},disabled:{type:Boolean,default:!1},diameter:{type:Number,default:20},viewType:{type:String,default:"location"},acceptanceGrades:{type:Array,default:function(){return[]}},pollutionConditions:{type:Array,default:function(){return[]}},cleanlinessGrade:String},watch:{value:function(t){this.location=t}},computed:{xPx:function(){return"x_px"},yPx:function(){return"y_px"},microOrganismColor:function(){if(!this.pollutionConditions||0==this.pollutionConditions.length||4!=this.pollutionConditions.length)return"";if(!this.location||!this.location.micro_organism)return"";var t=o().find(this.acceptanceGrades,{organism_kind:this.location.micro_organism.organism_kind,grade:this.cleanlinessGrade});return t?this.location.micro_organism.organism_value>t.action?this.pollutionConditions[0].color?this.pollutionConditions[0].color:"":this.location.micro_organism.organism_value<=t.action&&this.location.micro_organism.organism_value>t.warn?this.pollutionConditions[1].color?this.pollutionConditions[1].color:"":this.location.micro_organism.organism_value<=t.warn&&this.location.micro_organism.organism_value>t.general?this.pollutionConditions[2].color?this.pollutionConditions[2].color:"":this.location.micro_organism.organism_value<=t.normal?this.pollutionConditions[3].color?this.pollutionConditions[3].color:"":void 0:""},microOrganismScale:function(){var t=1;return this.location&&this.location.micro_organism?t=this.location.micro_organism.score<=1?1:this.location.micro_organism.score>=100?10:parseInt(this.location.micro_organism.score)/10:t},microOrganismZIndex:function(){return this.location&&this.location.micro_organism?(1/this.location.micro_organism.organism_value*1e3).toFixed(0):""}},data:function(){return{location:this.value,clickNum:0,isDraggableEvent:!1}},created:function(){this.value?this.location=o().cloneDeep(this.value):this.location={id:null,x:0,y:0,is_selected:!1,is_nearby:!1,region_mgmt_id:null},this.subScribe()},beforeDestroy:function(){this.unSubscribe()},methods:{onClick:function(){var t=this;this.isDraggableEvent||(this.clickNum++,1==this.clickNum?(this.$emit("input",this.location),this.location.is_selected?this.$emit("unselect"):this.$emit("select"),d=setTimeout((function(){t.clickNum=0}),400)):2==this.clickNum&&(clearTimeout(d),this.clickNum=0,this.location.id&&(this.$emit("select"),this.$emit("dbclick",this.location.id))))},onStop:function(t){var e=this;this.isDraggableEvent=!0,setTimeout((function(){e.isDraggableEvent=!1}),200),this.location.id?this.updatePosition(t):this.$emit("stop",t)},updatePosition:function(t){var e,r=this;return(e=l().mark((function e(){var n;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(n=o().cloneDeep(r.location))[r.xPx]=t.x,n[r.yPx]=t.y,n.is_selected=r.location.is_selected,n.is_nearby=r.location.is_nearby,r.location=n,r.$emit("update",r.location);case 7:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(t){u(i,n,o,a,s,"next",t)}function s(t){u(i,n,o,a,s,"throw",t)}a(void 0)}))})()},subScribe:function(){var t=this;window.Echo.private("microOrganisms").listen("MicroOrganismCreated",(function(e){var r=o().cloneDeep(e.microOrganism),n=o().cloneDeep(e.microOrganism.location);delete r.region_mgmt,n.id==t.location.id&&t.$set(t.location,"micro_organism",r)})).listen("MicroOrganismUpdated",(function(e){var r=o().cloneDeep(e.microOrganism),n=o().cloneDeep(e.microOrganism.location);delete r.region_mgmt,n.id==t.location.id&&(t.location.micro_organism&&t.location.micro_organism.Time&&s()(t.location.micro_organism.Time).unix()>s()(r.Time).unix()||t.$set(t.location,"micro_organism",r))})).listen("MicroOrganismDeleted",(function(e){var r=o().cloneDeep(e.microOrganism);t.location.micro_organism&&r.id==t.location.micro_organism.id&&(t.location.micro_organism=null)}))},unSubscribe:function(){window.Echo.leave("microOrganisms")}}};var f=r(3379),p=r.n(f),m=r(857),v={insert:"head",singleton:!1};p()(m.Z,v);m.Z.locals;var g=r(1900);const y=(0,g.Z)(h,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return t.location?r("div",[r("drag",{style:t.location.id?{position:"absolute",top:t.location[t.yPx]-t.diameter/2+"px",left:t.location[t.xPx]-t.diameter/2+"px",zIndex:""+t.microOrganismZIndex}:{position:"relative"},attrs:{containment:"#region",id:"location"+t.location.id,title:t.location.device_name,"drag-after-reset":!t.location.id,scale:t.scale,disabled:!!t.isDeploy||t.disabled,diameter:t.diameter},on:{click:t.onClick,drag:function(e){return t.$emit("drag",{x:e.x,y:e.y,location_id:t.location.id})},stop:t.onStop,mouseup:function(e){return t.$emit("mouseup")}}},[r("div",{staticClass:"location-point",class:{"disappear-location-point":t.location.id&&!t.location.is_show},style:"scale: calc("+1/t.scale+")"},[r("span",{directives:[{name:"show",rawName:"v-show",value:"location"==t.viewType&&t.location.nearby_location_length,expression:"viewType == 'location' && location.nearby_location_length"}],staticClass:"badge bg-red location-badge"},[t._v(t._s(t.location.nearby_location_length+1))]),t._v(" "),"pollution"==t.viewType?[t.location&&t.location.micro_organism?["suspended"==t.location.micro_organism.organism_kind?r("i",{staticClass:"micro-organism fa fa-play fa-fw fa-rotate-270",style:"color: "+t.microOrganismColor+"; scale: "+t.microOrganismScale,attrs:{"aria-hidden":"true"}}):"falling"==t.location.micro_organism.organism_kind?r("i",{staticClass:"micro-organism fa fa-square fa-fw",style:"color: "+t.microOrganismColor+"; scale: "+t.microOrganismScale,attrs:{"aria-hidden":"true"}}):"contact"==t.location.micro_organism.organism_kind?r("i",{staticClass:"micro-organism fa fa-circle fa-fw",style:"color: "+t.microOrganismColor+"; scale: "+t.microOrganismScale,attrs:{"aria-hidden":"true"}}):"microparticle_5"==t.location.micro_organism.organism_kind?r("i",{staticClass:"micro-organism fa fa-star fa-fw",style:"color: "+t.microOrganismColor+"; scale: "+t.microOrganismScale,attrs:{"aria-hidden":"true"}}):r("i",{staticClass:"micro-organism fa fa-square fa-fw fa-rotate-45",style:"color: "+t.microOrganismColor+"; scale: "+t.microOrganismScale,attrs:{"aria-hidden":"true"}})]:t._e()]:[t.location.id&&(t.location.is_selected||t.location.is_nearby)?r("img",{staticClass:"location-point",attrs:{src:"/img/vertex/4_selected.png?v=202401101740",alt:"站點"}}):r("img",{staticClass:"location-point",attrs:{src:"/img/vertex/4.png?v=202401101740",alt:"站點"}})]],2),t._v(" "),r("context-menu",{directives:[{name:"show",rawName:"v-show",value:t.location.id&&!t.isDeploy,expression:"location.id && !isDeploy"}],staticClass:"right-menu",attrs:{width:"100px"}},[r("context-menu-item",{staticClass:"right-menu-item",attrs:{label:"複製"},on:{click:function(e){return t.$emit("copy",t.location.id)}}},[r("div",[r("i",{staticClass:"glyphicon glyphicon-copy"}),t._v(" "),r("span",[t._v("複製")])])]),t._v(" "),r("context-menu-item",{staticClass:"right-menu-item",attrs:{label:"刪除"},on:{click:function(e){return t.$emit("delete",t.location.id)}}},[r("div",[r("i",{staticClass:"glyphicon glyphicon-trash"}),t._v(" "),r("span",[t._v("刪除")])])])],1)],1)],1):t._e()}),[],!1,null,"38a55698",null).exports;var _=r(8944),b=r(9669),x=r.n(b),w=r(9755);function C(t){return C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},C(t)}function k(){k=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function c(t,e,r,n){var o=e&&e.prototype instanceof d?e:d,i=Object.create(o.prototype),a=new L(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return E()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var s=b(a,r);if(s){if(s===u)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=l(t,e,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===u)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}(t,r,a),i}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var u={};function d(){}function h(){}function f(){}var p={};s(p,o,(function(){return this}));var m=Object.getPrototypeOf,v=m&&m(m(S([])));v&&v!==e&&r.call(v,o)&&(p=v);var g=f.prototype=d.prototype=Object.create(p);function y(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function _(t,e){function n(o,i,a,s){var c=l(t[o],t,i);if("throw"!==c.type){var u=c.arg,d=u.value;return d&&"object"==C(d)&&r.call(d,"__await")?e.resolve(d.__await).then((function(t){n("next",t,a,s)}),(function(t){n("throw",t,a,s)})):e.resolve(d).then((function(t){u.value=t,a(u)}),(function(t){return n("throw",t,a,s)}))}s(c.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function b(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,b(t,e),"throw"===e.method))return u;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var n=l(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,u;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,u):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,u)}function x(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function w(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function L(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(x,this),this.reset(!0)}function S(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:E}}function E(){return{value:void 0,done:!0}}return h.prototype=f,s(g,"constructor",f),s(f,"constructor",h),h.displayName=s(f,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===h||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,f):(t.__proto__=f,s(t,a,"GeneratorFunction")),t.prototype=Object.create(g),t},t.awrap=function(t){return{__await:t}},y(_.prototype),s(_.prototype,i,(function(){return this})),t.AsyncIterator=_,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new _(c(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},y(g),s(g,a,"Generator"),s(g,o,(function(){return this})),s(g,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=S,L.prototype={constructor:L,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(w),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=r.call(i,"catchLoc"),c=r.call(i,"finallyLoc");if(s&&c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,u):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),u},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),w(r),u}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;w(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:S(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),u}},t}function L(t,e,r,n,o,i,a){try{var s=t[i](a),c=s.value}catch(t){return void r(t)}s.done?e(c):Promise.resolve(c).then(n,o)}const S={name:"LocationListView",components:{LocationModal:_.Z,LocationPoint:y},computed:{regionMgmtCleanlinessGrade:function(){return this.regionMgmt&&this.regionMgmt.cleanliness_grade?this.regionMgmt.cleanliness_grade:null}},props:{value:{type:Array,default:function(){return[]}},regionMgmtId:[Number,String],selectedIds:{type:Array,default:function(){return[]}},isAllUnselected:{type:Boolean,default:!1},dragEdgePos:{type:Object,default:function(){return{x:-1,y:-1}}},dragPos:{type:Object,default:function(){return{x:-1,y:-1}}},nearbyLocation:{type:Object,default:function(){return null}},modal:{type:Object,default:function(){return{show:!1,nearbyLocations:[],location:null}}},scale:{type:Number,default:1},deleteId:{type:[Number,String]},disabled:{type:Boolean,default:!1},isDeploy:{type:Number,default:0},searchLocation:{type:String,default:null},regionMgmt:{type:Object,default:function(){return{mm:0,resolution:0,origin_x:0,origin_y:0,img_height:0}}},loading:{type:Boolean,default:!0},mapType:{type:String,default:"radar"},viewType:{type:String,default:"location"},acceptanceGrades:{type:Array,default:function(){return[]}},pollutionConditions:{type:Array,default:function(){return[]}}},watch:{value:function(t){var e=this,r=o().cloneDeep(t);this.locations=o().map(r,(function(t){t.is_selected=!1,t.is_nearby=!1;var n=e.getNearbyLocations({x_px:t.x_px,y_px:t.y_px},r);return t.nearby_location_length=n.length-1,t.is_show=0==n.length||t.id==n[n.length-1].id,t}))},isAllUnselected:function(t){t&&(this.allUnselect(),this.$emit("update:isAllUnselected",!1))},dragEdgePos:function(t){var e=o().findIndex(this.locations,(function(e){return(t.x-e.x_px)*(t.x-e.x_px)+(t.y-e.y_px)*(t.y-e.y_px)<=400}));-1==e?this.locations=o().map(this.locations,(function(t){return t.is_nearby=!1,t})):(this.locations[e].is_nearby=!0,this.locations=o().cloneDeep(this.locations)),this.$emit("update:nearbyLocation",this.locations[e])},modal:function(t){this.locationModal=t},"locationModal.show":{handler:function(t){this.isDeploy&&(t?this.changeSelectedId(this.locationModal.location,t):this.allUnselect())},deep:!0},searchLocation:function(t){if(this.oldLocationName&&w(this.oldLocationName).css("z-index","1"),""!=t){var e='[title|="'+t+'"]';if(w(e).css("z-index","3"),w(e).length>0){var r=w("html, body"),n=w(e);r.animate({scrollTop:n.offset().top-350},500,(function(){n.focus()}))}this.searchLocationName=e,this.oldLocationName=e}else this.searchLocationName=null},mapType:function(t){this.resetNearbyLocations()},locations:{handler:function(t){this.$store.commit("location/UPDATE_LOCATIONS",t)},deep:!0}},data:function(){return{locations:[],locationModal:{show:!1,nearbyLocations:[],location:null},searchLocationName:null,oldLocationName:null,locationPointDiameter:20}},methods:{fetchData:function(){var t,e=this;return(t=k().mark((function t(){var r,n,o;return k().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.$emit("update:loading",!0),t.prev=1,t.next=4,x().get("/api/locations",{params:{region_mgmt_id:e.regionMgmtId}});case 4:0==(r=(r=t.sent).data).status&&(n=r.data,o=n.locations,e.$emit("input",o)),t.next=13;break;case 9:return t.prev=9,t.t0=t.catch(1),t.next=13,e.guestRedirectHome(t.t0);case 13:e.$emit("update:loading",!1);case 14:case"end":return t.stop()}}),t,null,[[1,9]])})),function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){L(i,n,o,a,s,"next",t)}function s(t){L(i,n,o,a,s,"throw",t)}a(void 0)}))})()},allUnselect:function(){this.locations=o().map(this.locations,(function(t){return 0!=t.is_selected&&(t.is_selected=!1,t=o().cloneDeep(t)),t}))},changeSelectedId:function(t,e){var r=o().findIndex(this.locations,(function(e){return e.id==t.id}));if(-1!=r){this.locations[r].is_selected=e;var n=o().filter(this.locations,(function(t){return 1==t.is_selected}));this.$emit("update:selectedIds",o().map(n,(function(t){return t.id})))}},resetRow:function(t){t.is_selected=!1,t.is_nearby=!1;var e=o().findIndex(this.locations,(function(e){return e.id==t.id}));-1==e?this.locations.splice(0,0,t):this.locations.splice(e,1,t),this.$emit("update:dragPos",{location_id:t.id,x:t.x_px,y:t.y_px}),this.$emit("input",this.locations)},showModal:function(t,e){var r=o().findIndex(this.locations,(function(e){return e.id==t})),n=o().cloneDeep(this.locations[r]),i=this.getNearbyLocations({x_px:n.x_px,y_px:n.y_px});if(e&&(n.id=null,n.x_px=Math.abs(n.x_px-50)),"pollution"==this.viewType){var a=o().cloneDeep(n.micro_organism);a.location={x_px:n.x_px,y_px:n.y_px},this.$emit("dbclick",a)}else this.locationModal.nearbyLocations=i,this.locationModal.location=n,this.locationModal.show=!0,this.$emit("update:modal",this.locationModal)},getNearbyLocations:function(t,e){var r=t.x_px,n=t.y_px,i=o().filter(e||this.locations,(function(t){return r==t.x_px&&n==t.y_px}));return o().orderBy(i,["id"],["desc"])},onDrag:function(t){this.$emit("update:dragPos",t)},deleteRow:function(t){this.locations=o().filter(this.locations,(function(e){return e.id!=t})),this.$emit("input",this.locations),this.$emit("update:deleteId",t)},cancelFocusLocation:function(){null==this.searchLocationName?w(this.oldLocationName).css("z-index","1"):(w(this.searchLocationName).css("z-index","1"),this.searchLocationName=null)},copyLocation:function(t){this.showModal(t,!0)},generateColor:function(){for(var t="#",e=0;e<6;e++)t+="0123456789ABCDEF"[Math.floor(16*Math.random())];return t},resetNearbyLocations:function(){var t=this,e=o().cloneDeep(this.locations);this.locations=o().map(e,(function(r){var n=t.getNearbyLocations({x_px:r.x_px,y_px:r.y_px},e);return r.nearby_location_length=n.length-1,r}))}}};var E=r(3376),M={insert:"head",singleton:!1};p()(E.Z,M);E.Z.locals;const O=(0,g.Z)(S,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[t._l(t.locations,(function(e,n){return r("div",[r("location-point",{key:e.id,attrs:{scale:t.scale,"is-deploy":t.isDeploy,disabled:t.disabled,diameter:t.locationPointDiameter,"view-type":t.viewType,"acceptance-grades":t.acceptanceGrades,"pollution-conditions":t.pollutionConditions,"cleanliness-grade":t.regionMgmtCleanlinessGrade},on:{select:function(r){return t.changeSelectedId(e,!0)},unselect:function(r){return t.changeSelectedId(e,!1)},dbclick:t.showModal,drag:t.onDrag,update:t.resetRow,delete:t.deleteRow,copy:t.copyLocation},model:{value:t.locations[n],callback:function(e){t.$set(t.locations,n,e)},expression:"locations[i]"}})],1)})),t._v(" "),t.isDeploy?t._e():r("location-modal",{attrs:{location:t.locationModal.location,"nearby-locations":t.locationModal.nearbyLocations,"is-deploy":t.isDeploy,disabled:t.disabled},on:{"update:location":function(e){return t.$set(t.locationModal,"location",e)},"update:isDeploy":function(e){t.isDeploy=e},"update:is-deploy":function(e){t.isDeploy=e},update:t.resetRow,close:t.allUnselect},model:{value:t.locationModal.show,callback:function(e){t.$set(t.locationModal,"show",e)},expression:"locationModal.show"}}),t._v(" "),r("div",{class:t.searchLocationName?"black-mask":"",on:{click:t.cancelFocusLocation}})],2)}),[],!1,null,"4dc58d7b",null).exports},8944:(t,e,r)=>{"use strict";r.d(e,{Z:()=>v});var n=r(6486),o=r.n(n),i=r(9669),a=r.n(i);function s(t){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},s(t)}function c(){c=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function l(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,r){return t[e]=r}}function u(t,e,r,n){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new L(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return E()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var s=w(a,r);if(s){if(s===h)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=d(t,e,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===h)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}(t,r,a),i}function d(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var h={};function f(){}function p(){}function m(){}var v={};l(v,o,(function(){return this}));var g=Object.getPrototypeOf,y=g&&g(g(S([])));y&&y!==e&&r.call(y,o)&&(v=y);var _=m.prototype=f.prototype=Object.create(v);function b(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function x(t,e){function n(o,i,a,c){var l=d(t[o],t,i);if("throw"!==l.type){var u=l.arg,h=u.value;return h&&"object"==s(h)&&r.call(h,"__await")?e.resolve(h.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(h).then((function(t){u.value=t,a(u)}),(function(t){return n("throw",t,a,c)}))}c(l.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return h;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return h}var n=d(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,h;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,h):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,h)}function C(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function k(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function L(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(C,this),this.reset(!0)}function S(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:E}}function E(){return{value:void 0,done:!0}}return p.prototype=m,l(_,"constructor",m),l(m,"constructor",p),p.displayName=l(m,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,m):(t.__proto__=m,l(t,a,"GeneratorFunction")),t.prototype=Object.create(_),t},t.awrap=function(t){return{__await:t}},b(x.prototype),l(x.prototype,i,(function(){return this})),t.AsyncIterator=x,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new x(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},b(_),l(_,a,"Generator"),l(_,o,(function(){return this})),l(_,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=S,L.prototype={constructor:L,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(k),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=r.call(i,"catchLoc"),c=r.call(i,"finallyLoc");if(s&&c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,h):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),k(r),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;k(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:S(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),h}},t}function l(t,e,r,n,o,i,a){try{var s=t[i](a),c=s.value}catch(t){return void r(t)}s.done?e(c):Promise.resolve(c).then(n,o)}function u(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){l(i,n,o,a,s,"next",t)}function s(t){l(i,n,o,a,s,"throw",t)}a(void 0)}))}}const d={name:"LocationModal",$_veeValidate:{validator:"new"},components:{ClipLoader:r(9038).Z},props:{value:{type:Boolean,default:!1},location:Object,nearbyLocations:{type:Array,default:function(){return[]}},isDeploy:{type:Number,default:0},disabled:{type:Boolean,default:!1}},computed:{nearbyLocationIdx:function(){var t=this;return o().findIndex(this.nearbyLocations,(function(e){return e.id==t.form.id}))}},watch:{value:function(t){this.showModal=t,this.isDeploy&&(t?this.onShowModal():this.onHideModal())}},data:function(){return{sending:!1,showModal:this.value,form:{}}},methods:{onShowModal:function(){var t=this;return u(c().mark((function e(){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.form=o().cloneDeep(t.location),t.resetFormValidate();case 2:case"end":return e.stop()}}),e)})))()},onHideModal:function(){this.resetForm(),this.$emit("input",!1),this.$emit("close")},fetchData:function(){var t=this;return u(c().mark((function e(){var r,n;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,a().get("/api/locations/".concat(t.form.id));case 3:0==(r=(r=e.sent).data).status&&(n=r.data,t.form=n.location),e.next=12;break;case 8:return e.prev=8,e.t0=e.catch(0),e.next=12,t.guestRedirectHome(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,8]])})))()},submit:function(){var t=this;return u(c().mark((function e(){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.validate();case 2:if(e.sent){e.next=5;break}return e.abrupt("return");case 5:t.form.id||(t.form.id=t.generateUUID()),t.$emit("update",t.form),t.$emit("close"),t.showModal=!1;case 9:case"end":return e.stop()}}),e)})))()},resetForm:function(){this.form={id:null,build:null,floors:null,room:null,vertex_id:null,vertex_name:null,device_name:null,copy_id:null,x:null,y:null,x_px:null,y_px:null},this.resetFormValidate()},switchVertex:function(t){var e=null;t?(this.nearbyLocations[this.nearbyLocationIdx+1].id,e=this.nearbyLocations[this.nearbyLocationIdx+1]):(this.nearbyLocations[this.nearbyLocationIdx-1].id,e=this.nearbyLocations[this.nearbyLocationIdx-1]),this.$emit("update:location",e),this.resetForm();var r=this;this.$nextTick((function(){r.onShowModal()}))}}};var h=r(3379),f=r.n(h),p=r(4983),m={insert:"head",singleton:!1};f()(p.Z,m);p.Z.locals;const v=(0,r(1900).Z)(d,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[t.isDeploy&&t.showModal?[r("div",{staticClass:"info-block"},[r("div",{staticClass:"box box-default",staticStyle:{"margin-bottom":"0"}},[t._m(0),t._v(" "),r("div",{staticClass:"box-body",staticStyle:{display:"block"}},[r("div",{staticClass:"form-horizontal"},[r("div",{staticClass:"form-group"},[r("label",{staticClass:"col-md-3 control-label",staticStyle:{"font-size":"12pt"}},[t._v("專案：")]),t._v(" "),r("div",{staticClass:"col-md-9",staticStyle:{"font-size":"12pt"}},[r("p",{staticClass:"form-control-static"},[t._v(t._s(t.form.build))])])]),t._v(" "),r("div",{staticClass:"form-group"},[r("label",{staticClass:"col-md-3 control-label",staticStyle:{"font-size":"12pt"}},[t._v("樓層：")]),t._v(" "),r("div",{staticClass:"col-md-9",staticStyle:{"font-size":"12pt"}},[r("p",{staticClass:"form-control-static"},[t._v(t._s(t.form.floors))])])]),t._v(" "),r("div",{staticClass:"form-group"},[r("label",{staticClass:"col-md-3 control-label",staticStyle:{"font-size":"12pt"}},[t._v("房間名稱：")]),t._v(" "),r("div",{staticClass:"col-md-9",staticStyle:{"font-size":"12pt"}},[r("p",{staticClass:"form-control-static"},[t._v(t._s(t.form.room))])])]),t._v(" "),r("div",{staticClass:"form-group"},[r("label",{staticClass:"col-md-3 control-label",staticStyle:{"font-size":"12pt"}},[t._v("裝置名稱：")]),t._v(" "),r("div",{staticClass:"col-md-9",staticStyle:{"font-size":"12pt"}},[r("p",{staticClass:"form-control-static"},[t._v(t._s(t.form.device_name))])])]),t._v(" "),r("div",{staticClass:"form-group"},[r("label",{staticClass:"col-md-3 control-label",staticStyle:{"font-size":"12pt"}},[t._v("X軸：")]),t._v(" "),r("div",{staticClass:"col-md-9",staticStyle:{"font-size":"12pt"}},[r("p",{staticClass:"form-control-static"},[t._v(t._s(t.form.x_px)+" px")])])]),t._v(" "),r("div",{staticClass:"form-group"},[r("label",{staticClass:"col-md-3 control-label",staticStyle:{"font-size":"12pt"}},[t._v("Y軸：")]),t._v(" "),r("div",{staticClass:"col-md-9",staticStyle:{"font-size":"12pt"}},[r("p",{staticClass:"form-control-static"},[t._v(t._s(t.form.y_px)+" px")])])]),t._v(" "),r("div",{staticClass:"text-right",staticStyle:{"margin-right":"15px"}},[t.nearbyLocations.length>1?[r("button",{directives:[{name:"show",rawName:"v-show",value:t.nearbyLocationIdx<t.nearbyLocations.length-1,expression:"nearbyLocationIdx < nearbyLocations.length - 1"}],staticClass:"btn btn-default",attrs:{type:"button",title:"上一個站點"},on:{click:function(e){return t.switchVertex(!0)}}},[t._v("上一個站點")]),t._v(" "),r("button",{directives:[{name:"show",rawName:"v-show",value:t.nearbyLocationIdx>0,expression:"nearbyLocationIdx  > 0"}],staticClass:"btn btn-default",attrs:{type:"button",title:"下一個站點"},on:{click:function(e){return t.switchVertex(!1)}}},[t._v("下一個站點")])]:t._e()],2)])])])])]:r("modal",{attrs:{size:"lg",footer:!1,backdrop:!1,"append-to-body":!0,keyboard:!1},on:{show:t.onShowModal,hide:t.onHideModal},model:{value:t.showModal,callback:function(e){t.showModal=e},expression:"showModal"}},[r("div",{attrs:{slot:"title"},slot:"title"},[t._v(t._s(t.form.id?"更新站點":"新增站點"))]),t._v(" "),r("div",{attrs:{slot:"default"},slot:"default"},[r("form",{staticClass:"form-horizontal",attrs:{novalidate:""},on:{submit:function(e){return e.preventDefault(),t.submit.apply(null,arguments)}}},[r("div",{staticClass:"form-group"},[r("label",{staticClass:"col-md-3 control-label"},[t._v("專案"),r("span",{staticClass:"is-danger"},[t._v("  ")])]),t._v(" "),r("div",{staticClass:"col-md-9"},[r("p",{staticClass:"form-control-static"},[t._v(t._s(t.form.build))])])]),t._v(" "),r("div",{staticClass:"form-group"},[r("label",{staticClass:"col-md-3 control-label"},[t._v("樓層"),r("span",{staticClass:"is-danger"},[t._v("  ")])]),t._v(" "),r("div",{staticClass:"col-md-9"},[r("p",{staticClass:"form-control-static"},[t._v(t._s(t.form.floors))])])]),t._v(" "),r("div",{staticClass:"form-group"},[r("label",{staticClass:"col-md-3 control-label"},[t._v("房間名稱"),r("span",{staticClass:"is-danger"},[t._v("  ")])]),t._v(" "),r("div",{staticClass:"col-md-9"},[r("p",{staticClass:"form-control-static"},[t._v(t._s(t.form.room))])])]),t._v(" "),r("div",{staticClass:"form-group"},[r("label",{staticClass:"col-md-3 control-label"},[t._v("裝置名稱"),r("span",{staticClass:"is-danger"},[t._v(" *")])]),t._v(" "),r("div",{staticClass:"col-md-9"},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.form.device_name,expression:"form.device_name"},{name:"validate",rawName:"v-validate",value:{required:!0,location_duplicate:t.form},expression:"{\n                            required: true,\n                            location_duplicate: form\n                        }"}],staticClass:"form-control",attrs:{name:"device_name",placeholder:"請填寫裝置名稱"},domProps:{value:t.form.device_name},on:{input:function(e){e.target.composing||t.$set(t.form,"device_name",e.target.value)}}}),t._v(" "),r("span",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("device_name:required"),expression:"errors.has('device_name:required')"}],staticClass:"help is-danger"},[t._v("請填寫裝置名稱")]),t._v(" "),r("span",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("device_name:location_duplicate"),expression:"errors.has(`device_name:location_duplicate`)"}],staticClass:"help is-danger"},[t._v("已存在相同裝置名稱的點位")])])]),t._v(" "),r("div",{staticClass:"form-group"},[r("label",{staticClass:"col-md-3 control-label"},[t._v("X軸"),r("span",{staticClass:"is-danger"},[t._v("  ")])]),t._v(" "),r("div",{staticClass:"col-md-9"},[r("div",{staticClass:"input-group"},[r("input",{directives:[{name:"model",rawName:"v-model.number",value:t.form.x_px,expression:"form.x_px",modifiers:{number:!0}},{name:"validate",rawName:"v-validate",value:"required|decimal",expression:"'required|decimal'"}],staticClass:"form-control",attrs:{name:"x_px"},domProps:{value:t.form.x_px},on:{input:function(e){e.target.composing||t.$set(t.form,"x_px",t._n(e.target.value))},blur:function(e){return t.$forceUpdate()}}}),t._v(" "),r("div",{staticClass:"input-group-addon"},[t._v("px")])]),t._v(" "),r("span",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("x_px:required"),expression:"errors.has('x_px:required')"}],staticClass:"help is-danger"},[t._v("請填寫X軸")]),t._v(" "),r("span",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("x_px:decimal"),expression:"errors.has('x_px:decimal')"}],staticClass:"help is-danger"},[t._v("請填寫數字")])])]),t._v(" "),r("div",{staticClass:"form-group"},[r("label",{staticClass:"col-md-3 control-label"},[t._v("Y軸"),r("span",{staticClass:"is-danger"},[t._v("  ")])]),t._v(" "),r("div",{staticClass:"col-md-9"},[r("div",{staticClass:"input-group"},[r("input",{directives:[{name:"model",rawName:"v-model.number",value:t.form.y_px,expression:"form.y_px",modifiers:{number:!0}},{name:"validate",rawName:"v-validate",value:"required|decimal",expression:"'required|decimal'"}],staticClass:"form-control",attrs:{name:"y_px"},domProps:{value:t.form.y_px},on:{input:function(e){e.target.composing||t.$set(t.form,"y_px",t._n(e.target.value))},blur:function(e){return t.$forceUpdate()}}}),t._v(" "),r("div",{staticClass:"input-group-addon"},[t._v("px")])]),t._v(" "),r("span",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("y_px:required"),expression:"errors.has('y_px:required')"}],staticClass:"help is-danger"},[t._v("請填寫Y軸")]),t._v(" "),r("span",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("y_px:decimal"),expression:"errors.has('y_px:decimal')"}],staticClass:"help is-danger"},[t._v("請填寫數字")])])]),t._v(" "),r("div",{staticClass:"text-right"},[t.nearbyLocations.length>1?[r("button",{directives:[{name:"show",rawName:"v-show",value:t.nearbyLocationIdx<t.nearbyLocations.length-1,expression:"nearbyLocationIdx < nearbyLocations.length - 1"}],staticClass:"btn btn-default",attrs:{type:"button",title:"上一個站點"},on:{click:function(e){return t.switchVertex(!0)}}},[t._v("上一個站點")]),t._v(" "),r("button",{directives:[{name:"show",rawName:"v-show",value:t.nearbyLocationIdx>0,expression:"nearbyLocationIdx > 0"}],staticClass:"btn btn-default",attrs:{type:"button",title:"下一個站點"},on:{click:function(e){return t.switchVertex(!1)}}},[t._v("下一個站點")])]:t._e(),t._v(" "),r("button",{staticClass:"btn btn-light-green",attrs:{title:"送出"}},[t._v("送出")]),t._v(" "),r("button",{staticClass:"btn btn-default",attrs:{type:"button",title:"取消"},on:{click:function(e){t.showModal=!1}}},[t._v("取消")])],2)])])])],2)}),[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"box-header with-border"},[r("h3",{staticClass:"box-title"},[t._v("站點資訊")])])}],!1,null,"659dbac8",null).exports},9916:(t,e,r)=>{"use strict";r.d(e,{Z:()=>_});var n=r(9038),o=r(9669),i=r.n(o),a=r(6518);function s(t){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},s(t)}function c(){c=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function l(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,r){return t[e]=r}}function u(t,e,r,n){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new L(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return E()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var s=w(a,r);if(s){if(s===h)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=d(t,e,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===h)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}(t,r,a),i}function d(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var h={};function f(){}function p(){}function m(){}var v={};l(v,o,(function(){return this}));var g=Object.getPrototypeOf,y=g&&g(g(S([])));y&&y!==e&&r.call(y,o)&&(v=y);var _=m.prototype=f.prototype=Object.create(v);function b(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function x(t,e){function n(o,i,a,c){var l=d(t[o],t,i);if("throw"!==l.type){var u=l.arg,h=u.value;return h&&"object"==s(h)&&r.call(h,"__await")?e.resolve(h.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(h).then((function(t){u.value=t,a(u)}),(function(t){return n("throw",t,a,c)}))}c(l.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return h;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return h}var n=d(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,h;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,h):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,h)}function C(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function k(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function L(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(C,this),this.reset(!0)}function S(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:E}}function E(){return{value:void 0,done:!0}}return p.prototype=m,l(_,"constructor",m),l(m,"constructor",p),p.displayName=l(m,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,m):(t.__proto__=m,l(t,a,"GeneratorFunction")),t.prototype=Object.create(_),t},t.awrap=function(t){return{__await:t}},b(x.prototype),l(x.prototype,i,(function(){return this})),t.AsyncIterator=x,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new x(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},b(_),l(_,a,"Generator"),l(_,o,(function(){return this})),l(_,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=S,L.prototype={constructor:L,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(k),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=r.call(i,"catchLoc"),c=r.call(i,"finallyLoc");if(s&&c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,h):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),k(r),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;k(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:S(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),h}},t}function l(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function u(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?l(Object(r),!0).forEach((function(e){d(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function d(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function h(t,e,r,n,o,i,a){try{var s=t[i](a),c=s.value}catch(t){return void r(t)}s.done?e(c):Promise.resolve(c).then(n,o)}function f(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){h(i,n,o,a,s,"next",t)}function s(t){h(i,n,o,a,s,"throw",t)}a(void 0)}))}}const p={name:"MapListPage",components:{ProjectModal:r(7301).Z,MapModal:a.Z,ClipLoader:n.Z},data:function(){return{loading:!0,maps:[],pagination:{current_page:1,last_page:1},form:{pagination:1,page:this.$route.query.page?parseInt(this.$route.query.page,10):1},modal:{id:null,show:!1}}},created:function(){this.fetchData()},methods:{fetchData:function(){var t=arguments,e=this;return f(c().mark((function r(){var n,o;return c().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n=t.length>0&&void 0!==t[0]?t[0]:0,e.loading=!0,r.prev=2,r.next=5,i().get("/api/maps",{params:u(u({},e.form),{},{refresh:n})});case 5:0===(o=r.sent).data.status&&(e.maps=o.data.data.maps,o.data.data.pagination&&(e.pagination=o.data.data.pagination)),r.next=13;break;case 9:return r.prev=9,r.t0=r.catch(2),r.next=13,e.guestRedirectHome(r.t0);case 13:return r.prev=13,e.loading=!1,r.finish(13);case 16:case"end":return r.stop()}}),r,null,[[2,9,13,16]])})))()},changePage:function(t){this.form.page=t,this.$router.push({path:"/maps",query:u({},this.form)})},showModal:function(t){this.modal.id=t,this.modal.show=!0}}};var m=r(3379),v=r.n(m),g=r(3141),y={insert:"head",singleton:!1};v()(g.Z,y);g.Z.locals;const _=(0,r(1900).Z)(p,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("section",{staticClass:"content-header clearfix"},[r("span",[t._v("地圖")]),t._v(" "),r("div",{staticClass:"pull-right"},[r("button",{staticClass:"btn btn-default",on:{click:function(e){return t.fetchData(1)}}},[r("i",{staticClass:"fa fa-refresh"}),t._v("\n                同步更新\n            ")])])]),t._v(" "),r("section",{staticClass:"content"},[r("div",{staticClass:"col-xs-12"},[r("div",{staticClass:"box"},[r("div",{staticClass:"box-body"},[t.loading?t._e():r("div",[r("table",{staticClass:"table table-bordered table-hover break-table"},[t._m(0),t._v(" "),r("tbody",t._l(t.maps,(function(e){return r("tr",[r("td",{attrs:{"data-title":"編號"}},[t._v(t._s(e.guid))]),t._v(" "),r("td",{attrs:{"data-title":"地圖名稱"}},[r("span",[t._v(t._s(e.name))]),t._v(" "),e.is_active?[t._v("\n                                         "),r("span",{staticClass:"label label-success"},[t._v("使用中")])]:t._e()],2),t._v(" "),r("td",{staticClass:"centered",attrs:{"data-title":"房間號"}},[t._v(t._s(e.region))]),t._v(" "),r("td",{attrs:{"data-title":"地圖詳細資訊"}},[r("p",[t._v("地圖原點 ：("+t._s(e.origin_x)+", "+t._s(e.origin_y)+")")]),t._v(" "),r("p",[t._v("地圖解析度："+t._s(e.resolution))])]),t._v(" "),r("td",{staticClass:"centered",attrs:{"data-title":"點位"}},[r("button",{staticClass:"btn btn-link",attrs:{type:"button"},on:{click:function(r){return t.showModal(e.guid)}}},[t._v(t._s(e.locations_count))])])])})),0)]),t._v(" "),r("div",{staticClass:"text-center"},[r("pagination",{attrs:{"direction-links":!1,"boundary-links":!0,size:"sm","total-page":t.pagination.last_page,"max-size":10},on:{change:t.changePage},model:{value:t.pagination.current_page,callback:function(e){t.$set(t.pagination,"current_page",e)},expression:"pagination.current_page"}})],1)]),t._v(" "),t.loading?r("clip-loader",{staticClass:"loading",attrs:{color:"gray",size:"30px"}}):t._e()],1)])])]),t._v(" "),r("map-modal",{attrs:{"data-id":t.modal.id},model:{value:t.modal.show,callback:function(e){t.$set(t.modal,"show",e)},expression:"modal.show"}})],1)}),[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("thead",[r("tr",{staticClass:"table-head"},[r("th",{staticClass:"hide-td"},[t._v("編號")]),t._v(" "),r("th",{staticClass:"hide-td"},[t._v("地圖名稱")]),t._v(" "),r("th",{staticClass:"hide-td centered"},[t._v("房間號")]),t._v(" "),r("th",{staticClass:"hide-td"},[t._v("地圖詳細資訊")]),t._v(" "),r("th",{staticClass:"hide-td centered"},[t._v("點位")])])])}],!1,null,"32bcce24",null).exports},6518:(t,e,r)=>{"use strict";r.d(e,{Z:()=>l});var n=r(9669),o=r.n(n);function i(t){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i(t)}function a(){a=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",s=n.asyncIterator||"@@asyncIterator",c=n.toStringTag||"@@toStringTag";function l(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,r){return t[e]=r}}function u(t,e,r,n){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new L(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return E()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var s=w(a,r);if(s){if(s===h)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=d(t,e,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===h)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}(t,r,a),i}function d(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var h={};function f(){}function p(){}function m(){}var v={};l(v,o,(function(){return this}));var g=Object.getPrototypeOf,y=g&&g(g(S([])));y&&y!==e&&r.call(y,o)&&(v=y);var _=m.prototype=f.prototype=Object.create(v);function b(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function x(t,e){function n(o,a,s,c){var l=d(t[o],t,a);if("throw"!==l.type){var u=l.arg,h=u.value;return h&&"object"==i(h)&&r.call(h,"__await")?e.resolve(h.__await).then((function(t){n("next",t,s,c)}),(function(t){n("throw",t,s,c)})):e.resolve(h).then((function(t){u.value=t,s(u)}),(function(t){return n("throw",t,s,c)}))}c(l.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return h;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return h}var n=d(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,h;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,h):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,h)}function C(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function k(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function L(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(C,this),this.reset(!0)}function S(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:E}}function E(){return{value:void 0,done:!0}}return p.prototype=m,l(_,"constructor",m),l(m,"constructor",p),p.displayName=l(m,c,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,m):(t.__proto__=m,l(t,c,"GeneratorFunction")),t.prototype=Object.create(_),t},t.awrap=function(t){return{__await:t}},b(x.prototype),l(x.prototype,s,(function(){return this})),t.AsyncIterator=x,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new x(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},b(_),l(_,c,"Generator"),l(_,o,(function(){return this})),l(_,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=S,L.prototype={constructor:L,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(k),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=r.call(i,"catchLoc"),c=r.call(i,"finallyLoc");if(s&&c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,h):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),k(r),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;k(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:S(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),h}},t}function s(t,e,r,n,o,i,a){try{var s=t[i](a),c=s.value}catch(t){return void r(t)}s.done?e(c):Promise.resolve(c).then(n,o)}const c={name:"MapModal",$_veeValidate:{validator:"new"},components:{ClipLoader:r(9038).Z},props:{value:{type:Boolean,default:!1},dataId:[Number,String]},watch:{value:function(t){this.showModal=t}},data:function(){return{showModal:this.value,loading:!1,map:{}}},created:function(){},methods:{fetchData:function(){var t,e=this;return(t=a().mark((function t(){var r,n;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,e.loading=!0,t.next=4,o().get("/api/maps/".concat(e.dataId));case 4:0==(r=(r=t.sent).data).status&&(n=r.data,e.map=n.map),t.next=13;break;case 9:return t.prev=9,t.t0=t.catch(0),t.next=13,e.guestRedirectHome(t.t0);case 13:return t.prev=13,e.loading=!1,t.finish(13);case 16:case"end":return t.stop()}}),t,null,[[0,9,13,16]])})),function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){s(i,n,o,a,c,"next",t)}function c(t){s(i,n,o,a,c,"throw",t)}a(void 0)}))})()},onShowModal:function(){this.dataId&&this.fetchData()},onHideModal:function(){this.$emit("input",!1)}}};const l=(0,r(1900).Z)(c,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("modal",{attrs:{footer:!1,backdrop:!1,"append-to-body":!0,keyboard:!1},on:{show:t.onShowModal,hide:t.onHideModal},model:{value:t.showModal,callback:function(e){t.showModal=e},expression:"showModal"}},[r("div",{attrs:{slot:"title"},slot:"title"},[t._v("所有點位")]),t._v(" "),r("div",{attrs:{slot:"default"},slot:"default"},[t.loading?r("clip-loader",{staticClass:"loading",attrs:{color:"gray",size:"30px"}}):r("table",{staticClass:"table table-bordered table-hover break-table"},[r("thead",[r("tr",{staticClass:"table-head"},[r("th",{staticClass:"hide-td"},[t._v("點位名稱")]),t._v(" "),r("th",{staticClass:"hide-td centered"},[t._v("位置")])])]),t._v(" "),r("tbody",t._l(t.map.locations,(function(e){return r("tr",[r("td",{attrs:{"data-title":"編號"}},[t._v(t._s(e.device_name))]),t._v(" "),r("td",{staticClass:"centered",attrs:{"data-title":"房間號"}},[null!==e.x&&null!==e.y?[t._v("\n                        ("+t._s(e.x)+", "+t._s(e.y)+")\n                    ")]:[t._v("\n                        未設定\n                    ")]],2)])})),0)])],1)])}),[],!1,null,"210d8f14",null).exports},8813:(t,e,r)=>{"use strict";r.d(e,{Z:()=>p});var n=r(9755),o=r.n(n),i=r(6486),a=r.n(i),s=r(9669),c=r.n(s);function l(t){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},l(t)}function u(){u=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function c(t,e,r,n){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new L(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return E()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var s=w(a,r);if(s){if(s===h)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=d(t,e,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===h)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}(t,r,a),i}function d(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var h={};function f(){}function p(){}function m(){}var v={};s(v,o,(function(){return this}));var g=Object.getPrototypeOf,y=g&&g(g(S([])));y&&y!==e&&r.call(y,o)&&(v=y);var _=m.prototype=f.prototype=Object.create(v);function b(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function x(t,e){function n(o,i,a,s){var c=d(t[o],t,i);if("throw"!==c.type){var u=c.arg,h=u.value;return h&&"object"==l(h)&&r.call(h,"__await")?e.resolve(h.__await).then((function(t){n("next",t,a,s)}),(function(t){n("throw",t,a,s)})):e.resolve(h).then((function(t){u.value=t,a(u)}),(function(t){return n("throw",t,a,s)}))}s(c.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return h;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return h}var n=d(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,h;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,h):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,h)}function C(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function k(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function L(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(C,this),this.reset(!0)}function S(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:E}}function E(){return{value:void 0,done:!0}}return p.prototype=m,s(_,"constructor",m),s(m,"constructor",p),p.displayName=s(m,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,m):(t.__proto__=m,s(t,a,"GeneratorFunction")),t.prototype=Object.create(_),t},t.awrap=function(t){return{__await:t}},b(x.prototype),s(x.prototype,i,(function(){return this})),t.AsyncIterator=x,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new x(c(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},b(_),s(_,a,"Generator"),s(_,o,(function(){return this})),s(_,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=S,L.prototype={constructor:L,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(k),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=r.call(i,"catchLoc"),c=r.call(i,"finallyLoc");if(s&&c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,h):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),k(r),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;k(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:S(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),h}},t}function d(t,e,r,n,o,i,a){try{var s=t[i](a),c=s.value}catch(t){return void r(t)}s.done?e(c):Promise.resolve(c).then(n,o)}function h(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){d(i,n,o,a,s,"next",t)}function s(t){d(i,n,o,a,s,"throw",t)}a(void 0)}))}}const f={name:"MicroOrganismKindListSelect",props:{value:{type:[String,Array]},valueColumn:{type:String,default:"id"},optionColumn:{type:String,default:"name"},disabled:{type:Boolean,default:!1},placeholder:{type:String,default:"請選擇"},color:{type:String,default:"theme-blue"},multiple:{type:Boolean,default:!1},items:{type:Array,default:function(){return null}},id:String,selectClass:String,selectStyle:String},watch:{value:function(t){this.multiple?o()(this.$refs.select2).select2("data",a().map(t,(function(t){return t}))):o()(this.$refs.select2).select2("data",[t]),this.refresh()},items:function(t){var e=this;return h(u().mark((function r(){return u().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(null!==t){r.next=5;break}return r.next=3,e.fetchData();case 3:r.next=6;break;case 5:e.microOrganisms=t;case 6:e.setSelect2Val(),e.init();case 8:case"end":return r.stop()}}),r)})))()}},data:function(){return{microOrganisms:[]}},created:function(){var t=this;return h(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==t.items){e.next=5;break}return e.next=3,t.fetchData();case 3:e.next=6;break;case 5:t.microOrganisms=t.items;case 6:t.setSelect2Val();case 7:case"end":return e.stop()}}),e)})))()},mounted:function(){this.init()},methods:{init:function(){var t=o()(this.$refs.select2),e=this;t.select2({dropdownAutoWidth:!0,width:"auto",minimumResultsForSearch:-1,allowClear:!0,closeOnSelect:!this.multiple,language:{noResults:function(){return"查無選項"}}}),t.on("select2:select",(function(t){e.setVal()})),t.on("select2:unselect",(function(t){e.setVal()}))},fetchData:function(){var t=this;return h(u().mark((function e(){var r,n;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.loading=!0,e.prev=1,e.next=4,c().get("/api/microOrganisms");case 4:0==(r=(r=e.sent).data).status&&(n=r.data,t.microOrganisms=n.microOrganisms),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),t.guestRedirectHome(e.t0);case 12:case"end":return e.stop()}}),e,null,[[1,9]])})))()},setSelect2Val:function(){var t=this;this.$nextTick((function(){t.multiple?o()(t.$refs.select2).val(a().map(t.value,(function(t){return t}))):o()(t.$refs.select2).val([t.value]),o()(t.$refs.select2).trigger("change")}))},setVal:function(){var t=o()(this.$refs.select2).select2("data");this.multiple?this.$emit("input",a().map(t,(function(t){return t.id}))):t.length>0?this.$emit("input",t[0].id):this.$emit("input",null),this.$emit("change")},refresh:function(){o()(this.$refs.select2).val(null).trigger("change"),o()(this.$refs.select2).select2("destroy"),this.init(),this.setSelect2Val()}}};const p=(0,r(1900).Z)(f,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{class:[t.color]},[r("select",{ref:"select2",class:t.selectClass,style:t.selectStyle,attrs:{id:t.id,"data-placeholder":t.placeholder,multiple:t.multiple,disabled:t.disabled}},t._l(t.microOrganisms,(function(e){return r("option",{domProps:{value:e[t.valueColumn]}},[t._v("\n            "+t._s(e[t.optionColumn])+"\n        ")])})),0)])}),[],!1,null,null,null).exports},3968:(t,e,r)=>{"use strict";r.d(e,{Z:()=>H});var n=r(6486),o=r.n(n),i=r(9669),a=r.n(i),s=r(381),c=r.n(s),l=r(8495),u=r(9038),d=r(6875),h=r(9014),f=r(2059),p=r(9755),m=r.n(p);function v(t){return v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},v(t)}function g(){g=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function c(t,e,r,n){var o=e&&e.prototype instanceof d?e:d,i=Object.create(o.prototype),a=new L(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return E()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var s=w(a,r);if(s){if(s===u)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=l(t,e,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===u)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}(t,r,a),i}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var u={};function d(){}function h(){}function f(){}var p={};s(p,o,(function(){return this}));var m=Object.getPrototypeOf,y=m&&m(m(S([])));y&&y!==e&&r.call(y,o)&&(p=y);var _=f.prototype=d.prototype=Object.create(p);function b(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function x(t,e){function n(o,i,a,s){var c=l(t[o],t,i);if("throw"!==c.type){var u=c.arg,d=u.value;return d&&"object"==v(d)&&r.call(d,"__await")?e.resolve(d.__await).then((function(t){n("next",t,a,s)}),(function(t){n("throw",t,a,s)})):e.resolve(d).then((function(t){u.value=t,a(u)}),(function(t){return n("throw",t,a,s)}))}s(c.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return u;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var n=l(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,u;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,u):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,u)}function C(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function k(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function L(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(C,this),this.reset(!0)}function S(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:E}}function E(){return{value:void 0,done:!0}}return h.prototype=f,s(_,"constructor",f),s(f,"constructor",h),h.displayName=s(f,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===h||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,f):(t.__proto__=f,s(t,a,"GeneratorFunction")),t.prototype=Object.create(_),t},t.awrap=function(t){return{__await:t}},b(x.prototype),s(x.prototype,i,(function(){return this})),t.AsyncIterator=x,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new x(c(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},b(_),s(_,a,"Generator"),s(_,o,(function(){return this})),s(_,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=S,L.prototype={constructor:L,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(k),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=r.call(i,"catchLoc"),c=r.call(i,"finallyLoc");if(s&&c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,u):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),u},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),k(r),u}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;k(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:S(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),u}},t}function y(t,e,r,n,o,i,a){try{var s=t[i](a),c=s.value}catch(t){return void r(t)}s.done?e(c):Promise.resolve(c).then(n,o)}function _(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){y(i,n,o,a,s,"next",t)}function s(t){y(i,n,o,a,s,"throw",t)}a(void 0)}))}}const b={name:"LocationListSelect",props:{value:{type:[Array,Number,String]},valueProp:{type:String,default:"id"},color:{type:String,default:"theme-blue"},multiple:{type:Boolean,default:!1},minimumResultsForSearch:{type:Number,default:5},placeholder:{type:String,default:"請選擇"},disabled:{type:Boolean,default:!1},items:{type:Array},filterIds:{type:Array,default:function(){return[]}},regionMgmtId:{type:Number,default:null},vertexName:{type:String},vertexNames:{type:Array},selectStyle:String,requireRegionMgmtId:Boolean},computed:{filterLocations:function(){var t=this;return o().filter(this.locations,(function(e){return!t.filterIds.contains(e.id)}))}},watch:{value:function(t){var e=this;this.multiple?(m()(this.$refs.select2).select2("data",o().map(t,(function(t){return t[e.valueProp]}))),this.$emit("update:vertexNames",this.getVertexName())):(m()(this.$refs.select2).select2("data",[t]),this.$emit("update:vertexName",this.getVertexName()))},items:function(t){this.locations=t,t.length<=0&&this.$emit("input",null),this.setSelect2Val(),this.init()},regionMgmtId:function(){var t=this;return _(g().mark((function e(){return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.items){e.next=5;break}return e.next=3,t.fetchData();case 3:t.setSelect2Val(),t.init();case 5:case"end":return e.stop()}}),e)})))()}},data:function(){return{locations:[]}},mounted:function(){var t=this;return _(g().mark((function e(){return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.items){e.next=4;break}t.locations=t.items,e.next=6;break;case 4:return e.next=6,t.fetchData();case 6:t.init(),t.setSelect2Val();case 8:case"end":return e.stop()}}),e)})))()},methods:{init:function(){var t=m()(this.$refs.select2),e=this;t.select2({minimumResultsForSearch:e.minimumResultsForSearch,language:{noResults:function(){return"查無選項"}}}),t.on("select2:select",(function(t){e.setVal()})),t.on("select2:unselect",(function(t){e.setVal()}))},fetchData:function(){var t=this;return _(g().mark((function e(){var r,n,i;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.loading=!0,!t.requireRegionMgmtId||t.regionMgmtId){e.next=3;break}return e.abrupt("return");case 3:return e.prev=3,e.next=6,a().get("/api/locations",{params:{region_mgmt_id:t.regionMgmtId}});case 6:0==(r=(r=e.sent).data).status&&(n=r.data,t.locations=n.locations,t.value&&(i=t,-1==o().findIndex(t.locations,(function(t){return t.id==i.value}))&&t.$emit("input",null))),e.next=15;break;case 11:return e.prev=11,e.t0=e.catch(3),e.next=15,t.guestRedirectHome(e.t0);case 15:case"end":return e.stop()}}),e,null,[[3,11]])})))()},setSelect2Val:function(){var t=this;this.$nextTick((function(){t.multiple?m()(t.$refs.select2).val(o().map(t.value,(function(e){return e[t.valueProp]}))):m()(t.$refs.select2).val([t.value]),m()(t.$refs.select2).trigger("change")}))},setVal:function(){var t=this,e=m()(this.$refs.select2).select2("data");this.multiple?this.$emit("input",o().map(e,(function(e){return r={},n=t.valueProp,o=e.id,n in r?Object.defineProperty(r,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[n]=o,r;var r,n,o}))):e.length>0?this.$emit("input",e[0].id):this.$emit("input",null),this.$emit("change")},getVertexName:function(){var t=this,e=this,r=[],n=null;if(this.multiple)return o().forEach(this.value,(function(n){var i=o().find(t.locations,(function(t){return t[e.valueProp]==n[e.valueProp]}));i&&r.push(i.vertex_name)})),r;var i=o().find(this.locations,(function(t){return t[e.valueProp]==e.value}));return i&&(n=i.vertex_name),n}}};var x=r(1900);const w=(0,x.Z)(b,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{class:[t.color]},[r("select",{ref:"select2",staticClass:"form-control select2",style:t.selectStyle,attrs:{multiple:t.multiple,"data-placeholder":t.placeholder,disabled:t.disabled}},t._l(t.filterLocations,(function(e){return r("option",{domProps:{value:e[t.valueProp]}},[t._v("\n            "+t._s(e.device_name)+"\n        ")])})),0)])}),[],!1,null,null,null).exports;var C=r(8813),k=r(4790),L=r(1748),S=r(629),E=r(1739);function M(t){return M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},M(t)}function O(){O=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function c(t,e,r,n){var o=e&&e.prototype instanceof d?e:d,i=Object.create(o.prototype),a=new C(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return L()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var s=b(a,r);if(s){if(s===u)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=l(t,e,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===u)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}(t,r,a),i}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var u={};function d(){}function h(){}function f(){}var p={};s(p,o,(function(){return this}));var m=Object.getPrototypeOf,v=m&&m(m(k([])));v&&v!==e&&r.call(v,o)&&(p=v);var g=f.prototype=d.prototype=Object.create(p);function y(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function _(t,e){function n(o,i,a,s){var c=l(t[o],t,i);if("throw"!==c.type){var u=c.arg,d=u.value;return d&&"object"==M(d)&&r.call(d,"__await")?e.resolve(d.__await).then((function(t){n("next",t,a,s)}),(function(t){n("throw",t,a,s)})):e.resolve(d).then((function(t){u.value=t,a(u)}),(function(t){return n("throw",t,a,s)}))}s(c.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function b(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,b(t,e),"throw"===e.method))return u;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var n=l(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,u;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,u):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,u)}function x(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function w(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function C(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(x,this),this.reset(!0)}function k(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:L}}function L(){return{value:void 0,done:!0}}return h.prototype=f,s(g,"constructor",f),s(f,"constructor",h),h.displayName=s(f,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===h||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,f):(t.__proto__=f,s(t,a,"GeneratorFunction")),t.prototype=Object.create(g),t},t.awrap=function(t){return{__await:t}},y(_.prototype),s(_.prototype,i,(function(){return this})),t.AsyncIterator=_,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new _(c(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},y(g),s(g,a,"Generator"),s(g,o,(function(){return this})),s(g,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=k,C.prototype={constructor:C,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(w),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=r.call(i,"catchLoc"),c=r.call(i,"finallyLoc");if(s&&c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,u):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),u},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),w(r),u}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;w(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:k(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),u}},t}function P(t,e,r,n,o,i,a){try{var s=t[i](a),c=s.value}catch(t){return void r(t)}s.done?e(c):Promise.resolve(c).then(n,o)}const j={name:"ImportModal",props:{value:String,title:{type:String,default:"匯入檔案"},show:{type:Boolean,default:!1},fileName:String,fileType:{type:String,default:"Excel"},accepts:{type:Array,default:function(){return[".xlsx",".xls"]}},apiRoute:String,exampleRoute:String,sizeMbLimit:{type:Number,default:10}},watch:{show:function(t){this.showModal=t}},data:function(){return{sending:!1,showModal:this.show,fileObj:null,form:{},uploadStatus:null,errors:[]}},methods:{onShowModal:function(){this.resetForm()},onHideModal:function(){this.resetForm(),this.uploadStatus=null,this.$emit("close"),this.$emit("update:show",!1)},triggerFileInput:function(){this.$refs.input.value="",this.$refs.input.click()},addAttachment:function(t,e){this.uploadStatus="uploading","drag"==e?(t.stopPropagation(),t.preventDefault(),this.fileObj=t.dataTransfer.files[0]):this.fileObj=t.target.files[0];var r=/[^.]+$/.exec(this.fileObj.name).toString().toLowerCase();-1!==this.accepts.indexOf("."+r)?(this.uploadStatus="success",this.form.file=this.fileObj):this.uploadStatus="error"},submit:function(){var t,e=this;return(t=O().mark((function t(){var r,n,i,s,c,l;return O().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(r=new FormData).append("file",e.form.file),e.sending=!0,t.prev=3,t.next=6,a().post(e.apiRoute,r,{headers:{"Content-Type":"multipart/form-data"}});case 6:0==(n=(n=t.sent).data).status&&(i=n.data,s=i.microOrganisms,e.resetForm(),e.uploadStatus=null,e.$toast.success({title:"成功訊息",message:"匯入成功"}),e.showModal=!1,e.$emit("response",s)),t.next=23;break;case 11:if(t.prev=11,t.t0=t.catch(3),422!=t.t0.response.status){t.next=21;break}c=t.t0.response.data,l=c.errors,e.uploadStatus="error",e.errors=o().map(Object.values(l),(function(t){return o().isArray(t)&&t.length>0?t[0]:t})),t.next=23;break;case 21:return t.next=23,e.guestRedirectHome(t.t0);case 23:e.sending=!1;case 24:case"end":return t.stop()}}),t,null,[[3,11]])})),function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){P(i,n,o,a,s,"next",t)}function s(t){P(i,n,o,a,s,"throw",t)}a(void 0)}))})()},resetForm:function(){this.$set(this,"form",{file:null})}}};var N=r(3379),T=r.n(N),$=r(1059),I={insert:"head",singleton:!1};T()($.Z,I);$.Z.locals;function D(t){return D="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},D(t)}function A(){A=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function c(t,e,r,n){var o=e&&e.prototype instanceof d?e:d,i=Object.create(o.prototype),a=new C(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return L()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var s=b(a,r);if(s){if(s===u)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=l(t,e,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===u)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}(t,r,a),i}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var u={};function d(){}function h(){}function f(){}var p={};s(p,o,(function(){return this}));var m=Object.getPrototypeOf,v=m&&m(m(k([])));v&&v!==e&&r.call(v,o)&&(p=v);var g=f.prototype=d.prototype=Object.create(p);function y(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function _(t,e){function n(o,i,a,s){var c=l(t[o],t,i);if("throw"!==c.type){var u=c.arg,d=u.value;return d&&"object"==D(d)&&r.call(d,"__await")?e.resolve(d.__await).then((function(t){n("next",t,a,s)}),(function(t){n("throw",t,a,s)})):e.resolve(d).then((function(t){u.value=t,a(u)}),(function(t){return n("throw",t,a,s)}))}s(c.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function b(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,b(t,e),"throw"===e.method))return u;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var n=l(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,u;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,u):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,u)}function x(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function w(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function C(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(x,this),this.reset(!0)}function k(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:L}}function L(){return{value:void 0,done:!0}}return h.prototype=f,s(g,"constructor",f),s(f,"constructor",h),h.displayName=s(f,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===h||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,f):(t.__proto__=f,s(t,a,"GeneratorFunction")),t.prototype=Object.create(g),t},t.awrap=function(t){return{__await:t}},y(_.prototype),s(_.prototype,i,(function(){return this})),t.AsyncIterator=_,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new _(c(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},y(g),s(g,a,"Generator"),s(g,o,(function(){return this})),s(g,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=k,C.prototype={constructor:C,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(w),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=r.call(i,"catchLoc"),c=r.call(i,"finallyLoc");if(s&&c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,u):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),u},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),w(r),u}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;w(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:k(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),u}},t}function F(t,e,r,n,o,i,a){try{var s=t[i](a),c=s.value}catch(t){return void r(t)}s.done?e(c):Promise.resolve(c).then(n,o)}function q(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){F(i,n,o,a,s,"next",t)}function s(t){F(i,n,o,a,s,"throw",t)}a(void 0)}))}}function R(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function G(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?R(Object(r),!0).forEach((function(e){z(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):R(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function z(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}const V={name:"MicroOrganismListPage",components:{ImportModal:(0,x.Z)(j,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("Modal",{attrs:{title:t.title,footer:!1,backdrop:!1,"append-to-body":!0,keyboard:!1},on:{show:t.onShowModal,hide:t.onHideModal},model:{value:t.showModal,callback:function(e){t.showModal=e},expression:"showModal"}},[r("div",{staticClass:"import-block"},[r("h3",{staticClass:"import-title"},[t._v("批次匯入【"+t._s(t.fileName)+"】"+t._s(t.fileType)+"檔案")]),t._v(" "),r("h4",{staticClass:"import-subtitle"},[t._v("請注意以下事項：")]),t._v(" "),r("ol",[r("li",[t._v("上傳檔案限定為 "+t._s(t.accepts.toString())+" 檔案")]),t._v(" "),r("li",[t._v("檔案大小為 "+t._s(t.sizeMbLimit)+"MB 以內")]),t._v(" "),r("li",[t._v("請由此處下載\n                "),r("a",{staticClass:"example-link",attrs:{href:t.exampleRoute,target:"_blank"}},[t._v(t._s(t.fileName)+"_範本.xlsx")])]),t._v(" "),r("li",[t._v("上傳完成後請按儲存按鈕")])]),t._v(" "),r("div",{staticClass:"uploader",attrs:{id:"uploader"},on:{drop:function(e){return t.addAttachment(e,"drag")},dragenter:function(t){t.stopPropagation(),t.preventDefault()},dragover:function(t){t.stopPropagation(),t.preventDefault()}}},[r("div",{staticClass:"text-center"},[t.uploadStatus?"uploading"==t.uploadStatus?r("img",{staticClass:"img-status",attrs:{src:"/img/icon-upload.svg",alt:""}}):"error"==t.uploadStatus?r("img",{staticClass:"img-status",attrs:{src:"/img/icon-file-error.svg",alt:""}}):"success"==t.uploadStatus?r("img",{staticClass:"img-status",attrs:{src:"/img/icon-file-success.svg",alt:""}}):t._e():r("img",{staticClass:"img-status",attrs:{src:"/img/icon-upload.svg",alt:""}}),t._v(" "),r("div",{staticClass:"mt-4"},[t.uploadStatus?"uploading"==t.uploadStatus?r("p",[t._v("檔案上傳中，請耐心等待...")]):"error"==t.uploadStatus?r("div",[t._v("上傳檔案有問題，請再次檢查檔案格式大小是否正確\n                        "),t._l(t.errors,(function(e){return r("div",{staticClass:"red"},[t._v("\n                            "+t._s(e)+"\n                        ")])}))],2):"success"==t.uploadStatus?r("p",[t._v("上傳檔案 : "+t._s(t.fileObj.name))]):t._e():r("p",[t._v("請選擇上傳檔案或是將檔案拖移至此")])]),t._v(" "),r("button",{staticClass:"btn btn-upload",class:{"btn-re-upload":t.uploadStatus,"btn-default":!t.uploadStatus},attrs:{type:"button"},on:{click:t.triggerFileInput}},[t._v(t._s(t.uploadStatus?"重新上傳":"上傳檔案"))]),t._v(" "),r("input",{ref:"input",staticClass:"hidden",attrs:{type:"file",title:"附件",accept:t.accepts.join(",")},on:{change:function(e){return t.addAttachment(e)}}})])])]),t._v(" "),r("div",{staticClass:"divider"}),t._v(" "),r("div",{staticClass:"modal-footer"},[r("div",{staticClass:"button-block left"},[r("button",{staticClass:"btn btn-cancel",attrs:{type:"button"},on:{click:t.onHideModal}},[t._v("取消")])]),t._v(" "),r("div",{staticClass:"button-block right"},[r("button",{staticClass:"btn btn-light-green",attrs:{disabled:!t.uploadStatus||"error"==t.uploadStatus||"uploading"==t.uploadStatus||t.sending},on:{click:t.submit}},[t._v("儲存")])])])])}),[],!1,null,"4ea2f4fb",null).exports,SortButton:E.Z,RoomEnvironmentSelect:L.Z,RoomEnvironmentView:k.Z,ClipLoader:u.Z,Datetimepicker:d.Z,RegionMgmtListSelect:h.Z,VertexListSelect:f.Z,LocationListSelect:w,MicroOrganismKindListSelect:C.Z},computed:G(G({},(0,S.Se)({permissions:"user/permissions"})),{},{newMd5:function(){var t=l.md5.create();return t.update(JSON.stringify(o().map(this.microOrganisms,(function(t){return{bar_code:t.bar_code,organism_kind:t.organism_kind,room_name:t.room_name,location_id:t.location_id,organism_value:t.organism_value,Time:t.Time,created_at:t.created_at}})))),t.hex()},today:function(){return c()().format()},exportUrl:function(){var t="/microOrganisms.xlsx",e=[],r=this.getPureForm(this.form);return r.page&&delete r.page,o().forOwn(r,(function(t,r){o().isArray(t)?o().forEach(t,(function(t){e.push("".concat(r,"[]=").concat(t))})):e.push("".concat(r,"=").concat(t))})),e.length>0&&(t+="?",t+=e.join("&")),t}}),inject:["$validator"],data:function(){return{loading:!1,sending:!1,mode:"read",microOrganisms:[],pagination:{last_page:1,current_page:this.$route.query.page?parseInt(this.$route.query.page):1},roomEnvironments:[],organismKinds:[{id:"microparticle_dot_5",name:"微粒子(0.5µm)"},{id:"microparticle_5",name:"微粒子(5µm)"},{id:"suspended",name:"懸浮微生物"},{id:"falling",name:"落下微生物"},{id:"contact",name:"接觸微生物"}],regionMgmts:[],locations:[],form:{start_time:this.$route.query.start_time?this.$route.query.start_time:null,end_time:this.$route.query.end_time?this.$route.query.end_time:null,organism_kinds:this.$route.query.organism_kinds&&o().isArray(this.$route.query.organism_kinds)?this.$route.query.organism_kinds:this.$route.query.organism_kinds?[this.$route.query.organism_kinds]:[],region_mgmt_id:this.$route.query.region_mgmt_id?parseInt(this.$route.query.region_mgmt_id):null,page:this.$route.query.page?parseInt(this.$route.query.page):1,order_by:this.$route.query.order_by?this.$route.query.order_by:null,direction:this.$route.query.direction?this.$route.query.direction:null},oldMd5:null,organismValueSortType:null,timeSortType:null,importModal:{show:!1,file_name:null}}},created:function(){Promise.all([this.fetchData(),this.fetchRegionMgmtData(),this.fetchLocationsData()]),this.initSortButton()},methods:{fetchData:function(){var t=this;return q(A().mark((function e(){var r,n,i;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.loading=!0,e.prev=1,e.next=4,a().get("/api/microOrganisms",{params:t.form});case 4:0==(r=(r=e.sent).data).status&&(n=r.data,i=t,t.roomEnvironments=n.roomEnvironments,o().keys(t.getPureForm(t.form)).length>1?(t.microOrganisms=o().map(n.microOrganisms,(function(t){t.Time=c()(t.Time).tz("Asia/Taipei").toISOString(),t.created_at=c()(t.created_at).tz("Asia/Taipei").toISOString();var e=null,r=null;return t.location&&t.location.room_environment&&(e=o().find(i.roomEnvironments,["region_mgmt_id",t.location.room_environment.region_mgmt_id]),r=t.location.room_environment.region_mgmt_id),t.location={device_name:t.location.device_name,id:t.location.id,room_environment:{region_mgmt_id:r,locations:e?e.locations:[]}},t})),t.pagination=n.pagination):(t.microOrganisms=[],t.pagination.current_page=1,t.pagination.last_page=1)),e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(1),e.next=13,t.guestRedirectHome(e.t0);case 13:t.oldMd5=t.newMd5,t.loading=!1;case 15:case"end":return e.stop()}}),e,null,[[1,9]])})))()},onDateTimePickerChange:function(t,e){this.form[t]=e},pushRow:function(){var t=this,e=o().minBy(this.microOrganisms,"id"),r=-1;e&&e.id<0&&(r=e.id-1);var n=o().find(this.roomEnvironments,(function(e){return e.region_mgmt_id==t.form.region_mgmt_id}));this.microOrganisms.push({id:r,organism_kind:null,organism_value:null,location:{room_environment:{region_mgmt_id:this.form.region_mgmt_id,locations:[]}},location_id:null,Time:null,created_at:c()().format("yyyy-MM-DD HH:mm"),room_name:n?n.room_name:null})},deleteRow:function(t){var e=this;return q(A().mark((function r(){return A().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(confirm("確定要刪除".concat(t.id>0?" ID:"+t.id+" ":"","此筆資料？"))){r.next=2;break}return r.abrupt("return");case 2:if(!(t.id>0)){r.next=16;break}return r.prev=3,e.sending=!0,r.next=7,a().delete("/api/microOrganisms/".concat(t.id));case 7:0==r.sent.data.status&&e.$toast.success({title:"成功訊息",message:"刪除成功"}),r.next=16;break;case 12:return r.prev=12,r.t0=r.catch(3),r.next=16,e.guestRedirectHome(r.t0);case 16:e.microOrganisms=o().filter(e.microOrganisms,(function(e){return e.id!=t.id})),e.sending=!1;case 18:case"end":return r.stop()}}),r,null,[[3,12]])})))()},submit:function(){var t=this;return q(A().mark((function e(){var r,n;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.validate();case 3:if(e.sent){e.next=6;break}return e.abrupt("return");case 6:return t.sending=!0,e.next=9,a().patch("/api/microOrganisms/batch",{micro_organisms:t.microOrganisms});case 9:0==(r=(r=e.sent).data).status&&(n=r.data,t.oldMd5=t.newMd5,t.microOrganisms=n.microOrganisms,t.$toast.success({title:"成功訊息",message:"儲存成功"})),e.next=18;break;case 14:return e.prev=14,e.t0=e.catch(0),e.next=18,t.guestRedirectHome(e.t0);case 18:t.mode="read",t.oldMd5=t.newMd5,t.sending=!1;case 21:case"end":return e.stop()}}),e,null,[[0,14]])})))()},changePage:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;if(this.checkIsSaved())if(this.form.start_time&&this.form.end_time&&!c()(this.form.start_time).isSameOrBefore(this.form.end_time))this.$toast.error({title:"錯誤訊息",message:"「結束時間」不得早於「開始時間」"});else{var r=o().pickBy(this.form,o().identity());r.page=e,this.$router.push({path:"/microOrganisms",query:r}).catch((function(){t.fetchData()}))}},resetSearch:function(){this.checkIsSaved()&&(this.oldMd5=this.newMd5,this.form={start_time:null,end_time:null,organism_kinds:null,region_mgmt_id:null},this.changePage(1))},fetchRegionMgmtData:function(){var t=this;return q(A().mark((function e(){var r,n;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.loading=!0,e.prev=1,e.next=4,a().get("/api/regionMgmts");case 4:0==(r=(r=e.sent).data).status&&(n=r.data,t.regionMgmts=n.regionMgmts),e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(1),e.next=13,t.guestRedirectHome(e.t0);case 13:t.loading=!1;case 14:case"end":return e.stop()}}),e,null,[[1,9]])})))()},fetchLocationsData:function(){var t=this;return q(A().mark((function e(){var r,n;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.loading=!0,e.prev=1,e.next=4,a().get("/api/locations",{params:{region_mgmt_id:t.form.region_mgmt_id}});case 4:0==(r=(r=e.sent).data).status&&(n=r.data,t.locations=n.locations),e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(1),e.next=13,t.guestRedirectHome(e.t0);case 13:t.loading=!1;case 14:case"end":return e.stop()}}),e,null,[[1,9]])})))()},checkIsSaved:function(){return!(this.oldMd5!=this.newMd5&&!confirm("資料尚未儲存，確定要切換？"))},onClickCancelEditBtn:function(){this.checkIsSaved()&&(this.mode="read",this.fetchData())},getRegionMgmtId:function(t){var e=o().find(this.regionMgmts,(function(e){return e.region==t}));return e?e.id:null},changeSortType:function(t,e){switch(t){case"organism_value":this.organismValueSortType=e,this.timeSortType=null;break;case"Time":this.organismValueSortType=null,this.timeSortType=e;break;default:return}t&&e?(this.form.order_by=t,this.form.direction=e):(this.form.order_by=null,this.form.direction=null),this.changePage(1)},initSortButton:function(){switch(this.$route.query.order_by){case"organism_value":this.organismValueSortType=this.$route.query.direction;break;case"Time":this.timeSortType=this.$route.query.direction}},showImportModal:function(t){this.importModal.file_name=t,this.importModal.show=!0},whenImportModalClose:function(){this.importModal.show=!1,this.importModal.file_name=null},receiveImportResponse:function(t){var e=this;this.microOrganisms=o().map(t,(function(t){t.Time=c()(t.Time).tz("Asia/Taipei").toISOString(),t.created_at=c()(t.created_at).tz("Asia/Taipei").toISOString();var r=null,n=null;return t.location&&t.location.room_environment&&(r=o().find(e.roomEnvironments,["region_mgmt_id",t.location.room_environment.region_mgmt_id]),n=t.location.room_environment.region_mgmt_id),t.location={device_name:t.location.device_name,id:t.location.id,room_environment:{region_mgmt_id:n,locations:r?r.locations:[]}},t})),this.oldMd5=this.newMd5},isRequired:function(t){return!("suspended"==t||"falling"==t||"contact"==t)},onInputValue:function(t,e){e.organism_value=parseInt(t.target.value.replace(/\,/g,"")),isNaN(e.organism_value)&&(e.organism_value=null)}}};var Z=r(510),B={insert:"head",singleton:!1};T()(Z.Z,B);Z.Z.locals;const H=(0,x.Z)(V,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("section",{staticClass:"content-header clearfix"},[r("span",[t._v("數據輸入 ")]),t._v(" "),t.permissions.contains("job-history-write")?["edit"!=t.mode?r("button",{staticClass:"btn btn-light-green op-btn",attrs:{disabled:t.microOrganisms.length<=0},on:{click:function(e){t.mode="edit"}}},[r("i",{staticClass:"fa fa-pencil",attrs:{"aria-hidden":"true"}}),t._v(" 編輯\n            ")]):"edit"==t.mode?r("button",{staticClass:"btn btn-delete op-btn",on:{click:t.onClickCancelEditBtn}},[r("i",{staticClass:"fa fa-times-circle",attrs:{"aria-hidden":"true"}}),t._v(" 取消編輯\n            ")]):t._e()]:t._e()],2),t._v(" "),r("section",{staticClass:"content"},[r("div",{staticClass:"box box-top"},[r("div",{staticClass:"box-body"},[r("div",{staticClass:"row"},[r("div",{staticClass:"col-md-4 col-md-offset-2"},[r("div",{staticClass:"form-group"},[r("label",{staticClass:"col-sm-4 control-label",attrs:{for:"start_time"}},[t._v("開始時間")]),t._v(" "),r("div",{staticClass:"col-sm-6"},[r("datetimepicker",{staticStyle:{width:"100%"},attrs:{id:"start_time",type:"datetime",format:"yyyy-MM-dd HH:mm:ss","input-class":"form-control","picker-class":"theme-light-green",placeholder:"請選擇","max-datetime":t.today,"show-clear-btn":!0},model:{value:t.form.start_time,callback:function(e){t.$set(t.form,"start_time",e)},expression:"form.start_time"}})],1)])]),t._v(" "),r("div",{staticClass:"col-md-4"},[r("div",{staticClass:"form-group"},[r("label",{staticClass:"col-sm-4 control-label",attrs:{for:"end_time"}},[t._v("結束時間")]),t._v(" "),r("div",{staticClass:"col-sm-6"},[r("datetimepicker",{staticStyle:{width:"100%"},attrs:{id:"end_time",type:"datetime",format:"yyyy-MM-dd HH:mm:ss","input-class":"form-control","picker-class":"theme-light-green",placeholder:"請選擇","max-datetime":t.today,"show-clear-btn":!0},model:{value:t.form.end_time,callback:function(e){t.$set(t.form,"end_time",e)},expression:"form.end_time"}})],1)])])]),t._v(" "),r("div",{staticClass:"row next-row"},[r("div",{staticClass:"col-md-4 col-md-offset-2"},[r("div",{staticClass:"form-group"},[r("label",{staticClass:"col-sm-4 control-label",attrs:{for:"type"}},[t._v("微生物類別")]),t._v(" "),r("div",{staticClass:"col-sm-6"},[r("micro-organism-kind-list-select",{attrs:{id:"type","select-class":"form-control","select-style":"width: 100%",multiple:!0,items:t.organismKinds},model:{value:t.form.organism_kinds,callback:function(e){t.$set(t.form,"organism_kinds",e)},expression:"form.organism_kinds"}})],1)])]),t._v(" "),r("div",{staticClass:"col-md-4"},[r("div",{staticClass:"form-group"},[r("label",{staticClass:"col-sm-4 control-label",attrs:{for:"regionMgmtId"}},[t._v("房間")]),t._v(" "),r("div",{staticClass:"col-sm-6"},[r("room-environment-select",{attrs:{id:"regionMgmtId","select-class":"form-control","region-mgmt-id":t.form.region_mgmt_id,items:t.roomEnvironments},on:{"update:regionMgmtId":function(e){return t.$set(t.form,"region_mgmt_id",e)},"update:region-mgmt-id":function(e){return t.$set(t.form,"region_mgmt_id",e)}}})],1)])])]),t._v(" "),r("div",{staticClass:"row next-row text-center"},[r("button",{staticClass:"btn btn-light-green op-btn",attrs:{type:"button",disabled:t.loading},on:{click:function(e){return t.changePage(1)}}},[r("i",{staticClass:"fa fa-search"}),t._v(" 查詢\n                    ")]),t._v(" "),r("button",{staticClass:"btn btn-delete op-btn",attrs:{type:"button"},on:{click:t.resetSearch}},[r("i",{staticClass:"fa fa-undo"}),t._v(" 清空\n                    ")]),t._v(" "),r("button",{staticClass:"btn btn-light-green op-btn",attrs:{type:"button"},on:{click:function(e){return t.showImportModal("數據輸入")}}},[r("i",{staticClass:"glyphicon glyphicon-import"}),t._v(" 匯入\n                    ")]),t._v(" "),r("router-link",{staticClass:"btn btn-light-green op-btn",attrs:{to:t.exportUrl,target:"_blank",type:"button"}},[r("i",{staticClass:"glyphicon glyphicon-export"}),t._v(" 匯出\n                    ")])],1)])]),t._v(" "),r("div",{staticClass:"row"},[r("div",{staticClass:"col-xs-12"},[r("div",{staticClass:"box box-bottom"},[r("div",{staticClass:"box-body"},[t.loading?t._e():r("div",[r("table",{staticClass:"table table-bordered table-hover break-table"},[r("thead",[r("tr",{staticClass:"table-head"},[r("th",{staticClass:"text-center hide-td"},[t._v("編號")]),t._v(" "),r("th",{staticClass:"hide-td centered"},[t._v("條形碼")]),t._v(" "),r("th",{staticClass:"hide-td"},[t._v("微生物類別")]),t._v(" "),r("th",{staticClass:"hide-td"},[t._v("房間")]),t._v(" "),r("th",{staticClass:"hide-td"},[t._v("位置代號")]),t._v(" "),r("th",{staticClass:"text-center hide-td"},[t._v("測量值\n                                        "),r("sort-button",{attrs:{column:"organism_value"},on:{change:t.changeSortType},model:{value:t.organismValueSortType,callback:function(e){t.organismValueSortType=e},expression:"organismValueSortType"}})],1),t._v(" "),r("th",{staticClass:"text-center hide-td"},[t._v("採樣時間\n                                        "),r("sort-button",{attrs:{column:"Time"},on:{change:t.changeSortType},model:{value:t.timeSortType,callback:function(e){t.timeSortType=e},expression:"timeSortType"}})],1),t._v(" "),r("th",{staticClass:"text-center hide-td"},[t._v("建檔時間")]),t._v(" "),"edit"==t.mode?r("th",{staticClass:"text-center vertical-middle hide-td",attrs:{rowspan:"3"}},[t._v("操作")]):t._e()])]),t._v(" "),r("tbody",[t._l(t.microOrganisms,(function(e,n){return r("tr",{key:e.id},[r("td",{staticClass:"text-center vertical-middle",attrs:{"data-title":"編號"}},[t._v(t._s(e.id&&e.id>0?e.id:null))]),t._v(" "),r("td",{staticClass:"centered",attrs:{"data-title":"條形碼"}},["edit"==t.mode&&(!e.id||e.id<0)?r("input",{directives:[{name:"model",rawName:"v-model",value:e.bar_code,expression:"microOrganism.bar_code"}],staticClass:"form-control vertical-middle text-center",attrs:{name:"bar_code_"+e.id,type:"text",placeholder:"請輸入"},domProps:{value:e.bar_code},on:{input:function(r){r.target.composing||t.$set(e,"bar_code",r.target.value)}}}):r("span",[t._v(t._s(e.bar_code))])]),t._v(" "),r("td",{attrs:{"data-title":"微生物類別"}},["edit"==t.mode&&(!e.id||e.id<0)?r("select",{directives:[{name:"model",rawName:"v-model",value:e.organism_kind,expression:"microOrganism.organism_kind"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"form-control vertical-middle",attrs:{name:"organism_kind_"+e.id},on:{change:function(r){var n=Array.prototype.filter.call(r.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(e,"organism_kind",r.target.multiple?n:n[0])}}},[r("option",{domProps:{value:null}},[t._v("請選擇")]),t._v(" "),t._l(t.organismKinds,(function(e){return r("option",{domProps:{value:e.id}},[t._v(t._s(e.name))])}))],2):["microparticle_dot_5"==e.organism_kind?r("span",[t._v("微粒子(0.5µm)")]):"microparticle_5"==e.organism_kind?r("span",[t._v("微粒子(5µm)")]):"suspended"==e.organism_kind?r("span",[t._v("懸浮微生物")]):"falling"==e.organism_kind?r("span",[t._v("落下微生物")]):"contact"==e.organism_kind?r("span",[t._v("接觸微生物")]):t._e()],t._v(" "),r("p",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("organism_kind_"+e.id+":required"),expression:"errors.has(`organism_kind_${microOrganism.id}:required`)"}],staticClass:"help is-danger text-left"},[t._v("請選擇微生物類別")])],2),t._v(" "),r("td",{attrs:{"data-title":"房間"}},["edit"==t.mode&&(!e.id||e.id<0)?r("room-environment-select",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{"region-mgmt-id":e.location.region_mgmt_id,name:"room_name_"+e.id,items:t.roomEnvironments,locations:e.location.room_environment.locations,"select-class":"form-control","select-style":"width:100%"},on:{"update:regionMgmtId":function(r){return t.$set(e.location,"region_mgmt_id",r)},"update:region-mgmt-id":function(r){return t.$set(e.location,"region_mgmt_id",r)},"update:locations":function(r){return t.$set(e.location.room_environment,"locations",r)}},model:{value:e.room_name,callback:function(r){t.$set(e,"room_name",r)},expression:"microOrganism.room_name"}}):r("span",[t._v(t._s(e.room_name))]),t._v(" "),r("p",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("room_name_"+e.id+":required"),expression:"errors.has(`room_name_${microOrganism.id}:required`)"}],staticClass:"help is-danger text-left"},[t._v("請選擇房間")])],1),t._v(" "),r("td",{attrs:{"data-title":"位置代號"}},["edit"==t.mode&&(!e.id||e.id<0)?r("location-list-select",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{"select-style":"width:100%","require-region-mgmt-id":!0,name:"location_id_"+e.id,"minimum-results-for-search":-1,items:e.location.room_environment.locations,"region-mgmt-id":e.location.region_mgmt_id,"vertex-name":e.vertex_name},on:{"update:vertexName":function(r){return t.$set(e,"vertex_name",r)},"update:vertex-name":function(r){return t.$set(e,"vertex_name",r)}},model:{value:e.location_id,callback:function(r){t.$set(e,"location_id",r)},expression:"microOrganism.location_id"}}):r("span",[t._v(t._s(e.location.device_name))]),t._v(" "),r("p",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("location_id_"+e.id+":required"),expression:"errors.has(`location_id_${microOrganism.id}:required`)"}],staticClass:"help is-danger text-left"},[t._v("請選擇位置代號")])],1),t._v(" "),r("td",{staticClass:"text-center",attrs:{"data-title":"測量值"}},["edit"==t.mode?r("input",{directives:[{name:"model",rawName:"v-model.number",value:e.organism_value,expression:"microOrganism.organism_value",modifiers:{number:!0}},{name:"validate",rawName:"v-validate",value:(t.isRequired(e.organism_kind)?"required|":"")+"decimal:0|min_value:0|max_value:2000000000",expression:"(isRequired(microOrganism.organism_kind) ? 'required|' : '') + 'decimal:0|min_value:0|max_value:2000000000'"}],staticClass:"form-control vertical-middle text-center",attrs:{name:"organism_value_"+e.id,type:"text",placeholder:"請輸入"},domProps:{value:e.organism_value},on:{input:[function(r){r.target.composing||t.$set(e,"organism_value",t._n(r.target.value))},function(r){return t.onInputValue(r,e)}],blur:function(e){return t.$forceUpdate()}}}):r("span",[t._v(t._s(e.organism_value))]),t._v(" "),r("p",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("organism_value_"+e.id+":required"),expression:"errors.has(`organism_value_${microOrganism.id}:required`)"}],staticClass:"help is-danger text-left"},[t._v("請填寫測量值")]),t._v(" "),r("p",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("organism_value_"+e.id+":decimal")||t.errors.has("organism_value_"+e.id+":min_value")||t.errors.has("organism_value_"+e.id+":max_value"),expression:"errors.has(`organism_value_${microOrganism.id}:decimal`) || errors.has(`organism_value_${microOrganism.id}:min_value`) || errors.has(`organism_value_${microOrganism.id}:max_value`)"}],staticClass:"help is-danger text-left"},[t._v("請填寫大於 0 且小於等於 2,000,000,000 的整數")])]),t._v(" "),r("td",{staticClass:"text-center",attrs:{"data-title":"採樣時間"}},["edit"==t.mode&&(!e.id||e.id<0)?r("datetimepicker",{staticClass:"vertical-middle",staticStyle:{width:"100%"},attrs:{id:"time",type:"datetime",format:"yyyy-MM-dd HH:mm","input-class":"form-control text-center","picker-class":"theme-light-green",placeholder:"請選擇"},model:{value:e.Time,callback:function(r){t.$set(e,"Time",r)},expression:"microOrganism.Time"}}):r("span",[t._v(t._s(t._f("datetime")(e.Time)))])],1),t._v(" "),r("td",{staticClass:"text-center",attrs:{"data-title":"建檔時間"}},["edit"==t.mode?r("datetimepicker",{staticClass:"vertical-middle",staticStyle:{width:"100%"},attrs:{id:"createdAt",type:"datetime",format:"yyyy-MM-dd HH:mm","input-class":"form-control text-center","picker-class":"theme-light-green",placeholder:"請選擇"},model:{value:e.created_at,callback:function(r){t.$set(e,"created_at",r)},expression:"microOrganism.created_at"}}):e.created_at?[t._v(t._s(t._f("datetime")(e.created_at)))]:t._e()],2),t._v(" "),"edit"==t.mode?r("td",{staticClass:"text-center vertical-middle",attrs:{"data-title":"操作"}},[r("button",{staticClass:"btn btn-delete op-btn",attrs:{type:"button",title:"刪除"},on:{click:function(r){return t.deleteRow(e)}}},[r("i",{staticClass:"glyphicon glyphicon-trash"}),t._v(" 刪除\n                                        ")])]):t._e()])})),t._v(" "),"edit"==t.mode?r("tr",[r("td",{staticClass:"text-center push-btn",attrs:{colspan:"9"},on:{click:t.pushRow}},[r("i",{staticClass:"fa fa-plus-circle fa-2x vertical-middle"})])]):t._e()],2)]),t._v(" "),r("div",{staticClass:"text-center"},[r("pagination",{attrs:{"direction-links":!1,"boundary-links":!0,size:"sm","total-page":t.pagination.last_page,"max-size":10},on:{change:function(e){return t.changePage(t.pagination.current_page)}},model:{value:t.pagination.current_page,callback:function(e){t.$set(t.pagination,"current_page",e)},expression:"pagination.current_page"}})],1),t._v(" "),r("div",{staticClass:"text-right"},["edit"==t.mode?r("button",{staticClass:"btn btn-light-green op-btn",attrs:{type:"button",disabled:t.sending},on:{click:t.submit}},[r("i",{staticClass:"fa fa-floppy-o"}),t._v(" 儲存\n                                ")]):t._e()])]),t._v(" "),t.loading?r("clip-loader",{staticClass:"loading",attrs:{color:"gray",size:"30px"}}):t._e()],1)])])])]),t._v(" "),r("ImportModal",{attrs:{"file-name":t.importModal.file_name,show:t.importModal.show,"api-route":"/api/microOrganisms/batch","example-route":"/microOrganisms.xlsx"},on:{close:t.whenImportModalClose,response:t.receiveImportResponse}})],1)}),[],!1,null,"6d52ec99",null).exports},4687:(t,e,r)=>{"use strict";r.d(e,{Z:()=>g});var n=r(9038),o=r(9669),i=r.n(o),a=r(6486),s=r.n(a);function c(t){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},c(t)}function l(){l=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function u(t,e,r,n){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new L(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return E()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var s=w(a,r);if(s){if(s===h)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=d(t,e,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===h)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}(t,r,a),i}function d(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var h={};function f(){}function p(){}function m(){}var v={};s(v,o,(function(){return this}));var g=Object.getPrototypeOf,y=g&&g(g(S([])));y&&y!==e&&r.call(y,o)&&(v=y);var _=m.prototype=f.prototype=Object.create(v);function b(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function x(t,e){function n(o,i,a,s){var l=d(t[o],t,i);if("throw"!==l.type){var u=l.arg,h=u.value;return h&&"object"==c(h)&&r.call(h,"__await")?e.resolve(h.__await).then((function(t){n("next",t,a,s)}),(function(t){n("throw",t,a,s)})):e.resolve(h).then((function(t){u.value=t,a(u)}),(function(t){return n("throw",t,a,s)}))}s(l.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return h;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return h}var n=d(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,h;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,h):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,h)}function C(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function k(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function L(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(C,this),this.reset(!0)}function S(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:E}}function E(){return{value:void 0,done:!0}}return p.prototype=m,s(_,"constructor",m),s(m,"constructor",p),p.displayName=s(m,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,m):(t.__proto__=m,s(t,a,"GeneratorFunction")),t.prototype=Object.create(_),t},t.awrap=function(t){return{__await:t}},b(x.prototype),s(x.prototype,i,(function(){return this})),t.AsyncIterator=x,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new x(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},b(_),s(_,a,"Generator"),s(_,o,(function(){return this})),s(_,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=S,L.prototype={constructor:L,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(k),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=r.call(i,"catchLoc"),c=r.call(i,"finallyLoc");if(s&&c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,h):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),k(r),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;k(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:S(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),h}},t}function u(t,e,r,n,o,i,a){try{var s=t[i](a),c=s.value}catch(t){return void r(t)}s.done?e(c):Promise.resolve(c).then(n,o)}function d(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){u(i,n,o,a,s,"next",t)}function s(t){u(i,n,o,a,s,"throw",t)}a(void 0)}))}}const h={name:"MirStatusListPage",components:{ClipLoader:n.Z},computed:{deviceId:function(){return this.device?this.device.id:null}},watch:{deviceId:function(t,e){t&&this.device.is_connected&&this.subscribe(),e&&this.unsubscribe(e)}},data:function(){return{loading:!0,sending:!1,mirStatuses:[],pagination:{current_page:1,last_page:1},form:{pagination:1,page:this.$route.query.page?parseInt(this.$route.query.page):1},device:null}},created:function(){var t=this;return d(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.fetchData();case 2:t.subscribeDevices();case 3:case"end":return e.stop()}}),e)})))()},destroyed:function(){window.Echo.leave("devices")},methods:{fetchData:function(){var t=this;return d(l().mark((function e(){var r,n;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.loading=!0,e.prev=1,e.next=4,i().get("/api/mirStatuses",{params:t.form});case 4:0==(r=(r=e.sent).data).status&&(n=r.data,t.mirStatuses=s().map(n.mirStatuses,(function(t){return t.position=JSON.parse(t.position),t.velocity=JSON.parse(t.velocity),t})),t.device=n.device,n.pagination&&(t.pagination=n.pagination)),e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(1),e.next=13,t.guestRedirectHome(e.t0);case 13:t.loading=!1;case 14:case"end":return e.stop()}}),e,null,[[1,9]])})))()},changePage:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,r=s().pickBy(this.form,s().identity());r.page=e,this.$router.push({path:"/mirStatuses",query:r}).catch((function(){t.fetchData()}))},subscribe:function(){var t=this;window.Echo.private("devices.".concat(this.deviceId)).listen("MirStatusCreated",(function(e){var r=e.mirStatus,n=e.pagination;r&&(r.position=JSON.parse(r.position),r.velocity=JSON.parse(r.velocity),10==t.mirStatuses.length&&t.mirStatuses.splice(t.mirStatuses.length-1,1),t.mirStatuses.unshift(r)),n&&(t.pagination.last_page=n.last_page)}))},unsubscribe:function(t){window.Echo.leave("devices.".concat(t))},subscribeDevices:function(){var t=this;window.Echo.private("devices").listen("DeviceUpdated",(function(e){var r=e.device;r&&r.id==t.deviceId&&!r.is_connected&&(t.changePage(1),t.syncUser()),r&&r.id!=t.deviceId&&r.is_connected&&(t.changePage(1),t.syncUser())}))}}};var f=r(3379),p=r.n(f),m=r(2708),v={insert:"head",singleton:!1};p()(m.Z,v);m.Z.locals;const g=(0,r(1900).Z)(h,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[t._m(0),t._v(" "),r("div",{staticClass:"col-xs-12"},[r("div",{staticClass:"box"},[r("div",{staticClass:"box-body"},[t.loading?t._e():r("div",[r("table",{staticClass:"table table-bordered table-hover break-table"},[t._m(1),t._v(" "),r("tbody",t._l(t.mirStatuses,(function(e,n){return r("tr",{key:e.id},[r("td",{staticClass:"text-center vertical-middle",attrs:{"data-title":"編號"}},[t._v(t._s(e.id))]),t._v(" "),r("td",{attrs:{"data-title":"機器人"}},[t._v(t._s(e.robot_model))]),t._v(" "),r("td",{attrs:{"data-title":"位置"}},[e.position?[r("p",[t._v("x: "+t._s(e.position.x))]),t._v(" "),r("p",[t._v("y: "+t._s(e.position.y))]),t._v(" "),r("p",[t._v("orientation: "+t._s(e.position.orientation))])]:t._e()],2),t._v(" "),r("td",{attrs:{"data-title":"任務文字"}},[t._v(t._s(e.mission_text))]),t._v(" "),r("td",{attrs:{"data-title":"速度"}},[e.velocity?[r("p",[t._v("linear: "+t._s(e.velocity.linear))]),t._v(" "),r("p",[t._v("angular: "+t._s(e.velocity.angular))])]:t._e()],2),t._v(" "),r("td",{staticClass:"text-center",attrs:{"data-title":"電池百分比"}},[t._v(t._s(e.battery_percentage)+" %")]),t._v(" "),r("td",{staticClass:"text-center",attrs:{"data-title":"採樣時間"}},[t._v(t._s(t._f("datetime")(e.created_at)))])])})),0)]),t._v(" "),r("div",{staticClass:"text-center"},[r("pagination",{attrs:{"direction-links":!1,"boundary-links":!0,size:"sm","total-page":t.pagination.last_page,"max-size":10},on:{change:function(e){return t.changePage(t.pagination.current_page)}},model:{value:t.pagination.current_page,callback:function(e){t.$set(t.pagination,"current_page",e)},expression:"pagination.current_page"}})],1)]),t._v(" "),t.loading?r("clip-loader",{staticClass:"loading",attrs:{color:"gray",size:"30px"}}):t._e()],1)])])])}),[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"col-xs-12 title-block"},[r("div",{staticClass:"title-left-block"},[r("h3",[t._v("即時任務列")])]),t._v(" "),r("div",{staticClass:"title-right-block"})])},function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("thead",[r("tr",{staticClass:"table-head"},[r("th",{staticClass:"text-center hide-td"},[t._v("編號")]),t._v(" "),r("th",{staticClass:"hide-td"},[t._v("機器人")]),t._v(" "),r("th",{staticClass:"hide-td"},[t._v("位置")]),t._v(" "),r("th",{staticClass:"hide-td"},[t._v("任務文字")]),t._v(" "),r("th",{staticClass:"hide-td"},[t._v("速度")]),t._v(" "),r("th",{staticClass:"text-center hide-td"},[t._v("電池百分比")]),t._v(" "),r("th",{staticClass:"text-center hide-td"},[t._v("採樣時間")])])])}],!1,null,"7a927fc4",null).exports},5672:(t,e,r)=>{"use strict";r.d(e,{Z:()=>I});var n=r(6486),o=r.n(n),i=r(9669),a=r.n(i),s=r(9038),c=(r(381),r(9755)),l=r.n(c);function u(t){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},u(t)}function d(){d=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function c(t,e,r,n){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new L(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return E()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var s=w(a,r);if(s){if(s===h)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=l(t,e,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===h)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}(t,r,a),i}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var h={};function f(){}function p(){}function m(){}var v={};s(v,o,(function(){return this}));var g=Object.getPrototypeOf,y=g&&g(g(S([])));y&&y!==e&&r.call(y,o)&&(v=y);var _=m.prototype=f.prototype=Object.create(v);function b(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function x(t,e){function n(o,i,a,s){var c=l(t[o],t,i);if("throw"!==c.type){var d=c.arg,h=d.value;return h&&"object"==u(h)&&r.call(h,"__await")?e.resolve(h.__await).then((function(t){n("next",t,a,s)}),(function(t){n("throw",t,a,s)})):e.resolve(h).then((function(t){d.value=t,a(d)}),(function(t){return n("throw",t,a,s)}))}s(c.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return h;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return h}var n=l(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,h;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,h):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,h)}function C(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function k(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function L(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(C,this),this.reset(!0)}function S(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:E}}function E(){return{value:void 0,done:!0}}return p.prototype=m,s(_,"constructor",m),s(m,"constructor",p),p.displayName=s(m,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,m):(t.__proto__=m,s(t,a,"GeneratorFunction")),t.prototype=Object.create(_),t},t.awrap=function(t){return{__await:t}},b(x.prototype),s(x.prototype,i,(function(){return this})),t.AsyncIterator=x,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new x(c(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},b(_),s(_,a,"Generator"),s(_,o,(function(){return this})),s(_,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=S,L.prototype={constructor:L,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(k),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=r.call(i,"catchLoc"),c=r.call(i,"finallyLoc");if(s&&c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,h):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),k(r),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;k(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:S(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),h}},t}function h(t,e,r,n,o,i,a){try{var s=t[i](a),c=s.value}catch(t){return void r(t)}s.done?e(c):Promise.resolve(c).then(n,o)}function f(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){h(i,n,o,a,s,"next",t)}function s(t){h(i,n,o,a,s,"throw",t)}a(void 0)}))}}const p={name:"MissionListSelect",props:{value:{type:[Array,Number,String]},disabled:{type:Boolean,default:!1},placeholder:{type:String,default:"請選擇"},color:{type:String,default:"theme-blue"},multiple:{type:Boolean,default:!1},items:{type:Array,default:function(){return[]}},select2Class:{type:String,default:null},isDeploy:{type:Number,default:null}},computed:{showValue:function(){var t=this;return!o().find(this.missions,(function(e){return e.name==t.value}))}},watch:{value:function(t){this.multiple?l()(this.$refs.select2).select2("data",o().map(t,(function(t){return t.name}))):l()(this.$refs.select2).select2("data",[t])}},data:function(){return{missions:[]}},created:function(){var t=this;return f(d().mark((function e(){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!=t.items.length){e.next=5;break}return e.next=3,t.fetchData();case 3:e.next=6;break;case 5:t.missions=t.items;case 6:t.setSelect2Val();case 7:case"end":return e.stop()}}),e)})))()},mounted:function(){this.init()},methods:{init:function(){var t,e=l()(this.$refs.select2),r=this;e.select2({minimumResultsForSearch:1,allowClear:!0,closeOnSelect:!r.multiple,language:{noResults:function(){return"查無資料"}},ajax:{delay:250,transport:(t=f(d().mark((function t(e,n,o){return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r.fetchData(e.data.term);case 2:n(r.missions);case 3:case"end":return t.stop()}}),t)}))),function(e,r,n){return t.apply(this,arguments)}),processResults:function(t){return{results:t.map((function(t){return{id:t.guid,text:t.name}}))}}}}),e.on("select2:select",(function(t){r.setVal()})),e.on("select2:unselect",(function(t){r.setVal()}))},fetchData:function(){var t=arguments,e=this;return f(d().mark((function r(){var n,o,i;return d().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n=t.length>0&&void 0!==t[0]?t[0]:null,e.loading=!0,r.prev=2,r.next=5,a().get("/api/missions",{params:{name:n}});case 5:0==(o=(o=r.sent).data).status&&(i=o.data,e.missions=i.missions),r.next=14;break;case 10:return r.prev=10,r.t0=r.catch(2),r.next=14,e.guestRedirectHome(r.t0);case 14:case"end":return r.stop()}}),r,null,[[2,10]])})))()},setSelect2Val:function(){var t=this;this.$nextTick((function(){t.multiple?l()(t.$refs.select2).val(o().map(t.value,(function(t){return t}))):l()(t.$refs.select2).val([t.value]),l()(t.$refs.select2).trigger("change")}))},setVal:function(){var t=l()(this.$refs.select2).select2("data");this.multiple?this.$emit("input",o().map(t,(function(t){return t}))):t.length>0?this.$emit("input",t[0].id):this.$emit("input",null),this.$emit("change")},refresh:function(){l()(this.$refs.select2).val(null).trigger("change"),l()(this.$refs.select2).select2("destroy"),this.init(),this.setSelect2Val()}}};var m=r(1900);const v=(0,m.Z)(p,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{class:[t.color]},[r("select",{ref:"select2",staticClass:"select2",class:t.select2Class,staticStyle:{width:"100%"},attrs:{multiple:t.multiple,"data-placeholder":t.placeholder,disabled:t.disabled}},[t._l(t.missions,(function(e){return r("option",{domProps:{value:e.guid}},[t._v("\n            "+t._s(e.name)+"\n        ")])})),t._v(" "),t.value&&t.showValue?r("option",{domProps:{value:t.value}},[t._v("\n            "+t._s(t.value)+"\n        ")]):t._e()],2)])}),[],!1,null,null,null).exports;var g=r(9755);function y(t){return y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},y(t)}function _(){_=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function c(t,e,r,n){var o=e&&e.prototype instanceof d?e:d,i=Object.create(o.prototype),a=new L(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return E()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var s=w(a,r);if(s){if(s===u)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=l(t,e,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===u)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}(t,r,a),i}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var u={};function d(){}function h(){}function f(){}var p={};s(p,o,(function(){return this}));var m=Object.getPrototypeOf,v=m&&m(m(S([])));v&&v!==e&&r.call(v,o)&&(p=v);var g=f.prototype=d.prototype=Object.create(p);function b(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function x(t,e){function n(o,i,a,s){var c=l(t[o],t,i);if("throw"!==c.type){var u=c.arg,d=u.value;return d&&"object"==y(d)&&r.call(d,"__await")?e.resolve(d.__await).then((function(t){n("next",t,a,s)}),(function(t){n("throw",t,a,s)})):e.resolve(d).then((function(t){u.value=t,a(u)}),(function(t){return n("throw",t,a,s)}))}s(c.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return u;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var n=l(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,u;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,u):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,u)}function C(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function k(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function L(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(C,this),this.reset(!0)}function S(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:E}}function E(){return{value:void 0,done:!0}}return h.prototype=f,s(g,"constructor",f),s(f,"constructor",h),h.displayName=s(f,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===h||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,f):(t.__proto__=f,s(t,a,"GeneratorFunction")),t.prototype=Object.create(g),t},t.awrap=function(t){return{__await:t}},b(x.prototype),s(x.prototype,i,(function(){return this})),t.AsyncIterator=x,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new x(c(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},b(g),s(g,a,"Generator"),s(g,o,(function(){return this})),s(g,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=S,L.prototype={constructor:L,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(k),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=r.call(i,"catchLoc"),c=r.call(i,"finallyLoc");if(s&&c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,u):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),u},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),k(r),u}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;k(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:S(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),u}},t}function b(t,e,r,n,o,i,a){try{var s=t[i](a),c=s.value}catch(t){return void r(t)}s.done?e(c):Promise.resolve(c).then(n,o)}function x(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){b(i,n,o,a,s,"next",t)}function s(t){b(i,n,o,a,s,"throw",t)}a(void 0)}))}}const w={name:"MissionBookingModal",$_veeValidate:{validator:"new"},components:{MissionListSelect:v,ClipLoader:s.Z},props:{value:{type:Boolean,default:!1},dataId:{type:[Number,String],default:null}},watch:{value:function(t){this.showModal=t}},data:function(){return{loading:!0,sending:!1,showModal:this.value,form:{}}},created:function(){this.resetForm(),this.resetFormValidate()},methods:{onShowModal:function(){var t=this;return x(_().mark((function e(){return _().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.adjustModalVerticalPosition(),t.resetForm(),t.resetFormValidate(),!t.dataId){e.next=6;break}return e.next=6,t.fetchData();case 6:t.loading=!1;case 7:case"end":return e.stop()}}),e)})))()},onHideModal:function(){this.resetForm(),this.resetFormValidate(),this.$emit("input",!1)},fetchData:function(){var t=this;return x(_().mark((function e(){var r,n;return _().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.loading=!0,e.prev=1,e.next=4,a().get("/api/mission-bookings/".concat(t.dataId));case 4:0==(r=(r=e.sent).data).status&&(n=r.data,t.form=n.missionBooking),e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(1),e.next=13,t.guestRedirectHome(e.t0);case 13:return e.prev=13,t.loading=!1,e.finish(13);case 16:case"end":return e.stop()}}),e,null,[[1,9,13,16]])})))()},submit:function(){var t=this;return x(_().mark((function e(){var r;return _().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.validate();case 2:if(e.sent){e.next=5;break}return e.abrupt("return");case 5:if(t.form.schedule=t.form.minutes.toString()+" "+t.form.hours.toString()+" "+t.form.day.toString()+" "+t.form.month.toString()+" "+t.form.week.toString(),t.sending=!0,e.prev=7,r=null,!t.dataId){e.next=15;break}return e.next=12,a().patch("/api/mission-bookings/".concat(t.dataId),t.form);case 12:r=e.sent,e.next=18;break;case 15:return e.next=17,a().post("/api/mission-bookings",t.form);case 17:r=e.sent;case 18:0==(r=r.data).status&&(t.$toast.success({title:"成功訊息",message:"預約成功！"}),t.$emit("update"),t.showModal=!1),e.next=26;break;case 22:return e.prev=22,e.t0=e.catch(7),e.next=26,t.guestRedirectHome(e.t0);case 26:return e.prev=26,t.sending=!1,e.finish(26);case 29:case"end":return e.stop()}}),e,null,[[7,22,26,29]])})))()},resetForm:function(){this.form={id:null,mission_id:null,schedule:null,minutes:"*",hours:"*",day:"*",month:"*",week:"*"}},adjustModalVerticalPosition:function(){var t=g(this.$el).find(".modal-dialog"),e=(g(window).height()-t.height())/6;e>30?t.css({marginTop:e}):t.css({marginTop:30})}}};var C=r(3379),k=r.n(C),L=r(225),S={insert:"head",singleton:!1};k()(L.Z,S);L.Z.locals;const E=(0,m.Z)(w,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("modal",{attrs:{footer:!1,backdrop:!1,"append-to-body":!0,keyboard:!1},on:{show:t.onShowModal,hide:t.onHideModal},model:{value:t.showModal,callback:function(e){t.showModal=e},expression:"showModal"}},[r("div",{attrs:{slot:"title"},slot:"title"},[t._v(t._s(t.dataId?"編輯預約任務":"預約任務"))]),t._v(" "),r("div",{attrs:{slot:"default"},slot:"default"},[t.loading?r("clip-loader",{staticClass:"loading",attrs:{color:"gray",size:"30px"}}):r("form",{staticClass:"form-horizontal",attrs:{novalidate:""},on:{submit:function(e){return e.preventDefault(),t.submit.apply(null,arguments)}}},[r("div",{staticClass:"form-group"},[r("label",{staticClass:"col-md-3 control-label"},[t._v("任務"),r("span",{staticClass:"is-danger"},[t._v(" *")])]),t._v(" "),r("div",{staticClass:"col-md-9"},[r("mission-list-select",{model:{value:t.form.mission_id,callback:function(e){t.$set(t.form,"mission_id",e)},expression:"form.mission_id"}}),t._v(" "),r("span",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("mission_id:required"),expression:"errors.has('mission_id:required')"}],staticClass:"help is-danger"},[t._v("請選擇任務")])],1)]),t._v(" "),r("div",{staticClass:"form-group"},[r("label",{staticClass:"col-md-3 control-label"},[t._v("預約時間")]),t._v(" "),r("div",{staticClass:"col-md-9 schedule-time"},[r("select",{directives:[{name:"model",rawName:"v-model",value:t.form.month,expression:"form.month"}],staticClass:"date-time-selector",style:"color: "+(t.form.month?"":"#a9a9a9"),on:{change:function(e){var r=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(t.form,"month",e.target.multiple?r:r[0])}}},[r("option",{attrs:{value:"*"}},[t._v("月")]),t._v(" "),t._l(12,(function(e){return r("option",{domProps:{value:e.toString()}},[t._v(t._s(e))])}))],2),t._v(" "),r("select",{directives:[{name:"model",rawName:"v-model",value:t.form.day,expression:"form.day"}],staticClass:"date-time-selector",style:"color: "+(t.form.day?"":"#a9a9a9"),on:{change:function(e){var r=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(t.form,"day",e.target.multiple?r:r[0])}}},[r("option",{attrs:{value:"*"}},[t._v("日")]),t._v(" "),t._l(31,(function(e){return r("option",{domProps:{value:e.toString()}},[t._v(t._s(e))])}))],2),t._v(" "),r("select",{directives:[{name:"model",rawName:"v-model",value:t.form.week,expression:"form.week"}],staticClass:"date-time-selector",staticStyle:{"min-width":"80px"},style:"color: "+(t.form.week?"":"#a9a9a9"),on:{change:function(e){var r=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(t.form,"week",e.target.multiple?r:r[0])}}},[r("option",{attrs:{value:"*"}},[t._v("星期")]),t._v(" "),t._l(7,(function(e){return r("option",{domProps:{value:e.toString()}},[t._v(t._s(e))])}))],2),t._v(" "),r("select",{directives:[{name:"model",rawName:"v-model",value:t.form.hours,expression:"form.hours"}],staticClass:"date-time-selector",style:"color: "+(t.form.hours?"":"#a9a9a9"),on:{change:function(e){var r=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(t.form,"hours",e.target.multiple?r:r[0])}}},[r("option",{attrs:{value:"*"}},[t._v("時")]),t._v(" "),t._l(24,(function(e,n){return r("option",{domProps:{value:n.toString()}},[t._v(t._s(n))])}))],2),t._v(" "),r("select",{directives:[{name:"model",rawName:"v-model",value:t.form.minutes,expression:"form.minutes"}],staticClass:"date-time-selector",style:"color: "+(t.form.minutes?"":"#a9a9a9"),on:{change:function(e){var r=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(t.form,"minutes",e.target.multiple?r:r[0])}}},[r("option",{attrs:{value:"*"}},[t._v("分")]),t._v(" "),t._l(60,(function(e,n){return r("option",{domProps:{value:n.toString()}},[t._v(t._s(n))])}))],2)])]),t._v(" "),r("div",{staticClass:"text-right"},[r("button",{staticClass:"btn btn-light-green",attrs:{disabled:t.sending}},[t._v("預約")]),t._v(" "),r("button",{staticClass:"btn btn-default",attrs:{type:"button"},on:{click:function(e){t.showModal=!1}}},[t._v("取消")])])])],1)])}),[],!1,null,"5adad37c",null).exports;function M(t){return M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},M(t)}function O(){O=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function c(t,e,r,n){var o=e&&e.prototype instanceof d?e:d,i=Object.create(o.prototype),a=new C(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return L()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var s=b(a,r);if(s){if(s===u)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=l(t,e,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===u)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}(t,r,a),i}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var u={};function d(){}function h(){}function f(){}var p={};s(p,o,(function(){return this}));var m=Object.getPrototypeOf,v=m&&m(m(k([])));v&&v!==e&&r.call(v,o)&&(p=v);var g=f.prototype=d.prototype=Object.create(p);function y(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function _(t,e){function n(o,i,a,s){var c=l(t[o],t,i);if("throw"!==c.type){var u=c.arg,d=u.value;return d&&"object"==M(d)&&r.call(d,"__await")?e.resolve(d.__await).then((function(t){n("next",t,a,s)}),(function(t){n("throw",t,a,s)})):e.resolve(d).then((function(t){u.value=t,a(u)}),(function(t){return n("throw",t,a,s)}))}s(c.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function b(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,b(t,e),"throw"===e.method))return u;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var n=l(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,u;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,u):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,u)}function x(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function w(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function C(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(x,this),this.reset(!0)}function k(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:L}}function L(){return{value:void 0,done:!0}}return h.prototype=f,s(g,"constructor",f),s(f,"constructor",h),h.displayName=s(f,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===h||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,f):(t.__proto__=f,s(t,a,"GeneratorFunction")),t.prototype=Object.create(g),t},t.awrap=function(t){return{__await:t}},y(_.prototype),s(_.prototype,i,(function(){return this})),t.AsyncIterator=_,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new _(c(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},y(g),s(g,a,"Generator"),s(g,o,(function(){return this})),s(g,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=k,C.prototype={constructor:C,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(w),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=r.call(i,"catchLoc"),c=r.call(i,"finallyLoc");if(s&&c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,u):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),u},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),w(r),u}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;w(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:k(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),u}},t}function P(t,e,r,n,o,i,a){try{var s=t[i](a),c=s.value}catch(t){return void r(t)}s.done?e(c):Promise.resolve(c).then(n,o)}function j(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){P(i,n,o,a,s,"next",t)}function s(t){P(i,n,o,a,s,"throw",t)}a(void 0)}))}}const N={name:"MissionBookingListPage",components:{ClipLoader:s.Z,MissionBookingModal:E},data:function(){return{loading:!1,sending:!1,missionBookings:[],pagination:{last_page:1,current_page:this.$route.query.page?parseInt(this.$route.query.page):1},modal:{show:!1,id:null}}},created:function(){this.fetchData()},methods:{fetchData:function(){var t=this;return j(O().mark((function e(){var r,n;return O().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.loading=!0,e.prev=1,e.next=4,a().get("/api/mission-bookings");case 4:0==(r=(r=e.sent).data).status&&(n=r.data,t.missionBookings=n.missionBookings,n.pagination&&(t.pagination=n.pagination)),e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(1),e.next=13,t.guestRedirectHome(e.t0);case 13:return e.prev=13,t.loading=!1,e.finish(13);case 16:case"end":return e.stop()}}),e,null,[[1,9,13,16]])})))()},deleteRow:function(t){var e=this;return j(O().mark((function r(){return O().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(confirm("確定要刪除此筆預約任務？")){r.next=2;break}return r.abrupt("return");case 2:return e.sending=!0,r.prev=3,r.next=6,a().delete("/api/mission-bookings/".concat(t.id));case 6:0==r.sent.data.status&&(e.$toast.success({title:"成功訊息",message:"刪除成功"}),e.missionBookings=o().filter(e.missionBookings,(function(e){return e.id!=t.id}))),r.next=15;break;case 11:return r.prev=11,r.t0=r.catch(3),r.next=15,e.guestRedirectHome(r.t0);case 15:return r.prev=15,e.sending=!1,r.finish(15);case 18:case"end":return r.stop()}}),r,null,[[3,11,15,18]])})))()},changePage:function(){this.$router.push({path:"/missionBookings",query:{page:this.pagination.current_page}})},showModal:function(t){this.modal.id=t,this.modal.show=!0}}};var T=r(9376),$={insert:"head",singleton:!1};k()(T.Z,$);T.Z.locals;const I=(0,m.Z)(N,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("section",{staticClass:"content-header clearfix"},[r("span",[t._v("預約任務")]),t._v(" "),r("div",{staticClass:"pull-right"},[r("button",{staticClass:"btn btn-light-green",staticStyle:{"margin-left":"4px"},on:{click:function(e){return t.showModal(null)}}},[r("i",{staticClass:"fa fa-plus"}),t._v(" "),r("span",{staticStyle:{"margin-left":"4px"}},[t._v("創建預約任務")])])])]),t._v(" "),r("section",{staticClass:"content"},[r("div",{staticClass:"col-xs-12"},[r("div",{staticClass:"box"},[r("div",{staticClass:"box-body"},[t.loading?t._e():r("div",[r("div",{staticClass:"data-list"},t._l(t.missionBookings,(function(e){return r("div",{staticClass:"data-row"},[r("div",{staticClass:"data-row-content"},[r("div",{staticClass:"data-row-title"},[t._v("\n                                        "+t._s(e.mission.name)+" / "+t._s(e.month)+"月"+t._s(e.day)+"日 星期"+t._s(e.week)+" "+t._s(e.hours)+"時"+t._s(e.minutes)+"分\n                                    ")]),t._v(" "),r("div",{staticClass:"data-row-subtitle"},[t._v("\n                                        "+t._s(e.mission_id)+"\n                                    ")])]),t._v(" "),r("div",{staticClass:"data-row-right-block"},[r("button",{staticClass:"btn btn-light-green-3d op-btn",attrs:{type:"button",disabled:t.sending},on:{click:function(r){return t.showModal(e.id)}}},[r("i",{staticClass:"fa fa-pencil"})]),t._v(" "),r("button",{staticClass:"btn btn-delete-3d op-btn",attrs:{type:"button",disabled:t.sending},on:{click:function(r){return t.deleteRow(e)}}},[r("i",{staticClass:"fa fa-trash"})])])])})),0)]),t._v(" "),t.loading?r("clip-loader",{staticClass:"loading",attrs:{color:"gray",size:"30px"}}):t._e()],1)])])]),t._v(" "),r("mission-booking-modal",{attrs:{"data-id":t.modal.id},on:{update:t.fetchData},model:{value:t.modal.show,callback:function(e){t.$set(t.modal,"show",e)},expression:"modal.show"}})],1)}),[],!1,null,"58bcecb2",null).exports},1848:(t,e,r)=>{"use strict";r.d(e,{Z:()=>P});var n=r(9669),o=r.n(n),i=r(6486),a=r.n(i),s=r(381),c=r.n(s),l=r(6875),u=r(6011),d=r(9038);function h(t){return h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},h(t)}function f(){f=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function c(t,e,r,n){var o=e&&e.prototype instanceof d?e:d,i=Object.create(o.prototype),a=new L(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return E()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var s=w(a,r);if(s){if(s===u)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=l(t,e,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===u)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}(t,r,a),i}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var u={};function d(){}function p(){}function m(){}var v={};s(v,o,(function(){return this}));var g=Object.getPrototypeOf,y=g&&g(g(S([])));y&&y!==e&&r.call(y,o)&&(v=y);var _=m.prototype=d.prototype=Object.create(v);function b(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function x(t,e){function n(o,i,a,s){var c=l(t[o],t,i);if("throw"!==c.type){var u=c.arg,d=u.value;return d&&"object"==h(d)&&r.call(d,"__await")?e.resolve(d.__await).then((function(t){n("next",t,a,s)}),(function(t){n("throw",t,a,s)})):e.resolve(d).then((function(t){u.value=t,a(u)}),(function(t){return n("throw",t,a,s)}))}s(c.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return u;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var n=l(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,u;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,u):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,u)}function C(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function k(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function L(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(C,this),this.reset(!0)}function S(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:E}}function E(){return{value:void 0,done:!0}}return p.prototype=m,s(_,"constructor",m),s(m,"constructor",p),p.displayName=s(m,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,m):(t.__proto__=m,s(t,a,"GeneratorFunction")),t.prototype=Object.create(_),t},t.awrap=function(t){return{__await:t}},b(x.prototype),s(x.prototype,i,(function(){return this})),t.AsyncIterator=x,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new x(c(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},b(_),s(_,a,"Generator"),s(_,o,(function(){return this})),s(_,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=S,L.prototype={constructor:L,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(k),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=r.call(i,"catchLoc"),c=r.call(i,"finallyLoc");if(s&&c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,u):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),u},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),k(r),u}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;k(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:S(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),u}},t}function p(t,e,r,n,o,i,a){try{var s=t[i](a),c=s.value}catch(t){return void r(t)}s.done?e(c):Promise.resolve(c).then(n,o)}const m={name:"MissionQueueModal",$_veeValidate:{validator:"new"},components:{ClipLoader:d.Z},props:{value:{type:Boolean,default:!1},dataId:[Number,String]},watch:{value:function(t){this.showModal=t}},data:function(){return{showModal:this.value,loading:!1,missionQueue:{}}},created:function(){},methods:{fetchData:function(){var t,e=this;return(t=f().mark((function t(){var r,n;return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,e.loading=!0,t.next=4,o().get("/api/missionQueues/".concat(e.dataId));case 4:0==(r=(r=t.sent).data).status&&(n=r.data,e.missionQueue=n.missionQueue),t.next=13;break;case 9:return t.prev=9,t.t0=t.catch(0),t.next=13,e.guestRedirectHome(t.t0);case 13:return t.prev=13,e.loading=!1,t.finish(13);case 16:case"end":return t.stop()}}),t,null,[[0,9,13,16]])})),function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){p(i,n,o,a,s,"next",t)}function s(t){p(i,n,o,a,s,"throw",t)}a(void 0)}))})()},onShowModal:function(){this.dataId&&this.fetchData()},onHideModal:function(){this.$emit("input",!1)}}};var v=r(1900);const g=(0,v.Z)(m,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("modal",{attrs:{footer:!1,backdrop:!1,"append-to-body":!0,keyboard:!1},on:{show:t.onShowModal,hide:t.onHideModal},model:{value:t.showModal,callback:function(e){t.showModal=e},expression:"showModal"}},[r("div",{attrs:{slot:"title"},slot:"title"},[t._v("所有點位")]),t._v(" "),r("div",{attrs:{slot:"default"},slot:"default"},[t.loading?r("clip-loader",{staticClass:"loading",attrs:{color:"gray",size:"30px"}}):r("table",{staticClass:"table table-bordered table-hover break-table"},[r("thead",[r("tr",{staticClass:"table-head"},[r("th",{staticClass:"hide-td"},[t._v("點位名稱")]),t._v(" "),r("th",{staticClass:"hide-td centered"},[t._v("位置")])])]),t._v(" "),r("tbody",t._l(t.missionQueue.locations,(function(e){return r("tr",[r("td",{attrs:{"data-title":"點位名稱"}},[t._v(t._s(e.device_name))]),t._v(" "),r("td",{staticClass:"centered",attrs:{"data-title":"位置"}},[null!==e.x&&null!==e.y?[t._v("\n                        ("+t._s(e.x)+", "+t._s(e.y)+")\n                    ")]:[t._v("\n                        未設定\n                    ")]],2)])})),0)])],1)])}),[],!1,null,"61b27018",null).exports;function y(t){return y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},y(t)}function _(){_=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function c(t,e,r,n){var o=e&&e.prototype instanceof d?e:d,i=Object.create(o.prototype),a=new L(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return E()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var s=w(a,r);if(s){if(s===u)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=l(t,e,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===u)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}(t,r,a),i}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var u={};function d(){}function h(){}function f(){}var p={};s(p,o,(function(){return this}));var m=Object.getPrototypeOf,v=m&&m(m(S([])));v&&v!==e&&r.call(v,o)&&(p=v);var g=f.prototype=d.prototype=Object.create(p);function b(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function x(t,e){function n(o,i,a,s){var c=l(t[o],t,i);if("throw"!==c.type){var u=c.arg,d=u.value;return d&&"object"==y(d)&&r.call(d,"__await")?e.resolve(d.__await).then((function(t){n("next",t,a,s)}),(function(t){n("throw",t,a,s)})):e.resolve(d).then((function(t){u.value=t,a(u)}),(function(t){return n("throw",t,a,s)}))}s(c.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return u;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var n=l(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,u;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,u):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,u)}function C(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function k(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function L(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(C,this),this.reset(!0)}function S(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:E}}function E(){return{value:void 0,done:!0}}return h.prototype=f,s(g,"constructor",f),s(f,"constructor",h),h.displayName=s(f,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===h||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,f):(t.__proto__=f,s(t,a,"GeneratorFunction")),t.prototype=Object.create(g),t},t.awrap=function(t){return{__await:t}},b(x.prototype),s(x.prototype,i,(function(){return this})),t.AsyncIterator=x,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new x(c(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},b(g),s(g,a,"Generator"),s(g,o,(function(){return this})),s(g,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=S,L.prototype={constructor:L,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(k),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=r.call(i,"catchLoc"),c=r.call(i,"finallyLoc");if(s&&c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,u):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),u},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),k(r),u}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;k(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:S(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),u}},t}function b(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function x(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?b(Object(r),!0).forEach((function(e){w(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):b(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function w(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function C(t,e,r,n,o,i,a){try{var s=t[i](a),c=s.value}catch(t){return void r(t)}s.done?e(c):Promise.resolve(c).then(n,o)}function k(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){C(i,n,o,a,s,"next",t)}function s(t){C(i,n,o,a,s,"throw",t)}a(void 0)}))}}const L={name:"MissionQueueListPage",components:{MissionQueueModal:g,Reload:u.Z,Datetimepicker:l.Z,ClipLoader:d.Z},props:{viewMode:{type:Number,default:0}},computed:{maxDatetime:function(){return c()().endOf("day").format()}},data:function(){var t=this.$route.query,e=t.start_date,r=t.end_date,n=t.name;return 0==this.viewMode?(e=null,r=null,n=null):r||(r=c()().endOf("day").format("YYYY-MM-DD")),{loading:!0,sending:!1,missionQueues:[],position:null,form:{history:this.viewMode,start_date:e,end_date:r,name:n,page:this.$route.query.page&&!a().isNaN(this.$route.query.page)?this.$route.query.page:1},viewModes:[{value:0,name:"目前任務列"},{value:1,name:"歷史任務列"}],missionQueueTimer:null,showReload:!1,pagination:null,modal:{id:null,show:!1}}},created:function(){this.fetchData(!1,!0),this.startMissionQueueTimer()},beforeDestroy:function(){this.stopMissionQueueTimer()},methods:{fetchData:function(){var t=arguments,e=this;return k(_().mark((function r(){var n,i,a;return _().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n=t.length>0&&void 0!==t[0]&&t[0],t.length>1&&void 0!==t[1]&&t[1]&&(e.loading=!0),r.prev=3,r.next=6,o().get("/api/missionQueues",{params:x(x({},e.form),{},{refresh:n?1:0})});case 6:0==(i=(i=r.sent).data).status?(a=i.data,e.missionQueues=a.missionQueues,e.position=a.position,a.pagination?e.pagination=a.pagination:e.pagination=null):-21==i.status&&(e.showReload=!0,e.stopMissionQueueTimer()),r.next=15;break;case 11:return r.prev=11,r.t0=r.catch(3),r.next=15,e.guestRedirectHome(r.t0);case 15:return r.prev=15,e.loading=!1,r.finish(15);case 18:case"end":return r.stop()}}),r,null,[[3,11,15,18]])})))()},search:function(){var t=a().pickBy(this.form,a().identity);this.isDateRangeValid(t.start_date,t.end_date)?this.changePage(1):this.$toast.warn({title:"警告訊息",message:"無效的日期範圍。"})},updateMissionQueues:function(t,e){var r=this;return k(_().mark((function n(){var i;return _().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r.sending=!0,n.prev=1,n.next=4,o().put("/api/missionQueues/".concat(t),{state_id:e});case 4:0==(i=(i=n.sent).data).status?3==e?r.$toast.success({title:"成功訊息",message:"開始成功！"}):r.$toast.success({title:"成功訊息",message:"暫停成功！"}):-19==i.status&&r.$toast.error({title:"錯誤訊息",message:"任務執行失敗！"}),n.next=13;break;case 9:return n.prev=9,n.t0=n.catch(1),n.next=13,r.guestRedirectHome(n.t0);case 13:return n.prev=13,r.sending=!1,n.finish(13);case 16:case"end":return n.stop()}}),n,null,[[1,9,13,16]])})))()},destroyMissionQueues:function(t){var e=this;return k(_().mark((function r(){var n;return _().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(confirm("確定要刪除「".concat(a().get(t,"mission.name","此任務列"),"」？"))){r.next=2;break}return r.abrupt("return");case 2:return e.sending=!0,r.prev=3,r.next=6,o().delete("/api/missionQueues/".concat(t.id));case 6:0==(n=(n=r.sent).data).status?e.$toast.success({title:"成功訊息",message:"執行成功！"}):-19==n.status?e.$toast.error({title:"錯誤訊息",message:"任務執行失敗！"}):-20==n.status&&e.$toast.error({title:"錯誤訊息",message:"查無任務！"}),r.next=15;break;case 11:return r.prev=11,r.t0=r.catch(3),r.next=15,e.guestRedirectHome(r.t0);case 15:return r.prev=15,e.sending=!1,r.finish(15);case 18:case"end":return r.stop()}}),r,null,[[3,11,15,18]])})))()},startMissionQueueTimer:function(){if(0===this.viewMode){var t=this;this.missionQueueTimer&&clearInterval(this.missionQueueTimer),this.missionQueueTimer=setInterval((function(){t.fetchData(!1,!1)}),5e3)}},stopMissionQueueTimer:function(){this.missionQueueTimer&&(clearInterval(this.missionQueueTimer),this.missionQueueTimer=null)},isDateRangeValid:function(t,e){if(!t||!e)return!0;var r=c()(t),n=c()(e);return r.isValid()&&n.isValid()&&(r.isBefore(n)||r.isSame(n))},changePage:function(t){this.form.page=t;var e="";e=0==this.viewMode?"/missionQueues/current":"/missionQueues/history",this.$router.push({path:e,query:x(x({},this.form),{},{t:Date.now()})})},showModal:function(t){this.modal.id=t,this.modal.show=!0}}};var S=r(3379),E=r.n(S),M=r(147),O={insert:"head",singleton:!1};E()(M.Z,O);M.Z.locals;const P=(0,v.Z)(L,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("section",{staticClass:"content-header clearfix"},[r("span",[t._v(t._s(t.viewModes[t.viewMode].name))]),t._v(" "),1==t.viewMode?r("div",{staticClass:"pull-right"},[r("button",{staticClass:"btn btn-default",on:{click:function(e){return t.fetchData(!0,!0)}}},[r("i",{staticClass:"fa fa-refresh"}),t._v("\n                同步更新\n            ")])]):t._e()]),t._v(" "),r("section",{staticClass:"content"},[r("div",{staticClass:"col-xs-12"},[r("div",{staticClass:"box"},[r("div",{staticClass:"box-header"},[1==t.viewMode?r("div",{staticClass:"row"},[r("form",{staticClass:"col-xs-12",on:{submit:function(e){return e.preventDefault(),t.search.apply(null,arguments)}}},[r("label",[t._v("日期範圍：")]),t._v(" "),r("datetimepicker",{staticStyle:{width:"120px"},attrs:{id:"start_date",type:"date",format:"yyyy-MM-dd","input-class":"form-control","picker-class":"theme-light-green",placeholder:"請選擇","max-datetime":t.maxDatetime},model:{value:t.form.start_date,callback:function(e){t.$set(t.form,"start_date",e)},expression:"form.start_date"}}),t._v(" "),r("span",[t._v(" ~ ")]),t._v(" "),r("datetimepicker",{staticStyle:{width:"120px"},attrs:{id:"end_date",type:"date",format:"yyyy-MM-dd","input-class":"form-control","picker-class":"theme-light-green",placeholder:"請選擇","max-datetime":t.maxDatetime},model:{value:t.form.end_date,callback:function(e){t.$set(t.form,"end_date",e)},expression:"form.end_date"}}),t._v(" "),r("label",[t._v("名稱：")]),t._v(" "),r("div",{staticStyle:{display:"inline-block"}},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.form.name,expression:"form.name"}],staticClass:"form-control",attrs:{type:"text",placeholder:"搜尋名稱"},domProps:{value:t.form.name},on:{input:function(e){e.target.composing||t.$set(t.form,"name",e.target.value)}}})]),t._v(" "),r("button",{staticClass:"btn btn-default-3d search-btn",attrs:{type:"submit"},on:{click:t.search}},[t._v("查詢")])],1)]):t._e()]),t._v(" "),r("div",{staticClass:"box-body"},[r("div",{staticClass:"row"},[t.loading?r("clip-loader",{staticClass:"loading",attrs:{color:"gray",size:"30px"}}):r("div",{staticClass:"col-xs-12"},[0==t.viewMode?[t.showReload?r("reload",{on:{click:function(e){t.showReload=!1,t.fetchData(!1,!0)}}}):r("div",{staticClass:"data-list"},t._l(t.missionQueues,(function(e){return r("div",{staticClass:"data-row"},[r("div",{staticClass:"data-row-status"},["Executing"==e.state?r("i",{staticClass:"fa fa-spinner fa-pulse fa-fw color-start"}):"Pending"==e.state?r("i",{staticClass:"fa fa-pause fa-fw"}):t._e()]),t._v(" "),r("div",{staticClass:"data-row-content"},[r("div",{staticClass:"data-row-title"},[e.mission?r("span",[t._v(t._s(e.mission.name)+"\n                                                    "),e.locations_count||0==e.locations_count?r("a",{attrs:{href:"javascript:void(0)"},on:{click:function(r){return t.showModal(e.id)}}},[t._v("("+t._s(e.locations_count)+")")]):t._e()]):t._e()]),t._v(" "),r("div",{staticClass:"data-row-subtitle"},[t._v("\n                                                "+t._s(e.id)+"\n                                                "),e.mission&&e.mission.region?r("span",[t._v("/ "+t._s(e.mission.region))]):t._e(),t._v(" "),t.position.position?[t._v(" / x:("+t._s(t.position.position.x)+", y:"+t._s(t.position.position.y)+")")]:t._e()],2)]),t._v(" "),r("div",{staticClass:"data-row-right-block"},[r("button",{staticClass:"btn btn-delete-3d op-btn",attrs:{type:"button",title:"刪除",disabled:t.sending},on:{click:function(r){return t.destroyMissionQueues(e)}}},[r("i",{staticClass:"fa fa-trash"})]),t._v(" "),r("button",{staticClass:"btn btn-default-3d op-btn",attrs:{type:"button",title:"暫停",disabled:t.sending},on:{click:function(r){return t.updateMissionQueues(e.id,11)}}},[r("i",{staticClass:"fa fa-pause"})]),t._v(" "),r("button",{staticClass:"btn btn-light-green-3d op-btn",attrs:{type:"button",title:"開始",disabled:t.sending},on:{click:function(r){return t.updateMissionQueues(e.id,3)}}},[r("i",{staticClass:"fa fa-play"})])])])})),0)]:1==t.viewMode?[r("div",{staticClass:"data-list"},t._l(t.missionQueues,(function(e){return r("div",{staticClass:"data-row"},[r("div",{staticClass:"data-row-status"},["Done"==e.state?r("i",{staticClass:"fa fa-check fa-fw color-start"}):"Aborted"==e.state?r("i",{staticClass:"fa fa-ban color-stop"}):"Failed"==e.state?r("i",{staticClass:"fa fa-times-circle color-stop"}):t._e()]),t._v(" "),r("div",{staticClass:"data-row-content"},[r("div",{staticClass:"data-row-title"},[t._v("\n                                                "+t._s(e.mission?e.mission.name:null)+"\n                                            ")]),t._v(" "),r("div",{staticClass:"data-row-subtitle"},[t._v("\n                                                "+t._s(e.id)+"\n                                                "),e.mission?[t._v(" / "+t._s(e.mission_id)+"\n                                                    "),e.locations_count||0==e.locations_count?r("a",{attrs:{href:"javascript:void(0)"},on:{click:function(r){return t.showModal(e.id)}}},[t._v("("+t._s(e.locations_count)+")")]):t._e()]:t._e()],2)]),t._v(" "),r("div",{staticClass:"data-row-right-block"},[e.finished?[r("div",{staticStyle:{"letter-spacing":"0"}},[t._v("開始日期：\n                                                    "),e.started?[t._v(t._s(t._f("datetime")(e.started)))]:t._e()],2),t._v(" "),r("div",{staticStyle:{"letter-spacing":"0"}},[t._v("結束日期：\n                                                    "),e.finished?[t._v(t._s(t._f("datetime")(e.finished)))]:t._e()],2)]:t._e()],2)])})),0),t._v(" "),t.pagination?r("div",{staticClass:"text-center"},[r("pagination",{attrs:{"direction-links":!1,"boundary-links":!0,size:"sm","total-page":t.pagination.last_page,"max-size":10},on:{change:t.changePage},model:{value:t.pagination.current_page,callback:function(e){t.$set(t.pagination,"current_page",e)},expression:"pagination.current_page"}})],1):t._e()]:t._e()],2)],1)])])])]),t._v(" "),r("mission-queue-modal",{attrs:{"data-id":t.modal.id},model:{value:t.modal.show,callback:function(e){t.$set(t.modal,"show",e)},expression:"modal.show"}})],1)}),[],!1,null,"84112e68",null).exports},9028:(t,e,r)=>{"use strict";r.d(e,{Z:()=>P});var n=r(9669),o=r.n(n),i=r(6486),a=r.n(i),s=r(381),c=r.n(s),l=r(9038),u=r(6875);function d(t){return d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},d(t)}function h(){h=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function c(t,e,r,n){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new L(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return E()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var s=w(a,r);if(s){if(s===u)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=l(t,e,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===u)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}(t,r,a),i}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var u={};function f(){}function p(){}function m(){}var v={};s(v,o,(function(){return this}));var g=Object.getPrototypeOf,y=g&&g(g(S([])));y&&y!==e&&r.call(y,o)&&(v=y);var _=m.prototype=f.prototype=Object.create(v);function b(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function x(t,e){function n(o,i,a,s){var c=l(t[o],t,i);if("throw"!==c.type){var u=c.arg,h=u.value;return h&&"object"==d(h)&&r.call(h,"__await")?e.resolve(h.__await).then((function(t){n("next",t,a,s)}),(function(t){n("throw",t,a,s)})):e.resolve(h).then((function(t){u.value=t,a(u)}),(function(t){return n("throw",t,a,s)}))}s(c.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return u;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var n=l(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,u;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,u):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,u)}function C(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function k(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function L(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(C,this),this.reset(!0)}function S(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:E}}function E(){return{value:void 0,done:!0}}return p.prototype=m,s(_,"constructor",m),s(m,"constructor",p),p.displayName=s(m,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,m):(t.__proto__=m,s(t,a,"GeneratorFunction")),t.prototype=Object.create(_),t},t.awrap=function(t){return{__await:t}},b(x.prototype),s(x.prototype,i,(function(){return this})),t.AsyncIterator=x,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new x(c(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},b(_),s(_,a,"Generator"),s(_,o,(function(){return this})),s(_,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=S,L.prototype={constructor:L,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(k),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=r.call(i,"catchLoc"),c=r.call(i,"finallyLoc");if(s&&c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,u):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),u},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),k(r),u}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;k(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:S(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),u}},t}function f(t,e,r,n,o,i,a){try{var s=t[i](a),c=s.value}catch(t){return void r(t)}s.done?e(c):Promise.resolve(c).then(n,o)}function p(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){f(i,n,o,a,s,"next",t)}function s(t){f(i,n,o,a,s,"throw",t)}a(void 0)}))}}const m={name:"MissionQueueSampleModal",$_veeValidate:{validator:"new"},components:{RemoteManagementSystemStatusListView:r(3789).Z,ClipLoader:l.Z},props:{value:{type:Boolean,default:!1},dataId:[Number,String],mode:String},watch:{value:function(t){this.showModal=t}},data:function(){return{showModal:this.value,loading:!1,sending:!1,form:{id:null,remark:null,remote_management_system_statuses:[]}}},created:function(){},methods:{getMissionQueue:function(){return{id:null,remark:null,remote_management_system_statuses:[]}},onShowModal:function(){this.dataId&&this.fetchData()},onHideModal:function(){this.$emit("input",!1),this.form=this.getMissionQueue()},fetchData:function(){var t=this;return p(h().mark((function e(){var r,n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t.loading=!0,e.next=4,o().get("/api/missionQueues/".concat(t.dataId));case 4:0==(r=(r=e.sent).data).status&&(n=r.data,t.form=n.missionQueue),e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(0),e.next=13,t.guestRedirectHome(e.t0);case 13:return e.prev=13,t.loading=!1,e.finish(13);case 16:case"end":return e.stop()}}),e,null,[[0,9,13,16]])})))()},submit:function(){var t=this;return p(h().mark((function e(){var r;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.validate();case 2:if(e.sent){e.next=5;break}return e.abrupt("return");case 5:if(e.prev=5,t.sending=!0,r=null,t.dataId){e.next=14;break}return e.next=11,o().post("/api/missionQueues",t.form);case 11:r=e.sent,e.next=17;break;case 14:return e.next=16,o().put("/api/missionQueues/".concat(t.dataId),t.form);case 16:r=e.sent;case 17:0==(r=r.data).status?(t.$toast.success({title:"成功訊息",message:"".concat(t.dataId?"更新":"創建","成功")}),t.$emit("update",_.cloneDeep(t.form)),t.showModal=!1):-19==r.status&&t.$toast.error({title:"錯誤訊息",message:"".concat(t.dataId?"更新":"創建","失敗")}),e.next=25;break;case 21:return e.prev=21,e.t0=e.catch(5),e.next=25,t.guestRedirectHome(e.t0);case 25:return e.prev=25,t.sending=!1,e.finish(25);case 28:case"end":return e.stop()}}),e,null,[[5,21,25,28]])})))()}}};var v=r(1900);function g(t){return g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},g(t)}function y(){y=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function c(t,e,r,n){var o=e&&e.prototype instanceof d?e:d,i=Object.create(o.prototype),a=new L(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return E()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var s=w(a,r);if(s){if(s===u)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=l(t,e,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===u)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}(t,r,a),i}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var u={};function d(){}function h(){}function f(){}var p={};s(p,o,(function(){return this}));var m=Object.getPrototypeOf,v=m&&m(m(S([])));v&&v!==e&&r.call(v,o)&&(p=v);var _=f.prototype=d.prototype=Object.create(p);function b(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function x(t,e){function n(o,i,a,s){var c=l(t[o],t,i);if("throw"!==c.type){var u=c.arg,d=u.value;return d&&"object"==g(d)&&r.call(d,"__await")?e.resolve(d.__await).then((function(t){n("next",t,a,s)}),(function(t){n("throw",t,a,s)})):e.resolve(d).then((function(t){u.value=t,a(u)}),(function(t){return n("throw",t,a,s)}))}s(c.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return u;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var n=l(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,u;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,u):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,u)}function C(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function k(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function L(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(C,this),this.reset(!0)}function S(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:E}}function E(){return{value:void 0,done:!0}}return h.prototype=f,s(_,"constructor",f),s(f,"constructor",h),h.displayName=s(f,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===h||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,f):(t.__proto__=f,s(t,a,"GeneratorFunction")),t.prototype=Object.create(_),t},t.awrap=function(t){return{__await:t}},b(x.prototype),s(x.prototype,i,(function(){return this})),t.AsyncIterator=x,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new x(c(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},b(_),s(_,a,"Generator"),s(_,o,(function(){return this})),s(_,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=S,L.prototype={constructor:L,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(k),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=r.call(i,"catchLoc"),c=r.call(i,"finallyLoc");if(s&&c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,u):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),u},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),k(r),u}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;k(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:S(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),u}},t}function b(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function x(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?b(Object(r),!0).forEach((function(e){w(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):b(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function w(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function C(t,e,r,n,o,i,a){try{var s=t[i](a),c=s.value}catch(t){return void r(t)}s.done?e(c):Promise.resolve(c).then(n,o)}function k(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){C(i,n,o,a,s,"next",t)}function s(t){C(i,n,o,a,s,"throw",t)}a(void 0)}))}}const L={name:"MissionQueueSampleListPage",components:{MissionSampleModal:(0,v.Z)(m,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("modal",{attrs:{size:"remoteListMode"==t.mode?"lg":"",footer:!1,backdrop:!1,"append-to-body":!0,keyboard:!1},on:{show:t.onShowModal,hide:t.onHideModal},model:{value:t.showModal,callback:function(e){t.showModal=e},expression:"showModal"}},[r("div",{attrs:{slot:"title"},slot:"title"},[t._v(t._s("remoteListMode"==t.mode?"查看採樣任務進度":"編輯備註"))]),t._v(" "),r("div",{attrs:{slot:"default"},slot:"default"},[t.loading?r("clip-loader",{staticClass:"loading",attrs:{color:"gray",size:"30px"}}):t._e(),t._v(" "),t.loading?t._e():["remoteListMode"==t.mode?r("remote-management-system-status-list-view",{attrs:{"remote-management-system-statuses":t.form.remote_management_system_statuses,"mission-queue":t.form}}):r("form",{staticClass:"form-horizontal",attrs:{novalidate:""},on:{submit:function(e){return e.preventDefault(),t.submit.apply(null,arguments)}}},[r("div",{staticClass:"form-group"},[r("label",{staticClass:"col-md-3 control-label",attrs:{for:"remarkInput"}},[t._v("備註")]),t._v(" "),r("div",{staticClass:"col-md-9"},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.form.remark,expression:"form.remark"}],staticClass:"form-control",attrs:{id:"remarkInput",type:"text",name:"remark",placeholder:"請輸入備註"},domProps:{value:t.form.remark},on:{input:function(e){e.target.composing||t.$set(t.form,"remark",e.target.value)}}})])]),t._v(" "),r("div",{staticClass:"text-right"},[r("button",{staticClass:"btn btn-light-green",attrs:{disabled:t.sending}},[t._v("送出")]),t._v(" "),r("button",{staticClass:"btn btn-default",attrs:{type:"button"},on:{click:function(e){t.showModal=!1}}},[t._v("取消")])])])]],2)])}),[],!1,null,"06037350",null).exports,Datetimepicker:u.Z,ClipLoader:l.Z},props:{},computed:{maxDatetime:function(){return c()().endOf("day").format()},exportUrlMissionQueue:function(){var t="/missionQueues.xlsx",e=[],r=this.getPureForm(this.form);return r.page&&delete r.page,a().forOwn(r,(function(t,r){a().isArray(t)?a().forEach(t,(function(t){e.push("".concat(r,"[]=").concat(t))})):e.push("".concat(r,"=").concat(t))})),e.length>0&&(t+="?",t+=e.join("&")),t},exportUrlMissionQueueDetails:function(){var t="/missionQueueDetails.xlsx",e=[],r=this.getPureForm(this.form);return r.page&&delete r.page,a().forOwn(r,(function(t,r){a().isArray(t)?a().forEach(t,(function(t){e.push("".concat(r,"[]=").concat(t))})):e.push("".concat(r,"=").concat(t))})),e.length>0&&(t+="?",t+=e.join("&")),t}},data:function(){var t=this.$route.query,e=t.start_date,r=t.end_date,n=t.name;return r||(r=c()().endOf("day").format("YYYY-MM-DD")),{loading:!0,sending:!1,missionQueues:[],form:{start_date:e,end_date:r,name:n,page:this.$route.query.page&&!a().isNaN(this.$route.query.page)?this.$route.query.page:1},pagination:{current_page:1,last_page:1},modal:{id:null,mode:null,show:!1}}},created:function(){this.fetchData(0,!0)},methods:{showModal:function(t,e){this.modal.id=t,this.modal.mode=e,this.modal.show=!0},isDateRangeValid:function(t,e){if(!t||!e)return!0;var r=c()(t),n=c()(e);return r.isValid()&&n.isValid()&&(r.isBefore(n)||r.isSame(n))},updateRow:function(t){var e=a().findIndex(this.missionQueues,(function(e){return e.id==t.id}));-1!=e&&(this.missionQueues[e].remark=t.remark)},fetchData:function(){var t=arguments,e=this;return k(y().mark((function r(){var n,i,s;return y().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n=t.length>0&&void 0!==t[0]?t[0]:0,t.length>1&&void 0!==t[1]&&t[1]&&(e.loading=!0),r.prev=3,r.next=6,o().get("/api/missionQueues",{params:x(x({},e.form),{},{refresh:n,pagination:1,history:1})});case 6:0==(i=(i=r.sent).data).status&&(s=i.data,e.missionQueues=a().cloneDeep(s.missionQueues),Object.assign(e.pagination,s.pagination)),r.next=15;break;case 11:return r.prev=11,r.t0=r.catch(3),r.next=15,e.guestRedirectHome(r.t0);case 15:return r.prev=15,e.loading=!1,r.finish(15);case 18:case"end":return r.stop()}}),r,null,[[3,11,15,18]])})))()},search:function(){var t=a().pickBy(this.form,a().identity);this.isDateRangeValid(t.start_date,t.end_date)?this.changePage(1):this.$toast.warn({title:"警告訊息",message:"無效的日期範圍。"})},changePage:function(t){this.form.page=t;this.$router.push({path:"/missionQueues/sample",query:x(x({},this.form),{},{t:Date.now()})})},deleteRow:function(t){var e=this;return k(y().mark((function r(){var n;return y().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(confirm("確定要刪除「".concat(a().get(t,"mission.name","此筆資料"),"」?"))){r.next=2;break}return r.abrupt("return");case 2:return r.prev=2,e.sending=!0,r.next=6,o().delete("/api/missionQueues/".concat(t.id));case 6:0==(n=(n=r.sent).data).status?(e.$toast.success({title:"成功訊息",message:"刪除成功"}),e.missionQueues=a().filter(e.missionQueues,(function(e){return e.id!=t.id}))):-19==n.status?e.$toast.error({title:"錯誤訊息",message:"刪除失敗"}):-20==n.status&&e.$toast.error({title:"錯誤訊息",message:"資料不存在，可能已被刪除"}),r.next=15;break;case 11:return r.prev=11,r.t0=r.catch(2),r.next=15,e.guestRedirectHome(r.t0);case 15:return r.prev=15,e.sending=!1,r.finish(15);case 18:case"end":return r.stop()}}),r,null,[[2,11,15,18]])})))()}}};var S=r(3379),E=r.n(S),M=r(4801),O={insert:"head",singleton:!1};E()(M.Z,O);M.Z.locals;const P=(0,v.Z)(L,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("section",{staticClass:"content-header clearfix"},[r("span",[t._v("歷史採樣任務進度")]),t._v(" "),r("div",{staticClass:"pull-right"},[r("button",{staticClass:"btn btn-default",attrs:{type:"button"},on:{click:function(e){return t.fetchData(1,!0)}}},[r("i",{staticClass:"fa fa-refresh"}),t._v("\n                同步更新\n            ")])])]),t._v(" "),r("section",{staticClass:"content"},[r("div",{staticClass:"col-xs-12"},[r("div",{staticClass:"box"},[r("div",{staticClass:"box-header"},[r("div",{staticClass:"row"},[r("form",{staticClass:"col-xs-12",on:{submit:function(e){return e.preventDefault(),t.search.apply(null,arguments)}}},[r("label",[t._v("日期範圍：")]),t._v(" "),r("datetimepicker",{staticStyle:{width:"120px"},attrs:{id:"start_date",type:"date",format:"yyyy-MM-dd","input-class":"form-control","picker-class":"theme-light-green",placeholder:"請選擇","max-datetime":t.maxDatetime},model:{value:t.form.start_date,callback:function(e){t.$set(t.form,"start_date",e)},expression:"form.start_date"}}),t._v(" "),r("span",[t._v(" ~ ")]),t._v(" "),r("datetimepicker",{staticStyle:{width:"120px"},attrs:{id:"end_date",type:"date",format:"yyyy-MM-dd","input-class":"form-control","picker-class":"theme-light-green",placeholder:"請選擇","max-datetime":t.maxDatetime},model:{value:t.form.end_date,callback:function(e){t.$set(t.form,"end_date",e)},expression:"form.end_date"}}),t._v(" "),r("label",[t._v("名稱：")]),t._v(" "),r("div",{staticStyle:{display:"inline-block"}},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.form.name,expression:"form.name"}],staticClass:"form-control",attrs:{type:"text",placeholder:"搜尋名稱"},domProps:{value:t.form.name},on:{input:function(e){e.target.composing||t.$set(t.form,"name",e.target.value)}}})]),t._v(" "),r("button",{staticClass:"btn btn-default-3d search-btn",attrs:{type:"submit"}},[t._v("查詢")]),t._v(" "),r("div",{staticClass:"pull-right"},[r("router-link",{staticClass:"btn btn-light-green op-btn",attrs:{to:t.exportUrlMissionQueueDetails,target:"_blank",type:"button",title:"匯出歷史採樣任務進度（含明細）"}},[r("i",{staticClass:"fa fa-download"}),t._v(" 匯出（含明細）\n                                ")]),t._v(" "),r("router-link",{staticClass:"btn btn-light-green op-btn",attrs:{to:t.exportUrlMissionQueue,target:"_blank",type:"button",title:"匯出歷史採樣任務進度（不含明細）"}},[r("i",{staticClass:"fa fa-download"}),t._v(" 匯出（不含明細）\n                                ")])],1)],1)])]),t._v(" "),r("div",{staticClass:"box-body"},[r("div",{staticClass:"row"},[t.loading?[r("clip-loader",{staticClass:"loading",attrs:{color:"gray",size:"30px"}})]:[r("div",{staticClass:"col-xs-12"},[r("table",{staticClass:"table table-bordered table-striped table-hover"},[t._m(0),t._v(" "),r("tbody",[t._l(t.missionQueues,(function(e){return[r("tr",[r("td",{staticClass:"centered",attrs:{"data-title":"時間"}},[t._v(t._s(t._f("datetime")(e.started)))]),t._v(" "),r("td",{staticClass:"centered",attrs:{"data-title":"名稱"}},[t._v(t._s(e.mission?e.mission.name:null)+"\n                                                "),r("div",{staticClass:"pull-right"},[r("button",{staticClass:"btn btn-light-green op-btn",attrs:{type:"button",title:"查看採樣任務進度"},on:{click:function(r){return t.showModal(e.id,"remoteListMode")}}},[r("i",{staticClass:"fa fa-file-text",attrs:{"aria-hidden":"true"}})]),t._v(" "),r("router-link",{staticClass:"btn btn-light-green op-btn",attrs:{to:"/missionQueueDetails/"+e.id+".xlsx",target:"_blank",type:"button",title:"匯出該歷史採樣任務進度明細"}},[r("i",{staticClass:"fa fa-download"})])],1)]),t._v(" "),r("td",{staticClass:"centered",attrs:{"data-title":"結果"}},[t._v(t._s(e.state))]),t._v(" "),r("td",{staticClass:"centered",attrs:{"data-title":"起始點"}},[t._v(t._s(e.start_location?e.start_location.device_name:null))]),t._v(" "),r("td",{staticClass:"centered",attrs:{"data-title":"結束點"}},[t._v(t._s(e.end_location?e.end_location.device_name:null))]),t._v(" "),r("td",{staticClass:"centered",attrs:{"data-title":"採樣點"}},[t._v(t._s(e.remote_management_system_statuses_count))]),t._v(" "),r("td",{staticClass:"centered",attrs:{"data-title":"總計時數"}},[e.remote_management_system_statuses_sum_total_time?r("span",[t._v(t._s(e.remote_management_system_statuses_sum_total_time)+"S")]):t._e()]),t._v(" "),r("td",{staticClass:"centered",attrs:{"data-title":"備註"}},[t._v(t._s(e.remark))]),t._v(" "),r("td",{staticClass:"centered",attrs:{"data-title":"操作"}},[r("button",{staticClass:"btn btn-light-green op-btn",attrs:{type:"button",title:"編輯備註"},on:{click:function(r){return t.showModal(e.id)}}},[r("span",{staticClass:"glyphicon glyphicon-pencil",attrs:{"aria-hidden":"true"}})]),t._v(" "),r("button",{staticClass:"btn btn-delete op-btn",attrs:{type:"button",title:"刪除",disabled:t.sending},on:{click:function(r){return t.deleteRow(e)}}},[r("span",{staticClass:"glyphicon glyphicon-trash",attrs:{"aria-hidden":"true"}})])])])]}))],2)])]),t._v(" "),t.pagination?r("div",{staticClass:"col-xs-12 text-center"},[r("pagination",{attrs:{size:"sm","total-page":t.pagination.last_page,"direction-links":!1,"boundary-links":!0,"max-size":10},on:{change:t.changePage},model:{value:t.pagination.current_page,callback:function(e){t.$set(t.pagination,"current_page",e)},expression:"pagination.current_page"}})],1):t._e()]],2)])])])]),t._v(" "),r("mission-sample-modal",{attrs:{"data-id":t.modal.id,mode:t.modal.mode},on:{update:t.updateRow},model:{value:t.modal.show,callback:function(e){t.$set(t.modal,"show",e)},expression:"modal.show"}})],1)}),[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("thead",{staticClass:"table-head"},[r("tr",[r("th",{staticClass:"hide-td text-center"},[t._v("時間")]),t._v(" "),r("th",{staticClass:"hide-td text-center"},[t._v("名稱")]),t._v(" "),r("th",{staticClass:"hide-td text-center"},[t._v("結果")]),t._v(" "),r("th",{staticClass:"hide-td text-center"},[t._v("起始點")]),t._v(" "),r("th",{staticClass:"hide-td text-center"},[t._v("結束點")]),t._v(" "),r("th",{staticClass:"hide-td text-center"},[t._v("採樣點")]),t._v(" "),r("th",{staticClass:"hide-td text-center"},[t._v("總計時數")]),t._v(" "),r("th",{staticClass:"hide-td text-center"},[t._v("備註")]),t._v(" "),r("th",{staticClass:"hide-td text-center"},[t._v("操作")])])])}],!1,null,"0d6abebb",null).exports},4726:(t,e,r)=>{"use strict";r.d(e,{Z:()=>m});var n=r(9038),o=r(9669),i=r.n(o);function a(t){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a(t)}function s(){s=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",c=n.toStringTag||"@@toStringTag";function l(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,r){return t[e]=r}}function u(t,e,r,n){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new L(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return E()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var s=w(a,r);if(s){if(s===h)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=d(t,e,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===h)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}(t,r,a),i}function d(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var h={};function f(){}function p(){}function m(){}var v={};l(v,o,(function(){return this}));var g=Object.getPrototypeOf,y=g&&g(g(S([])));y&&y!==e&&r.call(y,o)&&(v=y);var _=m.prototype=f.prototype=Object.create(v);function b(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function x(t,e){function n(o,i,s,c){var l=d(t[o],t,i);if("throw"!==l.type){var u=l.arg,h=u.value;return h&&"object"==a(h)&&r.call(h,"__await")?e.resolve(h.__await).then((function(t){n("next",t,s,c)}),(function(t){n("throw",t,s,c)})):e.resolve(h).then((function(t){u.value=t,s(u)}),(function(t){return n("throw",t,s,c)}))}c(l.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return h;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return h}var n=d(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,h;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,h):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,h)}function C(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function k(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function L(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(C,this),this.reset(!0)}function S(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:E}}function E(){return{value:void 0,done:!0}}return p.prototype=m,l(_,"constructor",m),l(m,"constructor",p),p.displayName=l(m,c,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,m):(t.__proto__=m,l(t,c,"GeneratorFunction")),t.prototype=Object.create(_),t},t.awrap=function(t){return{__await:t}},b(x.prototype),l(x.prototype,i,(function(){return this})),t.AsyncIterator=x,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new x(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},b(_),l(_,c,"Generator"),l(_,o,(function(){return this})),l(_,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=S,L.prototype={constructor:L,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(k),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=r.call(i,"catchLoc"),c=r.call(i,"finallyLoc");if(s&&c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,h):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),k(r),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;k(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:S(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),h}},t}function c(t,e,r,n,o,i,a){try{var s=t[i](a),c=s.value}catch(t){return void r(t)}s.done?e(c):Promise.resolve(c).then(n,o)}function l(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){c(i,n,o,a,s,"next",t)}function s(t){c(i,n,o,a,s,"throw",t)}a(void 0)}))}}const u={name:"MissionListPage",components:{ClipLoader:n.Z},data:function(){return{loading:!0,sending:!1,missions:[]}},created:function(){var t=this;return l(s().mark((function e(){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.fetchData();case 2:case"end":return e.stop()}}),e)})))()},methods:{fetchData:function(){var t=arguments,e=this;return l(s().mark((function r(){var n,o,a;return s().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n=t.length>0&&void 0!==t[0]?t[0]:0,e.loading=!0,r.prev=2,r.next=5,i().get("/api/missions",{params:{refresh:n}});case 5:0==(o=(o=r.sent).data).status&&(a=o.data,e.missions=a.missions),r.next=14;break;case 10:return r.prev=10,r.t0=r.catch(2),r.next=14,e.guestRedirectHome(r.t0);case 14:return r.prev=14,e.loading=!1,r.finish(14);case 17:case"end":return r.stop()}}),r,null,[[2,10,14,17]])})))()},storeMissionQueues:function(t){var e=this;return l(s().mark((function r(){var n;return s().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(confirm("確定要執行此任務？")){r.next=2;break}return r.abrupt("return");case 2:return e.sending=!0,r.prev=3,r.next=6,i().post("/api/missionQueues",{mission_id:t});case 6:0==(n=(n=r.sent).data).status?e.$toast.success({title:"成功訊息",message:"執行成功！"}):-19==n.status?e.$toast.error({title:"錯誤訊息",message:"任務執行失敗！"}):-21==n.status&&e.$toast.error({title:"錯誤訊息",message:"MIR車輛未開機，請稍後再試，或點擊同步更新！"}),r.next=15;break;case 11:return r.prev=11,r.t0=r.catch(3),r.next=15,e.guestRedirectHome(r.t0);case 15:return r.prev=15,e.sending=!1,r.finish(15);case 18:case"end":return r.stop()}}),r,null,[[3,11,15,18]])})))()}}};var d=r(3379),h=r.n(d),f=r(8955),p={insert:"head",singleton:!1};h()(f.Z,p);f.Z.locals;const m=(0,r(1900).Z)(u,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("section",{staticClass:"content-header clearfix"},[r("span",[t._v("發送任務")]),t._v(" "),r("div",{staticClass:"pull-right"},[r("button",{staticClass:"btn btn-default",on:{click:function(e){return t.fetchData(1)}}},[r("i",{staticClass:"fa fa-refresh"}),t._v("\n                同步更新\n            ")])])]),t._v(" "),r("section",{staticClass:"content"},[r("div",{staticClass:"col-xs-12"},[r("div",{staticClass:"box"},[r("div",{staticClass:"box-body"},[t.loading?t._e():r("div",[r("div",{staticClass:"data-list"},t._l(t.missions,(function(e){return r("div",{staticClass:"data-row"},[r("div",{staticClass:"data-row-content"},[r("div",{staticClass:"data-row-title"},[t._v("\n                                        "+t._s(e.name)+" / "+t._s(e.region?e.region:"其他")+"\n                                    ")]),t._v(" "),r("div",{staticClass:"data-row-subtitle"},[t._v("\n                                        "+t._s(e.guid)+"\n                                    ")])]),t._v(" "),r("div",{staticClass:"data-row-right-block"},[r("button",{staticClass:"btn btn-light-green-3d op-btn",attrs:{type:"button",disabled:t.sending},on:{click:function(r){return t.storeMissionQueues(e.guid)}}},[r("i",{staticClass:"fa fa-play"})])])])})),0)]),t._v(" "),t.loading?r("clip-loader",{staticClass:"loading",attrs:{color:"gray",size:"30px"}}):t._e()],1)])])])])}),[],!1,null,"455527de",null).exports},6875:(t,e,r)=>{"use strict";r.d(e,{Z:()=>f});var n=r(5350),o=r(8),i=r.n(o),a=r(9490),s=r(9755);a.Settings.defaultLocale="zh-tw";const c={name:"Datetimepicker",components:{Datetime:n.Datetime},props:{value:{type:String,default:null},disabled:{type:Boolean,default:!1},minDatetime:{type:String,default:null},maxDatetime:{type:String,default:null},type:{type:String,default:null},format:{type:String,default:"yyyy/MM/dd"},placeholder:{type:String,default:null},inputStyle:{type:String,default:null},inputClass:{type:String},pickerClass:{type:String},showClearBtn:{type:Boolean,default:!1},datetimeInputId:String},watch:{date:function(t){t?"time"==this.type||"datetime"==this.type?this.$emit("input",i()(t).tz("Asia/Taipei").format("yyyy-MM-DD HH:mm:ss")):this.$emit("input",i()(t).tz("Asia/Taipei").format("YYYY-MM-DD")):this.$emit("input",null)},value:function(t){this.date=t?i()(t).tz("Asia/Taipei").toISOString():null}},data:function(){return{date:i()(this.value).tz("Asia/Taipei").toISOString()}},methods:{showDatepicker:function(){s(this.$el).find(".date").click()},clear:function(){this.date=null,this.$emit("change",null)}}};var l=r(3379),u=r.n(l),d=r(5949),h={insert:"head",singleton:!1};u()(d.Z,h);d.Z.locals;const f=(0,r(1900).Z)(c,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"date-div",staticStyle:{display:"inline-block"}},[r("datetime",{ref:"date",class:t.pickerClass,attrs:{"input-id":t.datetimeInputId,type:t.type,"value-zone":"Asia/Taipei",format:t.format,phrases:{ok:"確認",cancel:"取消"},"input-class":"date "+t.inputClass,"input-style":t.inputStyle,"min-datetime":t.minDatetime,"max-datetime":t.maxDatetime,placeholder:t.placeholder,disabled:t.disabled},on:{input:function(e){return t.$emit("change",t.date?t.date:null)}},model:{value:t.date,callback:function(e){t.date=e},expression:"date"}}),t._v(" "),t.showClearBtn?r("button",{staticClass:"clear-btn",attrs:{type:"button"},on:{click:t.clear}},[t._v("\n        ×\n    ")]):t._e()],1)}),[],!1,null,"39828905",null).exports},2805:(t,e,r)=>{"use strict";r.d(e,{Z:()=>s});var n=r(3268),o=r.n(n),i=r(9755);const a={name:"Drag",props:{containment:{type:String},dragAfterReset:{type:Boolean,default:!0},scale:{type:Number,default:1},disabled:{type:Boolean,default:!1},diameter:{type:Number,default:20}},watch:{scale:function(){this.refreshPosition()},disabled:function(){this.init()}},data:function(){return{coordinates:{x:null,y:null},position:[0,0,0,0]}},mounted:function(){var t=this;new(o())(i(this.containment),(function(){t.refreshPosition()})),this.refreshPosition()},methods:{init:function(){var t=this;i(this.$el).draggable({disabled:t.disabled,containment:this.position,appendTo:this.dragAfterReset?this.containment:null,helper:this.dragAfterReset?"clone":null,drag:function(e,r){var n=r.position.left-r.originalPosition.left,o=r.position.top-r.originalPosition.top;r.position.left=r.originalPosition.left+n/t.scale,r.position.top=r.originalPosition.top+o/t.scale,t.$emit("drag",{x:r.position.left,y:r.position.top}),r.position.left=r.originalPosition.left+n/t.scale-t.diameter/2,r.position.top=r.originalPosition.top+o/t.scale-t.diameter/2},start:function(e,r){r.position.left=0,r.position.top=0,t.dragAfterReset&&i(this).hide()},stop:function(e,r){var n=i(this);t.dragAfterReset?(i(this).show(),n.removeAttr("style"),n.css({position:"relative"})):n.css({position:"absolute"}),t.$emit("stop",{x:r.position.left+t.diameter/2,y:r.position.top+t.diameter/2})}})},refreshPosition:function(){if(0!=i(this.containment).length){var t=[i(this.containment).offset().left,i(this.containment).offset().top,i(this.containment).offset().left+(i(this.containment).width()-i(this.$el).width()*this.scale)+this.diameter,i(this.containment).offset().top+(i(this.containment).height()-i(this.$el).height()*this.scale)+this.diameter];t.equal(this.position)||(this.position=t,this.init())}}}};const s=(0,r(1900).Z)(a,(function(){var t=this,e=t.$createElement;return(t._self._c||e)("div",{staticClass:"ui-widget-content",on:{mouseup:function(e){return t.$emit("mouseup")},click:function(e){return t.$emit("click")}}},[t._t("default")],2)}),[],!1,null,null,null).exports},1739:(t,e,r)=>{"use strict";r.d(e,{Z:()=>c});const n={name:"SortButton",props:{value:String,column:String,btnStyle:{type:String,default:"display: inline-block; vertical-align: text-top; cursor: pointer; margin-left: 4px"}},computed:{sortType:{get:function(){return this.value},set:function(t){this.$emit("input",t)}}},methods:{changeSortType:function(t){this.sortType=t,this.$emit("change",this.column,t)}}};var o=r(3379),i=r.n(o),a=r(7990),s={insert:"head",singleton:!1};i()(a.Z,s);a.Z.locals;const c=(0,r(1900).Z)(n,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return t.sortType?"asc"==t.sortType?r("img",{style:t.btnStyle,attrs:{src:"/img/icon-sort-asc.svg?v=2401121557",alt:""},on:{click:function(e){return t.changeSortType("desc")}}}):"desc"==t.sortType?r("img",{style:t.btnStyle,attrs:{src:"/img/icon-sort-desc.svg?v=2401121557",alt:""},on:{click:function(e){return t.changeSortType(null)}}}):t._e():r("img",{style:t.btnStyle,attrs:{src:"/img/icon-sort.svg?v=2401121557",alt:""},on:{click:function(e){return t.changeSortType("asc")}}})}),[],!1,null,"2593f8d8",null).exports},129:(t,e,r)=>{"use strict";r.d(e,{Z:()=>p});var n=r(9669),o=r.n(n);function i(t){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i(t)}function a(){a=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",s=n.asyncIterator||"@@asyncIterator",c=n.toStringTag||"@@toStringTag";function l(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,r){return t[e]=r}}function u(t,e,r,n){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new L(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return E()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var s=w(a,r);if(s){if(s===h)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=d(t,e,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===h)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}(t,r,a),i}function d(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var h={};function f(){}function p(){}function m(){}var v={};l(v,o,(function(){return this}));var g=Object.getPrototypeOf,y=g&&g(g(S([])));y&&y!==e&&r.call(y,o)&&(v=y);var _=m.prototype=f.prototype=Object.create(v);function b(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function x(t,e){function n(o,a,s,c){var l=d(t[o],t,a);if("throw"!==l.type){var u=l.arg,h=u.value;return h&&"object"==i(h)&&r.call(h,"__await")?e.resolve(h.__await).then((function(t){n("next",t,s,c)}),(function(t){n("throw",t,s,c)})):e.resolve(h).then((function(t){u.value=t,s(u)}),(function(t){return n("throw",t,s,c)}))}c(l.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return h;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return h}var n=d(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,h;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,h):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,h)}function C(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function k(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function L(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(C,this),this.reset(!0)}function S(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:E}}function E(){return{value:void 0,done:!0}}return p.prototype=m,l(_,"constructor",m),l(m,"constructor",p),p.displayName=l(m,c,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,m):(t.__proto__=m,l(t,c,"GeneratorFunction")),t.prototype=Object.create(_),t},t.awrap=function(t){return{__await:t}},b(x.prototype),l(x.prototype,s,(function(){return this})),t.AsyncIterator=x,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new x(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},b(_),l(_,c,"Generator"),l(_,o,(function(){return this})),l(_,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=S,L.prototype={constructor:L,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(k),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=r.call(i,"catchLoc"),c=r.call(i,"finallyLoc");if(s&&c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,h):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),k(r),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;k(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:S(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),h}},t}function s(t,e,r,n,o,i,a){try{var s=t[i](a),c=s.value}catch(t){return void r(t)}s.done?e(c):Promise.resolve(c).then(n,o)}function c(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){s(i,n,o,a,c,"next",t)}function c(t){s(i,n,o,a,c,"throw",t)}a(void 0)}))}}const l={name:"MqttCommandListView",components:{ClipLoader:r(9038).Z},data:function(){return{loading:!1,mqttCommands:[],vehicleId:this.$route.query.vehicleId?this.$route.query.vehicleId:null}},created:function(){var t=this;return c(a().mark((function e(){var r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.loading=!0,e.next=3,t.fetchData();case 3:t.loading=!1,r=t,window.Echo.private("mqttCommands").listen("MqttCommandUpdated",(function(t){r.fetchData()}));case 6:case"end":return e.stop()}}),e)})))()},destroyed:function(){window.Echo.leave("mqttCommands")},methods:{fetchData:function(){var t=this;return c(a().mark((function e(){var r,n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,o().get("/api/mqttCommands",{params:{vehicle_id:t.$route.query.vehicleId}});case 3:0==(r=(r=e.sent).data).status&&(n=r.data,t.mqttCommands=n.mqttCommands),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),t.guestRedirectHome(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))()}}};var u=r(3379),d=r.n(u),h=r(4938),f={insert:"head",singleton:!1};d()(h.Z,f);h.Z.locals;const p=(0,r(1900).Z)(l,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[t._m(0),t._v(" "),r("section",{staticClass:"content"},[r("div",{staticClass:"row"},[r("div",{staticClass:"col-xs-12"},[r("div",{staticClass:"box"},[r("div",{staticClass:"box-body"},[t.loading?t._e():r("div",[r("table",{staticClass:"table table-bordered table-hover break-table size-sm"},[t._m(1),t._v(" "),r("tbody",t._l(t.mqttCommands,(function(e){return r("tr",[r("td",{staticClass:"text-center",attrs:{"data-title":"編號"}},[t._v(t._s(e.id))]),t._v(" "),r("td",{staticClass:"text-center",attrs:{"data-title":"命令類型"}},[e.mqtt_command_type?[t._v("\n                                            "+t._s(e.mqtt_command_type.name)+"\n                                        ")]:t._e()],2),t._v(" "),r("td",{attrs:{"data-title":"命令"}},[e.device_name?[t._v("\n                                            設備名稱："+t._s(e.device_name)),r("br")]:t._e(),t._v(" "),e.sweep_start_goal_x||e.sweep_start_goal_y?[t._v("\n                                            清掃起點：("+t._s(Number.parseFloat(e.sweep_start_goal_x).toFixed(2))),r("span",{directives:[{name:"show",rawName:"v-show",value:e.sweep_start_goal_y,expression:"mqttCommand.sweep_start_goal_y"}]},[t._v(", ")]),t._v(t._s(Number.parseFloat(e.sweep_start_goal_y).toFixed(2))+")"),r("br")]:t._e(),t._v(" "),e.sweep_end_goal_x||e.sweep_end_goal_y?[t._v("\n                                            清掃終點：("+t._s(Number.parseFloat(e.sweep_end_goal_x).toFixed(2))),r("span",{directives:[{name:"show",rawName:"v-show",value:e.sweep_end_goal_y,expression:"mqttCommand.sweep_end_goal_y"}]},[t._v(", ")]),t._v(t._s(Number.parseFloat(e.sweep_end_goal_y).toFixed(2))+")"),r("br")]:t._e(),t._v(" "),e.goal_x||e.goal_y?[t._v("\n                                            目標點 ：("+t._s(Number.parseFloat(e.goal_x).toFixed(2))),r("span",{directives:[{name:"show",rawName:"v-show",value:e.goal_y,expression:"mqttCommand.goal_y"}]},[t._v(", ")]),t._v(t._s(Number.parseFloat(e.goal_y).toFixed(2))+")\n                                        ")]:t._e()],2),t._v(" "),r("td",{staticClass:"text-center",attrs:{"data-title":"更新時間"}},[t._v(t._s(t._f("datetime")(e.updated_at)))])])})),0)])]),t._v(" "),t.loading?r("clip-loader",{staticClass:"loading",attrs:{color:"gray",size:"30px"}}):t._e()],1)])])])])])}),[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("section",{staticClass:"content-header clearfix"},[r("span",[t._v("任務歷史紀錄")])])},function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("thead",{staticClass:"table-head"},[r("tr",[r("th",{staticClass:"text-center hide-td"},[t._v("編號")]),t._v(" "),r("th",{staticClass:"text-center hide-td"},[t._v("命令類型")]),t._v(" "),r("th",{staticClass:"text-center hide-td"},[t._v("命令")]),t._v(" "),r("th",{staticClass:"text-center hide-td"},[t._v("更新時間")])])])}],!1,null,"56f91b58",null).exports},2679:(t,e,r)=>{"use strict";r.d(e,{Z:()=>nt});var n=r(6486),o=r.n(n),i=r(9669),a=r.n(i),s=r(629),c=r(9038);function l(t){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},l(t)}function u(){u=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function c(t,e,r,n){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new L(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return E()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var s=w(a,r);if(s){if(s===h)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=d(t,e,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===h)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}(t,r,a),i}function d(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var h={};function f(){}function p(){}function m(){}var v={};s(v,o,(function(){return this}));var g=Object.getPrototypeOf,y=g&&g(g(S([])));y&&y!==e&&r.call(y,o)&&(v=y);var _=m.prototype=f.prototype=Object.create(v);function b(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function x(t,e){function n(o,i,a,s){var c=d(t[o],t,i);if("throw"!==c.type){var u=c.arg,h=u.value;return h&&"object"==l(h)&&r.call(h,"__await")?e.resolve(h.__await).then((function(t){n("next",t,a,s)}),(function(t){n("throw",t,a,s)})):e.resolve(h).then((function(t){u.value=t,a(u)}),(function(t){return n("throw",t,a,s)}))}s(c.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return h;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return h}var n=d(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,h;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,h):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,h)}function C(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function k(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function L(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(C,this),this.reset(!0)}function S(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:E}}function E(){return{value:void 0,done:!0}}return p.prototype=m,s(_,"constructor",m),s(m,"constructor",p),p.displayName=s(m,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,m):(t.__proto__=m,s(t,a,"GeneratorFunction")),t.prototype=Object.create(_),t},t.awrap=function(t){return{__await:t}},b(x.prototype),s(x.prototype,i,(function(){return this})),t.AsyncIterator=x,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new x(c(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},b(_),s(_,a,"Generator"),s(_,o,(function(){return this})),s(_,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=S,L.prototype={constructor:L,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(k),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=r.call(i,"catchLoc"),c=r.call(i,"finallyLoc");if(s&&c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,h):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),k(r),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;k(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:S(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),h}},t}function d(t,e,r,n,o,i,a){try{var s=t[i](a),c=s.value}catch(t){return void r(t)}s.done?e(c):Promise.resolve(c).then(n,o)}const h={name:"ObjectClassSelect",props:{value:{type:String,default:null},placeholder:{type:String,default:"請選擇"}},watch:{value:function(t){this.objectClass=t}},data:function(){return{loading:!1,objectClasses:[],objectClass:this.value}},created:function(){this.fetchData()},methods:{fetchData:function(){var t,e=this;return(t=u().mark((function t(){var r,n;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.loading=!0,t.prev=1,t.next=4,a().get("/api/objectClasses");case 4:0==(r=(r=t.sent).data).status&&(n=r.data,e.objectClasses=n.objectClasses),e.checkSelectValue(),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(1),e.guestRedirectHome(t.t0);case 13:return t.prev=13,e.loading=!1,t.finish(13);case 16:case"end":return t.stop()}}),t,null,[[1,10,13,16]])})),function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){d(i,n,o,a,s,"next",t)}function s(t){d(i,n,o,a,s,"throw",t)}a(void 0)}))})()},checkSelectValue:function(){o().find(this.objectClasses,{object_class:this.value})||this.$emit("input",null)}}};var f=r(1900);const p=(0,f.Z)(h,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("select",{directives:[{name:"model",rawName:"v-model",value:t.objectClass,expression:"objectClass"}],attrs:{disabled:t.loading},on:{change:[function(e){var r=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.objectClass=e.target.multiple?r:r[0]},function(e){t.$emit("input",t.objectClass),t.$emit("change",t.objectClass)}]}},[r("option",{domProps:{value:null}},[t._v(t._s(t.placeholder))]),t._v(" "),t._l(t.objectClasses,(function(e){return r("option",{domProps:{value:e.object_class}},[t._v("\n        "+t._s(e.name)+"\n    ")])}))],2)}),[],!1,null,null,null).exports;var m=r(9755),v=r.n(m);function g(t){return g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},g(t)}function y(){y=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function c(t,e,r,n){var o=e&&e.prototype instanceof d?e:d,i=Object.create(o.prototype),a=new L(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return E()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var s=w(a,r);if(s){if(s===u)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=l(t,e,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===u)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}(t,r,a),i}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var u={};function d(){}function h(){}function f(){}var p={};s(p,o,(function(){return this}));var m=Object.getPrototypeOf,v=m&&m(m(S([])));v&&v!==e&&r.call(v,o)&&(p=v);var _=f.prototype=d.prototype=Object.create(p);function b(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function x(t,e){function n(o,i,a,s){var c=l(t[o],t,i);if("throw"!==c.type){var u=c.arg,d=u.value;return d&&"object"==g(d)&&r.call(d,"__await")?e.resolve(d.__await).then((function(t){n("next",t,a,s)}),(function(t){n("throw",t,a,s)})):e.resolve(d).then((function(t){u.value=t,a(u)}),(function(t){return n("throw",t,a,s)}))}s(c.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return u;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var n=l(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,u;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,u):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,u)}function C(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function k(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function L(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(C,this),this.reset(!0)}function S(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:E}}function E(){return{value:void 0,done:!0}}return h.prototype=f,s(_,"constructor",f),s(f,"constructor",h),h.displayName=s(f,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===h||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,f):(t.__proto__=f,s(t,a,"GeneratorFunction")),t.prototype=Object.create(_),t},t.awrap=function(t){return{__await:t}},b(x.prototype),s(x.prototype,i,(function(){return this})),t.AsyncIterator=x,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new x(c(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},b(_),s(_,a,"Generator"),s(_,o,(function(){return this})),s(_,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=S,L.prototype={constructor:L,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(k),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=r.call(i,"catchLoc"),c=r.call(i,"finallyLoc");if(s&&c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,u):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),u},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),k(r),u}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;k(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:S(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),u}},t}function _(t,e,r,n,o,i,a){try{var s=t[i](a),c=s.value}catch(t){return void r(t)}s.done?e(c):Promise.resolve(c).then(n,o)}function b(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){_(i,n,o,a,s,"next",t)}function s(t){_(i,n,o,a,s,"throw",t)}a(void 0)}))}}const x={name:"VendorMgmtModal",$_veeValidate:{validator:"new"},components:{ClipLoader:c.Z},props:{value:{type:Boolean,default:!1},vendor:{type:String}},watch:{value:function(t){this.showModal=t}},data:function(){return{loading:!0,sending:!1,showModal:this.value,form:{},vendorDuplicate:!1}},created:function(){this.resetForm()},methods:{fetchData:function(){var t=this;return b(y().mark((function e(){var r,n;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,a().get("/api/vendorMgmts/".concat(t.vendor));case 3:0==(r=(r=e.sent).data).status&&(n=r.data,t.form=n.vendorMgmt),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),t.guestRedirectHome(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))()},onShowModal:function(){var t=this;return b(y().mark((function e(){return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.resetForm(),!t.vendor){e.next=5;break}return t.loading=!0,e.next=5,t.fetchData();case 5:t.loading=!1;case 6:case"end":return e.stop()}}),e)})))()},onHideModal:function(){this.resetForm(),this.$emit("input",!1)},submit:function(){var t=this;return b(y().mark((function e(){var r,n;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.validate();case 3:if(e.sent){e.next=6;break}return e.abrupt("return");case 6:if(t.sending=!0,r=null,t.vendor){e.next=14;break}return e.next=11,a().post("/api/vendorMgmts",t.form);case 11:r=e.sent,e.next=17;break;case 14:return e.next=16,a().patch("/api/vendorMgmts/".concat(t.vendor),t.form);case 16:r=e.sent;case 17:0==(r=r.data).status?(n=r.data,t.form=n.vendorMgmt,t.$toast.success({title:"成功訊息",message:"".concat(t.vendor?"更新":"創建","成功")}),t.$emit("update",t.form),t.showModal=!1):-7==r.status&&(t.vendorDuplicate=!0,t.scrollTo("vendor")),e.next=24;break;case 21:e.prev=21,e.t0=e.catch(0),t.guestRedirectHome(e.t0);case 24:t.sending=!1;case 25:case"end":return e.stop()}}),e,null,[[0,21]])})))()},resetForm:function(){this.form={vendor:null,vendor_vat:null,vendor_support:null},this.vendorDuplicate=!1,this.resetFormValidate()}}};function w(t){return w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},w(t)}function C(){C=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function c(t,e,r,n){var o=e&&e.prototype instanceof d?e:d,i=Object.create(o.prototype),a=new L(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return E()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var s=b(a,r);if(s){if(s===u)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=l(t,e,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===u)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}(t,r,a),i}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var u={};function d(){}function h(){}function f(){}var p={};s(p,o,(function(){return this}));var m=Object.getPrototypeOf,v=m&&m(m(S([])));v&&v!==e&&r.call(v,o)&&(p=v);var g=f.prototype=d.prototype=Object.create(p);function y(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function _(t,e){function n(o,i,a,s){var c=l(t[o],t,i);if("throw"!==c.type){var u=c.arg,d=u.value;return d&&"object"==w(d)&&r.call(d,"__await")?e.resolve(d.__await).then((function(t){n("next",t,a,s)}),(function(t){n("throw",t,a,s)})):e.resolve(d).then((function(t){u.value=t,a(u)}),(function(t){return n("throw",t,a,s)}))}s(c.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function b(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,b(t,e),"throw"===e.method))return u;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var n=l(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,u;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,u):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,u)}function x(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function k(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function L(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(x,this),this.reset(!0)}function S(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:E}}function E(){return{value:void 0,done:!0}}return h.prototype=f,s(g,"constructor",f),s(f,"constructor",h),h.displayName=s(f,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===h||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,f):(t.__proto__=f,s(t,a,"GeneratorFunction")),t.prototype=Object.create(g),t},t.awrap=function(t){return{__await:t}},y(_.prototype),s(_.prototype,i,(function(){return this})),t.AsyncIterator=_,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new _(c(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},y(g),s(g,a,"Generator"),s(g,o,(function(){return this})),s(g,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=S,L.prototype={constructor:L,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(k),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=r.call(i,"catchLoc"),c=r.call(i,"finallyLoc");if(s&&c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,u):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),u},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),k(r),u}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;k(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:S(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),u}},t}function k(t,e,r,n,o,i,a){try{var s=t[i](a),c=s.value}catch(t){return void r(t)}s.done?e(c):Promise.resolve(c).then(n,o)}function L(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){k(i,n,o,a,s,"next",t)}function s(t){k(i,n,o,a,s,"throw",t)}a(void 0)}))}}const S={name:"VendorMgmtSelect",components:{VendorMgmtModal:(0,f.Z)(x,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("modal",{attrs:{footer:!1,backdrop:!1,"append-to-body":!0,keyboard:!1},on:{show:t.onShowModal,hide:t.onHideModal},model:{value:t.showModal,callback:function(e){t.showModal=e},expression:"showModal"}},[t.form.vendor?r("div",{attrs:{slot:"title"},slot:"title"},[t._v("更新供應商")]):r("div",{attrs:{slot:"title"},slot:"title"},[t._v("創建供應商")]),t._v(" "),r("div",{attrs:{slot:"default"},slot:"default"},[t.loading?t._e():r("form",{staticClass:"form-horizontal",attrs:{novalidate:""},on:{submit:function(e){return e.preventDefault(),t.submit.apply(null,arguments)}}},[r("div",{staticClass:"form-group"},[r("label",{staticClass:"col-md-3 control-label"},[t._v("供應商名稱")]),t._v(" "),r("div",{staticClass:"col-md-9"},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.form.vendor,expression:"form.vendor"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"form-control",attrs:{name:"vendor",placeholder:"請填寫供應商名稱"},domProps:{value:t.form.vendor},on:{input:[function(e){e.target.composing||t.$set(t.form,"vendor",e.target.value)},function(e){t.vendorDuplicate=!1}]}}),t._v(" "),r("span",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("vendor:required"),expression:"errors.has('vendor:required')"}],staticClass:"help is-danger"},[t._v("請填寫供應商名稱")]),t._v(" "),r("span",{directives:[{name:"show",rawName:"v-show",value:t.vendorDuplicate,expression:"vendorDuplicate"}],staticClass:"help is-danger"},[t._v("該供應商已存在！")])])]),t._v(" "),r("div",{staticClass:"form-group"},[r("label",{staticClass:"col-md-3 control-label"},[t._v("供應商統編")]),t._v(" "),r("div",{staticClass:"col-md-9"},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.form.vendor_vat,expression:"form.vendor_vat"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"form-control",attrs:{name:"vendor_vat",placeholder:"請填寫供應商統編"},domProps:{value:t.form.vendor_vat},on:{input:function(e){e.target.composing||t.$set(t.form,"vendor_vat",e.target.value)}}}),t._v(" "),r("span",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("vendor_vat:required"),expression:"errors.has('vendor_vat:required')"}],staticClass:"help is-danger"},[t._v("請填寫供應商統編")])])]),t._v(" "),r("div",{staticClass:"form-group"},[r("label",{staticClass:"col-md-3 control-label"},[t._v("供應商電話")]),t._v(" "),r("div",{staticClass:"col-md-9"},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.form.vendor_support,expression:"form.vendor_support"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"form-control",attrs:{name:"vendor_support",placeholder:"請填寫供應商電話"},domProps:{value:t.form.vendor_support},on:{input:function(e){e.target.composing||t.$set(t.form,"vendor_support",e.target.value)}}}),t._v(" "),r("span",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("vendor_support:required"),expression:"errors.has('vendor_support:required')"}],staticClass:"help is-danger"},[t._v("請填寫供應商電話")])])]),t._v(" "),r("div",{staticClass:"text-right"},[r("button",{staticClass:"btn btn-light-green",attrs:{disabled:t.sending}},[t._v("送出")]),t._v(" "),r("button",{staticClass:"btn btn-default",attrs:{type:"button"},on:{click:function(e){t.showModal=!1}}},[t._v("取消")])])]),t._v(" "),t.loading?r("clip-loader",{staticClass:"loading",attrs:{color:"gray",size:"30px"}}):t._e()],1)])}),[],!1,null,null,null).exports},props:{value:{type:[Array,String]},disabled:{type:Boolean,default:!1},placeholder:{type:String,default:"請選擇供應商"},color:{type:String,default:"theme-blue"}},watch:{value:function(t){this.refresh(t)}},data:function(){return{vendorMgmts:[],modal:{vendor:null,show:!1}}},mounted:function(){var t=this;return L(C().mark((function e(){return C().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.fetchData();case 2:t.init(),t.setSelect2Val();case 4:case"end":return e.stop()}}),e)})))()},methods:{init:function(){var t=v()(this.$refs.select2),e=this;t.select2({minimumResultsForSearch:5}),t.on("select2:select",(function(t){e.setVal()})),t.on("select2:unselect",(function(t){e.setVal()}))},fetchData:function(){var t=this;return L(C().mark((function e(){var r,n;return C().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.loading=!0,e.prev=1,e.next=4,a().get("/api/vendorMgmts");case 4:0==(r=(r=e.sent).data).status&&(n=r.data,t.vendorMgmts=n.vendorMgmts),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),t.guestRedirectHome(e.t0);case 12:case"end":return e.stop()}}),e,null,[[1,9]])})))()},setSelect2Val:function(){var t=this;this.$nextTick((function(){v()(t.$refs.select2).val([t.value]),v()(t.$refs.select2).trigger("change")}))},refresh:function(t){var e=this;return L(C().mark((function r(){return C().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,e.fetchData();case 2:v()(e.$refs.select2).val(null).trigger("change"),v()(e.$refs.select2).select2("destroy"),e.init(),e.$emit("input",t),e.setSelect2Val();case 7:case"end":return r.stop()}}),r)})))()},setVal:function(){var t=v()(this.$refs.select2).select2("data");0==t.length?this.$emit("input",null):this.$emit("input",t[0].id)},showModal:function(t){this.modal.vendor=t,this.modal.show=!0},deleteRow:function(t){var e=this;return L(C().mark((function r(){return C().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(confirm("確定要刪除".concat(t,"?"))){r.next=2;break}return r.abrupt("return");case 2:return r.prev=2,r.next=5,a().delete("/api/vendorMgmts/".concat(t));case 5:0==r.sent.data.status&&(e.$toast.success({title:"成功訊息",message:"刪除成功"}),e.refresh(null)),r.next=13;break;case 10:r.prev=10,r.t0=r.catch(2),e.guestRedirectHome(r.t0);case 13:case"end":return r.stop()}}),r,null,[[2,10]])})))()}}};var E=r(3379),M=r.n(E),O=r(7300),P={insert:"head",singleton:!1};M()(O.Z,P);O.Z.locals;const j=(0,f.Z)(S,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{class:[t.color]},[r("select",{ref:"select2",staticClass:"select2 form-control vendor-list-select",attrs:{"data-placeholder":t.placeholder,disabled:t.disabled}},t._l(t.vendorMgmts,(function(e){return r("option",{domProps:{value:e.vendor}},[t._v("\n            "+t._s(e.vendor)+"\n        ")])})),0),t._v(" "),r("i",{staticClass:"glyphicon glyphicon-plus",on:{click:function(e){return t.showModal(null)}}}),t._v(" "),t.value?[r("i",{staticClass:"glyphicon glyphicon-pencil",on:{click:function(e){return t.showModal(t.value)}}}),t._v(" "),r("i",{staticClass:"glyphicon glyphicon-trash",on:{click:function(e){return t.deleteRow(t.value)}}})]:t._e(),t._v(" "),r("vendor-mgmt-modal",{attrs:{vendor:t.modal.vendor},on:{update:t.refresh},model:{value:t.modal.show,callback:function(e){t.$set(t.modal,"show",e)},expression:"modal.show"}})],2)}),[],!1,null,"701869e6",null).exports;var N=r(7446);function T(t){return T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},T(t)}function $(){$=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function c(t,e,r,n){var o=e&&e.prototype instanceof d?e:d,i=Object.create(o.prototype),a=new C(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return L()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var s=b(a,r);if(s){if(s===u)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=l(t,e,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===u)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}(t,r,a),i}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var u={};function d(){}function h(){}function f(){}var p={};s(p,o,(function(){return this}));var m=Object.getPrototypeOf,v=m&&m(m(k([])));v&&v!==e&&r.call(v,o)&&(p=v);var g=f.prototype=d.prototype=Object.create(p);function y(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function _(t,e){function n(o,i,a,s){var c=l(t[o],t,i);if("throw"!==c.type){var u=c.arg,d=u.value;return d&&"object"==T(d)&&r.call(d,"__await")?e.resolve(d.__await).then((function(t){n("next",t,a,s)}),(function(t){n("throw",t,a,s)})):e.resolve(d).then((function(t){u.value=t,a(u)}),(function(t){return n("throw",t,a,s)}))}s(c.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function b(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,b(t,e),"throw"===e.method))return u;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var n=l(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,u;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,u):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,u)}function x(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function w(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function C(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(x,this),this.reset(!0)}function k(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:L}}function L(){return{value:void 0,done:!0}}return h.prototype=f,s(g,"constructor",f),s(f,"constructor",h),h.displayName=s(f,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===h||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,f):(t.__proto__=f,s(t,a,"GeneratorFunction")),t.prototype=Object.create(g),t},t.awrap=function(t){return{__await:t}},y(_.prototype),s(_.prototype,i,(function(){return this})),t.AsyncIterator=_,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new _(c(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},y(g),s(g,a,"Generator"),s(g,o,(function(){return this})),s(g,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=k,C.prototype={constructor:C,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(w),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=r.call(i,"catchLoc"),c=r.call(i,"finallyLoc");if(s&&c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,u):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),u},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),w(r),u}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;w(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:k(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),u}},t}function I(t,e,r,n,o,i,a){try{var s=t[i](a),c=s.value}catch(t){return void r(t)}s.done?e(c):Promise.resolve(c).then(n,o)}function D(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){I(i,n,o,a,s,"next",t)}function s(t){I(i,n,o,a,s,"throw",t)}a(void 0)}))}}const A={name:"EdgeListSelect",props:{value:{type:[Array,Number,String]},disabled:{type:Boolean,default:!1},placeholder:{type:String,default:"請選擇"},color:{type:String,default:"theme-blue"},multiple:{type:Boolean,default:!1},items:{type:Array,default:function(){return[]}},select2Class:{type:String,default:null},isDeploy:{type:Number,default:null}},computed:{showValue:function(){var t=this;return!o().find(this.edges,(function(e){return e.name==t.value}))}},watch:{value:function(t){this.multiple?v()(this.$refs.select2).select2("data",o().map(t,(function(t){return t.name}))):v()(this.$refs.select2).select2("data",[t])}},data:function(){return{edges:[]}},created:function(){var t=this;return D($().mark((function e(){return $().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!=t.items.length){e.next=5;break}return e.next=3,t.fetchData();case 3:e.next=6;break;case 5:t.edges=t.items;case 6:t.setSelect2Val();case 7:case"end":return e.stop()}}),e)})))()},mounted:function(){this.init()},methods:{init:function(){var t=v()(this.$refs.select2),e=this;t.select2({minimumResultsForSearch:1,allowClear:!0,closeOnSelect:!e.multiple,language:{noResults:function(){return"查無資料"}}}),t.on("select2:select",(function(t){e.setVal()})),t.on("select2:unselect",(function(t){e.setVal()}))},fetchData:function(){var t=this;return D($().mark((function e(){var r,n;return $().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.loading=!0,e.prev=1,e.next=4,a().get("/api/edges",{params:{is_deploy:t.isDeploy}});case 4:0==(r=(r=e.sent).data).status&&(n=r.data,t.edges=n.edges),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),t.guestRedirectHome(e.t0);case 12:case"end":return e.stop()}}),e,null,[[1,9]])})))()},setSelect2Val:function(){var t=this;this.$nextTick((function(){t.multiple?v()(t.$refs.select2).val(o().map(t.value,(function(t){return t}))):v()(t.$refs.select2).val([t.value]),v()(t.$refs.select2).trigger("change")}))},setVal:function(){var t=v()(this.$refs.select2).select2("data");this.multiple?this.$emit("input",o().map(t,(function(t){return t}))):t.length>0?this.$emit("input",t[0].id):this.$emit("input",null),this.$emit("change")},refresh:function(){v()(this.$refs.select2).val(null).trigger("change"),v()(this.$refs.select2).select2("destroy"),this.init(),this.setSelect2Val()}}};const F=(0,f.Z)(A,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{class:[t.color]},[r("select",{ref:"select2",staticClass:"select2",class:t.select2Class,staticStyle:{width:"100%"},attrs:{multiple:t.multiple,"data-placeholder":t.placeholder,disabled:t.disabled}},[t._l(t.edges,(function(e){return r("option",{domProps:{value:e.id}},[t._v("\n            "+t._s(e.name)+"\n        ")])})),t._v(" "),t.value&&t.showValue?r("option",{domProps:{value:t.value}},[t._v("\n            "+t._s(t.value)+"\n        ")]):t._e()],2)])}),[],!1,null,null,null).exports;var q=r(2059);function R(t){return R="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},R(t)}function G(){G=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function c(t,e,r,n){var o=e&&e.prototype instanceof d?e:d,i=Object.create(o.prototype),a=new C(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return L()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var s=b(a,r);if(s){if(s===u)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=l(t,e,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===u)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}(t,r,a),i}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var u={};function d(){}function h(){}function f(){}var p={};s(p,o,(function(){return this}));var m=Object.getPrototypeOf,v=m&&m(m(k([])));v&&v!==e&&r.call(v,o)&&(p=v);var g=f.prototype=d.prototype=Object.create(p);function y(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function _(t,e){function n(o,i,a,s){var c=l(t[o],t,i);if("throw"!==c.type){var u=c.arg,d=u.value;return d&&"object"==R(d)&&r.call(d,"__await")?e.resolve(d.__await).then((function(t){n("next",t,a,s)}),(function(t){n("throw",t,a,s)})):e.resolve(d).then((function(t){u.value=t,a(u)}),(function(t){return n("throw",t,a,s)}))}s(c.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function b(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,b(t,e),"throw"===e.method))return u;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var n=l(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,u;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,u):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,u)}function x(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function w(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function C(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(x,this),this.reset(!0)}function k(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:L}}function L(){return{value:void 0,done:!0}}return h.prototype=f,s(g,"constructor",f),s(f,"constructor",h),h.displayName=s(f,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===h||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,f):(t.__proto__=f,s(t,a,"GeneratorFunction")),t.prototype=Object.create(g),t},t.awrap=function(t){return{__await:t}},y(_.prototype),s(_.prototype,i,(function(){return this})),t.AsyncIterator=_,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new _(c(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},y(g),s(g,a,"Generator"),s(g,o,(function(){return this})),s(g,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=k,C.prototype={constructor:C,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(w),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=r.call(i,"catchLoc"),c=r.call(i,"finallyLoc");if(s&&c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,u):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),u},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),w(r),u}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;w(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:k(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),u}},t}function z(t,e,r,n,o,i,a){try{var s=t[i](a),c=s.value}catch(t){return void r(t)}s.done?e(c):Promise.resolve(c).then(n,o)}function V(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){z(i,n,o,a,s,"next",t)}function s(t){z(i,n,o,a,s,"throw",t)}a(void 0)}))}}const Z={name:"ObjectMgmtModal",$_veeValidate:{validator:"new"},components:{ClipLoader:c.Z,ObjectClassSelect:p,VendorMgmtSelect:j,VehicleMgmtListSelect:N.Z,EdgeListSelect:F,VertexListSelect:q.Z},props:{value:{type:Boolean,default:!1},objUid:{type:String}},computed:{doorMgmtPreferVehicles:{get:function(){return this.form.door_mgmt&&this.form.door_mgmt.prefer_vehicle?this.getPreferVehiclesArray(this.form,"door_mgmt"):[]},set:function(t){var e=o().map(t,(function(t){return t.vehicle_id})).toString();this.$set(this.form.door_mgmt,"prefer_vehicle",e)}},elevatorMgmtPreferVehicles:{get:function(){return this.form.elevator_mgmt&&this.form.elevator_mgmt.prefer_vehicle?this.getPreferVehiclesArray(this.form,"elevator_mgmt"):[]},set:function(t){var e=o().map(t,(function(t){return t.vehicle_id})).toString();this.$set(this.form.elevator_mgmt,"prefer_vehicle",e)}}},watch:{value:function(t){this.showModal=t},"form.object_class":{handler:function(){this.resetFormValidate()},deep:!0}},data:function(){return{loading:!0,sending:!1,showModal:this.value,form:{},idDuplicate:!1,ipaddrDuplicate:!1,macaddrDuplicate:!1,duplicateVehicleId:null}},created:function(){this.resetForm()},methods:{fetchData:function(){var t=this;return V(G().mark((function e(){var r,n,o;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,a().get("/api/objectMgmts/".concat(t.objUid));case 3:0==(r=(r=e.sent).data).status&&(n=r.data,(o=n.objectMgmt).station_mgmt&&(o.station_mgmt.station_group?o.station_mgmt.station_group=o.station_mgmt.station_group.split(","):o.station_mgmt.station_group=[]),o.elevator_mgmt||(o.elevator_mgmt={vertices:[]}),t.form=o),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),t.guestRedirectHome(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))()},onShowModal:function(){var t=this;return V(G().mark((function e(){return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.resetForm(),!t.objUid){e.next=5;break}return t.loading=!0,e.next=5,t.fetchData();case 5:t.loading=!1;case 6:case"end":return e.stop()}}),e)})))()},onHideModal:function(){this.resetForm(),this.$emit("input",!1)},submit:function(){var t=this;return V(G().mark((function e(){var r,n,i,s;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.validate();case 3:if(e.sent){e.next=6;break}return e.abrupt("return");case 6:if((r=o().cloneDeep(t.form)).station_mgmt&&(r.station_mgmt.station_group=r.station_mgmt.station_group.toString()),t.sending=!0,n=null,t.objUid){e.next=16;break}return e.next=13,a().post("/api/objectMgmts",r);case 13:n=e.sent,e.next=19;break;case 16:return e.next=18,a().patch("/api/objectMgmts/".concat(t.objUid),r);case 18:n=e.sent;case 19:0==(n=n.data).status?(i=n.data,t.form=i.objectMgmt,t.form.elevator_mgmt||(t.form.elevator_mgmt={vertices:[]}),t.$toast.success({title:"成功訊息",message:"".concat(t.objUid?"更新":"創建","成功")}),t.$emit("update",t.form),t.showModal=!1):-7==n.status&&("obj_id"==(s=n.data).column?(t.idDuplicate=!0,t.scrollTo("obj_id")):"ipaddr"==s.column?(t.ipaddrDuplicate=!0,t.duplicateVehicleId=s.vehicle_id,t.scrollTo("ipaddr")):"macaddr"==s.column&&(t.macaddrDuplicate=!0,t.duplicateVehicleId=s.vehicle_id,t.scrollTo("macaddr"))),e.next=26;break;case 23:e.prev=23,e.t0=e.catch(0),t.guestRedirectHome(e.t0);case 26:t.sending=!1;case 27:case"end":return e.stop()}}),e,null,[[0,23]])})))()},resetForm:function(){this.form={obj_id:null,object_class:null,vendor:null,vehicle_mgmt:{low_speed:0,normal_speed:0,high_speed:0,macaddr:null,ipaddr:null,chargeable:0,vehicle_type:null,assign_switch:"AUTO",group:[],stoppable_second:5},door_mgmt:{edge_id:null,prefer_vehicle:null,macaddr:null,ipaddr:null,enable:!0},station_mgmt:{vertex_id:null,device_name:null,station_group:[],bypass:!1,enable:!0},elevator_mgmt:{elevator_id:null,vertices:[],prefer_vehicle:null,macaddr:null,ipaddr:null,enable:!0},equipment_mgmt:{equipment_id:null,enable:!0,macaddr:null,ipaddr:null}},this.idDuplicate=!1,this.ipaddrDuplicate=!1,this.macaddrDuplicate=!1,this.duplicateVehicleId=null,this.resetFormValidate()},getPreferVehiclesArray:function(t,e){var r=t[e].prefer_vehicle.split(",");return o().map(r,(function(t){return{vehicle_id:t}}))}}};var B=r(9988),H={insert:"head",singleton:!1};M()(B.Z,H);B.Z.locals;const U=(0,f.Z)(Z,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("modal",{attrs:{footer:!1,backdrop:!1,"append-to-body":!0,keyboard:!1},on:{show:t.onShowModal,hide:t.onHideModal},model:{value:t.showModal,callback:function(e){t.showModal=e},expression:"showModal"}},[r("div",{attrs:{slot:"title"},slot:"title"},[t._v(t._s(t.objUid?"更新載具":"創建載具"))]),t._v(" "),r("div",{attrs:{slot:"default"},slot:"default"},[t.loading?t._e():r("form",{staticClass:"form-horizontal",attrs:{novalidate:""},on:{submit:function(e){return e.preventDefault(),t.submit.apply(null,arguments)}}},[r("div",{staticClass:"form-group"},[r("label",{staticClass:"col-md-3 control-label"},[t._v("裝置編號"),r("span",{staticClass:"is-danger"},[t._v(" *")])]),t._v(" "),r("div",{staticClass:"col-md-9"},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.form.obj_id,expression:"form.obj_id"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"form-control",attrs:{name:"obj_id",placeholder:"請填寫裝置編號",disabled:t.objUid},domProps:{value:t.form.obj_id},on:{input:[function(e){e.target.composing||t.$set(t.form,"obj_id",e.target.value)},function(e){t.idDuplicate=!1}]}}),t._v(" "),r("span",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("obj_id:required"),expression:"errors.has('obj_id:required')"}],staticClass:"help is-danger"},[t._v("請填寫裝置編號")]),t._v(" "),r("span",{directives:[{name:"show",rawName:"v-show",value:t.idDuplicate,expression:"idDuplicate"}],staticClass:"help is-danger"},[t._v("該裝置編號已存在！")])])]),t._v(" "),r("div",{staticClass:"form-group"},[r("label",{staticClass:"col-md-3 control-label"},[t._v("設備類別"),r("span",{staticClass:"is-danger"},[t._v(" *")])]),t._v(" "),r("div",{staticClass:"col-md-9"},[r("object-class-select",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"form-control",attrs:{name:"object_class",disabled:t.objUid},model:{value:t.form.object_class,callback:function(e){t.$set(t.form,"object_class",e)},expression:"form.object_class"}}),t._v(" "),r("span",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("object_class:required"),expression:"errors.has('object_class:required')"}],staticClass:"help is-danger"},[t._v("請選擇設備類別")])],1)]),t._v(" "),"AMDR"==t.form.object_class?[r("div",{staticClass:"form-group"},[r("label",{staticClass:"col-md-3 control-label"},[t._v("速度高標值"),r("span",[t._v("  ")])]),t._v(" "),r("div",{staticClass:"col-md-9"},[r("div",{staticClass:"input-group"},[r("input",{directives:[{name:"model",rawName:"v-model.number",value:t.form.vehicle_mgmt.high_speed,expression:"form.vehicle_mgmt.high_speed",modifiers:{number:!0}},{name:"validate",rawName:"v-validate",value:"decimal|min_value:0",expression:"'decimal|min_value:0'"}],staticClass:"form-control",attrs:{name:"high_speed",placeholder:"請填寫速度高標值"},domProps:{value:t.form.vehicle_mgmt.high_speed},on:{input:function(e){e.target.composing||t.$set(t.form.vehicle_mgmt,"high_speed",t._n(e.target.value))},blur:function(e){return t.$forceUpdate()}}}),t._v(" "),r("div",{staticClass:"input-group-addon"},[t._v("m/s")])]),t._v(" "),r("span",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("high_speed:decimal"),expression:"errors.has(`high_speed:decimal`)"}],staticClass:"help is-danger"},[t._v("請填寫數值")]),t._v(" "),r("span",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("high_speed:min_value"),expression:"errors.has(`high_speed:min_value`)"}],staticClass:"help is-danger"},[t._v("請填寫正值")])])]),t._v(" "),r("div",{staticClass:"form-group"},[r("label",{staticClass:"col-md-3 control-label"},[t._v("速度常標值"),r("span",[t._v("  ")])]),t._v(" "),r("div",{staticClass:"col-md-9"},[r("div",{staticClass:"input-group"},[r("input",{directives:[{name:"model",rawName:"v-model.number",value:t.form.vehicle_mgmt.normal_speed,expression:"form.vehicle_mgmt.normal_speed",modifiers:{number:!0}},{name:"validate",rawName:"v-validate",value:"decimal|min_value:0",expression:"'decimal|min_value:0'"}],staticClass:"form-control",attrs:{name:"normal_speed",placeholder:"請填寫速度常標值"},domProps:{value:t.form.vehicle_mgmt.normal_speed},on:{input:function(e){e.target.composing||t.$set(t.form.vehicle_mgmt,"normal_speed",t._n(e.target.value))},blur:function(e){return t.$forceUpdate()}}}),t._v(" "),r("div",{staticClass:"input-group-addon"},[t._v("m/s")])]),t._v(" "),r("span",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("normal_speed:decimal"),expression:"errors.has(`normal_speed:decimal`)"}],staticClass:"help is-danger"},[t._v("請填寫數值")]),t._v(" "),r("span",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("normal_speed:min_value"),expression:"errors.has(`normal_speed:min_value`)"}],staticClass:"help is-danger"},[t._v("請填寫正值")])])]),t._v(" "),r("div",{staticClass:"form-group"},[r("label",{staticClass:"col-md-3 control-label"},[t._v("速度低標值"),r("span",[t._v("  ")])]),t._v(" "),r("div",{staticClass:"col-md-9"},[r("div",{staticClass:"input-group"},[r("input",{directives:[{name:"model",rawName:"v-model.number",value:t.form.vehicle_mgmt.low_speed,expression:"form.vehicle_mgmt.low_speed",modifiers:{number:!0}},{name:"validate",rawName:"v-validate",value:"decimal|min_value:0",expression:"'decimal|min_value:0'"}],staticClass:"form-control",attrs:{name:"low_speed",placeholder:"請填寫速度低標值"},domProps:{value:t.form.vehicle_mgmt.low_speed},on:{input:function(e){e.target.composing||t.$set(t.form.vehicle_mgmt,"low_speed",t._n(e.target.value))},blur:function(e){return t.$forceUpdate()}}}),t._v(" "),r("div",{staticClass:"input-group-addon"},[t._v("m/s")])]),t._v(" "),r("span",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("low_speed:decimal"),expression:"errors.has(`low_speed:decimal`)"}],staticClass:"help is-danger"},[t._v("請填寫數值")]),t._v(" "),r("span",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("low_speed:min_value"),expression:"errors.has(`low_speed:min_value`)"}],staticClass:"help is-danger"},[t._v("請填寫正值")])])]),t._v(" "),r("div",{staticClass:"form-group"},[r("label",{staticClass:"col-md-3 control-label"},[t._v("車輛MAC"),r("span",{staticClass:"is-hidden"},[t._v(" *")])]),t._v(" "),r("div",{staticClass:"col-md-9"},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.form.vehicle_mgmt.macaddr,expression:"form.vehicle_mgmt.macaddr"},{name:"validate",rawName:"v-validate",value:{regex:/^([0-9A-Fa-f]{2}[:-]){5}([0-9A-Fa-f]{2})$/},expression:"{regex: /^([0-9A-Fa-f]{2}[:-]){5}([0-9A-Fa-f]{2})$/}"}],staticClass:"form-control",attrs:{name:"macaddr",placeholder:"請填寫車輛MAC"},domProps:{value:t.form.vehicle_mgmt.macaddr},on:{input:function(e){e.target.composing||t.$set(t.form.vehicle_mgmt,"macaddr",e.target.value)}}}),t._v(" "),t.errors.has("macaddr:regex")?r("span",{staticClass:"help is-danger"},[t._v("請填寫有效的MAC Address")]):t.macaddrDuplicate?r("span",{staticClass:"help is-danger"},[t._v("本組MAC已被綁定在車輛編號「"+t._s(t.duplicateVehicleId)+"」！")]):t._e()])]),t._v(" "),r("div",{staticClass:"form-group"},[r("label",{staticClass:"col-md-3 control-label"},[t._v("車輛IP"),r("span",{staticClass:"is-hidden"},[t._v(" *")])]),t._v(" "),r("div",{staticClass:"col-md-9"},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.form.vehicle_mgmt.ipaddr,expression:"form.vehicle_mgmt.ipaddr"},{name:"validate",rawName:"v-validate",value:{regex:/(?:(?:2(?:[0-4][0-9]|5[0-5])|[0-1]?[0-9]?[0-9])\.){3}(?:(?:2([0-4][0-9]|5[0-5])|[0-1]?[0-9]?[0-9]))(\/([0-9]|[12][0-9]|3[0-2]))?$/},expression:"{regex: /(?:(?:2(?:[0-4][0-9]|5[0-5])|[0-1]?[0-9]?[0-9])\\.){3}(?:(?:2([0-4][0-9]|5[0-5])|[0-1]?[0-9]?[0-9]))(\\/([0-9]|[12][0-9]|3[0-2]))?$/}"}],staticClass:"form-control",attrs:{name:"ipaddr",placeholder:"請填寫車輛IP"},domProps:{value:t.form.vehicle_mgmt.ipaddr},on:{input:function(e){e.target.composing||t.$set(t.form.vehicle_mgmt,"ipaddr",e.target.value)}}}),t._v(" "),t.errors.has("ipaddr:regex")?r("span",{staticClass:"help is-danger"},[t._v("請填寫有效的IP")]):t.ipaddrDuplicate?r("span",{staticClass:"help is-danger"},[t._v("本組IP已被綁定在車輛編號「"+t._s(t.duplicateVehicleId)+"」！")]):t._e()])]),t._v(" "),r("div",{staticClass:"form-group"},[r("label",{staticClass:"col-md-3 control-label"},[t._v("充電功能"),r("span",{staticClass:"is-hidden"},[t._v(" *")])]),t._v(" "),r("div",{staticClass:"col-md-9"},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.form.vehicle_mgmt.chargeable,expression:"form.vehicle_mgmt.chargeable"}],attrs:{type:"checkbox",name:"chargeable","true-value":1,"false-value":0},domProps:{checked:Array.isArray(t.form.vehicle_mgmt.chargeable)?t._i(t.form.vehicle_mgmt.chargeable,null)>-1:t._q(t.form.vehicle_mgmt.chargeable,1)},on:{change:function(e){var r=t.form.vehicle_mgmt.chargeable,n=e.target,o=n.checked?1:0;if(Array.isArray(r)){var i=t._i(r,null);n.checked?i<0&&t.$set(t.form.vehicle_mgmt,"chargeable",r.concat([null])):i>-1&&t.$set(t.form.vehicle_mgmt,"chargeable",r.slice(0,i).concat(r.slice(i+1)))}else t.$set(t.form.vehicle_mgmt,"chargeable",o)}}})])]),t._v(" "),r("div",{staticClass:"form-group"},[r("label",{staticClass:"col-md-3 control-label"},[t._v("指令類型"),r("span",{staticClass:"is-danger"},[t._v(" *")])]),t._v(" "),r("div",{staticClass:"col-md-9"},[r("p",{staticClass:"form-control-static"},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.form.vehicle_mgmt.assign_switch,expression:"form.vehicle_mgmt.assign_switch"}],attrs:{type:"checkbox",id:"AUTO","true-value":"AUTO","false-value":null},domProps:{checked:Array.isArray(t.form.vehicle_mgmt.assign_switch)?t._i(t.form.vehicle_mgmt.assign_switch,null)>-1:t._q(t.form.vehicle_mgmt.assign_switch,"AUTO")},on:{change:function(e){var r=t.form.vehicle_mgmt.assign_switch,n=e.target,o=n.checked?"AUTO":null;if(Array.isArray(r)){var i=t._i(r,null);n.checked?i<0&&t.$set(t.form.vehicle_mgmt,"assign_switch",r.concat([null])):i>-1&&t.$set(t.form.vehicle_mgmt,"assign_switch",r.slice(0,i).concat(r.slice(i+1)))}else t.$set(t.form.vehicle_mgmt,"assign_switch",o)}}}),t._v(" "),r("label",{attrs:{for:"AUTO"}},[r("span",{staticClass:"checkbox-label-text"},[t._v("自動")])]),t._v(" \n                            "),r("input",{directives:[{name:"model",rawName:"v-model",value:t.form.vehicle_mgmt.assign_switch,expression:"form.vehicle_mgmt.assign_switch"}],attrs:{type:"checkbox",id:"EXPLICIT","true-value":"EXPLICIT","false-value":null},domProps:{checked:Array.isArray(t.form.vehicle_mgmt.assign_switch)?t._i(t.form.vehicle_mgmt.assign_switch,null)>-1:t._q(t.form.vehicle_mgmt.assign_switch,"EXPLICIT")},on:{change:function(e){var r=t.form.vehicle_mgmt.assign_switch,n=e.target,o=n.checked?"EXPLICIT":null;if(Array.isArray(r)){var i=t._i(r,null);n.checked?i<0&&t.$set(t.form.vehicle_mgmt,"assign_switch",r.concat([null])):i>-1&&t.$set(t.form.vehicle_mgmt,"assign_switch",r.slice(0,i).concat(r.slice(i+1)))}else t.$set(t.form.vehicle_mgmt,"assign_switch",o)}}}),t._v(" "),r("label",{attrs:{for:"EXPLICIT"}},[r("span",{staticClass:"checkbox-label-text"},[t._v("精確")])]),t._v(" \n                            "),r("input",{directives:[{name:"model",rawName:"v-model",value:t.form.vehicle_mgmt.assign_switch,expression:"form.vehicle_mgmt.assign_switch"}],attrs:{type:"checkbox",id:"MANUAL","true-value":"MANUAL","false-value":null},domProps:{checked:Array.isArray(t.form.vehicle_mgmt.assign_switch)?t._i(t.form.vehicle_mgmt.assign_switch,null)>-1:t._q(t.form.vehicle_mgmt.assign_switch,"MANUAL")},on:{change:function(e){var r=t.form.vehicle_mgmt.assign_switch,n=e.target,o=n.checked?"MANUAL":null;if(Array.isArray(r)){var i=t._i(r,null);n.checked?i<0&&t.$set(t.form.vehicle_mgmt,"assign_switch",r.concat([null])):i>-1&&t.$set(t.form.vehicle_mgmt,"assign_switch",r.slice(0,i).concat(r.slice(i+1)))}else t.$set(t.form.vehicle_mgmt,"assign_switch",o)}}}),t._v(" "),r("label",{attrs:{for:"MANUAL"}},[r("span",{staticClass:"checkbox-label-text"},[t._v("手動")])]),t._v(" \n                            "),r("input",{directives:[{name:"model",rawName:"v-model",value:t.form.vehicle_mgmt.assign_switch,expression:"form.vehicle_mgmt.assign_switch"}],attrs:{type:"checkbox",id:"DISABLE","true-value":"DISABLE","false-value":null},domProps:{checked:Array.isArray(t.form.vehicle_mgmt.assign_switch)?t._i(t.form.vehicle_mgmt.assign_switch,null)>-1:t._q(t.form.vehicle_mgmt.assign_switch,"DISABLE")},on:{change:function(e){var r=t.form.vehicle_mgmt.assign_switch,n=e.target,o=n.checked?"DISABLE":null;if(Array.isArray(r)){var i=t._i(r,null);n.checked?i<0&&t.$set(t.form.vehicle_mgmt,"assign_switch",r.concat([null])):i>-1&&t.$set(t.form.vehicle_mgmt,"assign_switch",r.slice(0,i).concat(r.slice(i+1)))}else t.$set(t.form.vehicle_mgmt,"assign_switch",o)}}}),t._v(" "),r("label",{attrs:{for:"DISABLE"}},[r("span",{staticClass:"checkbox-label-text"},[t._v("禁用")])]),t._v(" \n                        ")])])]),t._v(" "),r("div",{staticClass:"form-group"},[r("label",{staticClass:"col-md-3 control-label"},[t._v("車輛類型"),r("span",{staticClass:"is-danger"},[t._v(" *")])]),t._v(" "),r("div",{staticClass:"col-md-9"},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.form.vehicle_mgmt.vehicle_type,expression:"form.vehicle_mgmt.vehicle_type"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"form-control",attrs:{name:"vehicle_type",placeholder:"請填寫車輛類型"},domProps:{value:t.form.vehicle_mgmt.vehicle_type},on:{input:function(e){e.target.composing||t.$set(t.form.vehicle_mgmt,"vehicle_type",e.target.value)}}}),t._v(" "),r("span",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("vehicle_type:required"),expression:"errors.has('vehicle_type:required')"}],staticClass:"help is-danger"},[t._v("請填寫車輛類型")])])]),t._v(" "),t.form.obj_uid?r("div",{staticClass:"form-group"},[r("label",{staticClass:"col-md-3 control-label"},[t._v("車輛位置"),r("span",[t._v("  ")])]),t._v(" "),r("div",{staticClass:"col-md-9",staticStyle:{"margin-top":"4px"}},[t.form.vehicle_mgmt&&t.form.vehicle_mgmt.vehicle_status?[t._v("\n                            "+t._s(t.form.vehicle_mgmt.vehicle_status.vehicle_location_x)),r("span",{directives:[{name:"show",rawName:"v-show",value:t.form.vehicle_mgmt.vehicle_status.vehicle_location_y,expression:"form.vehicle_mgmt.vehicle_status.vehicle_location_y"}]},[t._v(", ")]),t._v(t._s(t.form.vehicle_mgmt.vehicle_status.vehicle_location_y)+"\n                        ")]:t._e()],2)]):t._e(),t._v(" "),r("div",{staticClass:"form-group"},[r("label",{staticClass:"col-md-3 control-label"},[t._v("UI停止秒數"),r("span",{staticClass:"is-danger"},[t._v(" *")])]),t._v(" "),r("div",{staticClass:"col-md-9"},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.form.vehicle_mgmt.stoppable_second,expression:"form.vehicle_mgmt.stoppable_second"},{name:"validate",rawName:"v-validate",value:"required|numeric",expression:"'required|numeric'"}],staticClass:"form-control",attrs:{name:"stoppable_second",placeholder:"請填寫UI停止秒數"},domProps:{value:t.form.vehicle_mgmt.stoppable_second},on:{input:function(e){e.target.composing||t.$set(t.form.vehicle_mgmt,"stoppable_second",e.target.value)}}}),t._v(" "),r("span",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("stoppable_second:required"),expression:"errors.has('stoppable_second:required')"}],staticClass:"help is-danger"},[t._v("請填寫UI停止秒數")]),t._v(" "),r("span",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("stoppable_second:numeric"),expression:"errors.has('stoppable_second:numeric')"}],staticClass:"help is-danger"},[t._v("請填寫數字(整數)")])])])]:"DOOR"==t.form.object_class?[r("div",{staticClass:"form-group"},[r("label",{staticClass:"col-md-3 control-label"},[t._v("軌道名稱"),r("span",{staticClass:"is-danger"},[t._v(" *")])]),t._v(" "),r("div",{staticClass:"col-md-9"},[r("edge-list-select",{directives:[{name:"validate",rawName:"v-validate",value:{required:!0},expression:"{\n                                            required: true\n                                          }"}],attrs:{"is-deploy":1,name:"edge_id","select2-class":"form-control",placeholder:"請選擇軌道名稱"},model:{value:t.form.door_mgmt.edge_id,callback:function(e){t.$set(t.form.door_mgmt,"edge_id",e)},expression:"form.door_mgmt.edge_id"}}),t._v(" "),r("span",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("edge_id:required"),expression:"errors.has('edge_id:required')"}],staticClass:"help is-danger"},[t._v("請選擇軌道名稱")])],1)]),t._v(" "),r("div",{staticClass:"form-group"},[r("label",{staticClass:"col-md-3 control-label"},[t._v("首選車輛"),r("span",[t._v("  ")])]),t._v(" "),r("div",{staticClass:"col-md-9"},[r("vehicle-mgmt-list-select",{attrs:{placeholder:"請選擇首選車輛",multiple:!0},model:{value:t.doorMgmtPreferVehicles,callback:function(e){t.doorMgmtPreferVehicles=e},expression:"doorMgmtPreferVehicles"}})],1)]),t._v(" "),r("div",{staticClass:"form-group"},[r("label",{staticClass:"col-md-3 control-label"},[t._v("MAC"),r("span",{staticClass:"is-danger"},[t._v(" *")])]),t._v(" "),r("div",{staticClass:"col-md-9"},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.form.door_mgmt.macaddr,expression:"form.door_mgmt.macaddr"},{name:"validate",rawName:"v-validate",value:{regex:/^([0-9A-Fa-f]{2}[:-]){5}([0-9A-Fa-f]{2})$/,required:!0},expression:"{regex: /^([0-9A-Fa-f]{2}[:-]){5}([0-9A-Fa-f]{2})$/, required: true}"}],staticClass:"form-control",attrs:{name:"macaddr",placeholder:"請填寫MAC"},domProps:{value:t.form.door_mgmt.macaddr},on:{input:function(e){e.target.composing||t.$set(t.form.door_mgmt,"macaddr",e.target.value)}}}),t._v(" "),t.errors.has("macaddr:regex")?r("span",{staticClass:"help is-danger"},[t._v("請填寫有效的MAC Address")]):t.macaddrDuplicate?r("span",{staticClass:"help is-danger"},[t._v("本組MAC已被綁定在車輛編號「"+t._s(t.duplicateVehicleId)+"」！")]):t._e()])]),t._v(" "),r("div",{staticClass:"form-group"},[r("label",{staticClass:"col-md-3 control-label"},[t._v("IP"),r("span",{staticClass:"is-danger"},[t._v(" *")])]),t._v(" "),r("div",{staticClass:"col-md-9"},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.form.door_mgmt.ipaddr,expression:"form.door_mgmt.ipaddr"},{name:"validate",rawName:"v-validate",value:{regex:/(?:(?:2(?:[0-4][0-9]|5[0-5])|[0-1]?[0-9]?[0-9])\.){3}(?:(?:2([0-4][0-9]|5[0-5])|[0-1]?[0-9]?[0-9]))(\/([0-9]|[12][0-9]|3[0-2]))?$/,required:!0},expression:"{regex: /(?:(?:2(?:[0-4][0-9]|5[0-5])|[0-1]?[0-9]?[0-9])\\.){3}(?:(?:2([0-4][0-9]|5[0-5])|[0-1]?[0-9]?[0-9]))(\\/([0-9]|[12][0-9]|3[0-2]))?$/, required: true}"}],staticClass:"form-control",attrs:{name:"ipaddr",placeholder:"請填寫IP"},domProps:{value:t.form.door_mgmt.ipaddr},on:{input:function(e){e.target.composing||t.$set(t.form.door_mgmt,"ipaddr",e.target.value)}}}),t._v(" "),t.errors.has("ipaddr:regex")?r("span",{staticClass:"help is-danger"},[t._v("請填寫有效的IP Address")]):t.ipaddrDuplicate?r("span",{staticClass:"help is-danger"},[t._v("本組IP已被綁定在車輛編號「"+t._s(t.duplicateVehicleId)+"」！")]):t._e()])]),t._v(" "),r("div",{staticClass:"form-group"},[r("label",{staticClass:"col-md-3 control-label"},[t._v("啟用狀態"),r("span",[t._v("  ")])]),t._v(" "),r("div",{staticClass:"col-md-9"},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.form.door_mgmt.enable,expression:"form.door_mgmt.enable"}],staticClass:"form-control-static",attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.form.door_mgmt.enable)?t._i(t.form.door_mgmt.enable,null)>-1:t.form.door_mgmt.enable},on:{change:function(e){var r=t.form.door_mgmt.enable,n=e.target,o=!!n.checked;if(Array.isArray(r)){var i=t._i(r,null);n.checked?i<0&&t.$set(t.form.door_mgmt,"enable",r.concat([null])):i>-1&&t.$set(t.form.door_mgmt,"enable",r.slice(0,i).concat(r.slice(i+1)))}else t.$set(t.form.door_mgmt,"enable",o)}}})])])]:"STATION"==t.form.object_class?[r("div",{staticClass:"form-group"},[r("label",{staticClass:"col-md-3 control-label"},[t._v("站點名稱"),r("span",[t._v("  ")])]),t._v(" "),r("div",{staticClass:"col-md-9"},[r("vertex-list-select",{directives:[{name:"validate",rawName:"v-validate",value:{required:!0,vertex_deploy:!!(t.form.station_mgmt&&t.form.station_mgmt.vertex&&t.form.station_mgmt.vertex.id)&&t.form.station_mgmt.vertex},expression:"{\n                                                required: true,\n                                                vertex_deploy: form.station_mgmt && form.station_mgmt.vertex && form.station_mgmt.vertex.id ? form.station_mgmt.vertex : false\n                                            }"}],attrs:{name:"vertex_id","value-column":"id","vertex-type-id":4,"device-name":t.form.station_mgmt.device_name,"allow-clear":!0,"is-deploy":1},on:{"update:deviceName":function(e){return t.$set(t.form.station_mgmt,"device_name",e)},"update:device-name":function(e){return t.$set(t.form.station_mgmt,"device_name",e)}},model:{value:t.form.station_mgmt.vertex_id,callback:function(e){t.$set(t.form.station_mgmt,"vertex_id",e)},expression:"form.station_mgmt.vertex_id"}}),t._v(" "),t.errors.has("vertex_name:required")?r("span",{staticClass:"help is-danger"},[t._v("請選擇站點名稱")]):t._e(),t._v(" "),t.errors.has("vertex_name:vertex_deploy")?r("span",{staticClass:"help is-danger"},[t._v("該站點尚未被燒入")]):t._e()],1)]),t._v(" "),r("div",{staticClass:"form-group"},[r("label",{staticClass:"col-md-3 control-label"},[t._v("裝置名稱"),r("span",{staticClass:"is-danger"},[t._v(" *")])]),t._v(" "),r("div",{staticClass:"col-md-9"},[r("p",{staticClass:"form-control-static"},[t._v("\n                            "+t._s(t.form.station_mgmt.device_name)+"\n                            "),r("span",{directives:[{name:"show",rawName:"v-show",value:t.form.station_mgmt.vertex_name&&!t.form.station_mgmt.device_name,expression:"form.station_mgmt.vertex_name && !form.station_mgmt.device_name"}],staticClass:"help is-danger",staticStyle:{position:"relative",top:"-3px"}},[t._v("此站點尚未設定裝置名稱！")]),t._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:t.form.station_mgmt.device_name,expression:"form.station_mgmt.device_name"},{name:"validate",rawName:"v-validate",value:t.form.station_mgmt.vertex_name?"required":"",expression:"`${form.station_mgmt.vertex_name ? 'required' : ''}`"}],attrs:{name:"device_name",type:"hidden"},domProps:{value:t.form.station_mgmt.device_name},on:{input:function(e){e.target.composing||t.$set(t.form.station_mgmt,"device_name",e.target.value)}}})])])]),t._v(" "),r("div",{staticClass:"form-group"},[r("label",{staticClass:"col-md-3 control-label"},[t._v("群組"),r("span",[t._v("  ")])]),t._v(" "),r("div",{staticClass:"col-md-9"},[r("p",{staticClass:"form-control-static"},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.form.station_mgmt.station_group,expression:"form.station_mgmt.station_group"}],attrs:{type:"checkbox",id:"red",value:"Red"},domProps:{checked:Array.isArray(t.form.station_mgmt.station_group)?t._i(t.form.station_mgmt.station_group,"Red")>-1:t.form.station_mgmt.station_group},on:{change:function(e){var r=t.form.station_mgmt.station_group,n=e.target,o=!!n.checked;if(Array.isArray(r)){var i=t._i(r,"Red");n.checked?i<0&&t.$set(t.form.station_mgmt,"station_group",r.concat(["Red"])):i>-1&&t.$set(t.form.station_mgmt,"station_group",r.slice(0,i).concat(r.slice(i+1)))}else t.$set(t.form.station_mgmt,"station_group",o)}}}),t._v(" "),r("label",{attrs:{for:"red"}},[r("span",{staticClass:"checkbox-label-text"},[t._v("紅線")])]),t._v(" \n                            "),r("input",{directives:[{name:"model",rawName:"v-model",value:t.form.station_mgmt.station_group,expression:"form.station_mgmt.station_group"}],attrs:{type:"checkbox",id:"blue",value:"Blue"},domProps:{checked:Array.isArray(t.form.station_mgmt.station_group)?t._i(t.form.station_mgmt.station_group,"Blue")>-1:t.form.station_mgmt.station_group},on:{change:function(e){var r=t.form.station_mgmt.station_group,n=e.target,o=!!n.checked;if(Array.isArray(r)){var i="Blue",a=t._i(r,i);n.checked?a<0&&t.$set(t.form.station_mgmt,"station_group",r.concat([i])):a>-1&&t.$set(t.form.station_mgmt,"station_group",r.slice(0,a).concat(r.slice(a+1)))}else t.$set(t.form.station_mgmt,"station_group",o)}}}),t._v(" "),r("label",{attrs:{for:"blue"}},[r("span",{staticClass:"checkbox-label-text"},[t._v("藍線")])]),t._v(" \n                        ")])])]),t._v(" "),r("div",{staticClass:"form-group"},[r("label",{staticClass:"col-md-3 control-label"},[t._v("屬性"),r("span",[t._v("  ")])]),t._v(" "),r("div",{staticClass:"col-md-9"},[r("p",{staticClass:"form-control-static"},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.form.station_mgmt.bypass,expression:"form.station_mgmt.bypass"}],attrs:{type:"checkbox",id:"pass","true-value":!0,"false-value":!1},domProps:{checked:Array.isArray(t.form.station_mgmt.bypass)?t._i(t.form.station_mgmt.bypass,null)>-1:t.form.station_mgmt.bypass},on:{change:function(e){var r=t.form.station_mgmt.bypass,n=e.target,o=!!n.checked;if(Array.isArray(r)){var i=t._i(r,null);n.checked?i<0&&t.$set(t.form.station_mgmt,"bypass",r.concat([null])):i>-1&&t.$set(t.form.station_mgmt,"bypass",r.slice(0,i).concat(r.slice(i+1)))}else t.$set(t.form.station_mgmt,"bypass",o)}}}),t._v(" "),r("label",{attrs:{for:"pass"}},[r("span",{staticClass:"checkbox-label-text"},[t._v("不一定過站")])]),t._v(" \n                            "),r("input",{directives:[{name:"model",rawName:"v-model",value:t.form.station_mgmt.bypass,expression:"form.station_mgmt.bypass"}],attrs:{type:"checkbox",id:"normal","true-value":!1,"false-value":!0},domProps:{checked:Array.isArray(t.form.station_mgmt.bypass)?t._i(t.form.station_mgmt.bypass,null)>-1:t._q(t.form.station_mgmt.bypass,!1)},on:{change:function(e){var r=t.form.station_mgmt.bypass,n=e.target,o=!n.checked;if(Array.isArray(r)){var i=t._i(r,null);n.checked?i<0&&t.$set(t.form.station_mgmt,"bypass",r.concat([null])):i>-1&&t.$set(t.form.station_mgmt,"bypass",r.slice(0,i).concat(r.slice(i+1)))}else t.$set(t.form.station_mgmt,"bypass",o)}}}),t._v(" "),r("label",{attrs:{for:"normal"}},[r("span",{staticClass:"checkbox-label-text"},[t._v("必過站")])]),t._v(" \n                        ")])])]),t._v(" "),r("div",{staticClass:"form-group"},[r("label",{staticClass:"col-md-3 control-label"},[t._v("啟用狀態"),r("span",[t._v("  ")])]),t._v(" "),r("div",{staticClass:"col-md-9"},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.form.station_mgmt.enable,expression:"form.station_mgmt.enable"}],staticClass:"form-control-static",attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.form.station_mgmt.enable)?t._i(t.form.station_mgmt.enable,null)>-1:t.form.station_mgmt.enable},on:{change:function(e){var r=t.form.station_mgmt.enable,n=e.target,o=!!n.checked;if(Array.isArray(r)){var i=t._i(r,null);n.checked?i<0&&t.$set(t.form.station_mgmt,"enable",r.concat([null])):i>-1&&t.$set(t.form.station_mgmt,"enable",r.slice(0,i).concat(r.slice(i+1)))}else t.$set(t.form.station_mgmt,"enable",o)}}})])])]:"ELEVATOR"==t.form.object_class?[r("div",{staticClass:"form-group"},[r("label",{staticClass:"col-md-3 control-label"},[t._v("站點名稱"),r("span",{staticClass:"is-danger"},[t._v(" *")])]),t._v(" "),r("div",{staticClass:"col-md-9"},[r("vertex-list-select",{directives:[{name:"validate",rawName:"v-validate",value:{required:!0,vertex_deploy:!!(t.form.elevator_mgmt&&t.form.elevator_mgmt.vertex&&t.form.elevator_mgmt.vertex.id)&&t.form.elevator_mgmt.vertex},expression:"{\n                                                required: true,\n                                                vertex_deploy: form.elevator_mgmt && form.elevator_mgmt.vertex && form.elevator_mgmt.vertex.id ? form.elevator_mgmt.vertex : false\n                                            }"}],attrs:{name:"vertices",multiple:!0,"vertex-type-id":2,"allow-clear":!0,"is-deploy":1},model:{value:t.form.elevator_mgmt.vertices,callback:function(e){t.$set(t.form.elevator_mgmt,"vertices",e)},expression:"form.elevator_mgmt.vertices"}}),t._v(" "),t.errors.has("vertices:required")?r("span",{staticClass:"help is-danger"},[t._v("請選擇站點")]):t._e(),t._v(" "),t.errors.has("vertices:vertex_deploy")?r("span",{staticClass:"help is-danger"},[t._v("該站點尚未被燒入")]):t._e()],1)]),t._v(" "),r("div",{staticClass:"form-group"},[r("label",{staticClass:"col-md-3 control-label"},[t._v("特定車輛"),r("span",{staticClass:"is-danger"},[t._v("  ")])]),t._v(" "),r("div",{staticClass:"col-md-9"},[r("vehicle-mgmt-list-select",{attrs:{placeholder:"請選擇特定車輛",multiple:!0},model:{value:t.elevatorMgmtPreferVehicles,callback:function(e){t.elevatorMgmtPreferVehicles=e},expression:"elevatorMgmtPreferVehicles"}})],1)]),t._v(" "),r("div",{staticClass:"form-group"},[r("label",{staticClass:"col-md-3 control-label"},[t._v("MAC"),r("span",[t._v("  ")])]),t._v(" "),r("div",{staticClass:"col-md-9"},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.form.elevator_mgmt.macaddr,expression:"form.elevator_mgmt.macaddr"},{name:"validate",rawName:"v-validate",value:{regex:/^([0-9A-Fa-f]{2}[:-]){5}([0-9A-Fa-f]{2})$/},expression:"{regex: /^([0-9A-Fa-f]{2}[:-]){5}([0-9A-Fa-f]{2})$/}"}],staticClass:"form-control",attrs:{name:"elevatorMgmtMacaddr",placeholder:"請填寫MAC"},domProps:{value:t.form.elevator_mgmt.macaddr},on:{input:function(e){e.target.composing||t.$set(t.form.elevator_mgmt,"macaddr",e.target.value)}}}),t._v(" "),t.errors.has("elevatorMgmtMacaddr:regex")?r("span",{staticClass:"help is-danger"},[t._v("請填寫有效的MAC Address")]):t.macaddrDuplicate?r("span",{staticClass:"help is-danger"},[t._v("本組MAC已被綁定在車輛編號「"+t._s(t.duplicateVehicleId)+"」！")]):t._e()])]),t._v(" "),r("div",{staticClass:"form-group"},[r("label",{staticClass:"col-md-3 control-label"},[t._v("IP"),r("span",[t._v("  ")])]),t._v(" "),r("div",{staticClass:"col-md-9"},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.form.elevator_mgmt.ipaddr,expression:"form.elevator_mgmt.ipaddr"},{name:"validate",rawName:"v-validate",value:{regex:/(?:(?:2(?:[0-4][0-9]|5[0-5])|[0-1]?[0-9]?[0-9])\.){3}(?:(?:2([0-4][0-9]|5[0-5])|[0-1]?[0-9]?[0-9]))(\/([0-9]|[12][0-9]|3[0-2]))?$/},expression:"{regex: /(?:(?:2(?:[0-4][0-9]|5[0-5])|[0-1]?[0-9]?[0-9])\\.){3}(?:(?:2([0-4][0-9]|5[0-5])|[0-1]?[0-9]?[0-9]))(\\/([0-9]|[12][0-9]|3[0-2]))?$/}"}],staticClass:"form-control",attrs:{name:"elevatorMgmtIpaddr",placeholder:"請填寫IP"},domProps:{value:t.form.elevator_mgmt.ipaddr},on:{input:function(e){e.target.composing||t.$set(t.form.elevator_mgmt,"ipaddr",e.target.value)}}}),t._v(" "),t.errors.has("elevatorMgmtIpaddr:regex")?r("span",{staticClass:"help is-danger"},[t._v("請填寫有效的IP Address")]):t.ipaddrDuplicate?r("span",{staticClass:"help is-danger"},[t._v("本組IP已被綁定在車輛編號「"+t._s(t.duplicateVehicleId)+"」！")]):t._e()])]),t._v(" "),r("div",{staticClass:"form-group"},[r("label",{staticClass:"col-md-3 control-label"},[t._v("啟用狀態"),r("span",[t._v("  ")])]),t._v(" "),r("div",{staticClass:"col-md-9"},[r("p",{staticClass:"form-control-static"},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.form.elevator_mgmt.enable,expression:"form.elevator_mgmt.enable"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.form.elevator_mgmt.enable)?t._i(t.form.elevator_mgmt.enable,null)>-1:t.form.elevator_mgmt.enable},on:{change:function(e){var r=t.form.elevator_mgmt.enable,n=e.target,o=!!n.checked;if(Array.isArray(r)){var i=t._i(r,null);n.checked?i<0&&t.$set(t.form.elevator_mgmt,"enable",r.concat([null])):i>-1&&t.$set(t.form.elevator_mgmt,"enable",r.slice(0,i).concat(r.slice(i+1)))}else t.$set(t.form.elevator_mgmt,"enable",o)}}})])])])]:[r("div",{staticClass:"form-group"},[r("label",{staticClass:"col-md-3 control-label"},[t._v("MAC"),r("span",[t._v("  ")])]),t._v(" "),r("div",{staticClass:"col-md-9"},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.form.equipment_mgmt.macaddr,expression:"form.equipment_mgmt.macaddr"},{name:"validate",rawName:"v-validate",value:{regex:/^([0-9A-Fa-f]{2}[:-]){5}([0-9A-Fa-f]{2})$/},expression:"{regex: /^([0-9A-Fa-f]{2}[:-]){5}([0-9A-Fa-f]{2})$/}"}],staticClass:"form-control",attrs:{name:"macaddr",placeholder:"請填寫MAC"},domProps:{value:t.form.equipment_mgmt.macaddr},on:{input:function(e){e.target.composing||t.$set(t.form.equipment_mgmt,"macaddr",e.target.value)}}}),t._v(" "),t.errors.has("macaddr:regex")?r("span",{staticClass:"help is-danger"},[t._v("請填寫有效的MAC Address")]):t.macaddrDuplicate?r("span",{staticClass:"help is-danger"},[t._v("本組MAC已被綁定在車輛編號「"+t._s(t.duplicateVehicleId)+"」！")]):t._e()])]),t._v(" "),r("div",{staticClass:"form-group"},[r("label",{staticClass:"col-md-3 control-label"},[t._v("IP"),r("span",[t._v("  ")])]),t._v(" "),r("div",{staticClass:"col-md-9"},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.form.equipment_mgmt.ipaddr,expression:"form.equipment_mgmt.ipaddr"},{name:"validate",rawName:"v-validate",value:{regex:/(?:(?:2(?:[0-4][0-9]|5[0-5])|[0-1]?[0-9]?[0-9])\.){3}(?:(?:2([0-4][0-9]|5[0-5])|[0-1]?[0-9]?[0-9]))(\/([0-9]|[12][0-9]|3[0-2]))?$/},expression:"{regex: /(?:(?:2(?:[0-4][0-9]|5[0-5])|[0-1]?[0-9]?[0-9])\\.){3}(?:(?:2([0-4][0-9]|5[0-5])|[0-1]?[0-9]?[0-9]))(\\/([0-9]|[12][0-9]|3[0-2]))?$/}"}],staticClass:"form-control",attrs:{name:"ipaddr",placeholder:"請填寫IP"},domProps:{value:t.form.equipment_mgmt.ipaddr},on:{input:function(e){e.target.composing||t.$set(t.form.equipment_mgmt,"ipaddr",e.target.value)}}}),t._v(" "),t.errors.has("ipaddr:regex")?r("span",{staticClass:"help is-danger"},[t._v("請填寫有效的IP Address")]):t.ipaddrDuplicate?r("span",{staticClass:"help is-danger"},[t._v("本組IP已被綁定在車輛編號「"+t._s(t.duplicateVehicleId)+"」！")]):t._e()])]),t._v(" "),r("div",{staticClass:"form-group"},[r("label",{staticClass:"col-md-3 control-label"},[t._v("啟用狀態"),r("span",[t._v("  ")])]),t._v(" "),r("div",{staticClass:"col-md-9"},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.form.equipment_mgmt.enable,expression:"form.equipment_mgmt.enable"}],staticClass:"form-control-static",attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.form.equipment_mgmt.enable)?t._i(t.form.equipment_mgmt.enable,null)>-1:t.form.equipment_mgmt.enable},on:{change:function(e){var r=t.form.equipment_mgmt.enable,n=e.target,o=!!n.checked;if(Array.isArray(r)){var i=t._i(r,null);n.checked?i<0&&t.$set(t.form.equipment_mgmt,"enable",r.concat([null])):i>-1&&t.$set(t.form.equipment_mgmt,"enable",r.slice(0,i).concat(r.slice(i+1)))}else t.$set(t.form.equipment_mgmt,"enable",o)}}})])])],t._v(" "),r("div",{staticClass:"form-group"},[r("label",{staticClass:"col-md-3 control-label"},[t._v("供應商"),r("span",{staticClass:"is-danger"},[t._v(" *")])]),t._v(" "),r("div",{staticClass:"col-md-9"},[r("vendor-mgmt-select",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{name:"vendor"},model:{value:t.form.vendor,callback:function(e){t.$set(t.form,"vendor",e)},expression:"form.vendor"}}),t._v(" "),r("span",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("vendor:required"),expression:"errors.has('vendor:required')"}],staticClass:"help is-danger"},[t._v("請選擇供應商")])],1)]),t._v(" "),r("div",{staticClass:"text-right"},[r("button",{staticClass:"btn btn-light-green",attrs:{disabled:t.sending}},[t._v("送出")]),t._v(" "),r("button",{staticClass:"btn btn-default",attrs:{type:"button"},on:{click:function(e){t.showModal=!1}}},[t._v("取消")])])],2),t._v(" "),t.loading?r("clip-loader",{staticClass:"loading",attrs:{color:"gray",size:"30px"}}):t._e()],1)])}),[],!1,null,"3a6a3770",null).exports;function Y(t){return Y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Y(t)}function W(){W=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function c(t,e,r,n){var o=e&&e.prototype instanceof d?e:d,i=Object.create(o.prototype),a=new C(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return L()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var s=b(a,r);if(s){if(s===u)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=l(t,e,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===u)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}(t,r,a),i}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var u={};function d(){}function h(){}function f(){}var p={};s(p,o,(function(){return this}));var m=Object.getPrototypeOf,v=m&&m(m(k([])));v&&v!==e&&r.call(v,o)&&(p=v);var g=f.prototype=d.prototype=Object.create(p);function y(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function _(t,e){function n(o,i,a,s){var c=l(t[o],t,i);if("throw"!==c.type){var u=c.arg,d=u.value;return d&&"object"==Y(d)&&r.call(d,"__await")?e.resolve(d.__await).then((function(t){n("next",t,a,s)}),(function(t){n("throw",t,a,s)})):e.resolve(d).then((function(t){u.value=t,a(u)}),(function(t){return n("throw",t,a,s)}))}s(c.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function b(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,b(t,e),"throw"===e.method))return u;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var n=l(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,u;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,u):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,u)}function x(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function w(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function C(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(x,this),this.reset(!0)}function k(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:L}}function L(){return{value:void 0,done:!0}}return h.prototype=f,s(g,"constructor",f),s(f,"constructor",h),h.displayName=s(f,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===h||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,f):(t.__proto__=f,s(t,a,"GeneratorFunction")),t.prototype=Object.create(g),t},t.awrap=function(t){return{__await:t}},y(_.prototype),s(_.prototype,i,(function(){return this})),t.AsyncIterator=_,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new _(c(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},y(g),s(g,a,"Generator"),s(g,o,(function(){return this})),s(g,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=k,C.prototype={constructor:C,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(w),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=r.call(i,"catchLoc"),c=r.call(i,"finallyLoc");if(s&&c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,u):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),u},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),w(r),u}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;w(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:k(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),u}},t}function X(t,e,r,n,o,i,a){try{var s=t[i](a),c=s.value}catch(t){return void r(t)}s.done?e(c):Promise.resolve(c).then(n,o)}function Q(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){X(i,n,o,a,s,"next",t)}function s(t){X(i,n,o,a,s,"throw",t)}a(void 0)}))}}function K(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function J(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}const tt={name:"ObjectMgmtListPage",components:{ClipLoader:c.Z,ObjectMgmtModal:U,ObjectClassSelect:p},computed:function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?K(Object(r),!0).forEach((function(e){J(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):K(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({},(0,s.Se)({roles:"user/roles"})),data:function(){return{loading:!1,objectMgmts:[],pagination:{last_page:1,current_page:this.$route.query.page?parseInt(this.$route.query.page):1},modal:{obj_uid:null,show:!1},form:{obj_id:this.$route.query.obj_id?this.$route.query.obj_id:null,object_class:this.$route.query.object_class?this.$route.query.object_class:null}}},created:function(){this.fetchData()},methods:{fetchData:function(){var t=this;return Q(W().mark((function e(){var r,n;return W().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.loading=!0,e.prev=1,e.next=4,a().get("/api/objectMgmts",{params:{page:t.pagination.current_page,obj_id:t.form.obj_id,object_class:t.form.object_class}});case 4:0==(r=(r=e.sent).data).status&&(n=r.data,t.objectMgmts=o().map(n.objectMgmts,(function(t){return t.selected=0,t})),t.pagination=n.pagination),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),t.guestRedirectHome(e.t0);case 12:t.loading=!1;case 13:case"end":return e.stop()}}),e,null,[[1,9]])})))()},showModal:function(t){this.modal.obj_uid=t,this.modal.show=!0},resetRow:function(t){var e=o().findIndex(this.objectMgmts,(function(e){return e.obj_uid==t.obj_uid}));-1==e?this.objectMgmts.splice(0,0,t):this.objectMgmts[e]=t},deleteRow:function(t){var e=this;return Q(W().mark((function r(){return W().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(confirm("確定要刪除".concat(t.obj_id,"?"))){r.next=2;break}return r.abrupt("return");case 2:return r.prev=2,r.next=5,a().delete("/api/objectMgmts/".concat(t.obj_uid));case 5:0==r.sent.data.status&&(e.$toast.success({title:"成功訊息",message:"刪除成功"}),e.objectMgmts=o().filter(e.objectMgmts,(function(e){return e.obj_uid!=t.obj_uid}))),r.next=13;break;case 10:r.prev=10,r.t0=r.catch(2),e.guestRedirectHome(r.t0);case 13:case"end":return r.stop()}}),r,null,[[2,10]])})))()},changePage:function(t){var e=o().cloneDeep(this.form);e.page=t;var r=this.getPureForm(e);this.$router.push({path:"/objectMgmts",query:r})}}};var et=r(9770),rt={insert:"head",singleton:!1};M()(et.Z,rt);et.Z.locals;const nt=(0,f.Z)(tt,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("section",{staticClass:"content-header clearfix"},[r("span",[t._v("載具管理 ")]),t._v(" "),r("button",{staticClass:"btn btn-light-green op-btn",on:{click:function(e){return t.showModal(null)}}},[r("i",{staticClass:"fa fa-plus",attrs:{"aria-hidden":"true"}}),t._v(" 創建載具\n        ")])]),t._v(" "),r("section",{staticClass:"content"},[r("div",{staticClass:"row"},[r("div",{staticClass:"col-xs-12"},[r("div",{staticClass:"box"},[r("div",{staticClass:"box-body"},[t.loading?t._e():r("div",[r("table",{staticClass:"table table-bordered table-hover break-table"},[t._m(0),t._v(" "),r("tbody",[t._m(1),t._v(" "),r("tr",[r("td",{attrs:{"data-title":"搜尋裝置編號"}},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.form.obj_id,expression:"form.obj_id"}],staticClass:"form-control",attrs:{placeholder:"搜尋"},domProps:{value:t.form.obj_id},on:{keypress:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.changePage(1)},input:function(e){e.target.composing||t.$set(t.form,"obj_id",e.target.value)}}})]),t._v(" "),r("td",{attrs:{"data-title":"搜尋設備類別"}},[r("object-class-select",{staticClass:"form-control",attrs:{name:"object_class"},on:{change:function(e){return t.changePage(1)}},model:{value:t.form.object_class,callback:function(e){t.$set(t.form,"object_class",e)},expression:"form.object_class"}})],1),t._v(" "),r("td",{staticClass:"hide-td"}),t._v(" "),r("td",{staticClass:"hide-td"}),t._v(" "),r("td",{staticClass:"hide-td"})]),t._v(" "),t._l(t.objectMgmts,(function(e,n){return r("tr",{class:[n%2==1?"tr-gray":""]},[r("td",{attrs:{"data-title":"裝置編號"}},[t._v(t._s(e.obj_id))]),t._v(" "),r("td",{attrs:{"data-title":"設備類別"}},[t._v(t._s(e.object_class))]),t._v(" "),r("td",{attrs:{"data-title":"車輛位置"}},["AMDR"==e.object_class?[e.vehicle_mgmt&&e.vehicle_mgmt.vehicle_status?[t._v("\n                                                "+t._s(e.vehicle_mgmt.vehicle_status.vehicle_location)+"\n                                                "),e.vehicle_mgmt.vehicle_status.vertex?r("span",{staticClass:"red"},[e.vehicle_mgmt.vehicle_status.vertex.region_mgmt?t._e():r("i",{staticClass:"fa fa-exclamation-circle"})]):t._e()]:t._e()]:"DOOR"==e.object_class?[e.door_mgmt&&e.door_mgmt.edge_name?[t._v("\n                                                "+t._s(e.door_mgmt.edge_name)+"\n                                                "),e.door_mgmt.edge?r("span",{staticClass:"red"},[e.door_mgmt.edge.region_mgmt?t._e():r("i",{staticClass:"fa fa-exclamation-circle"})]):t._e()]:t._e()]:"STATION"==e.object_class?[e.station_mgmt&&e.station_mgmt.vertex_name?[t._v("\n                                                "+t._s(e.station_mgmt.vertex_name)+"\n                                                "),e.station_mgmt.vertex?r("span",{staticClass:"red"},[e.station_mgmt.vertex.region_mgmt?t._e():r("i",{staticClass:"fa fa-exclamation-circle"})]):t._e()]:t._e()]:"ELEVATOR"==e.object_class?[e.elevator_mgmt&&e.elevator_mgmt.vertices&&e.elevator_mgmt.vertices.length>0?[t._l(e.elevator_mgmt.vertices,(function(e,n){return r("span",[0!=n?r("span",[t._v(", ")]):t._e(),t._v(t._s(e.name))])})),t._v(" "),e.elevator_mgmt.vertex?r("span",{staticClass:"red"},[e.elevator_mgmt.vertex.region_mgmt?t._e():r("i",{staticClass:"fa fa-exclamation-circle"})]):t._e()]:e.elevator_mgmt&&e.elevator_mgmt.vertex_name?[t._v("\n                                                "+t._s(e.elevator_mgmt.vertex_name)+"\n                                                "),e.elevator_mgmt.vertex?r("span",{staticClass:"red"},[e.elevator_mgmt.vertex.region_mgmt?t._e():r("i",{staticClass:"fa fa-exclamation-circle"})]):t._e()]:t._e()]:t._e()],2),t._v(" "),r("td",{attrs:{"data-title":"更新時間"}},[t._v(t._s(t._f("datetime")(e.update_ts)))]),t._v(" "),r("td",{staticClass:"text-center",attrs:{"data-title":"操作"}},[r("button",{staticClass:"btn btn-light-green btn-sm",attrs:{title:"修改"},on:{click:function(r){return t.showModal(e.obj_uid)}}},[r("i",{staticClass:"glyphicon glyphicon-pencil"}),t._v("\n                                            修改\n                                        ")]),t._v(" "),r("button",{staticClass:"btn btn-delete btn-sm",attrs:{title:"刪除"},on:{click:function(r){return t.deleteRow(e)}}},[r("i",{staticClass:"glyphicon glyphicon-trash"}),t._v("\n                                            刪除\n                                        ")])])])}))],2)]),t._v(" "),r("div",{staticClass:"text-center"},[r("pagination",{attrs:{"direction-links":!1,"boundary-links":!0,size:"sm","total-page":t.pagination.last_page,"max-size":10},on:{change:function(e){return t.changePage(t.pagination.current_page)}},model:{value:t.pagination.current_page,callback:function(e){t.$set(t.pagination,"current_page",e)},expression:"pagination.current_page"}})],1)]),t._v(" "),t.loading?r("clip-loader",{staticClass:"loading",attrs:{color:"gray",size:"30px"}}):t._e()],1)])])])]),t._v(" "),r("object-mgmt-modal",{attrs:{"obj-uid":t.modal.obj_uid},on:{update:t.resetRow,refresh:t.fetchData},model:{value:t.modal.show,callback:function(e){t.$set(t.modal,"show",e)},expression:"modal.show"}})],1)}),[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("thead",{staticClass:"table-head"},[r("tr",[r("th",{staticClass:"hide-td th-max-width"},[t._v("裝置編號")]),t._v(" "),r("th",{staticClass:"hide-td th-max-width"},[t._v("設備類別")]),t._v(" "),r("th",{staticClass:"hide-td th-max-width"},[t._v("位置")]),t._v(" "),r("th",{staticClass:"hide-td"},[t._v("更新時間")]),t._v(" "),r("th",{staticClass:"text-center hide-td th-min-width"},[t._v("操作")])])])},function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("tr",[r("td",{staticStyle:{"line-height":"5px"},attrs:{colspan:"8"}},[r("span",{staticClass:"red font-bold",staticStyle:{"font-size":"8pt"}},[t._v("\n                                            搜尋欄位輸入後請按Enter鍵\n                                        ")])])])}],!1,null,"40215a7d",null).exports},5868:(t,e,r)=>{"use strict";r.d(e,{Z:()=>P});var n=r(6486),o=r.n(n),i=r(9669),a=r.n(i),s=r(9038),c=r(130),l=r(9014),u=r(2059),d=r(7446);function h(t){return h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},h(t)}function f(){f=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function c(t,e,r,n){var o=e&&e.prototype instanceof d?e:d,i=Object.create(o.prototype),a=new L(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return E()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var s=w(a,r);if(s){if(s===u)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=l(t,e,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===u)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}(t,r,a),i}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var u={};function d(){}function p(){}function m(){}var v={};s(v,o,(function(){return this}));var g=Object.getPrototypeOf,y=g&&g(g(S([])));y&&y!==e&&r.call(y,o)&&(v=y);var _=m.prototype=d.prototype=Object.create(v);function b(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function x(t,e){function n(o,i,a,s){var c=l(t[o],t,i);if("throw"!==c.type){var u=c.arg,d=u.value;return d&&"object"==h(d)&&r.call(d,"__await")?e.resolve(d.__await).then((function(t){n("next",t,a,s)}),(function(t){n("throw",t,a,s)})):e.resolve(d).then((function(t){u.value=t,a(u)}),(function(t){return n("throw",t,a,s)}))}s(c.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return u;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var n=l(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,u;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,u):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,u)}function C(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function k(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function L(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(C,this),this.reset(!0)}function S(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:E}}function E(){return{value:void 0,done:!0}}return p.prototype=m,s(_,"constructor",m),s(m,"constructor",p),p.displayName=s(m,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,m):(t.__proto__=m,s(t,a,"GeneratorFunction")),t.prototype=Object.create(_),t},t.awrap=function(t){return{__await:t}},b(x.prototype),s(x.prototype,i,(function(){return this})),t.AsyncIterator=x,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new x(c(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},b(_),s(_,a,"Generator"),s(_,o,(function(){return this})),s(_,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=S,L.prototype={constructor:L,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(k),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=r.call(i,"catchLoc"),c=r.call(i,"finallyLoc");if(s&&c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,u):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),u},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),k(r),u}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;k(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:S(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),u}},t}function p(t,e,r,n,o,i,a){try{var s=t[i](a),c=s.value}catch(t){return void r(t)}s.done?e(c):Promise.resolve(c).then(n,o)}function m(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){p(i,n,o,a,s,"next",t)}function s(t){p(i,n,o,a,s,"throw",t)}a(void 0)}))}}const v={name:"ParkingLotMgmtModal",$_veeValidate:{validator:"new"},components:{ClipLoader:s.Z,ProjectListSelect:c.Z,RegionMgmtListSelect:l.Z,VertexListSelect:u.Z,VehicleMgmtListSelect:d.Z},props:{value:{type:Boolean,default:!1},pid:{type:String,default:null}},watch:{value:function(t){this.showModal=t},parkingLotMgmtPreferVehicleIds:function(t){var e="";o().forEach(t,(function(t){e+=t.vehicle_id+","})),e=e.slice(0,e.length-1),this.form.prefer_vehicle=e}},data:function(){return{loading:!0,sending:!1,showModal:this.value,form:{},parkingLotIdDuplicate:!1,projectId:null,vertexNameDuplicate:!1,parkingLotMgmtPreferVehicleIds:[]}},created:function(){this.resetForm()},methods:{onShowModal:function(){var t=this;return m(f().mark((function e(){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.resetForm(),!t.pid){e.next=5;break}return t.loading=!0,e.next=5,t.fetchData();case 5:t.loading=!1;case 6:case"end":return e.stop()}}),e)})))()},onHideModal:function(){this.resetForm(),this.$emit("input",!1)},fetchData:function(){var t=this;return m(f().mark((function e(){var r,n,i,s;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,a().get("/api/parkingLotMgmts/".concat(t.pid));case 3:0==(r=(r=e.sent).data).status&&(n=r.data,(i=n.parkingLotMgmt).vertex||(i.vertex={region_mgmt_id:null}),t.form=i,n.parkingLotMgmt.prefer_vehicle&&(s=n.parkingLotMgmt.prefer_vehicle.split(","),s=o().map(s,(function(t){return{vehicle_id:t}})),t.parkingLotMgmtPreferVehicleIds=s)),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),t.guestRedirectHome(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))()},submit:function(){var t=this;return m(f().mark((function e(){var r,n,o;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.validate();case 3:if(e.sent){e.next=6;break}return e.abrupt("return");case 6:if(t.form.vertex.region_mgmt_id||(t.form.vertex_id=null),t.sending=!0,r=null,!t.pid){e.next=15;break}return e.next=12,a().patch("/api/parkingLotMgmts/".concat(t.pid),t.form);case 12:r=e.sent,e.next=18;break;case 15:return e.next=17,a().post("/api/parkingLotMgmts",t.form);case 17:r=e.sent;case 18:0==(r=r.data).status?(n=r.data,(o=n.parkingLotMgmt).vertex||(o.vertex={region_mgmt_id:null,region_mgmt:{region:null}}),t.form=o,t.$toast.success({title:"成功訊息",message:"".concat(t.pid?"修改":"新增","成功")}),t.$emit("update",t.form),t.showModal=!1):-7==r.status?(t.parkingLotIdDuplicate=!0,t.scrollTo("parking_lot_id")):-9==r.status&&(t.vertexNameDuplicate=!0,t.scrollTo("vertex_id")),e.next=25;break;case 22:e.prev=22,e.t0=e.catch(0),t.guestRedirectHome(e.t0);case 25:t.sending=!1;case 26:case"end":return e.stop()}}),e,null,[[0,22]])})))()},resetForm:function(){this.form={parking_lot_id:null,vertex_id:null,vertex:{region_mgmt_id:null},prefer_vehicle:null,attribute:null,enable:!0},this.parkingLotMgmtPreferVehicleIds=[],this.parkingLotIdDuplicate=!1,this.vertexNameDuplicate=!1,this.projectId=null,this.resetFormValidate()}}};var g=r(3379),y=r.n(g),_=r(8703),b={insert:"head",singleton:!1};y()(_.Z,b);_.Z.locals;var x=r(1900);const w=(0,x.Z)(v,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("modal",{attrs:{footer:!1,backdrop:!1,"append-to-body":!0,keyboard:!1},on:{show:t.onShowModal,hide:t.onHideModal},model:{value:t.showModal,callback:function(e){t.showModal=e},expression:"showModal"}},[r("div",{attrs:{slot:"title"},slot:"title"},[t._v(t._s(t.pid?"修改停車位":"創建停車位"))]),t._v(" "),r("div",{attrs:{slot:"default"},slot:"default"},[t.loading?t._e():r("form",{staticClass:"form-horizontal",attrs:{novalidate:""},on:{submit:function(e){return e.preventDefault(),t.submit.apply(null,arguments)}}},[r("div",{staticClass:"form-group"},[r("label",{staticClass:"col-md-3 control-label"},[t._v("停車位編號"),r("span",{staticClass:"is-danger"},[t._v(" *")])]),t._v(" "),r("div",{staticClass:"col-md-9"},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.form.parking_lot_id,expression:"form.parking_lot_id"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"form-control",attrs:{name:"parking_lot_id",placeholder:"請填寫停車位編號",disabled:t.pid},domProps:{value:t.form.parking_lot_id},on:{input:function(e){e.target.composing||t.$set(t.form,"parking_lot_id",e.target.value)}}}),t._v(" "),r("span",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("parking_lot_id:required"),expression:"errors.has('parking_lot_id:required')"}],staticClass:"help is-danger"},[t._v("請填寫停車位編號")]),t._v(" "),r("span",{directives:[{name:"show",rawName:"v-show",value:t.parkingLotIdDuplicate,expression:"parkingLotIdDuplicate"}],staticClass:"help is-danger"},[t._v("該停車位編號已存在！")])])]),t._v(" "),r("div",{staticClass:"form-group"},[r("label",{staticClass:"col-md-3 control-label"},[t._v("專案"),r("span",{staticClass:"is-danger"},[t._v("   ")])]),t._v(" "),r("div",{staticClass:"col-md-9"},[r("project-list-select",{attrs:{"select-class":"form-control select-only-read",defaultText:"請選擇","is-deploy":1,disabled:!0},model:{value:t.projectId,callback:function(e){t.projectId=e},expression:"projectId"}})],1)]),t._v(" "),r("div",{staticClass:"form-group"},[r("label",{staticClass:"col-md-3 control-label"},[t._v("區域"),r("span",{staticClass:"is-danger"},[t._v("   ")])]),t._v(" "),r("div",{staticClass:"col-md-9"},[r("region-mgmt-list-select",{attrs:{name:"region_mgmt_id","single-select2":!0,"min-num-for-search":5,disabled:!t.projectId,"project-id":t.projectId},on:{"update:projectId":function(e){t.projectId=e},"update:project-id":function(e){t.projectId=e}},model:{value:t.form.vertex.region_mgmt_id,callback:function(e){t.$set(t.form.vertex,"region_mgmt_id",e)},expression:"form.vertex.region_mgmt_id"}})],1)]),t._v(" "),r("div",{staticClass:"form-group"},[r("label",{staticClass:"col-md-3 control-label"},[t._v("站點名稱"),r("span",{staticClass:"is-danger"},[t._v(" *")])]),t._v(" "),r("div",{staticClass:"col-md-9"},[r("vertex-list-select",{directives:[{name:"validate",rawName:"v-validate",value:{required:!0,vertex_deploy:!(!t.form.vertex||!t.form.vertex.id)&&t.form.vertex},expression:"{\n                                                required: true,\n                                                vertex_deploy: form.vertex && form.vertex.id ? form.vertex : false\n                                            }"}],attrs:{name:"vertex_id","region-mgmt-id":t.form.vertex.region_mgmt_id,"vertex-name":t.form.vertex_name,"allow-clear":!0,"is-deploy":1,disabled:!t.form.vertex.region_mgmt_id},on:{"update:vertexName":function(e){return t.$set(t.form,"vertex_name",e)},"update:vertex-name":function(e){return t.$set(t.form,"vertex_name",e)}},model:{value:t.form.vertex_id,callback:function(e){t.$set(t.form,"vertex_id",e)},expression:"form.vertex_id"}}),t._v(" "),t.errors.has("vertex_id:required")?r("span",{staticClass:"help is-danger"},[t._v(t._s(t.form.vertex&&t.form.vertex.region_mgmt_id?"請選擇站點名稱":"請先選擇區域，再選擇站點名稱"))]):t.errors.has("vertex_id:vertex_deploy")?r("span",{staticClass:"help is-danger"},[t._v("該站點尚未被燒入")]):t.vertexNameDuplicate?r("span",{staticClass:"help is-danger"},[t._v("此站點名稱已綁定於其他停車位！")]):t._e()],1)]),t._v(" "),r("div",{staticClass:"form-group"},[r("label",{staticClass:"col-md-3 control-label"},[t._v("首選車輛"),r("span",{staticClass:"is-danger"},[t._v(" *")])]),t._v(" "),r("div",{staticClass:"col-md-9"},[r("vehicle-mgmt-list-select",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{placeholder:"請選擇首選車輛",name:"parkingLotMgmtPreferVehicleIds","region-mgmt-id":t.form.vertex.region_mgmt_id,multiple:!0},model:{value:t.parkingLotMgmtPreferVehicleIds,callback:function(e){t.parkingLotMgmtPreferVehicleIds=e},expression:"parkingLotMgmtPreferVehicleIds"}}),t._v(" "),r("span",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("parkingLotMgmtPreferVehicleIds:required"),expression:"errors.has('parkingLotMgmtPreferVehicleIds:required')"}],staticClass:"help is-danger"},[t._v("請選擇首選車輛")])],1)]),t._v(" "),r("div",{staticClass:"form-group"},[r("label",{staticClass:"col-md-3 control-label"},[t._v("充電類型"),r("span",[t._v("  ")])]),t._v(" "),r("div",{staticClass:"col-md-9"},[r("p",{staticClass:"form-control-static"},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.form.attribute,expression:"form.attribute"}],attrs:{type:"checkbox",id:"charging","true-value":"charging","false-value":null},domProps:{checked:Array.isArray(t.form.attribute)?t._i(t.form.attribute,null)>-1:t._q(t.form.attribute,"charging")},on:{change:function(e){var r=t.form.attribute,n=e.target,o=n.checked?"charging":null;if(Array.isArray(r)){var i=t._i(r,null);n.checked?i<0&&t.$set(t.form,"attribute",r.concat([null])):i>-1&&t.$set(t.form,"attribute",r.slice(0,i).concat(r.slice(i+1)))}else t.$set(t.form,"attribute",o)}}}),t._v(" "),r("label",{attrs:{for:"charging"}},[r("span",{staticClass:"checkbox-label-text"},[t._v("充電站")])]),t._v(" \n                        "),r("input",{directives:[{name:"model",rawName:"v-model",value:t.form.attribute,expression:"form.attribute"}],attrs:{type:"checkbox",id:"battery_switch","true-value":"battery_switch","false-value":null},domProps:{checked:Array.isArray(t.form.attribute)?t._i(t.form.attribute,null)>-1:t._q(t.form.attribute,"battery_switch")},on:{change:function(e){var r=t.form.attribute,n=e.target,o=n.checked?"battery_switch":null;if(Array.isArray(r)){var i=t._i(r,null);n.checked?i<0&&t.$set(t.form,"attribute",r.concat([null])):i>-1&&t.$set(t.form,"attribute",r.slice(0,i).concat(r.slice(i+1)))}else t.$set(t.form,"attribute",o)}}}),t._v(" "),r("label",{attrs:{for:"battery_switch"}},[r("span",{staticClass:"checkbox-label-text"},[t._v("電池交換站")])]),t._v(" \n                    ")])])]),t._v(" "),r("div",{staticClass:"form-group"},[r("label",{staticClass:"col-md-3 control-label"},[t._v("啟用狀態"),r("span",[t._v("  ")])]),t._v(" "),r("div",{staticClass:"col-md-9"},[r("p",{staticClass:"form-control-static"},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.form.enable,expression:"form.enable"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.form.enable)?t._i(t.form.enable,null)>-1:t.form.enable},on:{change:function(e){var r=t.form.enable,n=e.target,o=!!n.checked;if(Array.isArray(r)){var i=t._i(r,null);n.checked?i<0&&t.$set(t.form,"enable",r.concat([null])):i>-1&&t.$set(t.form,"enable",r.slice(0,i).concat(r.slice(i+1)))}else t.$set(t.form,"enable",o)}}})])])]),t._v(" "),r("div",{staticClass:"text-right"},[r("button",{staticClass:"btn btn-light-green",attrs:{disabled:t.sending}},[t._v("送出")]),t._v(" "),r("button",{staticClass:"btn btn-default",attrs:{type:"button"},on:{click:function(e){t.showModal=!1}}},[t._v("取消")])])]),t._v(" "),t.loading?r("clip-loader",{staticClass:"loading",attrs:{color:"gray",size:"30px"}}):t._e()],1)])}),[],!1,null,"0628cefb",null).exports;function C(t){return C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},C(t)}function k(){k=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function c(t,e,r,n){var o=e&&e.prototype instanceof d?e:d,i=Object.create(o.prototype),a=new L(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return E()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var s=b(a,r);if(s){if(s===u)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=l(t,e,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===u)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}(t,r,a),i}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var u={};function d(){}function h(){}function f(){}var p={};s(p,o,(function(){return this}));var m=Object.getPrototypeOf,v=m&&m(m(S([])));v&&v!==e&&r.call(v,o)&&(p=v);var g=f.prototype=d.prototype=Object.create(p);function y(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function _(t,e){function n(o,i,a,s){var c=l(t[o],t,i);if("throw"!==c.type){var u=c.arg,d=u.value;return d&&"object"==C(d)&&r.call(d,"__await")?e.resolve(d.__await).then((function(t){n("next",t,a,s)}),(function(t){n("throw",t,a,s)})):e.resolve(d).then((function(t){u.value=t,a(u)}),(function(t){return n("throw",t,a,s)}))}s(c.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function b(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,b(t,e),"throw"===e.method))return u;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var n=l(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,u;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,u):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,u)}function x(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function w(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function L(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(x,this),this.reset(!0)}function S(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:E}}function E(){return{value:void 0,done:!0}}return h.prototype=f,s(g,"constructor",f),s(f,"constructor",h),h.displayName=s(f,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===h||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,f):(t.__proto__=f,s(t,a,"GeneratorFunction")),t.prototype=Object.create(g),t},t.awrap=function(t){return{__await:t}},y(_.prototype),s(_.prototype,i,(function(){return this})),t.AsyncIterator=_,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new _(c(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},y(g),s(g,a,"Generator"),s(g,o,(function(){return this})),s(g,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=S,L.prototype={constructor:L,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(w),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=r.call(i,"catchLoc"),c=r.call(i,"finallyLoc");if(s&&c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,u):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),u},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),w(r),u}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;w(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:S(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),u}},t}function L(t,e,r,n,o,i,a){try{var s=t[i](a),c=s.value}catch(t){return void r(t)}s.done?e(c):Promise.resolve(c).then(n,o)}function S(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){L(i,n,o,a,s,"next",t)}function s(t){L(i,n,o,a,s,"throw",t)}a(void 0)}))}}const E={name:"ParkingLotMgmtListView",components:{ClipLoader:s.Z,ParkingLotMgmtModal:w},props:{showEditBtn:{type:Boolean,default:!1},showCreateBtn:{type:Boolean,default:!1},titleText:{type:String,default:function(){return"停車位狀態"}},tableFontSize:{type:Number,default:18}},data:function(){return{loading:!1,parkingLotMgmts:[],modal:{show:!1,parking_lot_id:null}}},created:function(){this.fetchData();var t=this;window.Echo.private("parkingLotMgmts").listen("ParkingLotMgmtCreated",(function(e){t.parkingLotMgmts.unshift(e.parkingLotMgmt)})).listen("ParkingLotMgmtUpdated",(function(e){var r=o().findIndex(t.parkingLotMgmts,["parking_lot_id",e.parkingLotMgmt.parking_lot_id]);-1!=r&&t.parkingLotMgmts.splice(r,1,e.parkingLotMgmt)})).listen("ParkingLotMgmtDeleted",(function(e){var r=o().findIndex(t.parkingLotMgmts,["parking_lot_id",e.parkingLotMgmt.parking_lot_id]);-1!=r&&t.parkingLotMgmts.splice(r,1)})),window.Echo.private("parkingLotStatuses").listen("ParkingLotStatusUpdated",(function(e){var r=e.parkingLotStatus,n=r.parking_lot_mgmt;delete r.parking_lot_mgmt,n.parking_lot_status=r;var i=o().findIndex(t.parkingLotMgmts,["parking_lot_id",n.parking_lot_id]);-1!=i&&t.parkingLotMgmts.splice(i,1,n)}))},destroyed:function(){window.Echo.leave("parkingLotMgmts"),window.Echo.leave("parkingLotStatuses")},methods:{fetchData:function(){var t=this;return S(k().mark((function e(){var r,n;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.loading=!0,e.prev=1,e.next=4,a().get("/api/parkingLotMgmts");case 4:0==(r=(r=e.sent).data).status&&(n=r.data,t.parkingLotMgmts=n.parkingLotMgmts),e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(1),e.next=13,t.guestRedirectHome(e.t0);case 13:t.loading=!1;case 14:case"end":return e.stop()}}),e,null,[[1,9]])})))()},resetRow:function(t){var e=o().findIndex(this.parkingLotMgmts,(function(e){return e.parking_lot_id==t.parking_lot_id}));-1==e?this.parkingLotMgmts.unshift(t):this.parkingLotMgmts.splice(e,1,t)},showModal:function(t){this.modal.parking_lot_id=t,this.modal.show=!0},deleteRow:function(t){var e=this;return S(k().mark((function r(){return k().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(confirm("確定要刪除".concat(t.parking_lot_id,"?"))){r.next=2;break}return r.abrupt("return");case 2:return r.prev=2,r.next=5,a().delete("/api/parkingLotMgmts/".concat(t.parking_lot_id));case 5:0==r.sent.data.status&&(e.$toast.success({title:"成功訊息",message:"刪除成功"}),e.parkingLotMgmts=o().filter(e.parkingLotMgmts,(function(e){return e.parking_lot_id!=t.parking_lot_id}))),r.next=13;break;case 10:r.prev=10,r.t0=r.catch(2),e.guestRedirectHome(r.t0);case 13:case"end":return r.stop()}}),r,null,[[2,10]])})))()}}};var M=r(2885),O={insert:"head",singleton:!1};y()(M.Z,O);M.Z.locals;const P=(0,x.Z)(E,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("section",{staticClass:"content-header clearfix"},[r("span",{style:"color: "+("停車位管理"==t.titleText?"#FFFFFF":"#000000")},[t._v(t._s(t.titleText)+" ")]),t._v(" "),t.showCreateBtn?r("button",{staticClass:"btn btn-light-green op-btn",on:{click:function(e){return t.showModal(null)}}},[r("i",{staticClass:"fa fa-plus",attrs:{"aria-hidden":"true"}}),t._v(" 創建停車位\n        ")]):t._e()]),t._v(" "),r("section",{staticClass:"content"},[r("div",{staticClass:"row"},[r("div",{staticClass:"col-xs-12"},[r("div",{staticClass:"box"},[r("div",{staticClass:"box-body"},[t.loading?t._e():r("div",[r("table",{staticClass:"table table-bordered table-hover break-table",style:"font-size: "+t.tableFontSize+"px"},[r("thead",{staticClass:"table-head"},[r("tr",[r("th",{staticClass:"text-center hide-td",attrs:{colspan:"6"}},[t._v("停車位資訊")]),t._v(" "),r("th",{staticClass:"text-center hide-td",attrs:{colspan:"4"}},[t._v("即時狀態")]),t._v(" "),t.showEditBtn?r("th",{staticClass:"text-center hide-td",attrs:{rowspan:"2"}},[t._v("操作")]):t._e()]),t._v(" "),t._m(0)]),t._v(" "),r("tbody",t._l(t.parkingLotMgmts,(function(e,n){return r("tr",{class:{"tr-gray":n%2==1}},[r("td",{staticClass:"text-center",attrs:{"data-title":"停車位編號"}},[t._v(t._s(e.parking_lot_id))]),t._v(" "),r("td",{staticClass:"text-center",attrs:{"data-title":"站點位置"}},[t._v(t._s(e.vertex_name))]),t._v(" "),r("td",{staticClass:"text-center",attrs:{"data-title":"區域"}},[t._v(t._s(e.vertex?e.vertex.region_mgmt.region:null))]),t._v(" "),r("td",{staticClass:"text-center",attrs:{"data-title":"首選車輛"}},[t._v(t._s(e.prefer_vehicle))]),t._v(" "),r("td",{staticClass:"text-center",attrs:{"data-title":"屬性"}},[t._v(t._s(e.attribute))]),t._v(" "),r("td",{staticClass:"text-center",attrs:{"data-title":"啟用狀態"}},[r("b",{class:{red:!e.enable,green:e.enable}},[t._v(t._s(e.enable?"已啟用":"未啟用"))])]),t._v(" "),r("td",{staticClass:"text-center",attrs:{"data-title":"預定狀態"}},[t._v(t._s(e.parking_lot_status?e.parking_lot_status.parking_lot_status:null))]),t._v(" "),r("td",{staticClass:"text-center",attrs:{"data-title":"預定車輛"}},[t._v(t._s(e.parking_lot_status?e.parking_lot_status.booking_vehicle_id:null))]),t._v(" "),r("td",{staticClass:"text-center",attrs:{"data-title":"目前停放"}},[t._v(t._s(e.parking_lot_status?e.parking_lot_status.occupied_vehicle_id:null))]),t._v(" "),e.parking_lot_status?r("td",{staticClass:"text-center",attrs:{"data-title":"更新時間"}},[t._v(t._s(t._f("datetime")(e.parking_lot_status.update_ts)))]):r("td",{staticClass:"text-center",attrs:{"data-title":"更新時間"}},[t._v(t._s(null))]),t._v(" "),t.showEditBtn?r("td",{staticClass:"text-center",attrs:{"data-title":"操作"}},[r("button",{staticClass:"btn btn-light-green btn-sm",attrs:{title:"修改"},on:{click:function(r){return t.showModal(e.parking_lot_id)}}},[r("i",{staticClass:"glyphicon glyphicon-pencil"}),t._v("\n                                            修改\n                                        ")]),t._v(" "),r("button",{staticClass:"btn btn-delete btn-sm",attrs:{title:"刪除"},on:{click:function(r){return t.deleteRow(e)}}},[r("i",{staticClass:"glyphicon glyphicon-trash"}),t._v("\n                                            刪除\n                                        ")])]):t._e()])})),0)])]),t._v(" "),t.loading?r("clip-loader",{staticClass:"loading",attrs:{color:"gray",size:"30px"}}):t._e()],1)])])])]),t._v(" "),r("parking-lot-mgmt-modal",{attrs:{pid:t.modal.parking_lot_id},on:{update:t.resetRow,refresh:t.fetchData},model:{value:t.modal.show,callback:function(e){t.$set(t.modal,"show",e)},expression:"modal.show"}})],1)}),[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("tr",[r("th",{staticClass:"text-center hide-td"},[t._v("停車位編號")]),t._v(" "),r("th",{staticClass:"text-center hide-td"},[t._v("站點位置")]),t._v(" "),r("th",{staticClass:"text-center hide-td"},[t._v("區域")]),t._v(" "),r("th",{staticClass:"text-center hide-td"},[t._v("首選車輛")]),t._v(" "),r("th",{staticClass:"text-center hide-td"},[t._v("屬性")]),t._v(" "),r("th",{staticClass:"text-center hide-td"},[t._v("啟用狀態")]),t._v(" "),r("th",{staticClass:"text-center hide-td"},[t._v("預定狀態")]),t._v(" "),r("th",{staticClass:"text-center hide-td"},[t._v("預定車輛")]),t._v(" "),r("th",{staticClass:"text-center hide-td"},[t._v("目前停放")]),t._v(" "),r("th",{staticClass:"text-center hide-td"},[t._v("更新時間")])])}],!1,null,"6891ac15",null).exports},4911:(t,e,r)=>{"use strict";r.d(e,{Z:()=>p});var n=r(6486),o=r.n(n),i=r(9669),a=r.n(i),s=r(9038),c=r(7301);function l(t){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},l(t)}function u(){u=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function c(t,e,r,n){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new L(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return E()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var s=w(a,r);if(s){if(s===h)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=d(t,e,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===h)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}(t,r,a),i}function d(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var h={};function f(){}function p(){}function m(){}var v={};s(v,o,(function(){return this}));var g=Object.getPrototypeOf,y=g&&g(g(S([])));y&&y!==e&&r.call(y,o)&&(v=y);var _=m.prototype=f.prototype=Object.create(v);function b(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function x(t,e){function n(o,i,a,s){var c=d(t[o],t,i);if("throw"!==c.type){var u=c.arg,h=u.value;return h&&"object"==l(h)&&r.call(h,"__await")?e.resolve(h.__await).then((function(t){n("next",t,a,s)}),(function(t){n("throw",t,a,s)})):e.resolve(h).then((function(t){u.value=t,a(u)}),(function(t){return n("throw",t,a,s)}))}s(c.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return h;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return h}var n=d(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,h;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,h):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,h)}function C(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function k(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function L(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(C,this),this.reset(!0)}function S(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:E}}function E(){return{value:void 0,done:!0}}return p.prototype=m,s(_,"constructor",m),s(m,"constructor",p),p.displayName=s(m,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,m):(t.__proto__=m,s(t,a,"GeneratorFunction")),t.prototype=Object.create(_),t},t.awrap=function(t){return{__await:t}},b(x.prototype),s(x.prototype,i,(function(){return this})),t.AsyncIterator=x,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new x(c(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},b(_),s(_,a,"Generator"),s(_,o,(function(){return this})),s(_,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=S,L.prototype={constructor:L,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(k),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=r.call(i,"catchLoc"),c=r.call(i,"finallyLoc");if(s&&c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,h):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),k(r),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;k(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:S(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),h}},t}function d(t,e,r,n,o,i,a){try{var s=t[i](a),c=s.value}catch(t){return void r(t)}s.done?e(c):Promise.resolve(c).then(n,o)}function h(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){d(i,n,o,a,s,"next",t)}function s(t){d(i,n,o,a,s,"throw",t)}a(void 0)}))}}const f={name:"ProjectListPage",components:{ClipLoader:s.Z,ProjectModal:c.Z},data:function(){return{loading:!1,projects:[],pagination:{last_page:1,current_page:this.$route.query.page?parseInt(this.$route.query.page):1},modal:{id:null,show:!1},form:{page:this.$route.query.page?this.$route.query.page:1,name:this.$route.query.name?this.$route.query.name:null}}},created:function(){this.fetchData()},methods:{fetchData:function(){var t=this;return h(u().mark((function e(){var r,n;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.loading=!0,e.prev=1,e.next=4,a().get("/api/projects",{params:t.form});case 4:0==(r=(r=e.sent).data).status&&(n=r.data,t.projects=n.projects,n.pagination&&(t.pagination=n.pagination)),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),t.guestRedirectHome(e.t0);case 12:t.loading=!1;case 13:case"end":return e.stop()}}),e,null,[[1,9]])})))()},showModal:function(t){this.modal.id=t,this.modal.show=!0},resetRow:function(t){var e=o().findIndex(this.projects,(function(e){return e.id==t.id}));-1==e?this.projects.splice(0,0,t):this.projects[e]=t},deleteRow:function(t){var e=this;return h(u().mark((function r(){return u().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(confirm("確定要刪除".concat(t.name,"?"))){r.next=2;break}return r.abrupt("return");case 2:return r.prev=2,r.next=5,a().delete("/api/projects/".concat(t.id));case 5:0==r.sent.data.status&&(e.$toast.success({title:"成功訊息",message:"刪除成功"}),e.projects=o().filter(e.projects,(function(e){return e.id!=t.id}))),r.next=13;break;case 10:r.prev=10,r.t0=r.catch(2),e.guestRedirectHome(r.t0);case 13:case"end":return r.stop()}}),r,null,[[2,10]])})))()},changePage:function(t){var e=o().cloneDeep(this.form);e.page=t;var r=this.getPureForm(e);this.$router.push({path:"/projects",query:r})}}};const p=(0,r(1900).Z)(f,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("section",{staticClass:"content-header"},[r("span",[t._v("專案管理 ")]),t._v(" "),r("button",{staticClass:"btn btn-light-green op-btn",on:{click:function(e){return t.showModal(null)}}},[r("i",{staticClass:"fa fa-plus",attrs:{"aria-hidden":"true"}}),t._v(" 創建專案\n        ")])]),t._v(" "),r("section",{staticClass:"content"},[r("div",{staticClass:"row"},[r("div",{staticClass:"col-xs-12"},[r("div",{staticClass:"box"},[r("div",{staticClass:"box-body"},[t.loading?t._e():r("div",[r("table",{staticClass:"table table-bordered table-hover break-table"},[r("thead",[t._m(0),t._v(" "),t._m(1),t._v(" "),r("tr",[r("td",{staticClass:"hide-td",attrs:{"data-title":"搜尋專案名稱"}},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.form.name,expression:"form.name"}],staticClass:"form-control",attrs:{placeholder:"搜尋"},domProps:{value:t.form.name},on:{keypress:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.changePage(1)},input:function(e){e.target.composing||t.$set(t.form,"name",e.target.value)}}})]),t._v(" "),r("td",{staticClass:"hide-td text-center",attrs:{"data-title":"操作"}})])]),t._v(" "),r("tbody",t._l(t.projects,(function(e){return r("tr",[r("td",{attrs:{"data-title":"專案名稱"}},[t._v(t._s(e.name))]),t._v(" "),r("td",{staticClass:"text-center",attrs:{"data-title":"操作"}},[r("button",{staticClass:"btn btn-light-green btn-sm",attrs:{title:"修改"},on:{click:function(r){return t.showModal(e.id)}}},[r("i",{staticClass:"glyphicon glyphicon-pencil"}),t._v("\n                                            修改\n                                        ")]),t._v(" "),r("button",{staticClass:"btn btn-delete btn-sm",attrs:{title:"刪除"},on:{click:function(r){return t.deleteRow(e)}}},[r("i",{staticClass:"glyphicon glyphicon-trash"}),t._v("\n                                            刪除\n                                        ")])])])})),0)]),t._v(" "),r("div",{staticClass:"text-center"},[r("pagination",{attrs:{size:"sm","direction-links":!1,"boundary-links":!0,"total-page":t.pagination.last_page,"max-size":10},on:{change:function(e){return t.changePage(t.pagination.current_page)}},model:{value:t.pagination.current_page,callback:function(e){t.$set(t.pagination,"current_page",e)},expression:"pagination.current_page"}})],1)]),t._v(" "),t.loading?r("clip-loader",{staticClass:"loading",attrs:{color:"gray",size:"30px"}}):t._e()],1)])])])]),t._v(" "),r("project-modal",{attrs:{pid:t.modal.id},on:{update:t.resetRow},model:{value:t.modal.show,callback:function(e){t.$set(t.modal,"show",e)},expression:"modal.show"}})],1)}),[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("tr",{staticClass:"table-head"},[r("th",{staticClass:"hide-td"},[t._v("專案名稱")]),t._v(" "),r("th",{staticClass:"hide-td text-center"},[t._v("操作")])])},function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("tr",[r("td",{staticStyle:{"line-height":"5px"},attrs:{colspan:"2"}},[r("span",{staticClass:"red font-bold",staticStyle:{"font-size":"8pt"}},[t._v("\n                                            搜尋欄位輸入後請按Enter鍵\n                                        ")])])])}],!1,null,null,null).exports},130:(t,e,r)=>{"use strict";r.d(e,{Z:()=>x});var n=r(6486),o=r.n(n),i=r(9755),a=r.n(i),s=r(9669),c=r.n(s),l=r(629);function u(t){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},u(t)}function d(){d=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function c(t,e,r,n){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new L(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return E()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var s=w(a,r);if(s){if(s===h)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=l(t,e,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===h)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}(t,r,a),i}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var h={};function f(){}function p(){}function m(){}var v={};s(v,o,(function(){return this}));var g=Object.getPrototypeOf,y=g&&g(g(S([])));y&&y!==e&&r.call(y,o)&&(v=y);var _=m.prototype=f.prototype=Object.create(v);function b(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function x(t,e){function n(o,i,a,s){var c=l(t[o],t,i);if("throw"!==c.type){var d=c.arg,h=d.value;return h&&"object"==u(h)&&r.call(h,"__await")?e.resolve(h.__await).then((function(t){n("next",t,a,s)}),(function(t){n("throw",t,a,s)})):e.resolve(h).then((function(t){d.value=t,a(d)}),(function(t){return n("throw",t,a,s)}))}s(c.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return h;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return h}var n=l(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,h;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,h):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,h)}function C(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function k(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function L(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(C,this),this.reset(!0)}function S(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:E}}function E(){return{value:void 0,done:!0}}return p.prototype=m,s(_,"constructor",m),s(m,"constructor",p),p.displayName=s(m,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,m):(t.__proto__=m,s(t,a,"GeneratorFunction")),t.prototype=Object.create(_),t},t.awrap=function(t){return{__await:t}},b(x.prototype),s(x.prototype,i,(function(){return this})),t.AsyncIterator=x,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new x(c(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},b(_),s(_,a,"Generator"),s(_,o,(function(){return this})),s(_,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=S,L.prototype={constructor:L,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(k),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=r.call(i,"catchLoc"),c=r.call(i,"finallyLoc");if(s&&c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,h):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),k(r),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;k(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:S(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),h}},t}function h(t,e,r,n,o,i,a){try{var s=t[i](a),c=s.value}catch(t){return void r(t)}s.done?e(c):Promise.resolve(c).then(n,o)}function f(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){h(i,n,o,a,s,"next",t)}function s(t){h(i,n,o,a,s,"throw",t)}a(void 0)}))}}function p(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function m(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}const v={name:"ProjectListSelect",props:{value:{type:[Array,Number]},disabled:{type:Boolean,default:!1},placeholder:{type:String,default:"請選擇"},multiple:{type:Boolean,default:!1},color:{type:String,default:"theme-blue"},defaultText:{type:String,default:"請選擇"},singleSelect2:{type:Boolean,default:!1},minNumForSearch:{type:Number,default:-1},tags:{type:Boolean,default:!1},isDeploy:{type:Number,default:0},enableConfirm:{type:Boolean,default:!1},isCollapseStyle:{type:Boolean,default:!1},regionMgmtId:{type:Number,default:null},editMode:{type:Boolean,default:!1},selectClass:{type:String,default:"form-control"}},computed:function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?p(Object(r),!0).forEach((function(e){m(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):p(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({hasNullOption:function(){return o().find(this.projects,(function(t){return null==t.name}))}},(0,l.rn)({userId:function(t){return t.user.user.id}})),watch:{value:function(t){var e=this;return f(d().mark((function r(){var n;return d().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(n=e,!e.multiple){r.next=5;break}e.$nextTick((function(){a()(n.$refs.select2).select2("data",o().map(t,(function(t){return t.id})))})),r.next=13;break;case 5:if(!e.singleSelect2){r.next=9;break}e.$nextTick((function(){a()(n.$refs.select2).select2("data",[t])})),r.next=13;break;case 9:return e.projectId=t,r.next=12,e.fetchData();case 12:t&&e.isCollapseStyle&&e.setActiveProject(t);case 13:e.isDeploy&&e.projects.length>0&&e.$emit("input",e.projects[0].id),(e.singleSelect2||e.multiple)&&e.refresh();case 15:case"end":return r.stop()}}),r)})))()},projectId:function(t,e){if(!this.enableConfirm||this.isRollback||confirm("確定要切換專案？"))this.isRollback=!1,this.$emit("input",t),this.$emit("change");else{this.isRollback=!0;var r=this;this.$nextTick((function(){r.projectId=e}))}},isDeploy:function(t){this.form.is_deploy=t}},data:function(){return{projects:[],projectId:this.value,form:{is_deploy:this.isDeploy,is_write:this.isDeploy?null:1,is_read:this.isDeploy?1:null},oldRegionMgmtId:null,isRollback:!1}},created:function(){!this.value||this.multiple||this.singleSelect2||(this.projects=[{id:this.value}])},mounted:function(){var t=this;return f(d().mark((function e(){var r;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.fetchData();case 2:t.value&&t.isCollapseStyle&&t.setActiveProject(t.value),t.multiple||t.singleSelect2?(t.init(),t.setSelect2Val()):t.editMode&&!t.multiple&&(r=t,window.Echo.private("projects.".concat(t.value)).listen("RegionMgmtUpdated",(function(t){var e=t.regionMgmt,n=o().findIndex(r.projects,(function(t){return t.id==e.project_id}));if(-1!=n){var i=o().findIndex(r.projects[n].region_mgmts,(function(t){return t.id==e.id}));-1!=i&&r.projects[n].region_mgmts.splice(i,1,e)}})));case 4:case"end":return e.stop()}}),e)})))()},destroyed:function(){this.editMode&&!this.multiple&&(window.Echo.leave("regionMgmts.presence.".concat(this.regionMgmtId)),window.Echo.leave("projects.".concat(this.value)))},methods:{init:function(){var t=a()(this.$refs.select2),e=this;t.select2({minimumResultsForSearch:e.minNumForSearch,closeOnSelect:!e.multiple,tags:e.tags,language:{noResults:function(){return"查無資料"}}}),t.on("select2:select",(function(t){e.setVal()})),t.on("select2:unselect",(function(t){e.setVal()}))},fetchData:function(){var t=this;return f(d().mark((function e(){var r,n,i;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.loading=!0,e.prev=1,e.next=4,c().get("/api/projects",{params:t.form});case 4:0==(r=(r=e.sent).data).status&&(n=r.data,t.isCollapseStyle?(i=t,t.projects=o().map(n.projects,(function(t){var e=o().find(t.region_mgmts,(function(t){return t.id==i.regionMgmtId}));return t.isCollapsed=!e,t}))):t.projects=n.projects,t.isDeploy&&t.projects.length>0&&t.$emit("input",t.projects[0].id),t.editMode&&!t.multiple&&t.regionMgmtId&&("/regionMgmts"==t.$route.path&&window.Echo.join("regionMgmts.presence.".concat(t.regionMgmtId)),t.oldRegionMgmtId=t.regionMgmtId)),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),t.guestRedirectHome(e.t0);case 12:case"end":return e.stop()}}),e,null,[[1,9]])})))()},setSelect2Val:function(){var t=this;this.$nextTick((function(){t.multiple&&!t.singleSelect2?a()(t.$refs.select2).val(o().map(t.value,(function(t){return t.id}))):a()(t.$refs.select2).val([t.value]),a()(t.$refs.select2).trigger("change")}))},setVal:function(){var t=a()(this.$refs.select2).select2("data");this.multiple?this.$emit("input",o().map(t,(function(t){return{id:t.id}}))):0!=t.length?this.$emit("input",t[0].id):this.$emit("input",null)},refresh:function(){a()(this.$refs.select2).val(null).trigger("change"),a()(this.$refs.select2).select2("destroy"),this.init(),this.setSelect2Val()},selectRegion:function(t,e){this.$emit("input",this.projects[t].id),this.$emit("update:regionMgmtId",this.projects[t].region_mgmts[e].id)},setActiveProject:function(t){var e=o().findIndex(this.projects,(function(e){return e.id==t}));-1!=e&&(this.projects[e].isCollapsed=!1)}}};var g=r(3379),y=r.n(g),_=r(819),b={insert:"head",singleton:!1};y()(_.Z,b);_.Z.locals;const x=(0,r(1900).Z)(v,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[t.isCollapseStyle?r("div",{staticClass:"panel-group",attrs:{id:"accordion","aria-multiselectable":"true"}},[t._l(t.projects,(function(e,n){return[r("div",{staticClass:"panel panel-default"},[r("div",{staticClass:"panel-heading",attrs:{id:"heading"+n}},[r("a",{staticClass:"accordion-toggle",class:{collapsed:e.isCollapsed},attrs:{"data-toggle":"collapse","data-parent":"#accordion",href:"#collapse"+n,"aria-expanded":!e.isCollapsed,"aria-controls":"collapse"+n}},[r("div",[r("label",{staticClass:"label label-project"},[t._v("專案")]),t._v(" "+t._s(e.name)+"\n                        ")])]),t._v(" "),r("div",{staticClass:"clearfix"})]),t._v(" "),r("div",{staticClass:"panel-collapse",class:{collapse:e.isCollapsed,"collapse in":!e.isCollapsed},attrs:{id:"collapse"+n,"aria-expanded":!e.isCollapsed,"aria-labelledby":"heading"+n}},[r("div",{staticClass:"panel-body"},t._l(e.region_mgmts,(function(o,i){return e.region_mgmts.length>0?r("div",{staticClass:"col-md-12 region-item",class:{"selected-region":o.id==t.regionMgmtId,disabled:o.edit_user_id&&o.edit_user_id!=t.userId},style:i+1!=e.region_mgmts.length?"border-bottom: 1px solid gray;":"",on:{click:function(e){return t.selectRegion(n,i)}}},[r("label",{staticClass:"label label-region"},[t._v("區域")]),t._v(" \n                            "),t.editMode&&o.edit_user?[t._v("\n                                "+t._s(o.region)+"("+t._s(o.edit_user.account)+"正在使用中)\n                            ")]:[t._v("\n                                "+t._s(o.region)+"\n                            ")]],2):t._e()})),0)])])]}))],2):t.multiple||t.singleSelect2?r("div",{class:[t.color]},[r("select",{ref:"select2",staticClass:"form-control select2",staticStyle:{width:"100%"},attrs:{multiple:t.multiple,"data-placeholder":t.placeholder,disabled:t.disabled}},t._l(t.projects,(function(e){return r("option",{domProps:{value:e.id}},[t._v("\n                "+t._s(e.name)+"\n            ")])})),0)]):r("select",{directives:[{name:"model",rawName:"v-model",value:t.projectId,expression:"projectId"}],class:t.selectClass,attrs:{disabled:t.disabled},on:{change:function(e){var r=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.projectId=e.target.multiple?r:r[0]}}},[t.hasNullOption?t._e():r("option",{domProps:{value:null}},[t._v(t._s(t.defaultText))]),t._v(" "),t._l(t.projects,(function(e){return r("option",{domProps:{value:e.id}},[t._v("\n            "+t._s(e.name)+"\n        ")])}))],2)])}),[],!1,null,"5740c558",null).exports},7301:(t,e,r)=>{"use strict";r.d(e,{Z:()=>p});var n=r(9669),o=r.n(n);function i(t){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i(t)}function a(){a=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",s=n.asyncIterator||"@@asyncIterator",c=n.toStringTag||"@@toStringTag";function l(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,r){return t[e]=r}}function u(t,e,r,n){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new L(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return E()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var s=w(a,r);if(s){if(s===h)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=d(t,e,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===h)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}(t,r,a),i}function d(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var h={};function f(){}function p(){}function m(){}var v={};l(v,o,(function(){return this}));var g=Object.getPrototypeOf,y=g&&g(g(S([])));y&&y!==e&&r.call(y,o)&&(v=y);var _=m.prototype=f.prototype=Object.create(v);function b(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function x(t,e){function n(o,a,s,c){var l=d(t[o],t,a);if("throw"!==l.type){var u=l.arg,h=u.value;return h&&"object"==i(h)&&r.call(h,"__await")?e.resolve(h.__await).then((function(t){n("next",t,s,c)}),(function(t){n("throw",t,s,c)})):e.resolve(h).then((function(t){u.value=t,s(u)}),(function(t){return n("throw",t,s,c)}))}c(l.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return h;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return h}var n=d(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,h;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,h):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,h)}function C(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function k(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function L(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(C,this),this.reset(!0)}function S(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:E}}function E(){return{value:void 0,done:!0}}return p.prototype=m,l(_,"constructor",m),l(m,"constructor",p),p.displayName=l(m,c,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,m):(t.__proto__=m,l(t,c,"GeneratorFunction")),t.prototype=Object.create(_),t},t.awrap=function(t){return{__await:t}},b(x.prototype),l(x.prototype,s,(function(){return this})),t.AsyncIterator=x,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new x(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},b(_),l(_,c,"Generator"),l(_,o,(function(){return this})),l(_,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=S,L.prototype={constructor:L,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(k),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=r.call(i,"catchLoc"),c=r.call(i,"finallyLoc");if(s&&c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,h):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),k(r),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;k(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:S(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),h}},t}function s(t,e,r,n,o,i,a){try{var s=t[i](a),c=s.value}catch(t){return void r(t)}s.done?e(c):Promise.resolve(c).then(n,o)}function c(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){s(i,n,o,a,c,"next",t)}function c(t){s(i,n,o,a,c,"throw",t)}a(void 0)}))}}const l={name:"ProjectModal",$_veeValidate:{validator:"new"},components:{ClipLoader:r(9038).Z},props:{value:{type:Boolean,default:!1},pid:Number},watch:{value:function(t){this.showModal=t}},data:function(){return{loading:!0,sending:!1,showModal:this.value,form:{},idDuplicate:!1}},created:function(){this.resetForm()},methods:{fetchData:function(){var t=this;return c(a().mark((function e(){var r,n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,o().get("/api/projects/".concat(t.pid));case 3:0==(r=(r=e.sent).data).status&&(n=r.data,t.form=n.project),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),t.guestRedirectHome(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))()},onShowModal:function(){var t=this;return c(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.resetForm(),!t.pid){e.next=5;break}return t.loading=!0,e.next=5,t.fetchData();case 5:t.loading=!1;case 6:case"end":return e.stop()}}),e)})))()},onHideModal:function(){this.resetForm(),this.$emit("input",!1)},submit:function(){var t=this;return c(a().mark((function e(){var r,n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.validate();case 3:if(e.sent){e.next=6;break}return e.abrupt("return");case 6:if(t.sending=!0,r=null,t.pid){e.next=14;break}return e.next=11,o().post("/api/projects",t.form);case 11:r=e.sent,e.next=17;break;case 14:return e.next=16,o().patch("/api/projects/".concat(t.pid),t.form);case 16:r=e.sent;case 17:0==(r=r.data).status?(n=r.data,t.form=n.project,t.$toast.success({title:"成功訊息",message:"".concat(t.pid?"更新":"創建","成功")}),t.$emit("update",t.form),t.showModal=!1):-7==r.status&&(t.idDuplicate=!0,t.scrollTo("project_name")),e.next=24;break;case 21:e.prev=21,e.t0=e.catch(0),t.guestRedirectHome(e.t0);case 24:t.sending=!1;case 25:case"end":return e.stop()}}),e,null,[[0,21]])})))()},resetForm:function(){this.form={name:null},this.idDuplicate=!1,this.resetFormValidate()}}};var u=r(3379),d=r.n(u),h=r(4080),f={insert:"head",singleton:!1};d()(h.Z,f);h.Z.locals;const p=(0,r(1900).Z)(l,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("modal",{attrs:{footer:!1,backdrop:!1,"append-to-body":!0,keyboard:!1},on:{show:t.onShowModal,hide:t.onHideModal},model:{value:t.showModal,callback:function(e){t.showModal=e},expression:"showModal"}},[t.pid?r("div",{attrs:{slot:"title"},slot:"title"},[t._v("更新專案")]):r("div",{attrs:{slot:"title"},slot:"title"},[t._v("創建專案")]),t._v(" "),r("div",{attrs:{slot:"default"},slot:"default"},[t.loading?r("clip-loader",{staticClass:"loading",attrs:{color:"gray",size:"30px"}}):r("form",{staticClass:"form-horizontal",attrs:{novalidate:""},on:{submit:function(e){return e.preventDefault(),t.submit.apply(null,arguments)}}},[r("div",{staticClass:"form-group"},[r("label",{staticClass:"col-md-3 control-label"},[t._v("專案名稱"),r("span",{staticClass:"is-danger"},[t._v(" *")])]),t._v(" "),r("div",{staticClass:"col-md-9"},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.form.name,expression:"form.name"},{name:"validate",rawName:"v-validate",value:"required|max:100",expression:"'required|max:100'"}],staticClass:"form-control",attrs:{name:"project_name",placeholder:"請填寫專案名稱",disabled:t.pid},domProps:{value:t.form.name},on:{input:[function(e){e.target.composing||t.$set(t.form,"name",e.target.value)},function(e){t.idDuplicate=!1}]}}),t._v(" "),r("span",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("project_name:required"),expression:"errors.has('project_name:required')"}],staticClass:"help is-danger"},[t._v("請填寫專案名稱")]),t._v(" "),r("span",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("project_name:max"),expression:"errors.has('project_name:max')"}],staticClass:"help is-danger"},[t._v("長度不得超過100字元")]),t._v(" "),r("span",{directives:[{name:"show",rawName:"v-show",value:t.idDuplicate,expression:"idDuplicate"}],staticClass:"help is-danger"},[t._v("該專案名稱已存在！")])])]),t._v(" "),r("div",{staticClass:"text-right"},[r("button",{staticClass:"btn btn-light-green",attrs:{disabled:t.sending}},[t._v("送出")]),t._v(" "),r("button",{staticClass:"btn btn-default",attrs:{type:"button"},on:{click:function(e){t.showModal=!1}}},[t._v("取消")])])])],1)])}),[],!1,null,"2ef8f00c",null).exports},3486:(t,e,r)=>{"use strict";r.d(e,{Z:()=>m});var n=r(9669),o=r.n(n),i=r(130),a=r(7293);function s(t){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},s(t)}function c(){c=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function l(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,r){return t[e]=r}}function u(t,e,r,n){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new L(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return E()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var s=w(a,r);if(s){if(s===h)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=d(t,e,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===h)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}(t,r,a),i}function d(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var h={};function f(){}function p(){}function m(){}var v={};l(v,o,(function(){return this}));var g=Object.getPrototypeOf,y=g&&g(g(S([])));y&&y!==e&&r.call(y,o)&&(v=y);var _=m.prototype=f.prototype=Object.create(v);function b(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function x(t,e){function n(o,i,a,c){var l=d(t[o],t,i);if("throw"!==l.type){var u=l.arg,h=u.value;return h&&"object"==s(h)&&r.call(h,"__await")?e.resolve(h.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(h).then((function(t){u.value=t,a(u)}),(function(t){return n("throw",t,a,c)}))}c(l.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return h;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return h}var n=d(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,h;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,h):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,h)}function C(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function k(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function L(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(C,this),this.reset(!0)}function S(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:E}}function E(){return{value:void 0,done:!0}}return p.prototype=m,l(_,"constructor",m),l(m,"constructor",p),p.displayName=l(m,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,m):(t.__proto__=m,l(t,a,"GeneratorFunction")),t.prototype=Object.create(_),t},t.awrap=function(t){return{__await:t}},b(x.prototype),l(x.prototype,i,(function(){return this})),t.AsyncIterator=x,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new x(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},b(_),l(_,a,"Generator"),l(_,o,(function(){return this})),l(_,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=S,L.prototype={constructor:L,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(k),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=r.call(i,"catchLoc"),c=r.call(i,"finallyLoc");if(s&&c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,h):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),k(r),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;k(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:S(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),h}},t}function l(t,e,r,n,o,i,a){try{var s=t[i](a),c=s.value}catch(t){return void r(t)}s.done?e(c):Promise.resolve(c).then(n,o)}const u={name:"FloorRegionListPage",components:{FloorRegionView:r(3381).Z,FloorRegionMgmtListCollapseSelect:a.Z,ProjectListSelect:i.Z},data:function(){return{loading:!1,regionMgmtId:this.$route.params.id?parseInt(this.$route.params.id):1,showRegion:!1,form:{}}},created:function(){this.fetchData()},methods:{fetchData:function(){var t,e=this;return(t=c().mark((function t(){var r,n;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.loading=!0,t.prev=1,t.next=4,o().get("/api/regionMgmts/".concat(e.regionMgmtId));case 4:0==(r=(r=t.sent).data).status&&(n=r.data,e.form=n.regionMgmt),t.next=13;break;case 9:return t.prev=9,t.t0=t.catch(1),t.next=13,e.guestRedirectHome(t.t0);case 13:e.loading=!1;case 14:case"end":return t.stop()}}),t,null,[[1,9]])})),function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){l(i,n,o,a,s,"next",t)}function s(t){l(i,n,o,a,s,"throw",t)}a(void 0)}))})()},search:function(){this.$router.push({path:"/floorRegionMgmts/".concat(this.form.id)})}}};var d=r(3379),h=r.n(d),f=r(8035),p={insert:"head",singleton:!1};h()(f.Z,p);f.Z.locals;const m=(0,r(1900).Z)(u,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("floor-region-view",{attrs:{"region-mgmt-id":t.regionMgmtId}}),t._v(" "),r("div",{staticClass:"container-right",class:t.showRegion?"":"container-right-collapsed",style:t.showRegion?"z-index: 2":"z-index: 1"},[r("div",{staticClass:"region-tag",class:t.showRegion?"":"burner-collapsed",on:{click:function(e){t.showRegion=!t.showRegion}}},[t._v("\n            "+t._s(t.showRegion?" >":" <")+"區域名稱\n        ")]),t._v(" "),r("div",{staticClass:"col-md-12 project-list"},[r("div",{staticClass:"text-center project-list-title"},[t._v("專案區域列表")]),t._v(" "),r("project-list-select",{attrs:{"is-deploy":1,disabled:!!t.form.project_id},model:{value:t.form.project_id,callback:function(e){t.$set(t.form,"project_id",e)},expression:"form.project_id"}}),t._v(" "),r("div",{staticClass:"region-floor-room-collapse-select"},[r("floor-region-mgmt-list-collapse-select",{attrs:{"project-id":t.form.project_id,"is-deploy":1},on:{"update:projectId":function(e){return t.$set(t.form,"project_id",e)},"update:project-id":function(e){return t.$set(t.form,"project_id",e)},change:t.search},model:{value:t.form.id,callback:function(e){t.$set(t.form,"id",e)},expression:"form.id"}})],1)],1)])],1)}),[],!1,null,"d633d5b4",null).exports},7293:(t,e,r)=>{"use strict";r.d(e,{Z:()=>p});var n=r(9669),o=r.n(n);function i(t){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i(t)}function a(){a=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",s=n.asyncIterator||"@@asyncIterator",c=n.toStringTag||"@@toStringTag";function l(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,r){return t[e]=r}}function u(t,e,r,n){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new L(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return E()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var s=w(a,r);if(s){if(s===h)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=d(t,e,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===h)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}(t,r,a),i}function d(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var h={};function f(){}function p(){}function m(){}var v={};l(v,o,(function(){return this}));var g=Object.getPrototypeOf,y=g&&g(g(S([])));y&&y!==e&&r.call(y,o)&&(v=y);var _=m.prototype=f.prototype=Object.create(v);function b(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function x(t,e){function n(o,a,s,c){var l=d(t[o],t,a);if("throw"!==l.type){var u=l.arg,h=u.value;return h&&"object"==i(h)&&r.call(h,"__await")?e.resolve(h.__await).then((function(t){n("next",t,s,c)}),(function(t){n("throw",t,s,c)})):e.resolve(h).then((function(t){u.value=t,s(u)}),(function(t){return n("throw",t,s,c)}))}c(l.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return h;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return h}var n=d(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,h;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,h):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,h)}function C(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function k(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function L(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(C,this),this.reset(!0)}function S(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:E}}function E(){return{value:void 0,done:!0}}return p.prototype=m,l(_,"constructor",m),l(m,"constructor",p),p.displayName=l(m,c,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,m):(t.__proto__=m,l(t,c,"GeneratorFunction")),t.prototype=Object.create(_),t},t.awrap=function(t){return{__await:t}},b(x.prototype),l(x.prototype,s,(function(){return this})),t.AsyncIterator=x,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new x(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},b(_),l(_,c,"Generator"),l(_,o,(function(){return this})),l(_,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=S,L.prototype={constructor:L,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(k),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=r.call(i,"catchLoc"),c=r.call(i,"finallyLoc");if(s&&c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,h):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),k(r),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;k(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:S(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),h}},t}function s(t,e,r,n,o,i,a){try{var s=t[i](a),c=s.value}catch(t){return void r(t)}s.done?e(c):Promise.resolve(c).then(n,o)}function c(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){s(i,n,o,a,c,"next",t)}function c(t){s(i,n,o,a,c,"throw",t)}a(void 0)}))}}const l={name:"FloorRegionMgmtListCollapseSelect",props:{value:{type:Number,default:null},projectId:{type:Number,default:null},isSelectFirst:{type:Boolean,default:!1}},watch:{value:function(){this.regionMgmtId=this.value}},data:function(){return{regionMgmts:[],regionMgmtId:this.value}},created:function(){this.value&&(this.regionMgmts=[{id:this.value}])},mounted:function(){var t=this;return c(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.fetchData();case 2:case"end":return e.stop()}}),e)})))()},methods:{fetchData:function(){var t=this;return c(a().mark((function e(){var r,n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.loading=!0,e.prev=1,e.next=4,o().get("/api/regionMgmts",{params:{project_id:t.projectId,is_read:1,is_floor:1}});case 4:0==(r=(r=e.sent).data).status&&(n=r.data,t.regionMgmts=n.regionMgmts,t.isSelectFirst&&t.regionMgmts.length>0&&(t.regionMgmtId=t.regionMgmts[0].id,t.$emit("input",t.regionMgmts[0].id))),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),t.guestRedirectHome(e.t0);case 12:case"end":return e.stop()}}),e,null,[[1,9]])})))()},selectRegion:function(t,e){e!=this.regionMgmtId&&(this.$emit("input",this.regionMgmts[t].id),this.$emit("update:projectId",this.regionMgmts[t].project_id),this.$emit("change"))}}};var u=r(3379),d=r.n(u),h=r(2848),f={insert:"head",singleton:!1};d()(h.Z,f);h.Z.locals;const p=(0,r(1900).Z)(l,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",t._l(t.regionMgmts,(function(e,n){return r("div",{staticClass:"col-md-12 region-item",class:{"selected-region":e.id==t.regionMgmtId},style:n+1!=t.regionMgmts.length?"border-bottom: 1px solid gray;":"",on:{click:function(r){return t.selectRegion(n,e.id)}}},[r("label",{staticClass:"label label-room"},[t._v("樓層")]),t._v(" \n        "+t._s(e.region)+"\n    ")])})),0)}),[],!1,null,"870c6718",null).exports},3381:(t,e,r)=>{"use strict";r.d(e,{Z:()=>y});var n=r(6486),o=r.n(n),i=r(9669),a=r.n(i),s=r(629);function c(t){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},c(t)}function l(){l=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function u(t,e,r,n){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new L(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return E()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var s=w(a,r);if(s){if(s===h)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=d(t,e,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===h)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}(t,r,a),i}function d(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var h={};function f(){}function p(){}function m(){}var v={};s(v,o,(function(){return this}));var g=Object.getPrototypeOf,y=g&&g(g(S([])));y&&y!==e&&r.call(y,o)&&(v=y);var _=m.prototype=f.prototype=Object.create(v);function b(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function x(t,e){function n(o,i,a,s){var l=d(t[o],t,i);if("throw"!==l.type){var u=l.arg,h=u.value;return h&&"object"==c(h)&&r.call(h,"__await")?e.resolve(h.__await).then((function(t){n("next",t,a,s)}),(function(t){n("throw",t,a,s)})):e.resolve(h).then((function(t){u.value=t,a(u)}),(function(t){return n("throw",t,a,s)}))}s(l.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return h;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return h}var n=d(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,h;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,h):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,h)}function C(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function k(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function L(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(C,this),this.reset(!0)}function S(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:E}}function E(){return{value:void 0,done:!0}}return p.prototype=m,s(_,"constructor",m),s(m,"constructor",p),p.displayName=s(m,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,m):(t.__proto__=m,s(t,a,"GeneratorFunction")),t.prototype=Object.create(_),t},t.awrap=function(t){return{__await:t}},b(x.prototype),s(x.prototype,i,(function(){return this})),t.AsyncIterator=x,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new x(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},b(_),s(_,a,"Generator"),s(_,o,(function(){return this})),s(_,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=S,L.prototype={constructor:L,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(k),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=r.call(i,"catchLoc"),c=r.call(i,"finallyLoc");if(s&&c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,h):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),k(r),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;k(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:S(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),h}},t}function u(t,e,r,n,o,i,a){try{var s=t[i](a),c=s.value}catch(t){return void r(t)}s.done?e(c):Promise.resolve(c).then(n,o)}function d(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function h(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}const f={name:"FloorRegionView",components:{RoomEnvironmentView:r(4790).Z},computed:function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?d(Object(r),!0).forEach((function(e){h(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):d(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({},(0,s.Se)({isLogin:"user/isLogin"})),props:{regionMgmtId:{type:Number,default:1}},data:function(){return{loading:!0,project:{region_mgmts:[]},regionMgmt:{}}},mounted:function(){this.fetchData(),this.slider(),this.subScribe()},beforeDestroy:function(){this.unSubscribe()},methods:{fetchData:function(){var t,e=this;return(t=l().mark((function t(){var r,n;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.loading=!0,t.prev=1,t.next=4,a().get("/api/regionMgmts/".concat(e.regionMgmtId));case 4:0==(r=(r=t.sent).data).status&&(n=r.data,e.regionMgmt=n.regionMgmt),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),e.guestRedirectHome(t.t0);case 12:e.loading=!1;case 13:case"end":return t.stop()}}),t,null,[[1,9]])})),function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){u(i,n,o,a,s,"next",t)}function s(t){u(i,n,o,a,s,"throw",t)}a(void 0)}))})()},slider:function(){var t,e,r,n,o=!1,i=document.getElementById("baseMap");i&&(i.addEventListener("mousedown",(function(a){"vertex-point"==a.target.className||"edge-point"==a.target.className||"ui-widget-content ui-draggable ui-draggable-handle"==a.target.className||a.target.classList.contains("disable-drag")||(o=!0,i.classList.add("active"),t=a.pageX,e=a.pageY-i.offsetTop,r=i.scrollLeft,n=i.scrollTop)})),i.addEventListener("mouseleave",(function(){o=!1,i.classList.remove("active")})),i.addEventListener("mouseup",(function(){o=!1,i.classList.remove("active")})),i.addEventListener("mousemove",(function(a){if(a.preventDefault(),o){var s=a.pageX-i.offsetLeft-t;i.scrollLeft=r-s;var c=a.pageY-i.offsetTop-e;i.scrollTop=n-c}})))},toRegionMgmt:function(t){this.isLogin?this.$router.push("/regionMgmts/".concat(t)):this.$emit("needLogin",t)},subScribe:function(){var t=this;window.Echo.private("microOrganisms").listen("MicroOrganismCreated",(function(e){var r=e.microOrganism,n=e.microOrganism.region_mgmt;if(r.is_serious){var i=o().findIndex(t.project.region_mgmts,["id",n.id]);-1!=i&&t.$set(t.project.region_mgmts[i],"micro_organism",r)}})).listen("MicroOrganismUpdated",(function(e){var r=e.microOrganism,n=e.microOrganism.region_mgmt;if(r.is_serious){var i=o().findIndex(t.project.region_mgmts,["id",n.id]);-1!=i&&(t.project.region_mgmts[i].micro_organism=r)}})).listen("MicroOrganismDeleted",(function(e){var r=e.microOrganism,n=e.microOrganism.region_mgmt,i=o().findIndex(t.project.region_mgmts,["id",n.id]);-1!=i&&r.is_serious&&r.id==t.project.region_mgmts[i].micro_organism.id&&(t.project.region_mgmts[i].micro_organism=null)}))},unSubscribe:function(){window.Echo.leave("microOrganisms")}}};var p=r(3379),m=r.n(p),v=r(6070),g={insert:"head",singleton:!1};m()(v.Z,g);v.Z.locals;const y=(0,r(1900).Z)(f,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"project"},[r("div",{staticClass:"base-map",style:"height: "+(t.isLogin?"calc(100vh - 60px)":"calc(100vh - 66px)"),attrs:{id:"baseMap"}},[t.regionMgmt&&t.regionMgmt.project?r("img",{attrs:{src:"/images/"+t.regionMgmt.project.name+"/cad_"+t.regionMgmt.region+".png",alt:"",draggable:"false"}}):t._e(),t._v(" "),t._l(t.regionMgmt.room_region_mgmts,(function(e,n){return[e.room_environment?[r("RoomEnvironmentView",{attrs:{"x-px":e.x_px,"y-px":e.y_px,"room-name":e.room_environment.room_name,"micro-organism":e.micro_organism},on:{click:function(r){return t.toRegionMgmt(e.id)}},model:{value:t.regionMgmt.room_region_mgmts[n].room_environment,callback:function(e){t.$set(t.regionMgmt.room_region_mgmts[n],"room_environment",e)},expression:"regionMgmt.room_region_mgmts[idx].room_environment"}})]:t._e()]}))],2)])}),[],!1,null,"c2e6d646",null).exports},8472:(t,e,r)=>{"use strict";r.d(e,{Z:()=>Sr});var n=r(9669),o=r.n(n),i=r(6486),a=r.n(i),s=r(8495),c=r(381),l=r.n(c),u=r(3268),d=r.n(u),h=r(9038),f=r(2948);const p={name:"UploadButton",components:{FileUpload:r.n(f)()},props:{value:{type:Object},data:{type:Object},uploadUrl:{type:String},extensions:{type:Array,default:function(){return["xls","xlsx"]}},accept:{type:String,default:"application/vnd.ms-excel,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"},disabled:{type:Boolean,default:!1}},computed:{csrfToken:function(){return o().defaults.headers.common["X-CSRF-TOKEN"]},getUniqueId:function(){return"_"+Math.random().toString(36).substr(2,9)}},data:function(){return{files:[]}},methods:{inputFile:function(t,e){t&&e&&(this.uploadUrl||(t?(this.$emit("input",t),this.$emit("complete",t.response)):this.$emit("input",null)),t.progress!==e.progress&&this.$emit("progress",t.progress),t.success!==e.success&&(this.$emit("complete",t.response),this.$emit("input",t))),Boolean(t)===Boolean(e)&&e.error===t.error||this.$refs.upload.active||(this.$emit("active"),this.$refs.upload.active=!0)},inputFilter:function(t,e,r){if(t&&!e&&this.extensions.length>0){var n=this.extensions.join("|");if(!new RegExp(".(".concat(n,")$"),"i").test(t.name))return this.$emit("extWarn",t.name),r()}}}};var m=r(1900);const v=(0,m.Z)(p,(function(){var t=this,e=t.$createElement;return(t._self._c||e)("file-upload",{ref:"upload",attrs:{"input-id":t.getUniqueId,"post-action":t.uploadUrl,headers:{"X-CSRF-TOKEN":t.csrfToken},data:t.data,accept:t.accept,disabled:t.disabled},on:{"input-file":t.inputFile,"input-filter":t.inputFilter},model:{value:t.files,callback:function(e){t.files=e},expression:"files"}},[t._t("default")],2)}),[],!1,null,null,null).exports;var g=r(9014),y=r(130);function _(t){return _="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_(t)}function b(){b=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function c(t,e,r,n){var o=e&&e.prototype instanceof d?e:d,i=Object.create(o.prototype),a=new L(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return E()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var s=w(a,r);if(s){if(s===u)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=l(t,e,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===u)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}(t,r,a),i}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var u={};function d(){}function h(){}function f(){}var p={};s(p,o,(function(){return this}));var m=Object.getPrototypeOf,v=m&&m(m(S([])));v&&v!==e&&r.call(v,o)&&(p=v);var g=f.prototype=d.prototype=Object.create(p);function y(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function x(t,e){function n(o,i,a,s){var c=l(t[o],t,i);if("throw"!==c.type){var u=c.arg,d=u.value;return d&&"object"==_(d)&&r.call(d,"__await")?e.resolve(d.__await).then((function(t){n("next",t,a,s)}),(function(t){n("throw",t,a,s)})):e.resolve(d).then((function(t){u.value=t,a(u)}),(function(t){return n("throw",t,a,s)}))}s(c.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return u;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var n=l(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,u;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,u):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,u)}function C(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function k(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function L(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(C,this),this.reset(!0)}function S(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:E}}function E(){return{value:void 0,done:!0}}return h.prototype=f,s(g,"constructor",f),s(f,"constructor",h),h.displayName=s(f,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===h||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,f):(t.__proto__=f,s(t,a,"GeneratorFunction")),t.prototype=Object.create(g),t},t.awrap=function(t){return{__await:t}},y(x.prototype),s(x.prototype,i,(function(){return this})),t.AsyncIterator=x,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new x(c(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},y(g),s(g,a,"Generator"),s(g,o,(function(){return this})),s(g,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=S,L.prototype={constructor:L,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(k),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=r.call(i,"catchLoc"),c=r.call(i,"finallyLoc");if(s&&c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,u):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),u},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),k(r),u}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;k(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:S(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),u}},t}function x(t,e,r,n,o,i,a){try{var s=t[i](a),c=s.value}catch(t){return void r(t)}s.done?e(c):Promise.resolve(c).then(n,o)}function w(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){x(i,n,o,a,s,"next",t)}function s(t){x(i,n,o,a,s,"throw",t)}a(void 0)}))}}const C={name:"RegionMgmtModal",$_veeValidate:{validator:"new"},components:{ClipLoader:h.Z,UploadButton:v,RegionMgmtListSelect:g.Z,ProjectListSelect:y.Z},props:{value:{type:Boolean,default:!1},rid:{type:Number,default:null}},computed:{widthRatio:function(){return this.form.img_width&&this.oldForm.img_width?this.form.img_width/this.oldForm.img_width:0},heightRatio:function(){return this.form.img_height&&this.oldForm.img_height?this.form.img_height/this.oldForm.img_height:0},reverseWidthRatio:function(){return this.form.img_width&&this.oldForm.img_width?this.oldForm.img_width/this.form.img_width:0},reverseHeightRatio:function(){return this.form.img_height&&this.oldForm.img_height?this.oldForm.img_height/this.form.img_height:0},mmRatio:function(){return this.form.mm&&this.oldForm.mm?this.form.mm/this.oldForm.mm:0},reverseMmRatio:function(){return this.form.mm&&this.oldForm.mm?this.oldForm.mm/this.form.mm:0},cadAspectRatio:function(){return this.oldForm.cad_width&&this.oldForm.cad_height?this.oldForm.cad_width/this.oldForm.cad_height:null}},watch:{value:function(t){this.showModal=t},editMode:function(t){switch(t){case 1:this.form.floor_region_mgmt_id=null;break;case 2:this.form.floors=null}this.resetFormValidate()}},data:function(){return{loading:!0,sending:!1,showModal:this.value,form:{img_width:0,img_height:0,resolution:0,origin_x:0,origin_y:0,file:{file:null},project_id:null},oldForm:{img_width:0,img_height:0,resolution:0,origin_x:0,origin_y:0},regionDuplicate:!1,dimensionErr:!1,progress:0,editMode:1}},created:function(){this.resetForm()},methods:{fetchData:function(){var t=this;return w(b().mark((function e(){var r,n,i;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,o().get("/api/regionMgmts/".concat(t.rid));case 3:0==(r=(r=e.sent).data).status&&(n=r.data,i=n.regionMgmt,t.form=i,t.oldForm=a().cloneDeep(t.form),void 0!==n.yaml&&(t.form.yaml=n.yaml),t.editMode=t.form.floor_region_mgmt_id?2:1),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),t.guestRedirectHome(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))()},onShowModal:function(){var t=this;return w(b().mark((function e(){return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.resetForm(),!t.rid){e.next=5;break}return t.loading=!0,e.next=5,t.fetchData();case 5:t.loading=!1;case 6:case"end":return e.stop()}}),e)})))()},onHideModal:function(){this.resetForm(),this.$emit("input",!1)},submit:function(){var t=this;return w(b().mark((function e(){var r,n,i;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.validate();case 3:if(e.sent){e.next=6;break}return e.abrupt("return");case 6:return t.sending=!0,r=new FormData,t.rid&&r.append("id",t.form.id),r.append("project_id",t.form.project_id),r.append("region",t.form.region),t.form.cleanliness_grade&&r.append("cleanliness_grade",t.form.cleanliness_grade),r.append("room_environment_room_name",t.form.room_environment.room_name),t.form.floors&&r.append("floors",t.form.floors),t.form.floor_region_mgmt_id&&r.append("floor_region_mgmt_id",t.form.floor_region_mgmt_id),r.append("mm",t.form.mm),r.append("img_width",t.form.img_width),r.append("img_height",t.form.img_height),r.append("origin_x",t.form.origin_x),r.append("origin_y",t.form.origin_y),r.append("resolution",t.form.resolution),r.append("cad_width",t.form.cad_width),r.append("cad_height",t.form.cad_height),t.form.x_px&&r.append("x_px",t.form.x_px),t.form.y_px&&r.append("y_px",t.form.y_px),t.form.file&&r.append("file",t.form.file.file),t.form.upload_yaml&&r.append("yaml",t.form.upload_yaml.file),t.form.upload_cad&&r.append("cad",t.form.upload_cad.file),e.next=30,o().post("/api/regionMgmts",r,{headers:{"Content-Type":"multipart/form-data"}});case 30:0==(n=(n=e.sent).data).status?(i=n.data,t.form=i.regionMgmt,t.$toast.success({title:"成功訊息",message:"".concat(t.rid?"更新":"新增","成功")}),t.$emit("input",!1),t.$emit("update",t.form)):-7==n.status?(t.regionDuplicate=!0,t.scrollTo("region")):-8==n.status&&(t.dimensionErr=!0,t.form.file?t.scrollTo("file"):t.form.upload_cad&&t.scrollTo("upload_cad")),e.next=38;break;case 35:e.prev=35,e.t0=e.catch(0),t.guestRedirectHome(e.t0);case 38:t.sending=!1;case 39:case"end":return e.stop()}}),e,null,[[0,35]])})))()},resetForm:function(){this.form={project_id:null,region:null,cleanliness_grade:null,room_environment:{room_name:null},floors:null,floor_region_mgmt_id:null,mm:1e3,file:null,img_width:0,img_height:0,upload_yaml:null,yaml:null,origin_x:0,origin_y:0,resolution:1,upload_cad:null,cad_width:0,cad_height:0,x_px:0,y_px:0},this.oldForm=a().cloneDeep(this.form),this.regionDuplicate=!1,this.dimensionErr=!1,this.resetFormValidate()},parseImage:function(t,e){var r=t.data;if("image"==e){this.form.img_width=this.oldForm.img_width=r.width,this.form.img_height=this.oldForm.img_height=r.height,this.form.img_width<500&&(this.form.img_width=500,this.form.img_height=Math.round(r.height*(this.form.img_width/r.width))),this.form.img_height<500&&(this.form.img_height=500,this.form.img_width=Math.round(r.width*(this.form.img_height/r.height))),(isNaN(this.form.img_width)||isNaN(this.form.img_height))&&(this.form.img_width=0,this.form.img_height=0);var n=this;this.$nextTick((function(){n.form.resolution=n.oldForm.resolution*n.reverseWidthRatio,n.form.mm=1e3*n.form.resolution}))}else"cad"==e&&(this.form.cad_width=this.oldForm.cad_width=r.width,this.form.cad_height=this.oldForm.cad_height=r.height);this.form.yaml&&(this.form.origin_x=this.oldForm.origin_x=this.form.yaml.origin_x,this.form.origin_y=this.oldForm.origin_y=this.form.yaml.origin_y,this.form.resolution=this.oldForm.resolution=this.form.yaml.resolution)},parseYaml:function(t){var e=t.data;this.form.yaml={origin_x:0,origin_y:0,resolution:1},e.origin.length>0&&(this.form.origin_x=this.oldForm.origin_x=e.origin[0],this.form.origin_y=this.oldForm.origin_y=e.origin[1],this.form.yaml.origin_x=this.form.origin_x,this.form.yaml.origin_y=this.form.origin_y),e.resolution&&(this.oldForm.resolution=e.resolution,this.form.resolution=e.resolution*this.reverseWidthRatio,this.form.mm=1e3*this.form.resolution,this.form.yaml.resolution=this.form.resolution),this.form.img_width=this.oldForm.img_width,this.form.img_height=this.oldForm.img_height},calcWhenImgSizeChanged:function(t,e){!isNaN(parseInt(e.target.value))&&0!==parseFloat(e.target.value)&&a().isInteger(parseFloat(e.target.value))&&(t?(this.form.img_width=e.target.value,this.form.img_height&&this.oldForm.img_height&&(this.form.img_height=Math.round(this.oldForm.img_height*this.widthRatio),this.form.resolution=this.oldForm.resolution*this.reverseWidthRatio)):(this.form.img_height=e.target.value,this.form.img_width&&this.oldForm.img_width&&(this.form.img_width=Math.round(this.oldForm.img_width*this.heightRatio),this.form.resolution=this.oldForm.resolution*this.reverseHeightRatio)),this.form.mm=1e3*this.form.resolution)},calcWhenMmChanged:function(t){isNaN(parseInt(t.target.value))||0===parseFloat(t.target.value)||(this.oldForm.mm=parseInt(t.target.value),this.form.resolution=this.oldForm.resolution=this.form.mm/1e3)},calcWhenResolutionChanged:function(t){isNaN(parseInt(t.target.value))||0===parseFloat(t.target.value)||(this.oldForm.resolution=parseInt(t.target.value),this.form.mm=this.oldForm.mm=1e3*this.form.resolution)},calcWhenCadSizeChanged:function(t,e){!isNaN(parseInt(e.target.value))&&0!==parseFloat(e.target.value)&&a().isInteger(parseFloat(e.target.value))&&(t?this.form.cad_width&&this.cadAspectRatio&&(this.form.cad_height=Math.round(this.form.cad_width/this.cadAspectRatio)):this.form.cad_height&&this.cadAspectRatio&&(this.form.cad_width=Math.round(this.form.cad_height*this.cadAspectRatio)))}}};var k=r(3379),L=r.n(k),S=r(8103),E={insert:"head",singleton:!1};L()(S.Z,E);S.Z.locals;const M=(0,m.Z)(C,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("modal",{attrs:{size:"lg",footer:!1,backdrop:!1,"append-to-body":!0,keyboard:!1},on:{show:t.onShowModal,hide:t.onHideModal},model:{value:t.showModal,callback:function(e){t.showModal=e},expression:"showModal"}},[t.rid?r("div",{attrs:{slot:"title"},slot:"title"},[t._v("更新區域")]):r("div",{attrs:{slot:"title"},slot:"title"},[t._v("創建區域")]),t._v(" "),r("div",{attrs:{slot:"default"},slot:"default"},[t.loading?t._e():r("form",{staticClass:"form-horizontal",attrs:{novalidate:""},on:{submit:function(e){return e.preventDefault(),t.submit.apply(null,arguments)}}},[r("div",{staticClass:"form-group"},[r("label",{staticClass:"col-md-3 control-label"},[t._v("模式"),r("span",{staticClass:"is-danger"},[t._v(" *")])]),t._v(" "),r("div",{staticClass:"col-md-9"},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.editMode,expression:"editMode"}],attrs:{type:"radio",id:"floor"},domProps:{value:1,checked:t._q(t.editMode,1)},on:{change:function(e){t.editMode=1}}}),t._v(" "),r("label",{staticClass:"control-label",attrs:{for:"floor"}},[t._v("樓層")]),t._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:t.editMode,expression:"editMode"}],attrs:{type:"radio",id:"room"},domProps:{value:2,checked:t._q(t.editMode,2)},on:{change:function(e){t.editMode=2}}}),t._v(" "),r("label",{staticClass:"control-label",attrs:{for:"room"}},[t._v("房間")])])]),t._v(" "),r("div",{staticClass:"form-group"},[r("label",{staticClass:"col-md-3 control-label"},[t._v("專案"),r("span",{staticClass:"is-danger"},[t._v(" *")])]),t._v(" "),r("div",{staticClass:"col-md-9"},[r("project-list-select",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{name:"project_id",defaultText:"請選擇專案","is-deploy":1},model:{value:t.form.project_id,callback:function(e){t.$set(t.form,"project_id",e)},expression:"form.project_id"}}),t._v(" "),r("span",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("project_id:required"),expression:"errors.has('project_id:required')"}],staticClass:"help is-danger"},[t._v("請選擇專案")])],1)]),t._v(" "),r("div",{staticClass:"form-group"},[r("label",{staticClass:"col-md-3 control-label"},[t._v("區域"),r("span",{staticClass:"is-danger"},[t._v(" *")])]),t._v(" "),r("div",{staticClass:"col-md-9"},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.form.region,expression:"form.region"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"form-control",attrs:{name:"region",disabled:t.rid,placeholder:"請填寫區域"},domProps:{value:t.form.region},on:{input:[function(e){e.target.composing||t.$set(t.form,"region",e.target.value)},function(e){t.regionDuplicate=!1}]}}),t._v(" "),r("span",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("region:required"),expression:"errors.has('region:required')"}],staticClass:"help is-danger"},[t._v("請填寫區域")]),t._v(" "),r("span",{directives:[{name:"show",rawName:"v-show",value:t.regionDuplicate,expression:"regionDuplicate"}],staticClass:"help is-danger"},[t._v("該地圖的區域已存在！")])])]),t._v(" "),2==t.editMode?r("div",{staticClass:"form-group"},[r("label",{staticClass:"col-md-3 control-label"},[t._v("潔淨度"),r("span",{staticClass:"is-danger"},[t._v("  ")])]),t._v(" "),r("div",{staticClass:"col-md-9"},[r("select",{directives:[{name:"model",rawName:"v-model",value:t.form.cleanliness_grade,expression:"form.cleanliness_grade"}],staticClass:"form-control",attrs:{name:"cleanliness_grade"},on:{change:function(e){var r=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(t.form,"cleanliness_grade",e.target.multiple?r:r[0])}}},[r("option",{domProps:{value:null}},[t._v("請選擇")]),t._v(" "),r("option",{attrs:{value:"A"}},[t._v("A")]),t._v(" "),r("option",{attrs:{value:"B"}},[t._v("B")]),t._v(" "),r("option",{attrs:{value:"C"}},[t._v("C")]),t._v(" "),r("option",{attrs:{value:"D"}},[t._v("D")])])])]):t._e(),t._v(" "),r("div",{staticClass:"form-group"},[r("label",{staticClass:"col-md-3 control-label"},[t._v("樓層"),r("span",{staticClass:"is-danger"},[t._v(" "+t._s(1==t.editMode?" ":"*"))])]),t._v(" "),r("div",{staticClass:"col-md-9"},[1==t.editMode?r("p",{staticClass:"form-control-static"},[t._v("\n                        "+t._s(t.form.floors>0?t.form.floors+"F":t.form.floors<0?"B"+-1*t.form.floors:"未知")+"\n                    ")]):r("region-mgmt-list-select",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{name:"floors","project-id":t.form.project_id,"is-floor":1,"single-select2":!0,"min-num-for-search":5},model:{value:t.form.floor_region_mgmt_id,callback:function(e){t.$set(t.form,"floor_region_mgmt_id",e)},expression:"form.floor_region_mgmt_id"}}),t._v(" "),r("span",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("floors:required"),expression:"errors.has('floors:required')"}],staticClass:"help is-danger"},[t._v("請填寫樓層")]),t._v(" "),r("span",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("floors:numeric")||t.errors.has("floor_region_mgmt_id:min_value"),expression:"errors.has('floors:numeric') || errors.has('floor_region_mgmt_id:min_value')"}],staticClass:"help is-danger"},[t._v("請填寫大於 0 的整數")])],1)]),t._v(" "),2==t.editMode?[r("div",{staticClass:"form-group"},[r("label",{staticClass:"col-md-3 control-label"},[t._v("mm/pixel"),r("span",{staticClass:"is-danger"},[t._v(" *")])]),t._v(" "),r("div",{staticClass:"col-md-9"},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.form.mm,expression:"form.mm"},{name:"validate",rawName:"v-validate",value:"required|decimal|min_value:1",expression:"'required|decimal|min_value:1'"}],staticClass:"form-control",attrs:{name:"mm",placeholder:"請填寫mm"},domProps:{value:t.form.mm},on:{input:[function(e){e.target.composing||t.$set(t.form,"mm",e.target.value)},t.calcWhenMmChanged]}}),t._v(" "),r("span",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("mm:required"),expression:"errors.has('mm:required')"}],staticClass:"help is-danger"},[t._v("請填寫mm")]),t._v(" "),r("span",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("mm:decimal"),expression:"errors.has('mm:decimal')"}],staticClass:"help is-danger"},[t._v("請填寫整數")]),t._v(" "),r("span",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("mm:min_value"),expression:"errors.has('mm:min_value')"}],staticClass:"help is-danger"},[t._v("請輸入大於0")])])]),t._v(" "),r("div",{staticClass:"form-group"},[r("label",{staticClass:"col-md-3 control-label"},[t._v("上傳底圖"),r("span",{staticClass:"is-danger"},[t._v(" *")])]),t._v(" "),r("div",{staticClass:"col-md-9 relative"},[r("upload-button",{directives:[{name:"validate",rawName:"v-validate",value:t.rid?"":"required",expression:"!rid ? 'required' : ''"}],staticClass:"btn btn-light-green",class:{disabled:!t.form.region},attrs:{name:"file",accept:".png, .pgm","upload-url":"/api/regionMgmts/image",extensions:["png","pgm"],disabled:!t.form.region},on:{complete:function(e){return t.parseImage(e,"image")}},model:{value:t.form.file,callback:function(e){t.$set(t.form,"file",e)},expression:"form.file"}},[t._v("選擇檔案\n                        ")]),t._v(" "),t.form.file?r("span",{staticClass:"green"},[t._v(" "),r("i",{staticClass:"fa fa-check-circle-o",staticStyle:{"font-size":"16pt"}}),t._v(" 已選擇檔案")]):t.rid?r("span",[t._v("background_"+t._s(t.form.region)+".png")]):t._e(),t._v(" "),t.form.file&&t.dimensionErr?r("div",{staticClass:"help is-danger"},[t._v("尺寸限制在3966x2016，請重新上傳！")]):t.errors.has("file:required")?r("div",{staticClass:"help is-danger"},[t._v("請選擇要上傳的檔案")]):t._e(),t._v(" "),r("span",{staticClass:"img-size pull-right"},[t._v("3966x2016")])],1)]),t._v(" "),r("div",{staticClass:"form-group"},[r("label",{staticClass:"col-md-3 control-label"},[t._v("圖片寬度"),r("span",{staticClass:"is-danger"},[t._v(" *")])]),t._v(" "),r("div",{staticClass:"col-md-9"},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.form.img_width,expression:"form.img_width"},{name:"validate",rawName:"v-validate",value:"required|numeric|min_value:1",expression:"'required|numeric|min_value:1'"}],staticClass:"form-control",attrs:{name:"img_width",placeholder:"請填寫圖片寬度"},domProps:{value:t.form.img_width},on:{input:[function(e){e.target.composing||t.$set(t.form,"img_width",e.target.value)},function(e){return t.calcWhenImgSizeChanged(!0,e)}]}}),t._v(" "),r("span",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("img_width:required"),expression:"errors.has('img_width:required')"}],staticClass:"help is-danger"},[t._v("請填寫圖片寬度")]),t._v(" "),r("span",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("img_width:numeric"),expression:"errors.has('img_width:numeric')"}],staticClass:"help is-danger"},[t._v("請填寫整數")]),t._v(" "),r("span",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("img_width:min_value"),expression:"errors.has('img_width:min_value')"}],staticClass:"help is-danger"},[t._v("請輸入大於0")])])]),t._v(" "),r("div",{staticClass:"form-group"},[r("label",{staticClass:"col-md-3 control-label"},[t._v("圖片高度"),r("span",{staticClass:"is-danger"},[t._v(" *")])]),t._v(" "),r("div",{staticClass:"col-md-9"},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.form.img_height,expression:"form.img_height"},{name:"validate",rawName:"v-validate",value:"required|numeric|min_value:1",expression:"'required|numeric|min_value:1'"}],staticClass:"form-control",attrs:{name:"img_height",placeholder:"請填寫圖片高度"},domProps:{value:t.form.img_height},on:{input:[function(e){e.target.composing||t.$set(t.form,"img_height",e.target.value)},function(e){return t.calcWhenImgSizeChanged(!1,e)}]}}),t._v(" "),r("span",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("img_height:required"),expression:" errors.has('img_height:required')"}],staticClass:"help is-danger"},[t._v("請填寫圖片高度")]),t._v(" "),r("span",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("img_height:numeric"),expression:"errors.has('img_height:numeric')"}],staticClass:"help is-danger"},[t._v("請填寫整數")]),t._v(" "),r("span",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("img_height:min_value"),expression:"errors.has('img_height:min_value')"}],staticClass:"help is-danger"},[t._v("請輸入大於0")])])]),t._v(" "),r("div",{staticClass:"form-group"},[r("label",{staticClass:"col-md-3 control-label"},[t._v("上傳YAML檔  ")]),t._v(" "),r("div",{staticClass:"col-md-9 relative"},[r("upload-button",{staticClass:"btn btn-light-green",attrs:{name:"upload_yaml",accept:".yaml","upload-url":"/api/regionMgmts/yaml",extensions:["yaml"]},on:{complete:t.parseYaml},model:{value:t.form.upload_yaml,callback:function(e){t.$set(t.form,"upload_yaml",e)},expression:"form.upload_yaml"}},[t._v("選擇檔案\n                        ")]),t._v(" "),t.form.upload_yaml?r("span",{staticClass:"green"},[t._v(" "),r("i",{staticClass:"fa fa-check-circle-o",staticStyle:{"font-size":"16pt"}}),t._v(" 已選擇檔案")]):t.form.yaml?r("span",[t._v(t._s(t.form.region)+".yaml")]):t._e()],1)]),t._v(" "),r("div",{staticClass:"form-group"},[r("label",{staticClass:"col-md-3 control-label"},[t._v("原點座標 X"),r("span",{staticClass:"is-danger"},[t._v(" *")])]),t._v(" "),r("div",{staticClass:"col-md-9"},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.form.origin_x,expression:"form.origin_x"},{name:"validate",rawName:"v-validate",value:"required|decimal",expression:"'required|decimal'"}],staticClass:"form-control",attrs:{name:"origin_x",disabled:t.form.yaml||t.form.upload_yaml},domProps:{value:t.form.origin_x},on:{input:function(e){e.target.composing||t.$set(t.form,"origin_x",e.target.value)}}}),t._v(" "),r("span",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("origin_x:required"),expression:" errors.has('origin_x:required')"}],staticClass:"help is-danger"},[t._v("請填寫原點座標 X")]),t._v(" "),r("span",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("origin_x:decimal"),expression:"errors.has('origin_x:decimal')"}],staticClass:"help is-danger"},[t._v("請填寫數字")])])]),t._v(" "),r("div",{staticClass:"form-group"},[r("label",{staticClass:"col-md-3 control-label"},[t._v("原點座標 Y"),r("span",{staticClass:"is-danger"},[t._v(" *")])]),t._v(" "),r("div",{staticClass:"col-md-9"},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.form.origin_y,expression:"form.origin_y"},{name:"validate",rawName:"v-validate",value:"required|decimal",expression:"'required|decimal'"}],staticClass:"form-control",attrs:{name:"origin_y",disabled:t.form.yaml||t.form.upload_yaml},domProps:{value:t.form.origin_y},on:{input:function(e){e.target.composing||t.$set(t.form,"origin_y",e.target.value)}}}),t._v(" "),r("span",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("origin_y:required"),expression:" errors.has('origin_y:required')"}],staticClass:"help is-danger"},[t._v("請填寫原點座標 Y")]),t._v(" "),r("span",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("origin_y:decimal"),expression:"errors.has('origin_y:decimal')"}],staticClass:"help is-danger"},[t._v("請填寫數字")])])]),t._v(" "),r("div",{staticClass:"form-group"},[r("label",{staticClass:"col-md-3 control-label"},[t._v("解析度(m/pixel)"),r("span",{staticClass:"is-danger"},[t._v(" *")])]),t._v(" "),r("div",{staticClass:"col-md-9"},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.form.resolution,expression:"form.resolution"},{name:"validate",rawName:"v-validate",value:"required|decimal",expression:"'required|decimal'"}],staticClass:"form-control",attrs:{name:"resolution",disabled:t.form.yaml||t.form.upload_yaml},domProps:{value:t.form.resolution},on:{input:[function(e){e.target.composing||t.$set(t.form,"resolution",e.target.value)},t.calcWhenResolutionChanged]}}),t._v(" "),r("span",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("resolution:required"),expression:" errors.has('resolution:required')"}],staticClass:"help is-danger"},[t._v("請填寫解析度(m/pixel)")]),t._v(" "),r("span",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("resolution:decimal"),expression:"errors.has('resolution:decimal')"}],staticClass:"help is-danger"},[t._v("請填寫數字")])])])]:t._e(),t._v(" "),r("div",{staticClass:"form-group"},[r("label",{staticClass:"col-md-3 control-label"},[t._v("上傳CAD圖"),r("span",{staticClass:"is-danger"},[t._v(" *")])]),t._v(" "),r("div",{staticClass:"col-md-9 relative"},[r("upload-button",{directives:[{name:"validate",rawName:"v-validate",value:t.rid&&t.form.cad_width&&t.form.cad_height?"":"required",expression:"!rid || !(form.cad_width && form.cad_height) ? 'required' : ''"}],staticClass:"btn btn-light-green",class:{disabled:!t.form.region},attrs:{name:"upload_cad",accept:".png, .pgm","upload-url":"/api/regionMgmts/image",extensions:["png","pgm"],disabled:!t.form.region},on:{complete:function(e){return t.parseImage(e,"cad")}},model:{value:t.form.upload_cad,callback:function(e){t.$set(t.form,"upload_cad",e)},expression:"form.upload_cad"}},[t._v("選擇檔案\n                    ")]),t._v(" "),t.form.upload_cad?r("span",{staticClass:"green"},[t._v(" "),r("i",{staticClass:"fa fa-check-circle-o",staticStyle:{"font-size":"16pt"}}),t._v(" 已選擇檔案")]):t.form.cad_width&&t.form.cad_height?r("span",[t._v("cad_"+t._s(t.form.region)+"_background.png")]):t._e(),t._v(" "),t.form.upload_cad&&t.dimensionErr?r("div",{staticClass:"help is-danger"},[t._v("尺寸限制在3966x2016，請重新上傳！")]):t.errors.has("upload_cad:required")?r("div",{staticClass:"help is-danger"},[t._v("請選擇要上傳的檔案")]):t._e(),t._v(" "),r("span",{staticClass:"img-size pull-right"},[t._v("3966x2016")])],1)]),t._v(" "),r("div",{staticClass:"form-group"},[r("label",{staticClass:"col-md-3 control-label"},[t._v("CAD圖寬度"),r("span",{staticClass:"is-danger"},[t._v(" *")])]),t._v(" "),r("div",{staticClass:"col-md-9"},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.form.cad_width,expression:"form.cad_width"},{name:"validate",rawName:"v-validate",value:"required|numeric|min_value:1",expression:"'required|numeric|min_value:1'"}],staticClass:"form-control",attrs:{name:"cad_width",placeholder:"請填寫CAD圖寬度"},domProps:{value:t.form.cad_width},on:{input:[function(e){e.target.composing||t.$set(t.form,"cad_width",e.target.value)},function(e){return t.calcWhenCadSizeChanged(!0,e)}]}}),t._v(" "),r("span",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("cad_width:required"),expression:"errors.has('cad_width:required')"}],staticClass:"help is-danger"},[t._v("請填寫CAD圖寬度")]),t._v(" "),r("span",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("cad_width:numeric"),expression:"errors.has('cad_width:numeric')"}],staticClass:"help is-danger"},[t._v("請填寫整數")]),t._v(" "),r("span",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("cad_width:min_value"),expression:"errors.has('cad_width:min_value')"}],staticClass:"help is-danger"},[t._v("請輸入大於0")])])]),t._v(" "),r("div",{staticClass:"form-group"},[r("label",{staticClass:"col-md-3 control-label"},[t._v("CAD圖高度"),r("span",{staticClass:"is-danger"},[t._v(" *")])]),t._v(" "),r("div",{staticClass:"col-md-9"},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.form.cad_height,expression:"form.cad_height"},{name:"validate",rawName:"v-validate",value:"required|numeric|min_value:1",expression:"'required|numeric|min_value:1'"}],staticClass:"form-control",attrs:{name:"cad_height",placeholder:"請填寫CAD圖高度"},domProps:{value:t.form.cad_height},on:{input:[function(e){e.target.composing||t.$set(t.form,"cad_height",e.target.value)},function(e){return t.calcWhenCadSizeChanged(!1,e)}]}}),t._v(" "),r("span",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("cad_height:required"),expression:" errors.has('cad_height:required')"}],staticClass:"help is-danger"},[t._v("請填寫CAD圖高度")]),t._v(" "),r("span",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("cad_height:numeric"),expression:"errors.has('cad_height:numeric')"}],staticClass:"help is-danger"},[t._v("請填寫整數")]),t._v(" "),r("span",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("cad_height:min_value"),expression:"errors.has('cad_height:min_value')"}],staticClass:"help is-danger"},[t._v("請輸入大於0")])])]),t._v(" "),2==t.editMode?[r("div",{staticClass:"form-group"},[r("label",{staticClass:"col-md-3 control-label"},[t._v("房間名稱"),r("span",{staticClass:"is-danger"},[t._v(" *")])]),t._v(" "),r("div",{staticClass:"col-md-9"},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.form.room_environment.room_name,expression:"form.room_environment.room_name"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"form-control",attrs:{name:"room_environment_room_name",placeholder:"請填寫房間名稱"},domProps:{value:t.form.room_environment.room_name},on:{input:function(e){e.target.composing||t.$set(t.form.room_environment,"room_name",e.target.value)}}}),t._v(" "),r("span",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("room_environment_room_name:required"),expression:"errors.has('room_environment_room_name:required')"}],staticClass:"help is-danger"},[t._v("請填寫房間名稱")])])]),t._v(" "),r("div",{staticClass:"form-group"},[r("label",{staticClass:"col-md-3 control-label"},[t._v("座標 X"),r("span",{staticClass:"is-danger"},[t._v("  ")])]),t._v(" "),r("div",{staticClass:"col-md-9"},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.form.x_px,expression:"form.x_px"},{name:"validate",rawName:"v-validate",value:"decimal:0",expression:"'decimal:0'"}],staticClass:"form-control",attrs:{name:"x_px",placeholder:"請填寫座標 X"},domProps:{value:t.form.x_px},on:{input:[function(e){e.target.composing||t.$set(t.form,"x_px",e.target.value)},function(e){t.form.x_px=e.target.value.replace(/\,/g,"")}]}}),t._v(" "),r("span",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("x_px:decimal"),expression:"errors.has('x_px:decimal')"}],staticClass:"help is-danger"},[t._v("請填寫整數")])])]),t._v(" "),r("div",{staticClass:"form-group"},[r("label",{staticClass:"col-md-3 control-label"},[t._v("座標 Y"),r("span",{staticClass:"is-danger"},[t._v("  ")])]),t._v(" "),r("div",{staticClass:"col-md-9"},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.form.y_px,expression:"form.y_px"},{name:"validate",rawName:"v-validate",value:"decimal:0",expression:"'decimal:0'"}],staticClass:"form-control",attrs:{name:"y_px",placeholder:"請填寫座標 Y"},domProps:{value:t.form.y_px},on:{input:[function(e){e.target.composing||t.$set(t.form,"y_px",e.target.value)},function(e){t.form.y_px=e.target.value.replace(/\,/g,"")}]}}),t._v(" "),r("span",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("y_px:decimal"),expression:"errors.has('y_px:decimal')"}],staticClass:"help is-danger"},[t._v("請填寫整數")])])])]:t._e(),t._v(" "),r("div",{staticClass:"text-right"},[r("button",{staticClass:"btn btn-light-green",attrs:{disabled:t.progress>0&&t.progress<100||t.sending}},[t._v("送出")]),t._v(" "),r("button",{staticClass:"btn btn-default",attrs:{type:"button"},on:{click:function(e){t.showModal=!1}}},[t._v("取消")])])],2),t._v(" "),t.loading?r("clip-loader",{staticClass:"loading",attrs:{color:"gray",size:"30px"}}):t._e()],1)])}),[],!1,null,"1ed0f0a4",null).exports;var O=r(629);function P(t){return P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},P(t)}function j(){j=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function c(t,e,r,n){var o=e&&e.prototype instanceof d?e:d,i=Object.create(o.prototype),a=new C(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return L()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var s=b(a,r);if(s){if(s===u)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=l(t,e,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===u)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}(t,r,a),i}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var u={};function d(){}function h(){}function f(){}var p={};s(p,o,(function(){return this}));var m=Object.getPrototypeOf,v=m&&m(m(k([])));v&&v!==e&&r.call(v,o)&&(p=v);var g=f.prototype=d.prototype=Object.create(p);function y(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function _(t,e){function n(o,i,a,s){var c=l(t[o],t,i);if("throw"!==c.type){var u=c.arg,d=u.value;return d&&"object"==P(d)&&r.call(d,"__await")?e.resolve(d.__await).then((function(t){n("next",t,a,s)}),(function(t){n("throw",t,a,s)})):e.resolve(d).then((function(t){u.value=t,a(u)}),(function(t){return n("throw",t,a,s)}))}s(c.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function b(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,b(t,e),"throw"===e.method))return u;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var n=l(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,u;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,u):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,u)}function x(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function w(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function C(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(x,this),this.reset(!0)}function k(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:L}}function L(){return{value:void 0,done:!0}}return h.prototype=f,s(g,"constructor",f),s(f,"constructor",h),h.displayName=s(f,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===h||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,f):(t.__proto__=f,s(t,a,"GeneratorFunction")),t.prototype=Object.create(g),t},t.awrap=function(t){return{__await:t}},y(_.prototype),s(_.prototype,i,(function(){return this})),t.AsyncIterator=_,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new _(c(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},y(g),s(g,a,"Generator"),s(g,o,(function(){return this})),s(g,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=k,C.prototype={constructor:C,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(w),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=r.call(i,"catchLoc"),c=r.call(i,"finallyLoc");if(s&&c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,u):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),u},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),w(r),u}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;w(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:k(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),u}},t}function N(t,e,r,n,o,i,a){try{var s=t[i](a),c=s.value}catch(t){return void r(t)}s.done?e(c):Promise.resolve(c).then(n,o)}function T(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){N(i,n,o,a,s,"next",t)}function s(t){N(i,n,o,a,s,"throw",t)}a(void 0)}))}}function $(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function I(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}const D={name:"RegionMgmtListCollapseSelect",props:{value:{type:Number,default:null},isDeploy:{type:Number,default:0},enableConfirm:{type:Boolean,default:!1},projectId:{type:Number,default:null}},computed:function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?$(Object(r),!0).forEach((function(e){I(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):$(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({},(0,O.rn)({userId:function(t){return t.user.user.id}})),watch:{value:function(t){var e=this;return T(j().mark((function r(){return j().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return e.regionMgmtId=t,r.next=3,e.fetchData();case 3:t&&e.setActiveRegionMgmt(t);case 4:case"end":return r.stop()}}),r)})))()},regionMgmtId:function(t,e){this.isDeploy||window.Echo.leave("regionMgmts.presence.".concat(e)),this.$emit("input",t)},isDeploy:function(t){this.form.is_deploy=t},projectId:function(t,e){this.isDeploy||window.Echo.leave("projects.".concat(e))}},data:function(){return{regionMgmts:[],regionMgmtId:this.value,form:{is_deploy:this.isDeploy,is_write:this.isDeploy?null:1,is_read:this.isDeploy?1:null},oldRegionMgmtId:null}},created:function(){this.value&&(this.regionMgmts=[{id:this.value}])},mounted:function(){var t=this;return T(j().mark((function e(){var r;return j().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.fetchData();case 2:t.value&&t.setActiveRegionMgmt(t.value),t.isDeploy||(r=t,window.Echo.private("projects.".concat(t.projectId)).listen("RegionMgmtUpdated",(function(e){var n=e.regionMgmt,o=a().findIndex(r.regionMgmts,["id",n.id]);if(-1!=o){var i=a().cloneDeep(r.regionMgmts[o].room_region_mgmts);return r.regionMgmts.splice(o,1,n),void(r.regionMgmts[o].room_region_mgmts=i)}a().forEach(t.regionMgmts,(function(t,e){var o=a().findIndex(t.room_region_mgmts,["id",n.id]);-1!=o&&r.regionMgmts[e].room_region_mgmts.splice(o,1,n)}))})));case 4:case"end":return e.stop()}}),e)})))()},destroyed:function(){this.isDeploy||(window.Echo.leave("regionMgmts.presence.".concat(this.regionMgmtId)),window.Echo.leave("projects.".concat(this.value)))},methods:{fetchData:function(){var t=this;return T(j().mark((function e(){var r,n,i;return j().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t,t.loading=!0,e.prev=2,e.next=5,o().get("/api/regionMgmts",{params:{project_id:t.projectId,is_write:t.isDeploy?null:1,is_read:t.isDeploy?1:null,is_floor:1}});case 5:0==(n=(n=e.sent).data).status&&(i=n.data,t.regionMgmts=a().map(i.regionMgmts,(function(t){return t.is_collapsed=t.id==r.regionMgmtId,t})),!t.isDeploy&&t.regionMgmtId&&("/regionMgmts"==t.$route.path&&window.Echo.join("regionMgmts.presence.".concat(t.regionMgmtId)),t.oldRegionMgmtId=t.regionMgmtId)),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),t.guestRedirectHome(e.t0);case 13:case"end":return e.stop()}}),e,null,[[2,10]])})))()},selectRegion:function(t,e){this.enableConfirm&&!confirm("確定要切換區域？")||(-1!=e?(this.$emit("input",this.regionMgmts[t].room_region_mgmts[e].id),this.$emit("update:projectId",this.regionMgmts[t].project_id)):(this.$emit("input",this.regionMgmts[t].id),this.$emit("update:projectId",this.regionMgmts[t].project_id)))},setActiveRegionMgmt:function(t){var e=a().findIndex(this.regionMgmts,(function(e){return e.id==t}));-1!=e&&(this.regionMgmts[e].is_collapsed=!1)}}};var A=r(8280),F={insert:"head",singleton:!1};L()(A.Z,F);A.Z.locals;const q=(0,m.Z)(D,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("div",{staticClass:"panel-group",attrs:{id:"accordion","aria-multiselectable":"true"}},[t._l(t.regionMgmts,(function(e,n){return[r("div",{staticClass:"panel panel-default"},[r("div",{staticClass:"panel-heading",attrs:{id:"heading"+n}},[r("a",{staticClass:"accordion-toggle",class:{collapsed:e.is_collapsed},attrs:{"data-toggle":"collapse","data-parent":"#accordion",href:"#collapse"+n,"aria-expanded":!e.is_collapsed,"aria-controls":"collapse"+n}},[r("div",{on:{click:function(e){return e.target!==e.currentTarget?null:t.selectRegion(n,-1)}}},[r("label",{staticClass:"label label-floor"},[t._v("樓層")]),t._v(" "+t._s(e.region)+"\n                        ")])]),t._v(" "),r("div",{staticClass:"clearfix"})]),t._v(" "),r("div",{staticClass:"panel-collapse",class:{collapse:e.is_collapsed,"collapse in":!e.is_collapsed},attrs:{id:"collapse"+n,"aria-expanded":!e.is_collapsed,"aria-labelledby":"heading"+n}},[r("div",{staticClass:"panel-body"},t._l(e.room_region_mgmts,(function(o,i){return r("div",{staticClass:"col-md-12 region-item",class:{"selected-region":o.id==t.regionMgmtId,disabled:o.edit_user_id&&o.edit_user_id!=t.userId},style:i+1!=e.room_region_mgmts.length?"border-bottom: 1px solid gray;":"",on:{click:function(e){return t.selectRegion(n,i)}}},[r("label",{staticClass:"label label-room"},[t._v("房間")]),t._v(" \n                            "),!t.isDeploy&&o.edit_user?[t._v("\n                                "+t._s(o.region)+"("+t._s(o.edit_user.account)+"正在使用中)\n                            ")]:[t._v("\n                                "+t._s(o.region)+"\n                            ")]],2)})),0)])])]}))],2)])}),[],!1,null,"4e684bd8",null).exports;function R(t){return R="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},R(t)}function G(){G=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function c(t,e,r,n){var o=e&&e.prototype instanceof d?e:d,i=Object.create(o.prototype),a=new C(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return L()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var s=b(a,r);if(s){if(s===u)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=l(t,e,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===u)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}(t,r,a),i}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var u={};function d(){}function h(){}function f(){}var p={};s(p,o,(function(){return this}));var m=Object.getPrototypeOf,v=m&&m(m(k([])));v&&v!==e&&r.call(v,o)&&(p=v);var g=f.prototype=d.prototype=Object.create(p);function y(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function _(t,e){function n(o,i,a,s){var c=l(t[o],t,i);if("throw"!==c.type){var u=c.arg,d=u.value;return d&&"object"==R(d)&&r.call(d,"__await")?e.resolve(d.__await).then((function(t){n("next",t,a,s)}),(function(t){n("throw",t,a,s)})):e.resolve(d).then((function(t){u.value=t,a(u)}),(function(t){return n("throw",t,a,s)}))}s(c.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function b(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,b(t,e),"throw"===e.method))return u;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var n=l(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,u;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,u):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,u)}function x(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function w(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function C(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(x,this),this.reset(!0)}function k(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:L}}function L(){return{value:void 0,done:!0}}return h.prototype=f,s(g,"constructor",f),s(f,"constructor",h),h.displayName=s(f,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===h||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,f):(t.__proto__=f,s(t,a,"GeneratorFunction")),t.prototype=Object.create(g),t},t.awrap=function(t){return{__await:t}},y(_.prototype),s(_.prototype,i,(function(){return this})),t.AsyncIterator=_,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new _(c(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},y(g),s(g,a,"Generator"),s(g,o,(function(){return this})),s(g,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=k,C.prototype={constructor:C,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(w),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=r.call(i,"catchLoc"),c=r.call(i,"finallyLoc");if(s&&c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,u):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),u},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),w(r),u}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;w(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:k(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),u}},t}function z(t,e,r,n,o,i,a){try{var s=t[i](a),c=s.value}catch(t){return void r(t)}s.done?e(c):Promise.resolve(c).then(n,o)}const V={name:"VertexTypeSelect",props:{value:{type:Number},defaultText:{type:String,default:"請選擇站點類型"},items:{type:Array,default:function(){return[]}},vertexTypeId:{type:Number,default:null}},watch:{vertexTypesId:function(t){this.$emit("input",t)},value:function(t){this.vertexTypesId=t},vertexTypeId:function(t,e){t!=e&&this.fetchData()}},data:function(){return{vertexTypesId:this.value,vertexTypes:[]}},created:function(){this.vertexTypesId=this.value,this.fetchData()},methods:{fetchData:function(){var t,e=this;return(t=G().mark((function t(){var r,n;return G().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.loading=!0,t.prev=1,t.next=4,o().get("/api/vertexTypes",{params:{id:e.vertexTypeId}});case 4:0==(r=(r=t.sent).data).status&&(n=r.data,e.vertexTypes=n.vertexTypes,e.$emit("update:items",e.vertexTypes)),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),e.guestRedirectHome(t.t0);case 12:case"end":return t.stop()}}),t,null,[[1,9]])})),function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){z(i,n,o,a,s,"next",t)}function s(t){z(i,n,o,a,s,"throw",t)}a(void 0)}))})()}}};const Z=(0,m.Z)(V,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("select",{directives:[{name:"model",rawName:"v-model",value:t.vertexTypesId,expression:"vertexTypesId"}],staticClass:"form-control",attrs:{name:"vertexTypesId"},on:{change:function(e){var r=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.vertexTypesId=e.target.multiple?r:r[0]}}},[r("option",{domProps:{value:null}},[t._v(t._s(t.defaultText))]),t._v(" "),t._l(t.vertexTypes,(function(e){return r("option",{domProps:{value:e.id}},[t._v(t._s(e.name))])}))],2)}),[],!1,null,null,null).exports;var B=r(2805);function H(t){return H="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},H(t)}function U(){U=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function c(t,e,r,n){var o=e&&e.prototype instanceof d?e:d,i=Object.create(o.prototype),a=new C(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return L()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var s=b(a,r);if(s){if(s===u)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=l(t,e,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===u)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}(t,r,a),i}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var u={};function d(){}function h(){}function f(){}var p={};s(p,o,(function(){return this}));var m=Object.getPrototypeOf,v=m&&m(m(k([])));v&&v!==e&&r.call(v,o)&&(p=v);var g=f.prototype=d.prototype=Object.create(p);function y(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function _(t,e){function n(o,i,a,s){var c=l(t[o],t,i);if("throw"!==c.type){var u=c.arg,d=u.value;return d&&"object"==H(d)&&r.call(d,"__await")?e.resolve(d.__await).then((function(t){n("next",t,a,s)}),(function(t){n("throw",t,a,s)})):e.resolve(d).then((function(t){u.value=t,a(u)}),(function(t){return n("throw",t,a,s)}))}s(c.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function b(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,b(t,e),"throw"===e.method))return u;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var n=l(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,u;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,u):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,u)}function x(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function w(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function C(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(x,this),this.reset(!0)}function k(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:L}}function L(){return{value:void 0,done:!0}}return h.prototype=f,s(g,"constructor",f),s(f,"constructor",h),h.displayName=s(f,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===h||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,f):(t.__proto__=f,s(t,a,"GeneratorFunction")),t.prototype=Object.create(g),t},t.awrap=function(t){return{__await:t}},y(_.prototype),s(_.prototype,i,(function(){return this})),t.AsyncIterator=_,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new _(c(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},y(g),s(g,a,"Generator"),s(g,o,(function(){return this})),s(g,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=k,C.prototype={constructor:C,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(w),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=r.call(i,"catchLoc"),c=r.call(i,"finallyLoc");if(s&&c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,u):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),u},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),w(r),u}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;w(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:k(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),u}},t}function Y(t,e,r,n,o,i,a){try{var s=t[i](a),c=s.value}catch(t){return void r(t)}s.done?e(c):Promise.resolve(c).then(n,o)}var W=null;const X={name:"VertexPoint",components:{Drag:B.Z},props:{value:{type:Object,default:function(){return null}},scale:{type:Number,default:1},vertexTypeId:{type:Number,default:null},isDeploy:{type:Number,default:0},disabled:{type:Boolean,default:!1},diameter:{type:Number,default:20},acceptanceGrades:{type:Array,default:function(){return[]}},pollutionConditions:{type:Array,default:function(){return[]}},cleanlinessGrade:String},watch:{value:function(t){this.vertex=t}},computed:{vertexName:function(){if(this.vertex.vertex_configurations.length>0){var t=this.vertex.vertex_configurations,e=a().find(t,(function(t){return"vertex_name"==t.type}));return e?e.data:null}return null},xPx:function(){return"x_px"},yPx:function(){return"y_px"}},data:function(){return{vertex:this.value,clickNum:0,isDraggableEvent:!1}},created:function(){this.value?this.vertex=a().cloneDeep(this.value):this.vertex={id:null,x:0,y:0,is_selected:!1,is_nearby:!1,region_mgmt_id:null,vertex_configurations:[]}},methods:{onClick:function(){var t=this;this.isDraggableEvent||(this.clickNum++,1==this.clickNum?(this.$emit("input",this.vertex),this.vertex.is_selected?this.$emit("unselect"):this.$emit("select"),W=setTimeout((function(){t.clickNum=0}),400)):2==this.clickNum&&(clearTimeout(W),this.clickNum=0,this.vertex.id&&(this.$emit("select"),this.$emit("dbclick",this.vertex.id))))},onStop:function(t){var e=this;this.isDraggableEvent=!0,setTimeout((function(){e.isDraggableEvent=!1}),200),this.vertex.id?this.updatePosition(t):this.$emit("stop",t)},updatePosition:function(t){var e,r=this;return(e=U().mark((function e(){var n;return U().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(n=a().cloneDeep(r.vertex))[r.xPx]=t.x,n[r.yPx]=t.y,n.x=r.imgCoordToQuadrantCoordX(n.region_mgmt.resolution,n[r.xPx],n.region_mgmt.origin_x),n.y=r.imgCoordToQuadrantCoordY(n.region_mgmt.resolution,n[r.yPx],n.region_mgmt.img_height,n.region_mgmt.origin_y,n.region_mgmt.origin_start_direction),n.is_selected=r.vertex.is_selected,n.is_nearby=r.vertex.is_nearby,r.vertex=n,r.$emit("update",r.vertex);case 9:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(t){Y(i,n,o,a,s,"next",t)}function s(t){Y(i,n,o,a,s,"throw",t)}a(void 0)}))})()}}};var Q=r(2398),K={insert:"head",singleton:!1};L()(Q.Z,K);Q.Z.locals;const J=(0,m.Z)(X,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return t.vertex?r("div",[r("drag",{style:t.vertex.id?{position:"absolute",top:t.vertex[t.yPx]-t.diameter/2+"px",left:t.vertex[t.xPx]-t.diameter/2+"px"}:{position:"relative"},attrs:{containment:"#region",id:"vertex"+t.vertex.id,title:t.vertexName,"drag-after-reset":!t.vertex.id,scale:t.scale,disabled:!!t.isDeploy||t.disabled,diameter:t.diameter},on:{click:t.onClick,drag:function(e){return t.$emit("drag",{x:e.x,y:e.y,vertex_id:t.vertex.id})},stop:t.onStop,mouseup:function(e){return t.$emit("mouseup")}}},[r("div",{staticClass:"vertex-point",class:{"disappear-vertex-point":t.vertex.id&&!t.vertex.is_show}},[r("span",{directives:[{name:"show",rawName:"v-show",value:t.vertex.nearby_vertex_length,expression:"vertex.nearby_vertex_length"}],staticClass:"badge bg-red vertex-badge"},[t._v(t._s(t.vertex.nearby_vertex_length+1))]),t._v(" "),t.vertex.id?t.vertex.is_selected||t.vertex.is_nearby?r("img",{staticClass:"vertex-point",attrs:{src:"/img/vertex/"+t.vertex.vertex_type_id+"_selected.png?v=202401101740",alt:"站點"}}):r("img",{staticClass:"vertex-point",attrs:{src:"/img/vertex/"+t.vertex.vertex_type_id+".png?v=202401101740",alt:"站點"}}):r("img",{staticClass:"vertex-point",attrs:{src:"/img/vertex/"+t.vertexTypeId+".png?v=202401101740",alt:"站點"}})]),t._v(" "),r("context-menu",{directives:[{name:"show",rawName:"v-show",value:t.vertex.id&&!t.isDeploy,expression:"vertex.id && !isDeploy"}],staticClass:"right-menu",attrs:{width:"100px"}},[r("context-menu-item",{staticClass:"right-menu-item",attrs:{label:"複製"},on:{click:function(e){return t.$emit("copy",t.vertex.id)}}},[r("div",[r("i",{staticClass:"glyphicon glyphicon-copy"}),t._v(" "),r("span",[t._v("複製")])])]),t._v(" "),r("context-menu-item",{staticClass:"right-menu-item",attrs:{label:"刪除"},on:{click:function(e){return t.$emit("delete",t.vertex.id)}}},[r("div",[r("i",{staticClass:"glyphicon glyphicon-trash"}),t._v(" "),r("span",[t._v("刪除")])])])],1)],1)],1):t._e()}),[],!1,null,"00bcc902",null).exports;var tt=r(9755),et=r.n(tt);const rt={name:"VertexConfigurationTypeSelect",props:{value:{type:String},disabled:{type:Boolean,default:!1},placeholder:{type:String,default:"請選擇自訂屬性"},color:{type:String,default:"theme-blue"},tags:{type:Boolean,default:!1},filterVertexConfigurationTypes:{type:Array,default:function(){return[]}},vertexConfigurationTypes:{type:Array,default:function(){return[]}},vertexConfigurationType:{type:Object},vertexConfigurations:{type:Array,default:function(){return[]}}},watch:{value:function(){this.refresh()},vertexConfigurationTypes:function(t){var e=this,r=a().find(t,(function(t){return t.vertex_configuration_column.name==e.value}));r?this.$emit("update:vertexConfigurationType",r):this.$emit("update:vertexConfigurationType",null),this.refresh()}},computed:{showValue:function(){var t=this;return!a().find(this.filterVertexConfigurationTypes,(function(e){return e.vertex_configuration_column.name==t.value}))}},mounted:function(){this.init(),this.setSelect2Val()},methods:{init:function(){var t=et()(this.$refs.select2),e=this;t.select2({tags:this.tags,minimumResultsForSearch:0,language:{noResults:function(){return"查無資料"}}}),t.on("select2:select",(function(t){e.setVal()})),t.on("select2:unselect",(function(t){e.setVal()}))},setSelect2Val:function(){var t=this;this.$nextTick((function(){et()(t.$refs.select2).val([t.value]),et()(t.$refs.select2).trigger("change")}))},setVal:function(){var t=et()(this.$refs.select2).select2("data");if(0==t.length)this.$emit("input",null);else{if(!!a().find(this.vertexConfigurationTypes,(function(e){return e.vertex_configuration_column&&1==e.vertex_configuration_column.is_unique&&e.vertex_configuration_column.name==t[0].id})))if(a().filter(this.vertexConfigurations,(function(e){return e.type==t[0].id})).length>1)return this.$toast.warn({title:"警告訊息",message:"".concat(t[0].id,"已存在，該欄位不能重複！")}),void this.setSelect2Val();this.$emit("input",t[0].id);var e=a().find(this.vertexConfigurationTypes,(function(e){return e.vertex_configuration_column.name==t[0].id}));e?this.$emit("update:vertexConfigurationType",e):this.$emit("update:vertexConfigurationType",null)}this.$emit("change")},refresh:function(){et()(this.$refs.select2).val(null).trigger("change"),et()(this.$refs.select2).select2("destroy"),this.init(),this.setSelect2Val()}}};const nt=(0,m.Z)(rt,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{class:[t.color]},[r("select",{ref:"select2",staticClass:"select2 form-control",attrs:{"data-placeholder":t.placeholder,disabled:t.disabled}},[r("option",{domProps:{value:null}},[t._v(t._s(t.placeholder))]),t._v(" "),t._l(t.filterVertexConfigurationTypes,(function(e){return r("option",{domProps:{value:e.vertex_configuration_column.name}},[t._v("\n            "+t._s(e.vertex_configuration_column.name)+"\n        ")])})),t._v(" "),t.value&&t.showValue?r("option",{domProps:{value:t.value}},[t._v("\n            "+t._s(t.value)+"\n        ")]):t._e()],2)])}),[],!1,null,null,null).exports;var ot=r(7446);function it(t){return it="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},it(t)}function at(){at=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function c(t,e,r,n){var o=e&&e.prototype instanceof d?e:d,i=Object.create(o.prototype),a=new C(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return L()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var s=b(a,r);if(s){if(s===u)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=l(t,e,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===u)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}(t,r,a),i}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var u={};function d(){}function h(){}function f(){}var p={};s(p,o,(function(){return this}));var m=Object.getPrototypeOf,v=m&&m(m(k([])));v&&v!==e&&r.call(v,o)&&(p=v);var g=f.prototype=d.prototype=Object.create(p);function y(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function _(t,e){function n(o,i,a,s){var c=l(t[o],t,i);if("throw"!==c.type){var u=c.arg,d=u.value;return d&&"object"==it(d)&&r.call(d,"__await")?e.resolve(d.__await).then((function(t){n("next",t,a,s)}),(function(t){n("throw",t,a,s)})):e.resolve(d).then((function(t){u.value=t,a(u)}),(function(t){return n("throw",t,a,s)}))}s(c.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function b(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,b(t,e),"throw"===e.method))return u;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var n=l(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,u;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,u):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,u)}function x(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function w(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function C(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(x,this),this.reset(!0)}function k(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:L}}function L(){return{value:void 0,done:!0}}return h.prototype=f,s(g,"constructor",f),s(f,"constructor",h),h.displayName=s(f,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===h||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,f):(t.__proto__=f,s(t,a,"GeneratorFunction")),t.prototype=Object.create(g),t},t.awrap=function(t){return{__await:t}},y(_.prototype),s(_.prototype,i,(function(){return this})),t.AsyncIterator=_,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new _(c(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},y(g),s(g,a,"Generator"),s(g,o,(function(){return this})),s(g,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=k,C.prototype={constructor:C,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(w),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=r.call(i,"catchLoc"),c=r.call(i,"finallyLoc");if(s&&c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,u):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),u},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),w(r),u}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;w(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:k(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),u}},t}function st(t,e,r,n,o,i,a){try{var s=t[i](a),c=s.value}catch(t){return void r(t)}s.done?e(c):Promise.resolve(c).then(n,o)}function ct(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){st(i,n,o,a,s,"next",t)}function s(t){st(i,n,o,a,s,"throw",t)}a(void 0)}))}}const lt={name:"EdgeConfigurationTypeSelect",props:{value:{type:String},disabled:{type:Boolean,default:!1},placeholder:{type:String,default:function(){return"請選擇自訂屬性"}},color:{type:String,default:"theme-blue"},tags:{type:Boolean,default:!1},edgeConfigurationTypes:{type:Array,default:function(){return[]}},filterEdgeConfigurationTypes:{type:Array,default:function(){return[]}},edgeConfigurationType:{type:Object}},watch:{value:function(){this.refresh()},edgeConfigurationTypes:function(){var t=this,e=a().find(this.edgeConfigurationTypes,(function(e){return e.name==t.value}));e?this.$emit("update:edgeConfigurationType",e):this.$emit("update:edgeConfigurationType",null),this.refresh()}},computed:{showValue:function(){var t=this;return!a().find(this.types,(function(e){return e.name==t.value}))}},data:function(){return{loading:!0}},mounted:function(){var t=this;return ct(at().mark((function e(){return at().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!=t.filterEdgeConfigurationTypes.length){e.next=4;break}return t.loading=!0,e.next=4,t.fetchData();case 4:t.loading=!1,t.init(),t.setSelect2Val();case 7:case"end":return e.stop()}}),e)})))()},methods:{init:function(){var t=et()(this.$refs.select2),e=this;t.select2({tags:!0,minimumResultsForSearch:0,language:{noResults:function(){return"查無資料"}}}),t.on("select2:select",(function(t){e.setVal()})),t.on("select2:unselect",(function(t){e.setVal()}))},fetchData:function(){var t=this;return ct(at().mark((function e(){var r,n;return at().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,o().get("/api/edgeConfigurationTypes");case 3:0==(r=(r=e.sent).data).status&&(n=r.data,t.$emit("update:edgeConfigurationTypes",n.edgeConfigurationTypes)),e.next=12;break;case 8:return e.prev=8,e.t0=e.catch(0),e.next=12,t.guestRedirectHome(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,8]])})))()},setSelect2Val:function(){var t=this;this.$nextTick((function(){et()(t.$refs.select2).val([t.value]),et()(t.$refs.select2).trigger("change")}))},setVal:function(){var t=et()(this.$refs.select2).select2("data");if(0==t.length)this.$emit("input",null);else{this.$emit("input",t[0].id);var e=a().find(this.edgeConfigurationTypes,(function(e){return e.name==t[0].id}));e?this.$emit("update:edgeConfigurationType",e):this.$emit("update:edgeConfigurationType",null)}this.$emit("change")},refresh:function(){et()(this.$refs.select2).val(null).trigger("change"),this.init(),this.setSelect2Val()}}};const ut=(0,m.Z)(lt,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{class:[t.color]},[r("select",{ref:"select2",staticClass:"select2 form-control",attrs:{"data-placeholder":t.placeholder,disabled:t.disabled||t.loading}},[r("option",{domProps:{value:null}},[t._v(t._s(t.placeholder))]),t._v(" "),t._l(t.filterEdgeConfigurationTypes,(function(e){return r("option",{domProps:{value:e.name}},[t._v("\n            "+t._s(e.name)+"\n        ")])})),t._v(" "),t.value&&t.showValue?r("option",{domProps:{value:t.value}},[t._v("\n            "+t._s(t.value)+"\n        ")]):t._e()],2)])}),[],!1,null,null,null).exports;var dt=r(2059);const ht={name:"RailSwitchView",inject:["$validator"],props:{value:{type:Object},index:{type:Number}},watch:{dataObj:{handler:function(t){t.switch&&t.angle?this.$emit("input",t):this.$emit("input",null)},deep:!0}},data:function(){return{dataObj:{switch:null,angle:null}}},created:function(){this.value?this.dataObj=this.value:this.dataObj={switch:null,angle:null}}};const ft=(0,m.Z)(ht,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("div",{staticClass:"form-group"},[r("label",{staticClass:"control-label col-md-4",staticStyle:{"font-size":"12pt"}},[t._v("switch:")]),t._v(" "),r("div",{staticClass:"col-md-8"},[r("input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"},{name:"model",rawName:"v-model",value:t.dataObj.switch,expression:"dataObj.switch"}],staticClass:"form-control input-sm",attrs:{name:"custom-"+t.index+"_switch"},domProps:{value:t.dataObj.switch},on:{input:function(e){e.target.composing||t.$set(t.dataObj,"switch",e.target.value)}}}),t._v(" "),r("span",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("custom-"+t.index+"_switch:required"),expression:"errors.has(`custom-${index}_switch:required`)"}],staticClass:"help is-danger"},[t._v('請填寫"switch"')])])]),t._v(" "),r("div",{staticClass:"form-group"},[r("label",{staticClass:"control-label col-md-4",staticStyle:{"font-size":"12pt"}},[t._v("angle:")]),t._v(" "),r("div",{staticClass:"col-md-8"},[r("input",{directives:[{name:"validate",rawName:"v-validate",value:"required|min_value:-360|max_value:360",expression:"'required|min_value:-360|max_value:360'"},{name:"model",rawName:"v-model",value:t.dataObj.angle,expression:"dataObj.angle"}],staticClass:"form-control input-sm",attrs:{name:"custom-"+t.index+"_angle"},domProps:{value:t.dataObj.angle},on:{input:function(e){e.target.composing||t.$set(t.dataObj,"angle",e.target.value)}}}),t._v(" "),r("span",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("custom-"+t.index+"_angle:required"),expression:"errors.has(`custom-${index}_angle:required`)"}],staticClass:"help is-danger"},[t._v('請填寫"angle"')]),t._v(" "),r("span",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("custom-"+t.index+"_angle:min_value"),expression:"errors.has(`custom-${index}_angle:min_value`)"}],staticClass:"help is-danger"},[t._v("請填寫合理的角度(整數)")]),t._v(" "),r("span",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("custom-"+t.index+"_angle:max_value"),expression:"errors.has(`custom-${index}_angle:max_value`)"}],staticClass:"help is-danger"},[t._v("請填寫合理的角度(整數)")])])])])}),[],!1,null,"3f60b7b0",null).exports;function pt(t){return pt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},pt(t)}function mt(){mt=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function c(t,e,r,n){var o=e&&e.prototype instanceof d?e:d,i=Object.create(o.prototype),a=new C(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return L()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var s=b(a,r);if(s){if(s===u)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=l(t,e,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===u)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}(t,r,a),i}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var u={};function d(){}function h(){}function f(){}var p={};s(p,o,(function(){return this}));var m=Object.getPrototypeOf,v=m&&m(m(k([])));v&&v!==e&&r.call(v,o)&&(p=v);var g=f.prototype=d.prototype=Object.create(p);function y(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function _(t,e){function n(o,i,a,s){var c=l(t[o],t,i);if("throw"!==c.type){var u=c.arg,d=u.value;return d&&"object"==pt(d)&&r.call(d,"__await")?e.resolve(d.__await).then((function(t){n("next",t,a,s)}),(function(t){n("throw",t,a,s)})):e.resolve(d).then((function(t){u.value=t,a(u)}),(function(t){return n("throw",t,a,s)}))}s(c.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function b(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,b(t,e),"throw"===e.method))return u;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var n=l(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,u;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,u):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,u)}function x(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function w(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function C(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(x,this),this.reset(!0)}function k(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:L}}function L(){return{value:void 0,done:!0}}return h.prototype=f,s(g,"constructor",f),s(f,"constructor",h),h.displayName=s(f,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===h||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,f):(t.__proto__=f,s(t,a,"GeneratorFunction")),t.prototype=Object.create(g),t},t.awrap=function(t){return{__await:t}},y(_.prototype),s(_.prototype,i,(function(){return this})),t.AsyncIterator=_,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new _(c(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},y(g),s(g,a,"Generator"),s(g,o,(function(){return this})),s(g,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=k,C.prototype={constructor:C,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(w),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=r.call(i,"catchLoc"),c=r.call(i,"finallyLoc");if(s&&c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,u):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),u},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),w(r),u}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;w(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:k(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),u}},t}function vt(t,e,r,n,o,i,a){try{var s=t[i](a),c=s.value}catch(t){return void r(t)}s.done?e(c):Promise.resolve(c).then(n,o)}function gt(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){vt(i,n,o,a,s,"next",t)}function s(t){vt(i,n,o,a,s,"throw",t)}a(void 0)}))}}const yt={name:"VehicleRouteListSelect",props:{value:{type:[Number,String]},valueProp:{type:String,default:"id"},disabled:{type:Boolean,default:!1},placeholder:{type:String,default:function(){return"請選擇"}},multiple:{type:Boolean,default:!1},color:{type:String,default:"theme-blue"},allowClear:{type:Boolean,default:!1},filter:{type:Array,default:function(){return[]}},isAutoLoad:{type:Boolean,default:!0},routeName:{type:String,default:null},backgroundFileUrl:{type:String},group:{type:Number,default:null},filterSameRoutName:{type:Boolean,default:!0}},computed:{filterVehicleRoutes:function(){var t=this;return a().filter(this.vehicleRoutes,(function(e){return!t.filter.contains(e.route_name)}))},routeNames:function(){return a().groupBy(this.filterVehicleRoutes,"route_name")}},watch:{value:function(t){this.multiple?et()(this.$refs.select2).select2("data",a().map(t,(function(t){return t.route_name}))):et()(this.$refs.select2).select2("data",[t]),this.refresh()},filterVehicleRoutes:function(){this.refresh()}},data:function(){return{vehicleRoutes:[]}},mounted:function(){var t=this;return gt(mt().mark((function e(){var r,n;return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t,!t.isAutoLoad){e.next=4;break}return e.next=4,t.fetchData();case 4:t.filterSameRoutName&&(n=a().find(t.vehicleRoutes,(function(t){return t[r.valueProp]==r.value})))&&(t.$emit("update:routeName",n.route_name),t.vehicleRoutes=a().filter(t.vehicleRoutes,(function(t){return t.route_name==n.route_name}))),t.refresh();case 6:case"end":return e.stop()}}),e)})))()},methods:{init:function(){var t=et()(this.$refs.select2),e=this;t.select2({minimumResultsForSearch:5,allowClear:e.allowClear,language:{noResults:function(){return"查無資料"}}}),t.on("select2:select",(function(t){e.setVal()})),t.on("select2:unselect",(function(t){e.setVal()}))},fetchData:function(t){var e=this;return gt(mt().mark((function r(){var n,i;return mt().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,o().get("/api/vehicleRoutes",{params:{route_name:t,group:e.group}});case 3:0==(n=(n=r.sent).data).status&&(i=n.data,e.vehicleRoutes=i.vehicleRoutes,e.refresh()),r.next=11;break;case 8:r.prev=8,r.t0=r.catch(0),e.guestRedirectHome(r.t0);case 11:case"end":return r.stop()}}),r,null,[[0,8]])})))()},setSelect2Val:function(){var t=this;this.$nextTick((function(){t.multiple?et()(t.$refs.select2).val(a().map(t.value,(function(t){return t.route_name}))):et()(t.$refs.select2).val([t.value]),et()(t.$refs.select2).trigger("change")}))},setVal:function(){var t=this,e=et()(this.$refs.select2).select2("data");if(this.multiple)this.$emit("input",a().map(e,(function(t){return{route_name:parseInt(t.id)}})));else if(0!=e.length){"id"==t.valueProp?this.$emit("input",parseInt(e[0].id)):this.$emit("input",e[0].id);var r=a().find(this.vehicleRoutes,(function(r){return r[t.valueProp]==e[0].id}));this.$emit("update:backgroundFileUrl",r.background_file_url)}else this.$emit("input",null),this.$emit("update:backgroundFileUrl",null)},refresh:function(){this.init(),this.setSelect2Val()}}};const _t={name:"ConnectionRegionSelect",components:{VehicleRouteListSelect:(0,m.Z)(yt,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{class:[t.color]},[r("select",{ref:"select2",staticClass:"form-control select2",staticStyle:{width:"100%"},attrs:{multiple:t.multiple,"data-placeholder":t.placeholder,disabled:t.disabled}},t._l(t.routeNames,(function(e,n){return r("optgroup",{attrs:{label:n}},t._l(e,(function(e){return r("option",{domProps:{value:e[t.valueProp]}},[t._v("\n                "+t._s(e.region_id)+"\n            ")])})),0)})),0)])}),[],!1,null,null,null).exports,RegionMgmtListSelect:g.Z},props:{value:{type:String,default:null},disabled:{type:Boolean,default:!1},routeId:{type:Number,default:null},projectId:{type:Number,default:null}},watch:{dataStr:function(){this.onChange()}},data:function(){return{dataStr:null}},created:function(){this.value?this.dataStr=this.value:(this.dataStr=null,this.onChange())},methods:{onChange:function(){this.$emit("input",this.dataStr)}}};const bt=(0,m.Z)(_t,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[t.routeId?r("vehicle-route-list-select",{attrs:{"value-prop":"region_id",group:1,"filter-same-rout-name":!1},model:{value:t.dataStr,callback:function(e){t.dataStr=e},expression:"dataStr"}}):r("region-mgmt-list-select",{attrs:{"project-id":t.projectId,"single-select2":!0},model:{value:t.dataStr,callback:function(e){t.dataStr=e},expression:"dataStr"}})],1)}),[],!1,null,null,null).exports;function xt(t){return xt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},xt(t)}function wt(){wt=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function c(t,e,r,n){var o=e&&e.prototype instanceof d?e:d,i=Object.create(o.prototype),a=new C(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return L()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var s=b(a,r);if(s){if(s===u)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=l(t,e,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===u)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}(t,r,a),i}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var u={};function d(){}function h(){}function f(){}var p={};s(p,o,(function(){return this}));var m=Object.getPrototypeOf,v=m&&m(m(k([])));v&&v!==e&&r.call(v,o)&&(p=v);var g=f.prototype=d.prototype=Object.create(p);function y(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function _(t,e){function n(o,i,a,s){var c=l(t[o],t,i);if("throw"!==c.type){var u=c.arg,d=u.value;return d&&"object"==xt(d)&&r.call(d,"__await")?e.resolve(d.__await).then((function(t){n("next",t,a,s)}),(function(t){n("throw",t,a,s)})):e.resolve(d).then((function(t){u.value=t,a(u)}),(function(t){return n("throw",t,a,s)}))}s(c.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function b(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,b(t,e),"throw"===e.method))return u;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var n=l(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,u;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,u):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,u)}function x(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function w(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function C(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(x,this),this.reset(!0)}function k(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:L}}function L(){return{value:void 0,done:!0}}return h.prototype=f,s(g,"constructor",f),s(f,"constructor",h),h.displayName=s(f,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===h||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,f):(t.__proto__=f,s(t,a,"GeneratorFunction")),t.prototype=Object.create(g),t},t.awrap=function(t){return{__await:t}},y(_.prototype),s(_.prototype,i,(function(){return this})),t.AsyncIterator=_,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new _(c(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},y(g),s(g,a,"Generator"),s(g,o,(function(){return this})),s(g,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=k,C.prototype={constructor:C,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(w),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=r.call(i,"catchLoc"),c=r.call(i,"finallyLoc");if(s&&c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,u):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),u},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),w(r),u}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;w(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:k(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),u}},t}function Ct(t,e,r,n,o,i,a){try{var s=t[i](a),c=s.value}catch(t){return void r(t)}s.done?e(c):Promise.resolve(c).then(n,o)}function kt(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){Ct(i,n,o,a,s,"next",t)}function s(t){Ct(i,n,o,a,s,"throw",t)}a(void 0)}))}}const Lt={name:"ObjectMgmtListSelect",props:{value:{type:[Array,String]},disabled:{type:Boolean,default:!1},placeholder:{type:String,default:"請選擇載具"},color:{type:String,default:"theme-blue"},multiple:{type:Boolean,default:!1}},watch:{value:function(t){this.multiple?et()(this.$refs.select2).select2("data",a().map(t,(function(t){return t.obj_id}))):et()(this.$refs.select2).select2("data",[t])}},data:function(){return{objectMgmts:[]}},created:function(){var t=this;return kt(wt().mark((function e(){return wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.fetchData();case 2:t.setSelect2Val();case 3:case"end":return e.stop()}}),e)})))()},mounted:function(){var t=et()(this.$refs.select2),e=this;t.select2({minimumResultsForSearch:-1,allowClear:!0}),t.on("select2:select",(function(t){e.setVal()})),t.on("select2:unselect",(function(t){e.setVal()}))},methods:{fetchData:function(){var t=this;return kt(wt().mark((function e(){var r,n;return wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.loading=!0,e.prev=1,e.next=4,o().get("/api/objectMgmts");case 4:0==(r=(r=e.sent).data).status&&(n=r.data,t.objectMgmts=n.objectMgmts),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),t.guestRedirectHome(e.t0);case 12:case"end":return e.stop()}}),e,null,[[1,9]])})))()},setSelect2Val:function(){var t=this;this.$nextTick((function(){t.multiple?et()(t.$refs.select2).val(a().map(t.value,(function(t){return t.obj_uid}))):et()(t.$refs.select2).val([t.value]),et()(t.$refs.select2).trigger("change")}))},setVal:function(){var t=et()(this.$refs.select2).select2("data");this.multiple?this.$emit("input",a().map(t,(function(t){return{obj_uid:t.id}}))):t.length>0?this.$emit("input",t[0].id):this.$emit("input",null),this.$emit("change")}}};const St=(0,m.Z)(Lt,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{class:[t.color]},[r("select",{ref:"select2",staticClass:"form-control select2",staticStyle:{width:"100%"},attrs:{multiple:t.multiple,"data-placeholder":t.placeholder,disabled:t.disabled}},t._l(t.objectMgmts,(function(e){return r("option",{domProps:{value:e.obj_uid}},[t._v("\n            "+t._s(e.obj_id)+"\n        ")])})),0)])}),[],!1,null,null,null).exports;function Et(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,s=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){s=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(s)throw o}}return i}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return Mt(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Mt(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Mt(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}const Ot={name:"EdgeConfigurationListView",inject:["$validator"],components:{EdgeConfigurationTypeSelect:ut,RailSwitchView:ft,ConnectionRegionSelect:bt,ObjectMgmtListSelect:St},props:{value:{type:Array,default:function(){return[]}},vertexTypeId:{type:Number},projectId:{type:Number,default:null}},watch:{edgeConfigurationTypes:function(t){var e=t,r=a().cloneDeep(this.edgeConfigurations);this.edgeConfigurations=a().map(r,(function(t){var r=a().find(e,(function(e){return e.name==t.type}));return t.edge_configuration_type=r||null,t}))},value:function(t){var e=a().map(this.edgeConfigurations,(function(t){return delete(t=a().cloneDeep(t)).edge_configuration_type,t}));if(JSON.stringify(e)!=JSON.stringify(t)){var r=this;this.edgeConfigurations=a().map(t,(function(t){var e=a().find(r.edgeConfigurationTypes,(function(e){return e.name==t.type}));return t.edge_configuration_type=e||null,t}))}},edgeConfigurations:{handler:function(t){var e=a().map(t,(function(t){return delete(t=a().cloneDeep(t)).edge_configuration_type,t}));JSON.stringify(e)!=JSON.stringify(this.value)&&this.$emit("input",e)},deep:!0}},computed:{filterEdgeConfigurationTypes:function(){var t=a().map(this.edgeConfigurations,(function(t){return t.type}));return a().filter(this.edgeConfigurationTypes,(function(e){return 0==e.is_unique||1==e.is_unique&&!t.contains(e.name)}))},connectionRegion:function(){var t=a().find(this.edgeConfigurations,(function(t){return"connection_region"==t.type}));return t?t.data:null}},data:function(){return{edgeConfigurations:[],edgeConfigurationTypes:[]}},created:function(){var t=this;this.edgeConfigurations=a().map(this.value,(function(e){var r=a().find(t.edgeConfigurationTypes,(function(t){return t.name==e.type}));return e.edge_configuration_type=r||null,e}))},methods:{addEdgeConfiguration:function(){this.edgeConfigurations.push({id:this.generateUUID(),type:null,data:null,edge_configuration_type:null})},deleteEdgeConfiguration:function(t){confirm("確定要刪除第「".concat(t+1,"」筆？"))&&this.edgeConfigurations.splice(t,1)},validate:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r={};t&&t.edge_configuration_type&&t.edge_configuration_type.validate&&(r=JSON.parse(t.edge_configuration_type.validate)),r.required=!0;for(var n=0,o=Object.entries(e);n<o.length;n++){var i=Et(o[n],2),a=i[0],s=i[1];r[a]=s}return r}}};var Pt=r(2853),jt={insert:"head",singleton:!1};L()(Pt.Z,jt);Pt.Z.locals;const Nt=(0,m.Z)(Ot,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"form-group"},[r("label",{staticClass:"col-md-3 control-label"},[t._v("自訂屬性  ")]),t._v(" "),r("div",{staticClass:"col-md-9"},[r("table",{staticClass:"table table-bordered table-hover"},[t._m(0),t._v(" "),r("tbody",[t._l(t.edgeConfigurations,(function(e,n){return r("tr",[r("td",{staticClass:"text-center",staticStyle:{width:"60px"}},[t._v(t._s(n+1))]),t._v(" "),r("td",{staticClass:"text-center",staticStyle:{width:"160px"}},[r("edge-configuration-type-select",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{name:"type-"+n,tags:!0,"edge-configuration-types":t.edgeConfigurationTypes,"filter-edge-configuration-types":t.filterEdgeConfigurationTypes,"edge-configuration-type":e.edge_configuration_type},on:{change:function(t){e.data=null},"update:edgeConfigurationTypes":function(e){t.edgeConfigurationTypes=e},"update:edge-configuration-types":function(e){t.edgeConfigurationTypes=e},"update:edgeConfigurationType":function(r){return t.$set(e,"edge_configuration_type",r)},"update:edge-configuration-type":function(r){return t.$set(e,"edge_configuration_type",r)}},model:{value:e.type,callback:function(r){t.$set(e,"type",r)},expression:"row.type"}}),t._v(" "),t.errors.has("type-"+n+":required")?r("span",{staticClass:"help is-danger"},[t._v("請選擇屬性")]):t._e()],1),t._v(" "),r("td",[e.edge_configuration_type?["rail-switch-view"==e.edge_configuration_type.view_type?r("rail-switch-view",{staticClass:"switch-btn",attrs:{index:n},model:{value:e.data,callback:function(r){t.$set(e,"data",r)},expression:"row.data"}}):"input-text"==e.edge_configuration_type.view_type?r("input",{directives:[{name:"model",rawName:"v-model",value:e.data,expression:"row.data"},{name:"validate",rawName:"v-validate",value:t.validate(e),expression:"validate(row)"}],staticClass:"form-control input-sm",attrs:{name:"custom-"+n},domProps:{value:e.data},on:{input:function(r){r.target.composing||t.$set(e,"data",r.target.value)}}}):"connection-region-select"==e.edge_configuration_type.view_type?r("connection-region-select",{directives:[{name:"validate",rawName:"v-validate",value:t.validate(e),expression:"validate(row)"}],attrs:{name:"custom-"+n,"project-id":t.projectId},model:{value:e.data,callback:function(r){t.$set(e,"data",r)},expression:"row.data"}}):"object-mgmt-list-select"==e.edge_configuration_type.view_type?r("object-mgmt-list-select",{directives:[{name:"validate",rawName:"v-validate",value:t.validate(e),expression:"validate(row)"}],attrs:{name:"custom-"+n,"value-prop":"obj_id",placeholder:"請選擇自動門","object-class":"DOOR"},model:{value:e.data,callback:function(r){t.$set(e,"data",r)},expression:"row.data"}}):t._e()]:r("input",{directives:[{name:"model",rawName:"v-model",value:e.data,expression:"row.data"},{name:"validate",rawName:"v-validate",value:t.validate(e),expression:"validate(row)"}],staticClass:"form-control input-sm",attrs:{name:"custom-"+n},domProps:{value:e.data},on:{input:function(r){r.target.composing||t.$set(e,"data",r.target.value)}}}),t._v(" "),r("span",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("custom-"+n+":required"),expression:"errors.has(`custom-${index}:required`)"}],staticClass:"help is-danger"},["connection_region"==e.type?[t._v("請選擇要連接的區域")]:"auto_door"==e.type?[t._v("請填寫自動門")]:[t._v("請填寫內容")]],2),t._v(" "),r("span",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("custom-"+n+":regex"),expression:"errors.has(`custom-${index}:regex`)"}],staticClass:"help is-danger"},[t._v("請輸入整數")])],2),t._v(" "),r("td",{staticClass:"text-center",staticStyle:{width:"60px"}},[r("i",{staticClass:"glyphicon glyphicon-trash cursor-pointer",attrs:{title:"刪除"},on:{click:function(e){return t.deleteEdgeConfiguration(n)}}})])])})),t._v(" "),r("tr",[r("td",{staticClass:"text-center cursor-pointer",attrs:{colspan:"4"},on:{click:t.addEdgeConfiguration}},[r("i",{staticClass:"glyphicon glyphicon-plus-sign cursor-pointer",attrs:{title:"新增"}})])]),t._v(" "),2==t.vertexTypeId?r("tr",[r("td",{attrs:{colspan:"4"}},[r("input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"},{name:"model",rawName:"v-model",value:t.connectionRegion,expression:"connectionRegion"}],attrs:{type:"hidden",name:"connection_region"},domProps:{value:t.connectionRegion},on:{input:function(e){e.target.composing||(t.connectionRegion=e.target.value)}}}),t._v(" "),r("span",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("connection_region:required"),expression:"errors.has(`connection_region:required`)"}],staticClass:"help is-danger"},[t._v("請至少創建一個欲連接區域")])])]):t._e()],2)])])])}),[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("thead",{staticClass:"table-head"},[r("tr",[r("th",{staticClass:"text-center",staticStyle:{width:"60px"}},[t._v("#")]),t._v(" "),r("th",{staticClass:"text-center",staticStyle:{width:"160px"}},[t._v("名稱")]),t._v(" "),r("th",{staticClass:"text-center"},[t._v("內容")]),t._v(" "),r("th",{staticClass:"text-center",staticStyle:{width:"60px"}},[t._v("刪除")])])])}],!1,null,"8c4d4b3e",null).exports;var Tt=r(9010);const $t={name:"SwitchButton",components:{ToggleButton:Tt.ToggleButton},props:{value:{type:String,default:"on"},disabled:{type:Boolean,default:!1},labels:{type:[Boolean,Object],default:!1},width:{type:Number,default:50},height:{type:Number,default:22},fontSize:{type:Number}},watch:{value:function(t){this.dataBool="on"==t}},data:function(){return{dataBool:!0}},created:function(){this.value?"on"==this.value?this.dataBool=!0:this.dataBool=!1:this.$emit("input","on")},methods:{onChange:function(t){this.$emit("input",this.dataBool?"on":"off"),this.$emit("change",t)}}};const It=(0,m.Z)($t,(function(){var t=this,e=t.$createElement;return(t._self._c||e)("toggle-button",{attrs:{sync:!0,labels:t.labels,width:t.width,height:t.height,"font-size":t.fontSize,disabled:t.disabled},on:{change:t.onChange},model:{value:t.dataBool,callback:function(e){t.dataBool=e},expression:"dataBool"}})}),[],!1,null,null,null).exports;function Dt(t){return Dt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Dt(t)}function At(){At=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function c(t,e,r,n){var o=e&&e.prototype instanceof d?e:d,i=Object.create(o.prototype),a=new C(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return L()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var s=b(a,r);if(s){if(s===u)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=l(t,e,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===u)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}(t,r,a),i}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var u={};function d(){}function h(){}function f(){}var p={};s(p,o,(function(){return this}));var m=Object.getPrototypeOf,v=m&&m(m(k([])));v&&v!==e&&r.call(v,o)&&(p=v);var g=f.prototype=d.prototype=Object.create(p);function y(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function _(t,e){function n(o,i,a,s){var c=l(t[o],t,i);if("throw"!==c.type){var u=c.arg,d=u.value;return d&&"object"==Dt(d)&&r.call(d,"__await")?e.resolve(d.__await).then((function(t){n("next",t,a,s)}),(function(t){n("throw",t,a,s)})):e.resolve(d).then((function(t){u.value=t,a(u)}),(function(t){return n("throw",t,a,s)}))}s(c.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function b(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,b(t,e),"throw"===e.method))return u;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var n=l(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,u;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,u):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,u)}function x(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function w(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function C(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(x,this),this.reset(!0)}function k(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:L}}function L(){return{value:void 0,done:!0}}return h.prototype=f,s(g,"constructor",f),s(f,"constructor",h),h.displayName=s(f,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===h||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,f):(t.__proto__=f,s(t,a,"GeneratorFunction")),t.prototype=Object.create(g),t},t.awrap=function(t){return{__await:t}},y(_.prototype),s(_.prototype,i,(function(){return this})),t.AsyncIterator=_,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new _(c(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},y(g),s(g,a,"Generator"),s(g,o,(function(){return this})),s(g,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=k,C.prototype={constructor:C,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(w),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=r.call(i,"catchLoc"),c=r.call(i,"finallyLoc");if(s&&c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,u):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),u},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),w(r),u}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;w(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:k(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),u}},t}function Ft(t,e,r,n,o,i,a){try{var s=t[i](a),c=s.value}catch(t){return void r(t)}s.done?e(c):Promise.resolve(c).then(n,o)}function qt(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){Ft(i,n,o,a,s,"next",t)}function s(t){Ft(i,n,o,a,s,"throw",t)}a(void 0)}))}}const Rt={name:"EdgeModal",$_veeValidate:{validator:"new"},components:{SwitchButton:It,EdgeConfigurationListView:Nt,VertexListSelect:dt.Z,ClipLoader:h.Z,EdgeConfigurationTypeSelect:ut},props:{value:{type:Boolean,default:!1},isDeploy:{type:Number,default:0},vertexTypeId:{type:Number},vertices:{type:Array,default:function(){return[]}},edge:{type:Object},projectId:[Number,String],regionMgmtId:[Number,String]},computed:{hasConnectionRegion:function(){var t=a().find(this.form.edge_configurations,(function(t){return"connection_region"==t.type}));return!!t},name:function(){this.form.start_vertex.name&&this.form.end_vertex.name?this.form.name="(".concat(this.form.start_vertex.name,",").concat(this.form.end_vertex.name,")"):this.form.name=null}},watch:{value:function(t){this.showModal=t,this.isDeploy&&(t?this.onShowModal():this.onHideModal())},"form.start_vertex_id":{handler:function(t){t==this.form.end_vertex_id&&(this.form.end_vertex_id=null)},deep:!0},"form.end_vertex_id":{handler:function(t){t==this.form.start_vertex_id&&(this.form.start_vertex_id=null)},deep:!0},name:function(t){this.form.name=t}},data:function(){return{sending:!1,showModal:this.value,form:{id:null,name:null,region_mgmt_id:null,direction:0,start_vertex_id:null,start_vertex:{name:null},end_vertex_id:null,end_vertex:{region_mgmt_id:null,name:null},enable:1,edge_configurations:[],region_mgmt:{project_id:null}},mqttCommandId:null}},destroyed:function(){this.isDeploy&&window.Echo.leave("edges.".concat(this.form.id)),this.mqttCommandId&&window.Echo.leave("mqttCommands.".concat(this.mqttCommandId))},methods:{onShowModal:function(){var t=this;return qt(At().mark((function e(){var r;return At().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.resetFormValidate(),t.isDeploy){e.next=5;break}t.form=a().cloneDeep(t.edge),e.next=8;break;case 5:return t.form.id=t.edge.id,e.next=8,t.fetchData();case 8:t.isDeploy&&(r=t,window.Echo.private("edges.".concat(t.form.id)).listen("DoorMgmtUpdated",(function(t){if(a().find(r.form.edge_configurations,["type","auto_door"])){var e=t.doorMgmt;e&&e.door_status&&(e.door_status.door_status_ctrl="open"==e.door_status.door_status?"on":"off"),e.edge_id==r.form.id?r.$set(r.form,"door_mgmt",e):r.$set(r.form,"door_mgmt",null)}})).listen("DoorStatusUpdated",(function(t){var e=t.doorStatus,n=e.door_mgmt;if(n)delete e.door_mgmt;else{if(!r.form.door_mgmt)return;n=r.form.door_mgmt}n.door_status=e,n.door_status.door_status_ctrl="open"==n.door_status.door_status?"on":"off",r.$set(r.form,"door_mgmt",n)})));case 9:case"end":return e.stop()}}),e)})))()},onHideModal:function(){this.resetForm(),this.isDeploy&&window.Echo.leave("edges.".concat(this.form.id)),this.$emit("input",!1),this.$emit("close")},fetchData:function(){var t=this;return qt(At().mark((function e(){var r,n,i;return At().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,o().get("/api/edges/".concat(t.form.id));case 3:0==(r=(r=e.sent).data).status&&(n=r.data,(i=a().cloneDeep(n.edge)).door_mgmt&&i.door_mgmt.door_status&&(i.door_mgmt.door_status.door_status_ctrl="open"==i.door_mgmt.door_status.door_status?"on":"off"),t.form=i),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),t.guestRedirectHome(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))()},submit:function(){var t=this;return qt(At().mark((function e(){return At().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.validate();case 2:if(e.sent){e.next=5;break}return e.abrupt("return");case 5:t.form.id||(t.form.id=t.generateUUID()),t.$emit("update",t.form),t.$emit("close"),t.showModal=!1;case 9:case"end":return e.stop()}}),e)})))()},resetForm:function(){this.form={id:null,name:null,region_mgmt_id:null,direction:0,start_vertex_id:null,end_vertex_id:null,start_vertex:{name:null},end_vertex:{region_mgmt_id:null,name:null},enable:1,edge_configurations:[],region_mgmt:{project_id:null}},this.resetFormValidate()},addEdgeConfigure:function(){this.form.edge_configurations.push({id:null,type:null,data:null})},initEdgeDefault:function(t){"rail_switch"==t.type?t.data={switch:null,angle:null}:t.data=null},deleteRow:function(t,e){confirm("確定要刪除第「".concat(e+1,"」筆資料？"))&&this.form.edge_configurations.splice(e,1)},updateEnable:function(){var t=this;return qt(At().mark((function e(){return At().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o().patch("/api/edges/".concat(t.form.id),{enable:t.form.enable});case 2:0==e.sent.data.status&&t.$emit("update",t.form);case 5:case"end":return e.stop()}}),e)})))()},submitMqttCommand:function(t,e){var r=this;return qt(At().mark((function n(){var i,a;return At().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,r.sending=!0,n.next=4,o().post("/api/mqttCommands",{mqtt_command_type_id:30,door_id:t,action:e,region_mgmt_id:r.form.region_mgmt_id});case 4:0==(i=(i=n.sent).data).status&&(r.mqttCommandId&&window.Echo.leave("mqttCommands.".concat(r.mqttCommandId)),a=i.data,r.mqttCommandId=a.mqttCommand.id,window.Echo.private("mqttCommands.".concat(r.mqttCommandId)).listen("MqttCommandUpdated",(function(t){var n=r,o=JSON.parse(t.mqttCommand.receive_command),i=o.reply.condition,a=o.reply.description;"accepted"==i?n.$toast.success({title:"成功訊息",message:a}):(n.form.door_mgmt.door_status.door_status_ctrl="open"==e?"off":"on",n.$toast.error({title:"錯誤訊息",message:a})),n.sending=!1}))),n.next=12;break;case 9:n.prev=9,n.t0=n.catch(0),r.guestRedirectHome(n.t0);case 12:case"end":return n.stop()}}),n,null,[[0,9]])})))()},onSwitchButtonChange:function(t,e){e.value?this.submitMqttCommand(t,"open"):this.submitMqttCommand(t,"close")}}};var Gt=r(1646),zt={insert:"head",singleton:!1};L()(Gt.Z,zt);Gt.Z.locals;const Vt=(0,m.Z)(Rt,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[t.isDeploy&&t.showModal?[r("div",{staticStyle:{position:"absolute",top:"0",left:"0","min-width":"450px","max-width":"450px"}},[r("div",{staticClass:"box box-default",staticStyle:{"margin-bottom":"0"}},[t._m(0),t._v(" "),r("div",{staticClass:"box-body",staticStyle:{display:"block"}},[r("div",{staticClass:"form-horizontal"},[r("div",{staticClass:"form-group"},[r("label",{staticClass:"col-md-3 control-label",staticStyle:{"font-size":"12pt"}},[t._v("名稱：")]),t._v(" "),r("div",{staticClass:"col-md-9",staticStyle:{"font-size":"12pt"}},[r("p",{staticClass:"form-control-static"},[t._v(t._s(t.form.name))])])]),t._v(" "),r("div",{staticClass:"form-group"},[r("label",{staticClass:"col-md-3 control-label",staticStyle:{"font-size":"12pt"}},[t._v("起點：")]),t._v(" "),r("div",{staticClass:"col-md-9",staticStyle:{"font-size":"12pt"}},[r("p",{staticClass:"form-control-static"},[t._v(t._s(t.form.start_vertex.name))])])]),t._v(" "),r("div",{staticClass:"form-group"},[r("label",{staticClass:"col-md-3 control-label",staticStyle:{"font-size":"12pt"}},[t._v("終點：")]),t._v(" "),r("div",{staticClass:"col-md-9",staticStyle:{"font-size":"12pt"}},[r("p",{staticClass:"form-control-static"},[t._v(t._s(t.form.end_vertex.name))])])]),t._v(" "),r("div",{staticClass:"form-group"},[r("label",{staticClass:"col-md-3 control-label",staticStyle:{"font-size":"12pt"}},[t._v("方向：")]),t._v(" "),r("div",{staticClass:"col-md-9",staticStyle:{"font-size":"12pt"}},[r("p",{staticClass:"form-control-static"},[t._v(t._s(t.form.direction?"有方向":"無方向"))])])]),t._v(" "),r("div",{staticClass:"form-group"},[r("label",{staticClass:"col-md-3 control-label",staticStyle:{"font-size":"12pt"}},[t._v("啟用狀態：")]),t._v(" "),r("div",{staticClass:"col-md-9",staticStyle:{"font-size":"12pt"}},[r("input",{directives:[{name:"model",rawName:"v-model.number.lazy",value:t.form.enable,expression:"form.enable",modifiers:{number:!0,lazy:!0}}],staticClass:"form-control-static",attrs:{"true-value":1,"false-value":0,type:"checkbox",name:"enable"},domProps:{checked:Array.isArray(t.form.enable)?t._i(t.form.enable,null)>-1:t._q(t.form.enable,1)},on:{change:[function(e){var r=t.form.enable,n=e.target,o=n.checked?1:0;if(Array.isArray(r)){var i=t._n(null),a=t._i(r,i);n.checked?a<0&&t.$set(t.form,"enable",r.concat([i])):a>-1&&t.$set(t.form,"enable",r.slice(0,a).concat(r.slice(a+1)))}else t.$set(t.form,"enable",o)},t.updateEnable]}})])]),t._v(" "),r("div",{staticClass:"form-group"},[r("label",{staticClass:"col-md-3 control-label",staticStyle:{"font-size":"12pt"}},[t._v("自訂屬性：")]),t._v(" "),r("div",{staticClass:"col-md-9",staticStyle:{"font-size":"12pt"}},t._l(t.form.edge_configurations,(function(e,n){return r("div",{key:e.id},[r("span",{staticStyle:{float:"left"}},[t._v(t._s(e.type)+"：")]),t._v(" "),r("span",{staticStyle:{float:"left"}},["rail_switch"==e.type?[r("div",[r("span",{staticClass:"text-right",staticStyle:{"font-size":"12pt"}},[t._v("switch:")]),t._v(" "),r("span",{staticStyle:{"font-size":"12pt","padding-left":"0"}},[t._v(t._s(e.data.switch))])]),t._v(" "),r("div",[r("span",{staticClass:"text-right",staticStyle:{"font-size":"12pt"}},[t._v("angle:")]),t._v(" "),r("span",{staticStyle:{"font-size":"12pt","padding-left":"0"}},[t._v(t._s(e.data.angle))])])]:[r("div",[r("span",{staticStyle:{"font-size":"12pt","padding-left":"0"}},[t._v(t._s(e.data))])])]],2),t._v(" "),r("div",{staticClass:"clearfix"})])})),0)]),t._v(" "),t.form.door_mgmt?r("div",{staticClass:"form-group",staticStyle:{"border-top":"1px solid lightgrey"}},[r("label",{staticClass:"col-md-12",staticStyle:{"margin-top":"10px","padding-left":"18px","padding-right":"10px"}},[t._v(" 自動門狀態")]),t._v(" "),r("div",{staticClass:"col-md-3 btn-group-vertical",staticStyle:{"margin-top":"36px","padding-left":"26px"}},[t.form.door_mgmt.door_status?r("switch-button",{attrs:{labels:{checked:"開門",unchecked:"關門"},"font-size":15,width:75,height:33,disabled:t.sending||!t.form.door_mgmt.enable},on:{change:function(e){return t.onSwitchButtonChange(t.form.door_mgmt.door_id,e)}},model:{value:t.form.door_mgmt.door_status.door_status_ctrl,callback:function(e){t.$set(t.form.door_mgmt.door_status,"door_status_ctrl",e)},expression:"form.door_mgmt.door_status.door_status_ctrl"}}):t._e()],1),t._v(" "),r("div",{staticClass:"col-md-9",staticStyle:{"font-size":"16px","line-height":"1.9"}},[r("div",{staticClass:"col-md-12"},[r("label",{staticClass:"full-line"},[t._v("自動門編號："),r("span",[t._v(" "+t._s(t.form.door_mgmt.door_id))])]),t._v(" "),r("label",{staticClass:"full-line"},[t._v("自動門狀態：\n                                        "),t.form.door_mgmt.door_status?["open"==t.form.door_mgmt.door_status.door_status?r("span",[t._v("已開門")]):"closed"==t.form.door_mgmt.door_status.door_status?r("span",[t._v("已關門")]):"disabled"==t.form.door_mgmt.door_status.door_status?r("span",[t._v("已禁用")]):"disconnected"==t.form.door_mgmt.door_status.door_status?r("span",[t._v("已離線")]):t._e()]:t._e()],2),t._v(" "),r("label",{staticClass:"full-line"},[t._v("接收時間 ：\n                                        "),[t.form.door_mgmt.door_status?r("span",[t._v(t._s(t._f("datetime")(t.form.door_mgmt.door_status.update_ts)))]):t._e()]],2)])])]):t._e()])])])])]:r("modal",{attrs:{size:"lg",footer:!1,backdrop:!1,"append-to-body":!0,keyboard:!1},on:{show:t.onShowModal,hide:t.onHideModal},model:{value:t.showModal,callback:function(e){t.showModal=e},expression:"showModal"}},[t.form.id?r("div",{attrs:{slot:"title"},slot:"title"},[t._v("更新軌道")]):r("div",{attrs:{slot:"title"},slot:"title"},[t._v("創建軌道")]),t._v(" "),r("div",{attrs:{slot:"default"},slot:"default"},[r("form",{staticClass:"form-horizontal",attrs:{novalidate:""},on:{submit:function(e){return e.preventDefault(),t.submit.apply(null,arguments)}}},[r("div",{staticClass:"form-group"},[r("label",{staticClass:"col-md-3 control-label"},[t._v("名稱"),r("span",{staticClass:"is-danger"},[t._v(" *")])]),t._v(" "),r("div",{staticClass:"col-md-9"},[r("p",{staticClass:"form-control-static"},[t._v(t._s(t.form.name))]),t._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:t.form.name,expression:"form.name"},{name:"validate",rawName:"v-validate",value:{required:!0,edge_duplicate:t.form},expression:"{\n                            required: true,\n                            edge_duplicate: form\n                        }"}],attrs:{type:"hidden",name:"name"},domProps:{value:t.form.name},on:{input:function(e){e.target.composing||t.$set(t.form,"name",e.target.value)}}}),t._v(" "),r("span",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("name:edge_duplicate"),expression:"errors.has('name:edge_duplicate')"}],staticClass:"help is-danger"},[t._v("軌道名稱已重複")])])]),t._v(" "),r("div",{staticClass:"form-group"},[r("label",{staticClass:"col-md-3 control-label"},[t._v("起點"),r("span",{staticClass:"is-danger"},[t._v(" *")])]),t._v(" "),r("div",{staticClass:"col-md-9"},[2==t.vertexTypeId?r("p",{staticClass:"form-control-static"},[t._v(t._s(t.form.start_vertex.name))]):r("vertex-list-select",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{name:"start_vertex_id","allow-clear":!0,"region-mgmt-id":t.form.region_mgmt_id,"filter-value-columns":[t.form.end_vertex_id],"vertex-type-id":t.vertexTypeId,"vertex-name":t.form.start_vertex.name,items:t.vertices},on:{"update:vertexName":function(e){return t.$set(t.form.start_vertex,"name",e)},"update:vertex-name":function(e){return t.$set(t.form.start_vertex,"name",e)}},model:{value:t.form.start_vertex_id,callback:function(e){t.$set(t.form,"start_vertex_id",e)},expression:"form.start_vertex_id"}}),t._v(" "),r("span",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("start_vertex_id:required"),expression:"errors.has('start_vertex_id:required')"}],staticClass:"help is-danger"},[t._v("請選擇起點")])],1)]),t._v(" "),r("div",{staticClass:"form-group"},[r("label",{staticClass:"col-md-3 control-label"},[t._v("終點"),r("span",{staticClass:"is-danger"},[t._v(" *")])]),t._v(" "),r("div",{staticClass:"col-md-9"},[r("vertex-list-select",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{name:"end_vertex_id","allow-clear":!0,"region-mgmt-id":t.form.end_vertex.region_mgmt_id,"filter-value-columns":[t.form.start_vertex_id],"vertex-type-id":t.vertexTypeId,"vertex-name":t.form.end_vertex.name,items:t.vertices},on:{"update:vertexName":function(e){return t.$set(t.form.end_vertex,"name",e)},"update:vertex-name":function(e){return t.$set(t.form.end_vertex,"name",e)}},model:{value:t.form.end_vertex_id,callback:function(e){t.$set(t.form,"end_vertex_id",e)},expression:"form.end_vertex_id"}}),t._v(" "),r("span",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("end_vertex_id:required"),expression:"errors.has('end_vertex_id:required')"}],staticClass:"help is-danger"},[t._v("請選擇終點")])],1)]),t._v(" "),r("div",{staticClass:"form-group"},[r("label",{staticClass:"col-md-3 control-label"},[t._v("方向"),r("span",{staticClass:"is-danger"},[t._v(" *")])]),t._v(" "),r("div",{staticClass:"col-md-9"},[r("select",{directives:[{name:"model",rawName:"v-model",value:t.form.direction,expression:"form.direction"}],staticClass:"form-control",on:{change:function(e){var r=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(t.form,"direction",e.target.multiple?r:r[0])}}},[r("option",{domProps:{value:0}},[t._v("無方向  ↔")]),t._v(" "),r("option",{domProps:{value:1}},[t._v("有方向  →")])])])]),t._v(" "),r("edge-configuration-list-view",{attrs:{"vertex-type-id":t.vertexTypeId,"project-id":t.projectId,"region-mgmt-id":t.regionMgmtId},model:{value:t.form.edge_configurations,callback:function(e){t.$set(t.form,"edge_configurations",e)},expression:"form.edge_configurations"}}),t._v(" "),r("div",{staticClass:"text-right"},[r("button",{staticClass:"btn btn-light-green"},[t._v("送出")]),t._v(" "),r("button",{staticClass:"btn btn-default",attrs:{type:"button"},on:{click:function(e){t.showModal=!1}}},[t._v("取消")])])],1)])])],2)}),[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"box-header with-border"},[r("h3",{staticClass:"box-title"},[t._v("軌道資訊")])])}],!1,null,"1862d283",null).exports;const Zt={name:"RemappingView",inject:["$validator"],props:{value:{type:Object,default:function(){return null}},index:{type:Number}},watch:{dataObj:{handler:function(t){t.id&&t.port?this.$emit("input",t):this.$emit("input",null)},deep:!0}},data:function(){return{dataObj:{id:null,port:null}}},created:function(){this.value?this.dataObj=this.value:this.dataObj={id:null,port:null}}};const Bt=(0,m.Z)(Zt,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("div",{staticClass:"form-group"},[r("label",{staticClass:"control-label col-md-4",staticStyle:{"font-size":"12pt"}},[t._v("id:")]),t._v(" "),r("div",{staticClass:"col-md-8"},[r("input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"},{name:"model",rawName:"v-model",value:t.dataObj.id,expression:"dataObj.id"}],staticClass:"form-control input-sm",attrs:{name:"custom-"+t.index+"_remapping_id"},domProps:{value:t.dataObj.id},on:{input:function(e){e.target.composing||t.$set(t.dataObj,"id",e.target.value)}}}),t._v(" "),r("span",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("custom-"+t.index+"_remapping_id:required"),expression:"errors.has(`custom-${index}_remapping_id:required`)"}],staticClass:"help is-danger"},[t._v("請填寫id")])])]),t._v(" "),r("div",{staticClass:"form-group"},[r("label",{staticClass:"control-label col-md-4",staticStyle:{"font-size":"12pt"}},[t._v("port:")]),t._v(" "),r("div",{staticClass:"col-md-8"},[r("input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"},{name:"model",rawName:"v-model",value:t.dataObj.port,expression:"dataObj.port"}],staticClass:"form-control input-sm",attrs:{name:"custom-"+t.index+"_remapping_port"},domProps:{value:t.dataObj.port},on:{input:function(e){e.target.composing||t.$set(t.dataObj,"port",e.target.value)}}}),t._v(" "),r("span",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("custom-"+t.index+"_remapping_port:required"),expression:"errors.has(`custom-${index}_remapping_port:required`)"}],staticClass:"help is-danger"},[t._v("請填寫port")])])])])}),[],!1,null,null,null).exports;const Ht={name:"IntersectionView",inject:["$validator"],props:{value:{type:Object,default:function(){return null}},index:{type:Number}},watch:{dataArr:{handler:function(t){this.dataArr.length>0?this.$emit("input",{give_way_vertices:t}):this.$emit("input",null)},deep:!0}},data:function(){return{dataArr:[]}},created:function(){this.value?this.dataArr=this.value.give_way_vertices:this.dataArr=[null,null,null]},methods:{addIntersection:function(){this.dataArr.length<6&&this.dataArr.push(null)},subIntersection:function(){this.dataArr.length>3&&this.dataArr.pop()}}};const Ut=(0,m.Z)(Ht,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[t._l(t.dataArr,(function(e,n){return r("div",{staticClass:"form-group"},[r("label",{staticClass:"control-label col-md-4",staticStyle:{"font-size":"12pt"}},[t._v("避車點"+t._s(n+1)+":")]),t._v(" "),r("div",{staticClass:"col-md-8"},[r("input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"},{name:"model",rawName:"v-model",value:t.dataArr[n],expression:"dataArr[i]"}],staticClass:"form-control input-sm",attrs:{name:"custom-"+t.index+"_intersection-"+(n+1)},domProps:{value:t.dataArr[n]},on:{input:function(e){e.target.composing||t.$set(t.dataArr,n,e.target.value)}}}),t._v(" "),r("span",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("custom-"+t.index+"_intersection-"+(n+1)+":required"),expression:"errors.has(`custom-${index}_intersection-${i + 1}:required`)"}],staticClass:"help is-danger"},[t._v("請填寫內容")])])])})),t._v(" "),r("div",{staticClass:"col-md-12 text-center"},[r("button",{staticClass:"btn btn-warning",attrs:{type:"button",title:"增加避車點",disabled:t.dataArr&&t.dataArr.length>=6},on:{click:t.addIntersection}},[r("i",{staticClass:"glyphicon glyphicon-plus",staticStyle:{"font-size":"9pt"}})]),t._v(" "),r("button",{staticClass:"btn btn-danger",attrs:{type:"button",title:"減少避車點",disabled:t.dataArr&&t.dataArr.length<=3},on:{click:t.subIntersection}},[r("i",{staticClass:"glyphicon glyphicon-minus",staticStyle:{"font-size":"9pt"}})])])],2)}),[],!1,null,"89a8383c",null).exports;const Yt={name:"GroupNameView",inject:["$validator"],props:{value:{type:String},index:{type:Number}},watch:{dataObj:{handler:function(t){t.group_name&&t.group_count?this.$emit("input","".concat(t.group_name,"_C").concat(t.group_count)):this.$emit("input",null)},deep:!0}},data:function(){return{dataObj:{group_name:null,group_count:null}}},created:function(){if(this.value){var t=this.value.split("_C");this.dataObj={group_name:t[0],group_count:t[1]}}else this.dataObj={group_name:null,group_count:null}}};const Wt=(0,m.Z)(Yt,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("div",{staticClass:"form-group"},[r("label",{staticClass:"control-label col-md-4",staticStyle:{"font-size":"12pt"}},[t._v("群組名稱")]),t._v(" "),r("div",{staticClass:"col-md-8"},[r("input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"},{name:"model",rawName:"v-model",value:t.dataObj.group_name,expression:"dataObj.group_name"}],staticClass:"form-control input-sm",attrs:{name:"custom-"+t.index+"_group_name"},domProps:{value:t.dataObj.group_name},on:{input:function(e){e.target.composing||t.$set(t.dataObj,"group_name",e.target.value)}}}),t._v(" "),r("span",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("custom-"+t.index+"_group_name:required"),expression:"errors.has(`custom-${index}_group_name:required`)"}],staticClass:"help is-danger"},[t._v("請填寫內容")])])]),t._v(" "),r("div",{staticClass:"form-group"},[r("label",{staticClass:"control-label col-md-4",staticStyle:{"font-size":"12pt"}},[t._v("容納車數")]),t._v(" "),r("div",{staticClass:"col-md-8"},[r("input",{directives:[{name:"validate",rawName:"v-validate",value:"required|numeric",expression:"'required|numeric'"},{name:"model",rawName:"v-model",value:t.dataObj.group_count,expression:"dataObj.group_count"}],staticClass:"form-control input-sm",attrs:{name:"custom-"+t.index+"_group_count"},domProps:{value:t.dataObj.group_count},on:{input:function(e){e.target.composing||t.$set(t.dataObj,"group_count",e.target.value)}}}),t._v(" "),r("span",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("custom-"+t.index+"_group_count:required"),expression:"errors.has(`custom-${index}_group_count:required`)"}],staticClass:"help is-danger"},[t._v("請填寫內容")]),t._v(" "),r("span",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("custom-"+t.index+"_group_count:numeric"),expression:"errors.has(`custom-${index}_group_count:numeric`)"}],staticClass:"help is-danger"},[t._v("請填寫數字(整數)")])])]),t._v(" "),r("div",{staticClass:"group-name-info"},[r("div",{staticClass:"form-group"},[r("div",{staticClass:"col-md-8 col-md-offset-4",staticStyle:{"font-size":"14px"}},[t._v("\n                "+t._s(t.dataObj.group_name)),r("span",{directives:[{name:"show",rawName:"v-show",value:t.dataObj.group_name||t.dataObj.group_count,expression:"dataObj.group_name || dataObj.group_count"}]},[t._v("_C")]),t._v(t._s(t.dataObj.group_count)+"\n            ")])])])])}),[],!1,null,"9b91eca0",null).exports;const Xt={name:"AlignmentView",props:{value:{type:String,default:null},disabled:{type:Boolean,default:!1}},data:function(){return{dataStr:null,items:["right","left","front"]}},created:function(){this.value&&this.items.contains(this.value)?this.dataStr=this.value:(this.dataStr=null,this.onChange())},methods:{onChange:function(){this.$emit("input",this.dataStr)}}};const Qt=(0,m.Z)(Xt,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("select",{directives:[{name:"model",rawName:"v-model.lazy",value:t.dataStr,expression:"dataStr",modifiers:{lazy:!0}}],staticClass:"form-control",attrs:{disabled:t.disabled},on:{change:[function(e){var r=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.dataStr=e.target.multiple?r:r[0]},t.onChange]}},[r("option",{domProps:{value:null}},[t._v("請選擇")]),t._v(" "),t._l(t.items,(function(e){return r("option",{domProps:{value:e}},[t._v(t._s(e))])}))],2)}),[],!1,null,null,null).exports;const Kt={name:"SpeedView",props:{value:{type:String,default:null},disabled:{type:Boolean,default:!1}},data:function(){return{dataStr:null,items:["HIGH","NORMAL","LOW"]}},created:function(){this.value&&this.items.contains(this.value)?this.dataStr=this.value:(this.dataStr=null,this.onChange())},methods:{onChange:function(){this.$emit("input",this.dataStr)}}};const Jt=(0,m.Z)(Kt,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("select",{directives:[{name:"model",rawName:"v-model.lazy",value:t.dataStr,expression:"dataStr",modifiers:{lazy:!0}}],staticClass:"form-control",attrs:{disabled:t.disabled},on:{change:[function(e){var r=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.dataStr=e.target.multiple?r:r[0]},t.onChange]}},[r("option",{domProps:{value:null}},[t._v("請選擇")]),t._v(" "),t._l(t.items,(function(e){return r("option",{domProps:{value:e}},[t._v(t._s(e))])}))],2)}),[],!1,null,null,null).exports;const te={name:"RotationCondition",components:{ToggleButton:Tt.ToggleButton},props:{value:{type:String,default:"head_forward_always"},disabled:{type:Boolean,default:!1}},data:function(){return{dataBool:!0}},created:function(){this.dataBool="head_forward_always"==this.value},methods:{onChange:function(){this.$emit("input",this.dataBool?"head_forward_always":null)}}};function ee(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,s=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){s=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(s)throw o}}return i}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return re(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return re(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function re(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}const ne={name:"VertexConfigurationListView",inject:["$validator"],components:{RotationCondition:(0,m.Z)(te,(function(){var t=this,e=t.$createElement;return(t._self._c||e)("toggle-button",{attrs:{sync:!0,disabled:t.disabled},on:{change:t.onChange},model:{value:t.dataBool,callback:function(e){t.dataBool=e},expression:"dataBool"}})}),[],!1,null,null,null).exports,SpeedView:Jt,AlignmentView:Qt,ObjectMgmtListSelect:St,GroupNameView:Wt,IntersectionView:Ut,RemappingView:Bt,SwitchButton:It,VertexConfigurationTypeSelect:nt},props:{value:{type:Array,default:function(){return[]}},vertexConfigurationTypes:{type:Array,default:function(){return[]}},vertex:{type:Object}},watch:{vertexConfigurationTypes:function(t){var e=t,r=a().cloneDeep(this.vertexConfigurations);r=this.initDefaultVertexConfigurations(r,e),r=this.clearNoUsedVertexConfigurations(r,e),this.vertexConfigurations=r},value:function(t){var e=a().map(this.vertexConfigurations,(function(t){return delete(t=a().cloneDeep(t)).vertex_configuration_type,t}));if(JSON.stringify(e)!=JSON.stringify(t)){var r=this;this.vertexConfigurations=a().map(t,(function(t){var e=a().find(r.vertexConfigurationTypes,(function(e){return e.vertex_configuration_column.name==t.type}));return t.vertex_configuration_type=e||null,t}))}},vertexConfigurations:{handler:function(t){var e=a().map(t,(function(t){return delete(t=a().cloneDeep(t)).vertex_configuration_type,t}));JSON.stringify(e)!=JSON.stringify(t)&&this.$emit("input",e)},deep:!0}},computed:{filterVertexConfigurationTypes:function(){var t=a().map(this.vertexConfigurations,(function(t){return t.type}));return a().filter(this.vertexConfigurationTypes,(function(e){return 0==e.vertex_configuration_column.is_unique||1==e.vertex_configuration_column.is_unique&&!t.contains(e.vertex_configuration_column.name)}))}},data:function(){return{vertexConfigurations:[]}},created:function(){var t=this;this.vertexConfigurations=a().map(this.value,(function(e){var r=a().find(t.vertexConfigurationTypes,(function(t){return t.vertex_configuration_column.name==e.type}));return e.vertex_configuration_type=r||null,e}));var e=this.initDefaultVertexConfigurations(this.vertexConfigurations,this.vertexConfigurationTypes);e=this.clearNoUsedVertexConfigurations(e,this.vertexConfigurationTypes),this.vertexConfigurations=e},methods:{vertexConfigurationTypeDisabled:function(t){var e=a().find(this.vertexConfigurationTypes,(function(e){return e.vertex_configuration_column.name==t}));return!!e&&1==!!e.is_default},addVertexConfiguration:function(){this.vertexConfigurations.push({id:this.generateUUID(),type:null,data:null,vertex_configuration_type:null})},deleteVertexConfiguration:function(t){confirm("確定要刪除第「".concat(t+1,"」筆資料？"))&&this.vertexConfigurations.splice(t,1)},validate:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r={};t&&t.vertex_configuration_type&&t.vertex_configuration_type.vertex_configuration_column.validate&&(r=JSON.parse(t.vertex_configuration_type.vertex_configuration_column.validate)),r.required=!0;for(var n=0,o=Object.entries(e);n<o.length;n++){var i=ee(o[n],2),a=i[0],s=i[1];r[a]=s}return r},initDefaultVertexConfigurations:function(t,e){for(var r=this,n=a().filter(e,(function(t){return 1==t.is_default})),o=function(e){var o=n[e].vertex_configuration_column.name;a().find(t,(function(t){return t.type==o}))||t.push({id:r.generateUUID(),type:o,data:null})},i=0;i<n.length;i++)o(i);return t},clearNoUsedVertexConfigurations:function(t,e){return t=a().map(t,(function(t){var r=a().find(e,(function(e){return e.vertex_configuration_column.name==t.type}));return t.vertex_configuration_type=r||null,t}))},frequency:function(t){for(var e=0,r=0;r<this.vertexConfigurations.length;r++){var n=this.vertexConfigurations[r];if(n.type==t.type&&e++,t.id==n.id)break}return e}}};var oe=r(52),ie={insert:"head",singleton:!1};L()(oe.Z,ie);oe.Z.locals;function ae(t){return ae="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ae(t)}function se(){se=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function c(t,e,r,n){var o=e&&e.prototype instanceof d?e:d,i=Object.create(o.prototype),a=new C(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return L()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var s=b(a,r);if(s){if(s===u)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=l(t,e,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===u)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}(t,r,a),i}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var u={};function d(){}function h(){}function f(){}var p={};s(p,o,(function(){return this}));var m=Object.getPrototypeOf,v=m&&m(m(k([])));v&&v!==e&&r.call(v,o)&&(p=v);var g=f.prototype=d.prototype=Object.create(p);function y(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function _(t,e){function n(o,i,a,s){var c=l(t[o],t,i);if("throw"!==c.type){var u=c.arg,d=u.value;return d&&"object"==ae(d)&&r.call(d,"__await")?e.resolve(d.__await).then((function(t){n("next",t,a,s)}),(function(t){n("throw",t,a,s)})):e.resolve(d).then((function(t){u.value=t,a(u)}),(function(t){return n("throw",t,a,s)}))}s(c.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function b(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,b(t,e),"throw"===e.method))return u;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var n=l(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,u;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,u):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,u)}function x(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function w(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function C(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(x,this),this.reset(!0)}function k(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:L}}function L(){return{value:void 0,done:!0}}return h.prototype=f,s(g,"constructor",f),s(f,"constructor",h),h.displayName=s(f,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===h||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,f):(t.__proto__=f,s(t,a,"GeneratorFunction")),t.prototype=Object.create(g),t},t.awrap=function(t){return{__await:t}},y(_.prototype),s(_.prototype,i,(function(){return this})),t.AsyncIterator=_,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new _(c(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},y(g),s(g,a,"Generator"),s(g,o,(function(){return this})),s(g,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=k,C.prototype={constructor:C,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(w),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=r.call(i,"catchLoc"),c=r.call(i,"finallyLoc");if(s&&c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,u):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),u},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),w(r),u}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;w(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:k(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),u}},t}function ce(t,e,r,n,o,i,a){try{var s=t[i](a),c=s.value}catch(t){return void r(t)}s.done?e(c):Promise.resolve(c).then(n,o)}function le(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){ce(i,n,o,a,s,"next",t)}function s(t){ce(i,n,o,a,s,"throw",t)}a(void 0)}))}}const ue={name:"VertexModal",$_veeValidate:{validator:"new"},components:{SwitchButton:It,VertexConfigurationListView:(0,m.Z)(ne,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"form-group"},[r("label",{staticClass:"col-md-3 control-label"},[t._v("自訂屬性  ")]),t._v(" "),r("div",{staticClass:"col-md-9"},[r("table",{staticClass:"table table-bordered table-hover"},[t._m(0),t._v(" "),r("tbody",[t._l(t.vertexConfigurations,(function(e,n){return r("tr",[r("td",{staticClass:"text-center",staticStyle:{width:"60px"}},[t._v(t._s(n+1))]),t._v(" "),r("td",{staticClass:"text-center",staticStyle:{width:"160px"}},[r("vertex-configuration-type-select",{directives:[{name:"validate",rawName:"v-validate",value:{required:!0},expression:"{required: true}"}],attrs:{name:"type-"+n,tags:!0,"vertex-configuration-types":t.vertexConfigurationTypes,"filter-vertex-configuration-types":t.filterVertexConfigurationTypes,disabled:t.vertexConfigurationTypeDisabled(e.type),"vertex-configurations":t.vertexConfigurations,"vertex-configuration-type":e.vertex_configuration_type},on:{change:function(t){e.data=null},"update:vertexConfigurationType":function(r){return t.$set(e,"vertex_configuration_type",r)},"update:vertex-configuration-type":function(r){return t.$set(e,"vertex_configuration_type",r)}},model:{value:e.type,callback:function(r){t.$set(e,"type",r)},expression:"row.type"}}),t._v(" "),t.errors.has("type-"+n+":required")?r("span",{staticClass:"help is-danger"},[t._v("請選擇名稱")]):t._e()],1),t._v(" "),r("td",[e.vertex_configuration_type?["switch-button"==e.vertex_configuration_type.vertex_configuration_column.view_type?r("switch-button",{directives:[{name:"validate",rawName:"v-validate",value:t.validate(e),expression:"validate(row)"}],staticClass:"switch-btn",attrs:{name:"custom-"+n},model:{value:e.data,callback:function(r){t.$set(e,"data",r)},expression:"row.data"}}):"input-text"==e.vertex_configuration_type.vertex_configuration_column.view_type?r("input",{directives:[{name:"model",rawName:"v-model",value:e.data,expression:"row.data"},{name:"validate",rawName:"v-validate",value:t.validate(e,"vertex_name"==e.vertex_configuration_type.vertex_configuration_column.name?{vertex_duplicate:t.vertex}:{}),expression:"validate(row, row.vertex_configuration_type.vertex_configuration_column.name == 'vertex_name' ? {\n                            vertex_duplicate: vertex\n                        } : {})"}],staticClass:"form-control input-sm",attrs:{name:"custom-"+n},domProps:{value:e.data},on:{input:function(r){r.target.composing||t.$set(e,"data",r.target.value)}}}):"remapping-view"==e.vertex_configuration_type.vertex_configuration_column.view_type?r("remapping-view",{directives:[{name:"validate",rawName:"v-validate",value:t.validate(e),expression:"validate(row)"}],attrs:{index:n},model:{value:e.data,callback:function(r){t.$set(e,"data",r)},expression:"row.data"}}):"intersection-view"==e.vertex_configuration_type.vertex_configuration_column.view_type?r("intersection-view",{directives:[{name:"validate",rawName:"v-validate",value:t.validate(e),expression:"validate(row)"}],attrs:{index:n},model:{value:e.data,callback:function(r){t.$set(e,"data",r)},expression:"row.data"}}):"group-name-view"==e.vertex_configuration_type.vertex_configuration_column.view_type?r("group-name-view",{directives:[{name:"validate",rawName:"v-validate",value:t.validate(e),expression:"validate(row)"}],attrs:{index:n},model:{value:e.data,callback:function(r){t.$set(e,"data",r)},expression:"row.data"}}):"object-mgmt-list-select"==e.vertex_configuration_type.vertex_configuration_column.view_type?r("object-mgmt-list-select",{directives:[{name:"validate",rawName:"v-validate",value:t.validate(e),expression:"validate(row)"}],attrs:{name:"custom-"+n,"object-class":"STATION","value-prop":"obj_id"},model:{value:e.data,callback:function(r){t.$set(e,"data",r)},expression:"row.data"}}):"alignment-view"==e.vertex_configuration_type.vertex_configuration_column.view_type?r("alignment-view",{directives:[{name:"validate",rawName:"v-validate",value:t.validate(e),expression:"validate(row)"}],attrs:{name:"custom-"+n,index:n},model:{value:e.data,callback:function(r){t.$set(e,"data",r)},expression:"row.data"}}):"speed-view"==e.vertex_configuration_type.vertex_configuration_column.view_type?r("speed-view",{directives:[{name:"validate",rawName:"v-validate",value:t.validate(e),expression:"validate(row)"}],attrs:{name:"custom-"+n,index:n},model:{value:e.data,callback:function(r){t.$set(e,"data",r)},expression:"row.data"}}):"rotation-condition-view"==e.vertex_configuration_type.vertex_configuration_column.view_type?r("rotation-condition",{attrs:{name:"custom-"+n,index:n},model:{value:e.data,callback:function(r){t.$set(e,"data",r)},expression:"row.data"}}):t._e()]:r("input",{directives:[{name:"model",rawName:"v-model",value:e.data,expression:"row.data"},{name:"validate",rawName:"v-validate",value:t.validate(e),expression:"validate(row)"}],staticClass:"form-control input-sm",attrs:{name:"custom-"+n},domProps:{value:e.data},on:{input:function(r){r.target.composing||t.$set(e,"data",r.target.value)}}}),t._v(" "),r("span",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("custom-"+n+":required"),expression:"errors.has(`custom-${index}:required`)"}],staticClass:"help is-danger"},[t._v("請填寫內容")]),t._v(" "),r("span",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("custom-"+n+":numeric"),expression:"errors.has(`custom-${index}:numeric`)"}],staticClass:"help is-danger"},[t._v("請填寫整數")]),t._v(" "),r("span",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("custom-"+n+":min_value"),expression:"errors.has(`custom-${index}:min_value`)"}],staticClass:"help is-danger"},[t._v("請填寫大於0的數值")]),t._v(" "),r("span",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("custom-"+n+":max_value"),expression:"errors.has(`custom-${index}:max_value`)"}],staticClass:"help is-danger"},[t._v("請填寫小於等於360的數值")]),t._v(" "),r("span",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("custom-"+n+":max"),expression:"errors.has(`custom-${index}:max`)"}],staticClass:"help is-danger"},[t._v("請填寫15字以內的內容")]),t._v(" "),r("span",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("custom-"+n+":vertex_duplicate"),expression:"errors.has(`custom-${index}:vertex_duplicate`)"}],staticClass:"help is-danger"},[t._v("已存在相同站點名稱的站點")]),t._v(" "),r("span",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("custom-"+n+":unique_type"),expression:"errors.has(`custom-${index}:unique_type`)"}],staticClass:"help is-danger"},[t._v("已存在相同站點名稱的站點")])],2),t._v(" "),r("td",{staticClass:"text-center",staticStyle:{width:"60px"}},[r("i",{directives:[{name:"show",rawName:"v-show",value:!e.vertex_configuration_type||0==e.vertex_configuration_type.is_default||t.frequency(e)>1,expression:"!row.vertex_configuration_type || row.vertex_configuration_type.is_default == 0 || frequency(row) > 1"}],staticClass:"glyphicon glyphicon-trash cursor-pointer",attrs:{title:"刪除"},on:{click:function(e){return t.deleteVertexConfiguration(n)}}})])])})),t._v(" "),r("tr",[r("td",{staticClass:"text-center cursor-pointer",attrs:{colspan:"4"},on:{click:t.addVertexConfiguration}},[r("i",{staticClass:"glyphicon glyphicon-plus-sign cursor-pointer",attrs:{title:"新增"}})])])],2)])])])}),[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("thead",{staticClass:"table-head"},[r("tr",[r("th",{staticClass:"text-center",staticStyle:{width:"60px"}},[t._v("#")]),t._v(" "),r("th",{staticClass:"text-center",staticStyle:{width:"160px"}},[t._v("名稱")]),t._v(" "),r("th",{staticClass:"text-center"},[t._v("內容")]),t._v(" "),r("th",{staticClass:"text-center",staticStyle:{width:"60px"}},[t._v("刪除")])])])}],!1,null,"e321d796",null).exports,EdgeModal:Vt,VehicleMgmtListSelect:ot.Z,VertexTypeSelect:Z,VertexConfigurationTypeSelect:nt,RegionMgmtListSelect:g.Z,UploadButton:v,ClipLoader:h.Z},props:{value:{type:Boolean,default:!1},nearbyVertices:{type:Array,default:function(){return[]}},disabled:{type:Boolean,default:!1},isDeploy:{type:Number,default:0},vertex:{type:Object,default:null},mapType:{type:String,default:"radar"}},computed:{nearbyVertexIdx:function(){var t=this;return a().findIndex(this.nearbyVertices,(function(e){return e.id==t.form.id}))},vertexName:function(){var t=a().find(this.form.vertex_configurations,(function(t){return"vertex_name"==t.type}));return t?t.data:null},hasCharger:function(){var t=a().find(this.form.vertex_configurations,(function(t){return"charger"==t.type}));return!!t},vertexConfigurationTypes:function(){var t=this,e=a().find(this.vertexTypes,(function(e){return e.id==t.form.vertex_type_id}));return e?e.vertex_configuration_types:[]},allNotAssigned:function(){return a().filter(this.vehicleMgmts,(function(t){return t.vehicle_status&&"NOT_ASSIGNED"!=t.vehicle_status.vehicle_status})).length<=0}},watch:{value:function(t){this.showModal=t,this.isDeploy&&(t?this.onShowModal():this.onHideModal())},"form.vertex_configurations":{handler:function(){this.form.name=this.vertexName},deep:!0}},data:function(){return{sending:!1,showModal:this.value,form:{id:null,region_mgmt_id:null,tag:null,vertex_type_id:null,x_px:null,y_px:null,x:null,y:null,enable:1,vertex_configurations:[],region_mgmt:{project_id:null}},edgeModal:{show:!1,edge_index:null,edge:null,project_id:null,region_mgmt_id:null},vertexTypes:[],switchAuthorization:"off",mqttCommandForm:{target_floor:null},vehicleMgmts:[]}},destroyed:function(){this.mqttCommandId&&window.Echo.leave("mqttCommands.".concat(this.mqttCommandId))},methods:{onShowModal:function(){var t=this;return le(se().mark((function e(){var r;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.resetFormValidate(),t.isDeploy){e.next=6;break}t.form=a().cloneDeep(t.vertex),t.form.elevator_mgmts&&t.form.elevator_mgmts.length>0?t.$set(t.form,"elevator_mgmt",t.form.elevator_mgmts[0]):t.$set(t.form,"elevator_mgmt",null),e.next=9;break;case 6:return t.form.id=t.vertex.id,e.next=9,t.fetchData();case 9:t.isDeploy&&(r=t,window.Echo.private("vertices.".concat(t.form.id)).listen("ElevatorMgmtVertexCreated",(function(t){var e=t.elevatorMgmtVertex,n=e.elevator_mgmt;e.vertex_id==r.form.id?r.$set(r.form,"elevator_mgmt",n):r.$set(r.form,"elevator_mgmt",null)})).listen("ElevatorMgmtVertexDeleted",(function(t){t.elevatorMgmtVertex.vertex_id==r.form.id&&r.$set(r.form,"elevator_mgmt",null)})).listen("ElevatorMgmtDeleted",(function(){r.$set(r.form,"elevator_mgmt",null)})).listen("ElevatorStatusUpdated",(function(t){var e=t.elevatorStatus,n=e.elevator_mgmt;if(n)delete e.elevator_mgmt;else{if(!r.form.elevator_mgmt)return;n=r.form.elevator_mgmt}n.elevator_status=e,r.$set(r.form,"elevator_mgmt",n)})).listen("ParkingLotMgmtUpdated",(function(t){var e=t.parkingLotMgmt;e.vertex_name==r.form.name?r.$set(r.form,"parking_lot_mgmt",e):r.$set(r.form,"parking_lot_mgmt",null)})).listen("ParkingLotMgmtDeleted",(function(){r.$set(r.form,"parking_lot_mgmt",null)})).listen("ParkingLotStatusUpdated",(function(t){var e=t.parkingLotStatus,n=e.parking_lot_mgmt;if(n)delete e.parking_lot_mgmt;else{if(!r.form.parking_lot_mgmt)return;n=r.form.parking_lot_mgmt}n.parking_lot_status=e,r.$set(r.form,"parking_lot_mgmt",n)})).listen("StationMgmtUpdated",(function(t){var e=t.stationMgmt;e.vertex_name==r.form.name?r.$set(r.form,"station_mgmt",e):r.$set(r.form,"station_mgmt",null)})).listen("StationMgmtDeleted",(function(){r.$set(r.form,"station_mgmt",null)})).listen("StationStatusUpdated",(function(t){var e=t.stationStatus,n=e.station_mgmt;if(n)delete e.station_mgmt;else{if(!r.form.station_mgmt)return;n=r.form.station_mgmt}n.station_status=e,r.$set(r.form,"station_mgmt",n)})),window.Echo.private("vehicleMgmts").listen("VehicleStatusUpdated",(function(t){var e=t.vehicleStatus,n=a().findIndex(r.vehicleMgmts,(function(t){return t.vehicle_id==e.vehicle_id}));-1!=n&&(r.vehicleMgmts[n].vehicle_status=e)})));case 10:case"end":return e.stop()}}),e)})))()},onHideModal:function(){this.resetForm(),this.isDeploy&&(window.Echo.leave("vertices.".concat(this.form.id)),window.Echo.leave("vehicleMgmts")),this.$emit("input",!1),this.$emit("close")},fetchData:function(){var t=this;return le(se().mark((function e(){var r,n,i,a;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,o().get("/api/vertices/".concat(t.form.id));case 3:if(0!=(r=(r=e.sent).data).status){e.next=15;break}if(n=r.data,t.form=n.vertex,n.vertex.elevator_mgmts.length>0?t.$set(t.form,"elevator_mgmt",n.vertex.elevator_mgmts[0]):t.$set(t.form,"elevator_mgmt",null),t.vehicleMgmts=n.vehicleMgmts,i=n.elevatorControlAuthorization){e.next=13;break}return e.abrupt("return");case 13:a=JSON.parse(i.receive_command),i&&(31==i.mqtt_command_type_id&&"accepted"==a.reply.condition||32==i.mqtt_command_type_id&&"accepted"!=a.reply.condition)&&(t.switchAuthorization="on");case 15:e.next=20;break;case 17:e.prev=17,e.t0=e.catch(0),t.guestRedirectHome(e.t0);case 20:case"end":return e.stop()}}),e,null,[[0,17]])})))()},submit:function(){var t=this;return le(se().mark((function e(){var r;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.validate();case 2:if(e.sent){e.next=5;break}return e.abrupt("return");case 5:t.form.id||(t.form.id=t.generateUUID(),r=t,t.form.edges=a().map(t.form.edges,(function(t){return t.start_vertex_id=r.form.id,t}))),t.form.x_px=t.quadrantCoordToImgCoordX(t.form.region_mgmt.resolution,t.form.x,t.form.region_mgmt.origin_x),t.form.y_px=t.quadrantCoordToImgCoordY(t.form.region_mgmt.resolution,t.form.y,t.form.region_mgmt.img_height,t.form.region_mgmt.origin_y,t.form.region_mgmt.origin_start_direction),t.$emit("update",a().cloneDeep(t.form)),t.$emit("close"),t.showModal=!1;case 11:case"end":return e.stop()}}),e)})))()},resetForm:function(){this.form={id:null,region_mgmt_id:null,tag:null,vertex_type_id:null,x:null,y:null,x_px:null,y_px:null,z:0,enable:1,vertex_configurations:[],region_mgmt:{project_id:null},edges:[]},this.resetFormValidate()},deleteEdgeRow:function(t){confirm("確定要刪除第".concat(t+1,"筆資料？"))&&this.form.edges.splice(t,1)},addEdge:function(){this.form.edges.push({id:this.generateUUID(),name:null,region_mgmt_id:this.form.region_mgmt_id,direction:0,start_vertex_id:this.form.id,start_vertex:{name:this.form.name},end_vertex_id:null,end_vertex:{region_mgmt_id:null},enable:1,edge_configurations:[{id:this.generateUUID(),type:"connection_region",data:null}],region_mgmt:{project_id:this.form.region_mgmt.project_id}})},switchVertex:function(t){var e=this;return le(se().mark((function r(){var n,o;return se().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:null,n=null,t?(e.nearbyVertices[e.nearbyVertexIdx+1].id,n=e.nearbyVertices[e.nearbyVertexIdx+1]):(e.nearbyVertices[e.nearbyVertexIdx-1].id,n=e.nearbyVertices[e.nearbyVertexIdx-1]),e.$emit("update:vertex",n),e.resetForm(),o=e,e.$nextTick((function(){o.onShowModal()}));case 7:case"end":return r.stop()}}),r)})))()},showEdgeModal:function(t){var e=this;return le(se().mark((function r(){return se().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(t.end_vertex.region_mgmt_id){r.next=2;break}return r.abrupt("return");case 2:return r.next=4,e.$validator.validate("custom-0");case 4:if(r.sent){r.next=7;break}return r.abrupt("return");case 7:t.start_vertex_id=e.form.id,t.start_vertex.name=e.form.name,e.edgeModal.edge=t,e.edgeModal.project_id=e.vertex.region_mgmt.project_id,e.edgeModal.region_mgmt_id=e.vertex.region_mgmt_id,e.edgeModal.show=!0;case 13:case"end":return r.stop()}}),r)})))()},resetEdgeRow:function(t){var e=a().findIndex(this.form.edges,(function(e){return e.id==t.id}));this.form.edges[e]=t,this.form.edges=a().cloneDeep(this.form.edges)},updateEnable:function(){var t=this;return le(se().mark((function e(){return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,o().patch("/api/vertices/".concat(t.form.id),{enable:t.form.enable});case 3:e.sent.data,e.next=11;break;case 7:return e.prev=7,e.t0=e.catch(0),e.next=11,t.guestRedirectHome(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})))()},submitMqttCommand:function(t,e){var r=this;return le(se().mark((function n(){var i,a;return se().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(33!=t||e){n.next=4;break}return alert("請先輸入樓層"),r.$refs.targetFloorInput.focus(),n.abrupt("return");case 4:return n.prev=4,r.sending=!0,n.next=8,o().post("/api/mqttCommands",{mqtt_command_type_id:t,target_floor:e});case 8:0==(i=(i=n.sent).data).status&&(r.mqttCommandId&&window.Echo.leave("mqttCommands.".concat(r.mqttCommandId)),a=i.data,r.mqttCommandId=a.mqttCommand.id,window.Echo.private("mqttCommands.".concat(r.mqttCommandId)).listen("MqttCommandUpdated",(function(t){var e=r,n=JSON.parse(t.mqttCommand.receive_command),o=n.typename,i=n.reply.condition,a=n.reply.description;"accepted"==i?e.$toast.success({title:"成功訊息",message:a}):("get_elevator_control_authorization"==o?e.switchAuthorization="off":"release_elevator_control_authorization"==o&&(e.switchAuthorization="on"),e.$toast.error({title:"錯誤訊息",message:a})),e.sending=!1}))),n.next=16;break;case 13:n.prev=13,n.t0=n.catch(4),r.guestRedirectHome(n.t0);case 16:case"end":return n.stop()}}),n,null,[[4,13]])})))()},onSwitchButtonChange:function(t){t.value?this.submitMqttCommand(31):this.submitMqttCommand(32)}}};var de=r(8941),he={insert:"head",singleton:!1};L()(de.Z,he);de.Z.locals;const fe=(0,m.Z)(ue,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[t.isDeploy&&t.showModal?[r("div",{staticStyle:{position:"absolute",top:"0",left:"0","min-width":"450px","max-width":"450px"}},[r("div",{staticClass:"box box-default",staticStyle:{"margin-bottom":"0"}},[t._m(0),t._v(" "),r("div",{staticClass:"box-body",staticStyle:{display:"block"}},[r("div",{staticClass:"form-horizontal"},[r("div",{staticClass:"form-group"},[r("label",{staticClass:"col-md-3 control-label",staticStyle:{"font-size":"12pt"}},[t._v("站點類型：")]),t._v(" "),r("div",{staticClass:"col-md-9"},[r("vertex-type-select",{staticClass:"display-select",staticStyle:{"font-weight":"normal"},attrs:{disabled:""},model:{value:t.form.vertex_type_id,callback:function(e){t.$set(t.form,"vertex_type_id",e)},expression:"form.vertex_type_id"}})],1)]),t._v(" "),r("div",{staticClass:"form-group"},[r("label",{staticClass:"col-md-3 control-label",staticStyle:{"font-size":"12pt"}},[t._v("X軸：")]),t._v(" "),r("div",{staticClass:"col-md-9",staticStyle:{"font-size":"12pt"}},[r("p",{staticClass:"form-control-static"},[t._v(t._s(t.form.x)+" m")])])]),t._v(" "),r("div",{staticClass:"form-group"},[r("label",{staticClass:"col-md-3 control-label",staticStyle:{"font-size":"12pt"}},[t._v("Y軸：")]),t._v(" "),r("div",{staticClass:"col-md-9",staticStyle:{"font-size":"12pt"}},[r("p",{staticClass:"form-control-static"},[t._v(t._s(t.form.y)+" m")])])]),t._v(" "),r("div",{staticClass:"form-group"},[r("label",{staticClass:"col-md-3 control-label",staticStyle:{"font-size":"12pt"}},[t._v("自訂屬性：")]),t._v(" "),r("div",{staticClass:"col-md-9",staticStyle:{"margin-top":"6px","font-size":"12pt"}},t._l(t.form.vertex_configurations,(function(e){return r("div",{staticStyle:{"margin-bottom":"15px"}},[r("span",{staticStyle:{float:"left"}},[t._v(t._s(e.type)+"：")]),t._v(" "),"remapping"==e.type||"intersection"==e.type?r("span",{staticStyle:{float:"left"}},["remapping"==e.type?[r("div",[r("span",{staticClass:"text-right",staticStyle:{"font-size":"12pt"}},[t._v("id:")]),t._v(" "),r("span",{staticStyle:{"font-size":"12pt","padding-left":"0"}},[t._v(t._s(e.data.id))])]),t._v(" "),r("div",[r("span",{staticClass:"text-right",staticStyle:{"font-size":"12pt"}},[t._v("port:")]),t._v(" "),r("span",{staticStyle:{"font-size":"12pt","padding-left":"0"}},[t._v(t._s(e.data.port))])])]:"intersection"==e.type?t._l(e.data.give_way_vertices,(function(e,n){return r("span",[r("span",{staticClass:"text-right",staticStyle:{"font-size":"12pt"}},[t._v("避車點"+t._s(n+1)+":")]),t._v(" "),r("span",{staticStyle:{"font-size":"12pt","padding-left":"0"}},[t._v(t._s(e))]),t._v(" "),r("br")])})):t._e()],2):r("span",{staticStyle:{float:"left"}},["e84"==e.type?[2!=t.form.vertex_type_id?r("switch-button",{staticClass:"toggle-btn",attrs:{disabled:""},model:{value:e.data,callback:function(r){t.$set(e,"data",r)},expression:"row.data"}}):r("span",[t._v("on")])]:"charger"==e.type||"break_point"==e.type?r("switch-button",{staticClass:"toggle-btn",attrs:{disabled:""},model:{value:e.data,callback:function(r){t.$set(e,"data",r)},expression:"row.data"}}):"rotation_condition"==e.type?r("span",[t._v(t._s(e.data?e.data:"Null"))]):r("span",{staticStyle:{"font-size":"12pt"}},[t._v(t._s(e.data))])],2),t._v(" "),r("div",{staticClass:"clearfix"})])})),0)]),t._v(" "),r("div",{staticClass:"form-group"},[r("label",{staticClass:"col-md-3 control-label",staticStyle:{"font-size":"12pt"}},[t._v("啟用狀態：")]),t._v(" "),r("div",{staticClass:"col-md-9"},[r("input",{directives:[{name:"model",rawName:"v-model.number.lazy",value:t.form.enable,expression:"form.enable",modifiers:{number:!0,lazy:!0}}],staticClass:"form-control-static",attrs:{"true-value":1,"false-value":0,type:"checkbox",name:"enable",disabled:!t.allNotAssigned},domProps:{checked:Array.isArray(t.form.enable)?t._i(t.form.enable,null)>-1:t._q(t.form.enable,1)},on:{change:[function(e){var r=t.form.enable,n=e.target,o=n.checked?1:0;if(Array.isArray(r)){var i=t._n(null),a=t._i(r,i);n.checked?a<0&&t.$set(t.form,"enable",r.concat([i])):a>-1&&t.$set(t.form,"enable",r.slice(0,a).concat(r.slice(a+1)))}else t.$set(t.form,"enable",o)},t.updateEnable]}})])]),t._v(" "),2==t.form.vertex_type_id?r("div",{staticClass:"form-group",staticStyle:{"border-top":"1px solid lightgrey"}},[r("div",{staticClass:"col-md-4"},[r("div",{staticStyle:{"font-size":"16pt","font-weight":"bold",margin:"10px 0 0 20px"}},[t._v("電梯點")]),t._v(" "),r("div",{staticStyle:{"font-size":"10pt","font-weight":"bold",margin:"24px 0 0 22px",color:"#5d5c84"}},[t._v("電梯門狀態")]),t._v(" "),r("div",{staticClass:"booking-sign"},[t.form.elevator_mgmt&&t.form.elevator_mgmt.elevator_status?r("div",{staticClass:"booking-tag",class:{booking:"open"==t.form.elevator_mgmt.elevator_status.elevator_door_status,"none-booking":!("open"==t.form.elevator_mgmt.elevator_status.elevator_door_status)}},[t._v(t._s("open"==t.form.elevator_mgmt.elevator_status.elevator_door_status?"已開門":"已關門"))]):r("div",{staticClass:"booking-tag none-booking"},[t._v("已關門")])])]),t._v(" "),r("div",{staticClass:"col-md-8 elevator-command"},[r("switch-button",{staticClass:"switch-btn",attrs:{labels:{checked:"要授權",unchecked:"還釋放"},width:64,height:28},on:{change:t.onSwitchButtonChange},model:{value:t.switchAuthorization,callback:function(e){t.switchAuthorization=e},expression:"switchAuthorization"}}),t._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:t.mqttCommandForm.target_floor,expression:"mqttCommandForm.target_floor"}],ref:"targetFloorInput",staticClass:"ml-15 border-gray input-target-floor",attrs:{type:"text",placeholder:"F",disabled:t.sending},domProps:{value:t.mqttCommandForm.target_floor},on:{input:function(e){e.target.composing||t.$set(t.mqttCommandForm,"target_floor",e.target.value)}}}),t._v(" "),r("button",{staticClass:"btn btn-default btn-sm border-gray elevator-btn",attrs:{type:"button",disabled:t.sending},on:{click:function(e){return t.submitMqttCommand(33,t.mqttCommandForm.target_floor)}}},[r("i",{staticClass:"fa fa-arrow-up"}),r("i",{staticClass:"fa fa-arrow-down"})]),t._v(" "),r("button",{staticClass:"btn btn-default btn-sm border-gray close-btn",attrs:{type:"button",disabled:t.sending},on:{click:function(e){return t.submitMqttCommand(34)}}},[r("i",{staticClass:"fa fa-play"}),t._v("|"),r("i",{staticClass:"fa fa-play",staticStyle:{transform:"rotate(180deg)"}})])],1),t._v(" "),r("div",{staticClass:"col-md-8",staticStyle:{margin:"10px 0 0 -4px","font-size":"12pt","line-height":"1.9"}},[t._m(1),t._v(" "),t._m(2),t._v(" "),t.form.elevator_mgmt?r("div",{staticClass:"col-md-6",staticStyle:{padding:"0"}},[r("label",{staticClass:"full-line"},[t._v(t._s(t.form.elevator_mgmt?t.form.elevator_mgmt.elevator_id:""))]),t._v(" "),r("label",{staticClass:"full-line"},[t.form.elevator_mgmt.elevator_status?["open"==t.form.elevator_mgmt.elevator_status.elevator_door_status?[t._v("開門")]:"closed"==t.form.elevator_mgmt.elevator_status.elevator_door_status?[t._v("關門")]:t._e(),t._v(" "),t.form.elevator_mgmt.elevator_status.elevator_status&&t.form.elevator_mgmt.elevator_status.elevator_door_status?r("span",[t._v(" | ")]):t._e(),t._v(" "),"idle"==t.form.elevator_mgmt.elevator_status.elevator_status?[t._v("閒置")]:"busy"==t.form.elevator_mgmt.elevator_status.elevator_status?[t._v("運轉")]:"disable"==t.form.elevator_mgmt.elevator_status.elevator_status?[t._v("故障")]:t._e()]:t._e()],2),t._v(" "),r("label",{staticClass:"full-line"},[t.form.elevator_mgmt.elevator_status?[t._v("\n                                            "+t._s(t.form.elevator_mgmt.elevator_status.elevator_position)+"\n                                        ")]:t._e()],2),t._v(" "),t.form.elevator_mgmt.elevator_status?r("label",{staticClass:"full-line"},[t._v(t._s(t._f("datetime")(t.form.elevator_mgmt.elevator_status.update_ts)))]):r("label",{staticClass:"full-line"},[t._v(t._s(null))])]):t._e()])]):4==t.form.vertex_type_id?r("div",{staticClass:"form-group",staticStyle:{"border-top":"1px solid lightgrey"}},[t._m(3),t._v(" "),r("div",{staticClass:"col-md-8",staticStyle:{margin:"18px 0 0 -4px","font-size":"12pt"}},[t._m(4),t._v(" "),t._m(5),t._v(" "),t.form.station_mgmt?r("div",{staticClass:"col-md-6",staticStyle:{padding:"0"}},[r("label",{staticClass:"full-line"},[t._v(t._s(t.form.station_mgmt?t.form.station_mgmt.station_id:""))]),t._v(" "),r("label",{staticClass:"full-line"},[t._v(t._s(t.form.station_mgmt.station_status?t.form.station_mgmt.station_status.station_status:""))])]):t._e()])]):t.hasCharger?r("div",{staticClass:"form-group",staticStyle:{"border-top":"1px solid lightgrey"}},[r("div",{staticClass:"col-md-4"},[r("div",{staticStyle:{"font-size":"16pt","font-weight":"bold",margin:"10px 0 0 20px"}},[t._v("停車位")]),t._v(" "),r("div",{staticStyle:{"font-size":"10pt","font-weight":"bold",margin:"12px 0 0 33px",color:"#5d5c84"}},[t._v("預定資訊")]),t._v(" "),r("div",{staticClass:"booking-sign"},[t.form.parking_lot_mgmt&&t.form.parking_lot_mgmt.parking_lot_status?r("div",{staticClass:"booking-tag",class:{booking:t.form.parking_lot_mgmt.parking_lot_status.booking_vehicle_id,"none-booking":!t.form.parking_lot_mgmt.parking_lot_status.booking_vehicle_id}},[t._v(t._s(t.form.parking_lot_mgmt.parking_lot_status.booking_vehicle_id?"已預定":"未預定"))]):r("div",{staticClass:"booking-tag none-booking"},[t._v("未預定")])])]),t._v(" "),r("div",{staticClass:"col-md-8",staticStyle:{margin:"18px 0 0 -4px","font-size":"12pt"}},[t._m(6),t._v(" "),t._m(7),t._v(" "),t.form.parking_lot_mgmt?r("div",{staticClass:"col-md-6",staticStyle:{padding:"0"}},[r("label",{staticClass:"full-line"},[t._v(t._s(t.form.parking_lot_mgmt?t.form.parking_lot_mgmt.parking_lot_id:""))]),t._v(" "),r("label",{staticClass:"full-line"},[t._v(t._s(t.form.parking_lot_mgmt.parking_lot_status?t.form.parking_lot_mgmt.parking_lot_status.booking_vehicle_id:""))]),t._v(" "),r("label",{staticClass:"full-line"},[t._v(t._s(t.form.parking_lot_mgmt.parking_lot_status?t.form.parking_lot_mgmt.parking_lot_status.occupied_vehicle_id:""))]),t._v(" "),t.form.parking_lot_mgmt.parking_lot_status?r("label",{staticClass:"full-line"},[t._v(t._s(t._f("datetime")(t.form.parking_lot_mgmt.parking_lot_status.update_ts)))]):r("label",{staticClass:"full-line"},[t._v(t._s(null))])]):t._e()])]):t._e(),t._v(" "),r("div",{staticClass:"text-right",staticStyle:{"margin-right":"15px"}},[t.nearbyVertices.length>1?[r("button",{directives:[{name:"show",rawName:"v-show",value:t.nearbyVertexIdx<t.nearbyVertices.length-1,expression:"nearbyVertexIdx < nearbyVertices.length - 1"}],staticClass:"btn btn-default",attrs:{type:"button",title:"上一個站點"},on:{click:function(e){return t.switchVertex(!0)}}},[t._v("上一個站點")]),t._v(" "),r("button",{directives:[{name:"show",rawName:"v-show",value:t.nearbyVertexIdx>0,expression:"nearbyVertexIdx  > 0"}],staticClass:"btn btn-default",attrs:{type:"button",title:"下一個站點"},on:{click:function(e){return t.switchVertex(!1)}}},[t._v("下一個站點")])]:t._e()],2)])])])])]:r("modal",{attrs:{size:t.isDeploy?"md":"lg",footer:!1,backdrop:!1,"append-to-body":!0,keyboard:!1},on:{show:t.onShowModal,hide:t.onHideModal},model:{value:t.showModal,callback:function(e){t.showModal=e},expression:"showModal"}},[r("div",{attrs:{slot:"title"},slot:"title"},[t._v(t._s(t.form.id?"更新站點":"新增站點"))]),t._v(" "),r("div",{attrs:{slot:"default"},slot:"default"},[r("form",{staticClass:"form-horizontal",attrs:{novalidate:""},on:{submit:function(e){return e.preventDefault(),t.submit.apply(null,arguments)}}},[r("div",{staticClass:"form-group"},[r("label",{staticClass:"col-md-3 control-label"},[t._v("站點Tag"),r("span",{staticClass:"is-danger"},[t._v("  ")])]),t._v(" "),r("div",{staticClass:"col-md-9"},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.form.tag,expression:"form.tag"}],staticClass:"form-control",attrs:{placeholder:"請填寫站點Tag"},domProps:{value:t.form.tag},on:{input:function(e){e.target.composing||t.$set(t.form,"tag",e.target.value)}}})])]),t._v(" "),r("div",{staticClass:"form-group"},[r("label",{staticClass:"col-md-3 control-label"},[t._v("站點類型"),r("span",{staticClass:"is-danger"},[t._v(" *")])]),t._v(" "),r("div",{staticClass:"col-md-9"},[r("vertex-type-select",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{name:"vertex_type_id",items:t.vertexTypes,disabled:"cad"==t.mapType},on:{"update:items":function(e){t.vertexTypes=e}},model:{value:t.form.vertex_type_id,callback:function(e){t.$set(t.form,"vertex_type_id",e)},expression:"form.vertex_type_id"}}),t._v(" "),r("span",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("vertex_type_id:required"),expression:"errors.has('vertex_type_id:required')"}],staticClass:"help is-danger"},[t._v("請選擇站點類型")])],1)]),t._v(" "),r("div",{staticClass:"form-group"},[r("label",{staticClass:"col-md-3 control-label"},[t._v("X軸"),r("span",{staticClass:"is-danger"},[t._v(" *")])]),t._v(" "),r("div",{staticClass:"col-md-9"},[r("div",{staticClass:"input-group"},[r("input",{directives:[{name:"model",rawName:"v-model.number",value:t.form.x,expression:"form.x",modifiers:{number:!0}},{name:"validate",rawName:"v-validate",value:"required|decimal",expression:"'required|decimal'"}],staticClass:"form-control",attrs:{name:"x"},domProps:{value:t.form.x},on:{input:function(e){e.target.composing||t.$set(t.form,"x",t._n(e.target.value))},blur:function(e){return t.$forceUpdate()}}}),t._v(" "),r("div",{staticClass:"input-group-addon"},[t._v("m")])]),t._v(" "),r("span",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("x:required"),expression:"errors.has('x:required')"}],staticClass:"help is-danger"},[t._v("請填寫X軸")]),t._v(" "),r("span",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("x:decimal"),expression:"errors.has('x:decimal')"}],staticClass:"help is-danger"},[t._v("請填寫數字")])])]),t._v(" "),r("div",{staticClass:"form-group"},[r("label",{staticClass:"col-md-3 control-label"},[t._v("Y軸"),r("span",{staticClass:"is-danger"},[t._v(" *")])]),t._v(" "),r("div",{staticClass:"col-md-9"},[r("div",{staticClass:"input-group"},[r("input",{directives:[{name:"model",rawName:"v-model.number",value:t.form.y,expression:"form.y",modifiers:{number:!0}},{name:"validate",rawName:"v-validate",value:"required|decimal",expression:"'required|decimal'"}],staticClass:"form-control",attrs:{name:"y"},domProps:{value:t.form.y},on:{input:function(e){e.target.composing||t.$set(t.form,"y",t._n(e.target.value))},blur:function(e){return t.$forceUpdate()}}}),t._v(" "),r("div",{staticClass:"input-group-addon"},[t._v("m")])]),t._v(" "),r("span",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("y:required"),expression:"errors.has('y:required')"}],staticClass:"help is-danger"},[t._v("請填寫Y軸")]),t._v(" "),r("span",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("y:decimal"),expression:"errors.has('y:decimal')"}],staticClass:"help is-danger"},[t._v("請填寫數字")])])]),t._v(" "),t.vertexConfigurationTypes.length?r("vertex-configuration-list-view",{attrs:{"vertex-type-id":t.form.vertex_type_id,"vertex-configuration-types":t.vertexConfigurationTypes,vertex:t.form},model:{value:t.form.vertex_configurations,callback:function(e){t.$set(t.form,"vertex_configurations",e)},expression:"form.vertex_configurations"}}):t._e(),t._v(" "),2==t.form.vertex_type_id?r("form",{staticClass:"form-group",attrs:{novalidate:""}},[r("label",{staticClass:"col-md-3 control-label"},[t._v("電梯點軌道  ")]),t._v(" "),r("div",{staticClass:"col-md-9"},[r("table",{staticClass:"table table-bordered table-hover"},[r("thead",{staticClass:"table-head"},[r("tr",[r("th",{staticClass:"text-center"},[t._v("#")]),t._v(" "),r("th",{staticClass:"text-center",staticStyle:{width:"300px"}},[t._v("區域")]),t._v(" "),r("th",{staticClass:"text-center",staticStyle:{width:"150px"}},[t._v("編輯")]),t._v(" "),r("th",{staticClass:"text-center"},[t._v("刪除")])])]),t._v(" "),r("tbody",[t._l(t.form.edges,(function(e,n){return r("tr",[r("td",{staticClass:"text-center"},[t._v(t._s(n+1))]),t._v(" "),r("td",{staticStyle:{width:"300px"}},[r("region-mgmt-list-select",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{name:"end_vertex_region-"+n,"project-id":t.form.region_mgmt.project_id,"single-select2":!0,"exclude-region":t.form.region_mgmt_id},model:{value:e.end_vertex.region_mgmt_id,callback:function(r){t.$set(e.end_vertex,"region_mgmt_id",r)},expression:"row.end_vertex.region_mgmt_id"}}),t._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:e.end_vertex_id,expression:"row.end_vertex_id"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{type:"hidden",name:"end_vertex_id-"+n},domProps:{value:e.end_vertex_id},on:{input:function(r){r.target.composing||t.$set(e,"end_vertex_id",r.target.value)}}}),t._v(" "),t.errors.has("end_vertex_region-"+n+":required")?r("span",{staticClass:"help is-danger"},[t._v("請選擇區域")]):t.errors.has("end_vertex_id-"+n+":required")?r("span",{staticClass:"help is-danger"},[t._v("請編輯軌道")]):t._e()],1),t._v(" "),r("td",{staticClass:"text-center",staticStyle:{width:"150px"}},[r("i",{staticClass:"glyphicon glyphicon-edit",style:"cursor: "+(e.end_vertex.region_mgmt_id?"pointer":"not-allowed"),attrs:{type:"button",title:"編輯"},on:{click:function(r){return t.showEdgeModal(e)}}})]),t._v(" "),r("td",{staticClass:"text-center"},[r("i",{staticClass:"glyphicon glyphicon-trash cursor-pointer",attrs:{title:"刪除"},on:{click:function(e){return t.deleteEdgeRow(n)}}})])])})),t._v(" "),r("tr",[r("td",{staticClass:"text-center cursor-pointer",attrs:{colspan:"3"},on:{click:t.addEdge}},[r("i",{staticClass:"glyphicon glyphicon-plus-sign cursor-pointer",attrs:{title:"新增"}})])])],2)])])]):t._e(),t._v(" "),r("div",{staticClass:"text-right"},[t.nearbyVertices.length>1?[r("button",{directives:[{name:"show",rawName:"v-show",value:t.nearbyVertexIdx<t.nearbyVertices.length-1,expression:"nearbyVertexIdx < nearbyVertices.length - 1"}],staticClass:"btn btn-default",attrs:{type:"button",title:"上一個站點"},on:{click:function(e){return t.switchVertex(!0)}}},[t._v("上一個站點")]),t._v(" "),r("button",{directives:[{name:"show",rawName:"v-show",value:t.nearbyVertexIdx>0,expression:"nearbyVertexIdx > 0"}],staticClass:"btn btn-default",attrs:{type:"button",title:"下一個站點"},on:{click:function(e){return t.switchVertex(!1)}}},[t._v("下一個站點")])]:t._e(),t._v(" "),r("button",{staticClass:"btn btn-light-green",attrs:{title:"送出"}},[t._v("送出")]),t._v(" "),r("button",{staticClass:"btn btn-default",attrs:{type:"button",title:"取消"},on:{click:function(e){t.showModal=!1}}},[t._v("取消")])],2)],1),t._v(" "),r("edge-modal",{attrs:{"is-deploy":t.isDeploy,"vertex-type-id":2,edge:t.edgeModal.edge,"project-id":t.edgeModal.project_id,"region-mgmt-id":t.edgeModal.region_mgmt_id},on:{update:t.resetEdgeRow},model:{value:t.edgeModal.show,callback:function(e){t.$set(t.edgeModal,"show",e)},expression:"edgeModal.show"}})],1)])],2)}),[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"box-header with-border"},[r("h3",{staticClass:"box-title"},[t._v("站點資訊")])])},function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"col-md-5",staticStyle:{padding:"0"}},[r("label",{staticClass:"full-line"},[t._v("電梯點編號")]),t._v(" "),r("label",{staticClass:"full-line"},[t._v("狀態")]),t._v(" "),r("label",{staticClass:"full-line"},[t._v("樓層")]),t._v(" "),r("label",{staticClass:"full-line"},[t._v("接收時間")])])},function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"col-md-1",staticStyle:{padding:"0","margin-left":"-24px"}},[r("label",{staticClass:"full-line"},[t._v("：")]),t._v(" "),r("label",{staticClass:"full-line"},[t._v("：")]),t._v(" "),r("label",{staticClass:"full-line"},[t._v("：")]),t._v(" "),r("label",{staticClass:"full-line"},[t._v("：")])])},function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"col-md-4"},[r("div",{staticStyle:{"font-size":"16pt","font-weight":"bold",margin:"10px 0 0 20px"}},[t._v("工作站")])])},function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"col-md-5",staticStyle:{padding:"0"}},[r("label",{staticClass:"full-line"},[t._v("工作站編號")]),t._v(" "),r("label",{staticClass:"full-line"},[t._v("工作站狀態")])])},function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"col-md-1",staticStyle:{padding:"0","margin-left":"-24px"}},[r("label",{staticClass:"full-line"},[t._v("：")]),t._v(" "),r("label",{staticClass:"full-line"},[t._v("：")])])},function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"col-md-5",staticStyle:{padding:"0"}},[r("label",{staticClass:"full-line"},[t._v("停車位編號")]),t._v(" "),r("label",{staticClass:"full-line"},[t._v("預定車輛")]),t._v(" "),r("label",{staticClass:"full-line"},[t._v("目前停放")]),t._v(" "),r("label",{staticClass:"full-line"},[t._v("接收時間")])])},function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"col-md-1",staticStyle:{padding:"0","margin-left":"-24px"}},[r("label",{staticClass:"full-line"},[t._v("：")]),t._v(" "),r("label",{staticClass:"full-line"},[t._v("：")]),t._v(" "),r("label",{staticClass:"full-line"},[t._v("：")]),t._v(" "),r("label",{staticClass:"full-line"},[t._v("：")])])}],!1,null,"18bbbb08",null).exports;var pe=r(9755);function me(t){return me="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},me(t)}function ve(){ve=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function c(t,e,r,n){var o=e&&e.prototype instanceof d?e:d,i=Object.create(o.prototype),a=new C(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return L()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var s=b(a,r);if(s){if(s===u)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=l(t,e,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===u)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}(t,r,a),i}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var u={};function d(){}function h(){}function f(){}var p={};s(p,o,(function(){return this}));var m=Object.getPrototypeOf,v=m&&m(m(k([])));v&&v!==e&&r.call(v,o)&&(p=v);var g=f.prototype=d.prototype=Object.create(p);function y(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function _(t,e){function n(o,i,a,s){var c=l(t[o],t,i);if("throw"!==c.type){var u=c.arg,d=u.value;return d&&"object"==me(d)&&r.call(d,"__await")?e.resolve(d.__await).then((function(t){n("next",t,a,s)}),(function(t){n("throw",t,a,s)})):e.resolve(d).then((function(t){u.value=t,a(u)}),(function(t){return n("throw",t,a,s)}))}s(c.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function b(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,b(t,e),"throw"===e.method))return u;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var n=l(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,u;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,u):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,u)}function x(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function w(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function C(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(x,this),this.reset(!0)}function k(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:L}}function L(){return{value:void 0,done:!0}}return h.prototype=f,s(g,"constructor",f),s(f,"constructor",h),h.displayName=s(f,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===h||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,f):(t.__proto__=f,s(t,a,"GeneratorFunction")),t.prototype=Object.create(g),t},t.awrap=function(t){return{__await:t}},y(_.prototype),s(_.prototype,i,(function(){return this})),t.AsyncIterator=_,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new _(c(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},y(g),s(g,a,"Generator"),s(g,o,(function(){return this})),s(g,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=k,C.prototype={constructor:C,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(w),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=r.call(i,"catchLoc"),c=r.call(i,"finallyLoc");if(s&&c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,u):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),u},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),w(r),u}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;w(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:k(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),u}},t}function ge(t,e,r,n,o,i,a){try{var s=t[i](a),c=s.value}catch(t){return void r(t)}s.done?e(c):Promise.resolve(c).then(n,o)}function ye(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function _e(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?ye(Object(r),!0).forEach((function(e){be(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ye(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function be(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}const xe={name:"VertexListView",components:{VertexModal:fe,VertexPoint:J},computed:_e(_e({},(0,O.Se)({user:"user/user"})),{},{regionMgmtCleanlinessGrade:function(){return this.regionMgmt&&this.regionMgmt.cleanliness_grade?this.regionMgmt.cleanliness_grade:null}}),props:{value:{type:Array,default:function(){return[]}},regionMgmtId:[Number,String],selectedIds:{type:Array,default:function(){return[]}},isAllUnselected:{type:Boolean,default:!1},dragEdgePos:{type:Object,default:function(){return{x:-1,y:-1}}},dragPos:{type:Object,default:function(){return{x:-1,y:-1}}},nearbyVertex:{type:Object,default:function(){return null}},modal:{type:Object,default:function(){return{show:!1,nearbyVertices:[],vertex:null}}},scale:{type:Number,default:1},deleteId:{type:[Number,String]},disabled:{type:Boolean,default:!1},isDeploy:{type:Number,default:0},searchVertex:{type:String,default:null},regionMgmt:{type:Object,default:function(){return{mm:0,resolution:0,origin_x:0,origin_y:0,img_height:0}}},loading:{type:Boolean,default:!0},mapType:{type:String,default:"radar"},viewType:{type:String,default:"vertex"},acceptanceGrades:{type:Array,default:function(){return[]}},pollutionConditions:{type:Array,default:function(){return[]}}},watch:{value:function(t){var e=this,r=a().cloneDeep(t);this.vertices=a().map(r,(function(t){t.is_selected=!1,t.is_nearby=!1;var n=e.getNearbyVertices({x_px:t.x_px,y_px:t.y_px},r);return t.nearby_vertex_length=n.length-1,t.is_show=0==n.length||t.id==n[n.length-1].id,t}))},isAllUnselected:function(t){t&&(this.allUnselect(),this.$emit("update:isAllUnselected",!1))},dragEdgePos:function(t){var e=a().findIndex(this.vertices,(function(e){return(t.x-e.x_px)*(t.x-e.x_px)+(t.y-e.y_px)*(t.y-e.y_px)<=400}));-1==e?this.vertices=a().map(this.vertices,(function(t){return t.is_nearby=!1,t})):(this.vertices[e].is_nearby=!0,this.vertices=a().cloneDeep(this.vertices)),this.$emit("update:nearbyVertex",this.vertices[e])},modal:function(t){this.vertexModal=t},"vertexModal.show":{handler:function(t){this.isDeploy&&(t?this.changeSelectedId(this.vertexModal.vertex,t):this.allUnselect())},deep:!0},searchVertex:function(t){if(this.oldVertexName&&pe(this.oldVertexName).css("z-index","1"),""!=t){var e='[title|="'+t+'"]';if(pe(e).css("z-index","3"),pe(e).length>0){var r=pe("html, body"),n=pe(e);r.animate({scrollTop:n.offset().top-350},500,(function(){n.focus()}))}this.searchVertexName=e,this.oldVertexName=e}else this.searchVertexName=null},vertices:{handler:function(t){this.$store.commit("vertex/UPDATE_VERTICES",t)},deep:!0},mapType:function(t){this.resetNearbyVertices()}},data:function(){return{vertices:[],vertexModal:{show:!1,nearbyVertices:[],vertex:null},searchVertexName:null,oldVertexName:null,vertexPointDiameter:20,oriVertices:[]}},created:function(){var t=this,e=this;window.Echo.private("vehicleMgmts").listen("VehicleStatusUpdated",(function(r){var n=a().cloneDeep(r.vehicleStatus),o=a().findIndex(e.vertices,(function(t){return t.id==n.vertex_id}));-1!=o&&(t.$set(t.vertices[o],"vehicle_status",n),t.$emit("input",e.vertices))})),window.Echo.private("parkingLotStatuses").listen("ParkingLotStatusUpdated",(function(r){var n=r.parkingLotStatus,o=n.parking_lot_mgmt,i=o.vertex;delete n.parking_lot_mgmt,o.parking_lot_status=n;var s=a().findIndex(e.vertices,(function(t){return t.id==i.id}));-1!=s&&(t.$set(t.vertices[s],"parking_lot_mgmt",o),t.$emit("input",e.vertices))}))},destroyed:function(){window.Echo.leave("vehicleMgmts"),window.Echo.leave("parkingLotStatuses")},methods:{fetchData:function(){var t,e=this;return(t=ve().mark((function t(){var r,n,i;return ve().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.$emit("update:loading",!0),t.prev=1,t.next=4,o().get("/api/vertices",{params:{region_mgmt_id:e.regionMgmtId,is_deploy:e.isDeploy,map_type:"vertex"==e.viewType?null:e.mapType}});case 4:0==(r=(r=t.sent).data).status&&(n=r.data,i=n.vertices,e.oriVertices=i,e.$emit("input",i)),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),e.guestRedirectHome(t.t0);case 12:e.$emit("update:loading",!1);case 13:case"end":return t.stop()}}),t,null,[[1,9]])})),function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){ge(i,n,o,a,s,"next",t)}function s(t){ge(i,n,o,a,s,"throw",t)}a(void 0)}))})()},allUnselect:function(){this.vertices=a().map(this.vertices,(function(t){return 0!=t.is_selected&&(t.is_selected=!1,t=a().cloneDeep(t)),t}))},changeSelectedId:function(t,e){var r=a().findIndex(this.vertices,(function(e){return e.id==t.id}));if(-1!=r){this.vertices[r].is_selected=e;var n=a().filter(this.vertices,(function(t){return 1==t.is_selected}));this.$emit("update:selectedIds",a().map(n,(function(t){return t.id})))}},resetRow:function(t){t.is_selected=!1,t.is_nearby=!1;var e=a().findIndex(this.vertices,(function(e){return e.id==t.id}));-1==e?this.vertices.splice(0,0,t):this.vertices.splice(e,1,t),this.$emit("update:dragPos",{vertex_id:t.id,x:t.x_px,y:t.y_px}),this.$emit("input",this.vertices)},showModal:function(t,e){var r=this,n=a().findIndex(this.vertices,(function(e){return e.id==t})),o=a().cloneDeep(this.vertices[n]),i=this.getNearbyVertices({x_px:o.x_px,y_px:o.y_px});if(e&&(o.id=null,o.name=null,o.x_px=Math.abs(o.x_px-50),o.x=this.imgCoordToQuadrantCoordX(this.vertex.region_mgmt.resolution,o.x_px,this.vertex.region_mgmt.origin_x),o.name=null,o.vertex_configurations=a().map(o.vertex_configurations,(function(t){return t.id=r.generateUUID(),"vertex_name"==t.type&&(t.data=null),t}))),"cad"==this.mapType&&"pollution"==this.viewType){var s=a().cloneDeep(o.location.micro_organism);s.vertex={x_px:o.x_px,y_px:o.y_px},this.$emit("dbclick",s)}else this.vertexModal={show:!1,nearbyVertices:i,vertex:o},this.$emit("update:modal",this.vertexModal);var c=this;this.$nextTick((function(){c.vertexModal={show:!0,nearbyVertices:i,vertex:o},c.$emit("update:modal",c.vertexModal)}))},getNearbyVertices:function(t,e){var r=t.x_px,n=t.y_px,o=null;return o="cad"==this.mapType?a().filter(e||this.vertices,(function(t){return r==t.x_px&&n==t.y_px&&4==t.vertex_type_id})):a().filter(e||this.vertices,(function(t){return r==t.x_px&&n==t.y_px})),a().orderBy(o,["id"],["desc"])},onDrag:function(t){this.$emit("update:dragPos",t)},deleteRow:function(t){this.vertices=a().filter(this.vertices,(function(e){return e.id!=t})),this.$emit("input",this.vertices),this.$emit("update:deleteId",t)},cancelFocusVertex:function(){null==this.searchVertexName?pe(this.oldVertexName).css("z-index","1"):(pe(this.searchVertexName).css("z-index","1"),this.searchVertexName=null)},copyVertex:function(t){this.showModal(t,!0)},resetNearbyVertices:function(){var t=this,e=a().cloneDeep(this.vertices);this.vertices=a().map(e,(function(r){var n=t.getNearbyVertices({x_px:r.x_px,y_px:r.y_px},e);return r.nearby_vertex_length=n.length-1,r}))}}};var we=r(4125),Ce={insert:"head",singleton:!1};L()(we.Z,Ce);we.Z.locals;const ke=(0,m.Z)(xe,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[t._l(t.vertices,(function(e,n){return r("div",[r("vertex-point",{key:e.id,attrs:{scale:t.scale,"is-deploy":t.isDeploy,disabled:t.disabled,diameter:t.vertexPointDiameter,"map-type":t.mapType,"view-type":t.viewType,"cleanliness-grade":t.regionMgmtCleanlinessGrade,"acceptance-grades":t.acceptanceGrades,"pollution-conditions":t.pollutionConditions},on:{select:function(r){return t.changeSelectedId(e,!0)},unselect:function(r){return t.changeSelectedId(e,!1)},dbclick:t.showModal,drag:t.onDrag,update:t.resetRow,delete:t.deleteRow,copy:t.copyVertex},model:{value:t.vertices[n],callback:function(e){t.$set(t.vertices,n,e)},expression:"vertices[i]"}})],1)})),t._v(" "),t.isDeploy?t._e():r("vertex-modal",{attrs:{"nearby-vertices":t.vertexModal.nearbyVertices,disabled:t.disabled,"is-deploy":t.isDeploy,vertex:t.vertexModal.vertex,"map-type":t.mapType},on:{"update:isDeploy":function(e){t.isDeploy=e},"update:is-deploy":function(e){t.isDeploy=e},"update:vertex":function(e){return t.$set(t.vertexModal,"vertex",e)},update:t.resetRow,close:t.allUnselect},model:{value:t.vertexModal.show,callback:function(e){t.$set(t.vertexModal,"show",e)},expression:"vertexModal.show"}}),t._v(" "),r("div",{class:t.searchVertexName?"black-mask":"",on:{click:t.cancelFocusVertex}})],2)}),[],!1,null,"0319c226",null).exports;const Le={name:"VertexListModal",props:{value:{type:Boolean,default:null},vertices:{type:Array}},watch:{value:function(t){this.showModal=t}},data:function(){return{showModal:this.value}},methods:{onHideModal:function(){this.$emit("input",!1)}}};var Se=r(9365),Ee={insert:"head",singleton:!1};L()(Se.Z,Ee);Se.Z.locals;const Me=(0,m.Z)(Le,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("modal",{attrs:{size:"lg",footer:!1,backdrop:!1,"append-to-body":!0,keyboard:!1},on:{hide:t.onHideModal},model:{value:t.showModal,callback:function(e){t.showModal=e},expression:"showModal"}},[r("div",{attrs:{slot:"title"},slot:"title"},[t._v("錯誤訊息")]),t._v(" "),r("div",{attrs:{slot:"default"},slot:"default"},[r("div",{staticClass:"scroll"},[r("table",{staticClass:"table table-bordered"},[r("thead",[r("tr",[t._t("head",(function(){return[r("th",[t._v("站點名稱")])]}))],2)]),t._v(" "),r("tbody",[t._l(t.vertices,(function(e){return t._t("body",(function(){return[r("tr",[r("td",[r("strong",[t._v(t._s(e.name))])])])]}),{vertex:e})}))],2)])]),t._v(" "),r("div",{staticClass:"text-right"},[r("button",{staticClass:"btn btn-default",attrs:{type:"button"},on:{click:function(e){t.showModal=!1}}},[t._v("關閉視窗")])])])])}),[],!1,null,"18ca7527",null).exports;function Oe(t){return Oe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Oe(t)}function Pe(){Pe=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function c(t,e,r,n){var o=e&&e.prototype instanceof d?e:d,i=Object.create(o.prototype),a=new C(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return L()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var s=b(a,r);if(s){if(s===u)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=l(t,e,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===u)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}(t,r,a),i}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var u={};function d(){}function h(){}function f(){}var p={};s(p,o,(function(){return this}));var m=Object.getPrototypeOf,v=m&&m(m(k([])));v&&v!==e&&r.call(v,o)&&(p=v);var g=f.prototype=d.prototype=Object.create(p);function y(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function _(t,e){function n(o,i,a,s){var c=l(t[o],t,i);if("throw"!==c.type){var u=c.arg,d=u.value;return d&&"object"==Oe(d)&&r.call(d,"__await")?e.resolve(d.__await).then((function(t){n("next",t,a,s)}),(function(t){n("throw",t,a,s)})):e.resolve(d).then((function(t){u.value=t,a(u)}),(function(t){return n("throw",t,a,s)}))}s(c.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function b(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,b(t,e),"throw"===e.method))return u;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var n=l(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,u;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,u):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,u)}function x(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function w(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function C(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(x,this),this.reset(!0)}function k(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:L}}function L(){return{value:void 0,done:!0}}return h.prototype=f,s(g,"constructor",f),s(f,"constructor",h),h.displayName=s(f,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===h||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,f):(t.__proto__=f,s(t,a,"GeneratorFunction")),t.prototype=Object.create(g),t},t.awrap=function(t){return{__await:t}},y(_.prototype),s(_.prototype,i,(function(){return this})),t.AsyncIterator=_,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new _(c(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},y(g),s(g,a,"Generator"),s(g,o,(function(){return this})),s(g,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=k,C.prototype={constructor:C,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(w),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=r.call(i,"catchLoc"),c=r.call(i,"finallyLoc");if(s&&c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,u):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),u},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),w(r),u}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;w(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:k(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),u}},t}function je(t,e,r,n,o,i,a){try{var s=t[i](a),c=s.value}catch(t){return void r(t)}s.done?e(c):Promise.resolve(c).then(n,o)}var Ne=null;const Te={name:"EdgeLine",components:{Drag:B.Z},props:{value:{type:Object,default:function(){return null}},nearbyVertex:{type:Object,default:function(){return null}},dragVertexPos:{type:Object,default:function(){return{x:-1,y:-1,vertex_id:null}}},scale:{type:Number},edges:{type:Array,default:function(){return[]}},isDeploy:{type:Number,default:0},disabled:{type:Boolean,default:!1},vertexPointDiameter:{type:Number,default:20},resetVertexPosList:{type:Array,default:function(){return[]}}},computed:{edgeColor:function(){return void 0!==this.edge.vehicle_mgmts&&this.edge.vehicle_mgmts.length>0?this.edge.vehicle_mgmts[0].color:"#ffca55"},edgeEnable:function(){return this.value?this.value.enable:!!this.edge&&this.edge.enable},showEdge:function(){return Math.sqrt((this.edge.start_vertex.x_px-this.edge.end_vertex.x_px)*(this.edge.start_vertex.x_px-this.edge.end_vertex.x_px)+(this.edge.start_vertex.y_px-this.edge.end_vertex.y_px)*(this.edge.start_vertex.y_px-this.edge.end_vertex.y_px))>=this.vertexPointDiameter},showArrow:function(){return Math.sqrt((this.edge.start_vertex.x_px-this.edge.end_vertex.x_px)*(this.edge.start_vertex.x_px-this.edge.end_vertex.x_px)+(this.edge.start_vertex.y_px-this.edge.end_vertex.y_px)*(this.edge.start_vertex.y_px-this.edge.end_vertex.y_px))>=2.7*this.vertexPointDiameter},showEdgePoint:function(){return Math.sqrt((this.edge.start_vertex.x_px-this.edge.end_vertex.x_px)*(this.edge.start_vertex.x_px-this.edge.end_vertex.x_px)+(this.edge.start_vertex.y_px-this.edge.end_vertex.y_px)*(this.edge.start_vertex.y_px-this.edge.end_vertex.y_px))>=2.7*this.vertexPointDiameter},showAutoDoor:function(){return!!a().find(this.edge.edge_configurations,["type","auto_door"])}},watch:{value:function(){this.resetForm()},dragVertexPos:function(t){this.resetEdge(t),this.resetForm()},disabled:function(){this.resetForm()},resetVertexPosList:{handler:function(t){var e=this;t.length>0&&a().each(t,(function(t){e.resetEdge(t)})),this.resetForm()},deep:!0}},data:function(){return{edge:null,dragging:!1,clickNum:0}},created:function(){this.resetForm()},methods:{onClick:function(){var t=this;this.clickNum++,1==this.clickNum?Ne=setTimeout((function(){t.clickNum=0}),400):2==this.clickNum&&(clearTimeout(Ne),this.clickNum=0,this.$emit("dbclick",this.edge))},onPointDrag:function(t,e){this.dragging=!0;var r=t.x-this.vertexPointDiameter/2,n=t.y-this.vertexPointDiameter/2-2;if("start"==e){this.edge.dragging_x1=r,this.edge.dragging_y1=n,this.edge.degrees=this.calculateDegrees(r,n,this.edge.dragging_x2,this.edge.dragging_y2),this.edge.length=Math.sqrt((this.edge.dragging_x2-r)*(this.edge.dragging_x2-r)+(n-this.edge.dragging_y2)*(n-this.edge.dragging_y2)+this.vertexPointDiameter/2),this.edge.xMid=(r+this.edge.dragging_x2)/2,this.edge.yMid=(n+this.edge.dragging_y2)/2;var o=this.edge.degrees%360;o>-90&&o<90&&(this.edge.yMid+=2.4),this.edge.xMid+=o>0&&o<180?2.4:5}else{this.edge.dragging_x2=r,this.edge.dragging_y2=n,this.edge.degrees=this.calculateDegrees(this.edge.dragging_x1,this.edge.dragging_y1,r,n),this.edge.length=Math.sqrt((this.edge.dragging_x1-r)*(this.edge.dragging_x1-r)+(this.edge.dragging_y1-n)*(this.edge.dragging_y1-n)+this.vertexPointDiameter/2),this.edge.xMid=(this.edge.dragging_x1+r)/2,this.edge.yMid=(this.edge.dragging_y1+n)/2;var i=this.edge.degrees%360;i>-90&&i<90&&(this.edge.yMid+=2.4),this.edge.xMid+=i>0&&i<180?2.4:5}this.$emit("drag",t)},onPointStop:function(t,e){if(this.dragging=!1,this.nearbyVertex){this.nearbyVertex.is_nearby=!1;var r=a().clone(this.edge);if("start"==e?(r.start_vertex=this.nearbyVertex,r.start_vertex_id=r.start_vertex.id):(r.end_vertex=this.nearbyVertex,r.end_vertex_id=r.end_vertex.id),r.start_vertex_id==r.end_vertex_id)return this.resetForm(),void this.$toast.error({title:"無法移動軌道",message:"起點跟終點不能一樣！"});if(a().find(this.edges,(function(t){return t.start_vertex_id==r.start_vertex_id&&t.end_vertex_id==r.end_vertex_id||t.start_vertex_id==r.end_vertex_id&&t.end_vertex_id==r.start_vertex_id})))return this.resetForm(),void this.$toast.error({title:"無法移動軌道",message:"該區段已有軌道！"});this.updateEdge(r,t)}else this.resetForm()},setView:function(t){t=this.degToXY(this.edge.start_vertex.x_px,this.edge.start_vertex.y_px,this.vertexPointDiameter,this.edge.end_vertex.x_px,this.edge.end_vertex.y_px,8),this.edge.x1=t.x-this.vertexPointDiameter/2,this.edge.y1=t.y-this.vertexPointDiameter/2-2,this.edge.dragging_x1=t.x-this.vertexPointDiameter/2,this.edge.dragging_y1=t.y-this.vertexPointDiameter/2-2,t=this.degToXY(this.edge.end_vertex.x_px,this.edge.end_vertex.y_px,this.vertexPointDiameter,this.edge.start_vertex.x_px,this.edge.start_vertex.y_px,8),this.edge.x2=t.x-this.vertexPointDiameter/2,this.edge.y2=t.y-this.vertexPointDiameter/2-2,this.edge.dragging_x2=t.x-this.vertexPointDiameter/2,this.edge.dragging_y2=t.y-this.vertexPointDiameter/2-2,this.edge.degrees=this.calculateDegrees(this.edge.x1,this.edge.y1,this.edge.x2,this.edge.y2),this.edge.length=Math.sqrt((this.edge.x1-this.edge.x2)*(this.edge.x1-this.edge.x2)+(this.edge.y1-this.edge.y2)*(this.edge.y1-this.edge.y2)+this.vertexPointDiameter/2),this.edge.xMid=(this.edge.x1+this.edge.x2)/2,this.edge.yMid=(this.edge.y1+this.edge.y2)/2;var e=this.edge.degrees%360;e>-90&&e<90&&(this.edge.yMid+=2.4),this.edge.xMid+=e>0&&e<180?2.4:5},degToXY:function(t,e,r,n,o,i){var a=this.calculateDegrees(t,e,n,o),s=this.isDeploy?8:14,c=(r-i)/2,l=a/180*Math.PI;return{x:t+=c+s*Math.cos(l),y:e+=c+s*Math.sin(l)}},resetForm:function(){var t=this.value,e=this.degToXY(t.start_vertex.x_px,t.start_vertex.y_px,this.vertexPointDiameter,t.end_vertex.x_px,t.end_vertex.y_px,8);t.x1=e.x-this.vertexPointDiameter/2,t.y1=e.y-this.vertexPointDiameter/2-2,t.dragging_x1=e.x-this.vertexPointDiameter/2,t.dragging_y1=e.y-this.vertexPointDiameter/2-2,e=this.degToXY(t.end_vertex.x_px,t.end_vertex.y_px,this.vertexPointDiameter,t.start_vertex.x_px,t.start_vertex.y_px,8),t.x2=e.x-this.vertexPointDiameter/2,t.y2=e.y-this.vertexPointDiameter/2-2,t.dragging_x2=e.x-this.vertexPointDiameter/2,t.dragging_y2=e.y-this.vertexPointDiameter/2-2,t.degrees=this.calculateDegrees(t.start_vertex.x_px,t.start_vertex.y_px,t.end_vertex.x_px,t.end_vertex.y_px),t.length=Math.sqrt((t.x1-t.x2)*(t.x1-t.x2)+(t.y1-t.y2)*(t.y1-t.y2)+this.vertexPointDiameter/2),t.xMid=(t.x1+t.x2)/2,t.yMid=(t.y1+t.y2)/2;var r=t.degrees%360;r>-90&&r<90&&(t.yMid+=2.4),t.xMid+=r>0&&r<180?2.4:5,this.edge=a().clone(t)},updateEdge:function(t,e){var r,n=this;return(r=Pe().mark((function r(){return Pe().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:n.edge=t,n.$emit("input",n.edge),n.setView(e);case 3:case"end":return r.stop()}}),r)})),function(){var t=this,e=arguments;return new Promise((function(n,o){var i=r.apply(t,e);function a(t){je(i,n,o,a,s,"next",t)}function s(t){je(i,n,o,a,s,"throw",t)}a(void 0)}))})()},resetEdge:function(t){this.edge.start_vertex_id==t.vertex_id?(this.edge.start_vertex.x_px=t.x,this.edge.start_vertex.y_px=t.y):this.edge.end_vertex_id==t.vertex_id&&(this.edge.end_vertex.x_px=t.x,this.edge.end_vertex.y_px=t.y)}}};var $e=r(4920),Ie={insert:"head",singleton:!1};L()($e.Z,Ie);$e.Z.locals;function De(t){return De="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},De(t)}function Ae(){Ae=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function c(t,e,r,n){var o=e&&e.prototype instanceof d?e:d,i=Object.create(o.prototype),a=new C(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return L()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var s=b(a,r);if(s){if(s===u)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=l(t,e,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===u)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}(t,r,a),i}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var u={};function d(){}function h(){}function f(){}var p={};s(p,o,(function(){return this}));var m=Object.getPrototypeOf,v=m&&m(m(k([])));v&&v!==e&&r.call(v,o)&&(p=v);var g=f.prototype=d.prototype=Object.create(p);function y(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function _(t,e){function n(o,i,a,s){var c=l(t[o],t,i);if("throw"!==c.type){var u=c.arg,d=u.value;return d&&"object"==De(d)&&r.call(d,"__await")?e.resolve(d.__await).then((function(t){n("next",t,a,s)}),(function(t){n("throw",t,a,s)})):e.resolve(d).then((function(t){u.value=t,a(u)}),(function(t){return n("throw",t,a,s)}))}s(c.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function b(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,b(t,e),"throw"===e.method))return u;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var n=l(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,u;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,u):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,u)}function x(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function w(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function C(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(x,this),this.reset(!0)}function k(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:L}}function L(){return{value:void 0,done:!0}}return h.prototype=f,s(g,"constructor",f),s(f,"constructor",h),h.displayName=s(f,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===h||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,f):(t.__proto__=f,s(t,a,"GeneratorFunction")),t.prototype=Object.create(g),t},t.awrap=function(t){return{__await:t}},y(_.prototype),s(_.prototype,i,(function(){return this})),t.AsyncIterator=_,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new _(c(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},y(g),s(g,a,"Generator"),s(g,o,(function(){return this})),s(g,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=k,C.prototype={constructor:C,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(w),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=r.call(i,"catchLoc"),c=r.call(i,"finallyLoc");if(s&&c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,u):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),u},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),w(r),u}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;w(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:k(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),u}},t}function Fe(t,e,r,n,o,i,a){try{var s=t[i](a),c=s.value}catch(t){return void r(t)}s.done?e(c):Promise.resolve(c).then(n,o)}const qe={name:"EdgeListView",components:{EdgeModal:Vt,EdgeLine:(0,m.Z)(Te,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return t.edge&&t.showEdge?r("div",[!t.isDeploy&&t.showEdgePoint?r("drag",{staticStyle:{position:"absolute","z-index":"1"},style:{top:(t.dragging?t.edge.dragging_y1:t.edge.y1)+"px",left:(t.dragging?t.edge.dragging_x1:t.edge.x1)+"px"},attrs:{containment:"#region","drag-after-reset":!1,scale:t.scale},on:{drag:function(e){t.onPointDrag(e,"start")},stop:function(e){t.onPointStop(e,"start")}}},[r("div",{staticClass:"edge-point"})]):t._e(),t._v(" "),!t.isDeploy&&t.showEdgePoint?r("drag",{staticStyle:{position:"absolute","z-index":"1"},style:{top:(t.dragging?t.edge.dragging_y2:t.edge.y2)+"px",left:(t.dragging?t.edge.dragging_x2:t.edge.x2)+"px"},attrs:{containment:"#region","drag-after-reset":!1,scale:t.scale},on:{drag:function(e){t.onPointDrag(e,"end")},stop:function(e){t.onPointStop(e,"end")}}},[r("div",{staticClass:"edge-point"})]):t._e(),t._v(" "),r("div",{staticClass:"edge-line",class:{"edge-line-disabled":!t.edge.enable},style:"position: absolute; top: "+t.edge.yMid+"px; left: "+(t.edge.xMid-t.edge.length/2)+"px; transform: rotate("+t.edge.degrees+"deg); width: "+t.edge.length+"px; border-color: "+t.edgeColor,on:{click:t.onClick}},[t.showAutoDoor?r("img",{staticClass:"auto-door",style:"left: "+t.edge.length/2+"px; transform: rotate("+-t.edge.degrees+"deg)",attrs:{src:"/img/VertexConfigurations/auto_door.png",alt:"自動門"}}):t._e(),t._v(" "),!t.showArrow||1!=t.edge.direction&&0!=t.edge.direction?t._e():r("i",{staticClass:"edge-arrow edge-arrow-1 glyphicon glyphicon-play",class:{"edge-arrow-disabled":!t.edgeEnable},style:"color:  "+t.edgeColor}),t._v(" "),t.showArrow&&0==t.edge.direction?r("i",{staticClass:"edge-arrow edge-arrow-2 glyphicon glyphicon-play",class:{"edge-arrow-disabled":!t.edgeEnable},style:"color:  "+t.edgeColor}):t._e()]),t._v(" "),r("context-menu",{directives:[{name:"show",rawName:"v-show",value:!t.isDeploy,expression:"!isDeploy"}],staticClass:"right-menu",attrs:{width:"120px"}},[r("context-menu-item",{staticClass:"right-menu-item",attrs:{label:"刪除"},on:{click:function(e){return t.$emit("delete",t.edge)}}},[r("div",[r("i",{staticClass:"glyphicon glyphicon-trash"}),t._v(" "),r("span",[t._v("刪除")])])])],1)],1):t._e()}),[],!1,null,"f0ad818c",null).exports},props:{value:{type:Array,default:function(){return[]}},selectedVertexIds:{type:Array,default:function(){return[]}},isAllVertexUnselected:{type:Boolean,default:!0},dragVertexPos:{type:Object,default:function(){return{x:-1,y:-1,vertex_id:null}}},dragPos:{type:Object,default:function(){return{x:-1,y:-1}}},nearbyVertex:{type:Object,default:function(){return null}},projectId:{type:Number,default:null},regionMgmtId:{type:Number,default:null},scale:{type:Number},deleteVertexId:{type:[Number,String]},disabled:{type:Boolean,default:!1},isDeploy:{type:Number,default:0},vertices:{type:Array,default:function(){return[]}},loading:{type:Boolean,default:!0},modal:{type:Object,default:function(){return{show:!1,edge:null}}},resetVertexPosList:{type:Array,default:function(){return[]}},vehicleMgmts:{type:Array,default:function(){return[]}},mapType:{type:String,default:"radar"}},watch:{value:function(t){this.edges=t},edges:function(t){this.$emit("input",t),this.$store.commit("edge/UPDATE_EDGES",t)},modal:function(t){this.edgeModal=t},selectedVertexIds:function(t,e){if(2==t.length&&!this.isDeploy){var r=a().sortBy(t,(function(t){return t!=e}));if(a().find(this.edges,(function(e){return e.start_vertex_id==t[0]&&e.end_vertex_id==t[1]||e.start_vertex_id==t[1]&&e.end_vertex_id==t[0]})))this.$toast.error({title:"軌道已重複",message:"已創建過相同軌道！"}),this.$emit("update:isAllVertexUnselected",!0);else{var n=a().find(this.vertices,(function(t){return t.id==r[0]})),o=a().find(this.vertices,(function(t){return t.id==r[1]}));this.showModal({id:null,name:null,start_vertex_id:r[0],end_vertex_id:r[1],region_mgmt_id:this.regionMgmtId,direction:0,start_vertex:{name:n.name},end_vertex:{region_mgmt_id:this.regionMgmtId,name:o.name},enable:1,edge_configurations:[],region_mgmt:{project_id:this.projectId}})}}},deleteVertexId:function(t){this.edges=a().filter(this.edges,(function(e){return e.start_vertex_id!=t&&e.end_vertex_id!=t})),this.$emit("deleteVertexId",null)}},data:function(){return{edges:[],oriEdges:[],edgeModal:{show:!1,edge:null}}},destroyed:function(){window.Echo.leave("edges")},methods:{fetchData:function(t){var e,r=this;return(e=Ae().mark((function e(){var n,i,s;return Ae().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.$emit("update:loading",!0),e.prev=1,e.next=4,o().get("/api/edges",{params:{project_id:t,region_mgmt_id:t?void 0:r.regionMgmtId,is_deploy:r.isDeploy}});case 4:0==(n=(n=e.sent).data).status&&(i=n.data,s=r,r.$emit("input",i.edges),r.$nextTick((function(){s.oriEdges=a().cloneDeep(s.edges)}))),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),r.guestRedirectHome(e.t0);case 12:r.$emit("update:loading",!1);case 13:case"end":return e.stop()}}),e,null,[[1,9]])})),function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(t){Fe(i,n,o,a,s,"next",t)}function s(t){Fe(i,n,o,a,s,"throw",t)}a(void 0)}))})()},resetRow:function(t){if(this.isDeploy&&this.vehicleId)this.fetchData();else{var e=a().find(this.vertices,(function(e){return e.id==t.start_vertex_id})),r=a().find(this.vertices,(function(e){return e.id==t.end_vertex_id}));t.start_vertex.x_px=e.x_px,t.start_vertex.y_px=e.y_px,t.end_vertex.x_px=r.x_px,t.end_vertex.y_px=r.y_px;var n=a().findIndex(this.edges,(function(e){return e.id==t.id}));-1==n?this.edges.push(t):this.edges[n]=t,this.edges=a().cloneDeep(this.edges),this.$emit("input",this.edges)}},deleteRow:function(t){this.edges=a().filter(this.edges,(function(e){return e.id!=t.id})),this.$emit("input",this.edges)},showModal:function(t){1==this.modal.show&&(this.edgeModal={show:!1,edge:null},this.$emit("update:modal",this.edgeModal));var e=this;this.$nextTick((function(){e.edgeModal={show:!0,edge:t},e.$emit("update:modal",e.edgeModal)}))}}};const Re=(0,m.Z)(qe,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",["radar"==t.mapType?t._l(t.edges,(function(e,n){return r("div",[r("edge-line",{attrs:{"nearby-vertex":t.nearbyVertex,scale:t.scale,edges:t.edges,"drag-vertex-pos":t.dragVertexPos,"reset-vertex-pos-list":t.resetVertexPosList,"is-deploy":t.isDeploy,disabled:t.disabled},on:{dbclick:t.showModal,drag:function(e){t.$emit("update:dragPos",e)},delete:t.deleteRow},model:{value:t.edges[n],callback:function(e){t.$set(t.edges,n,e)},expression:"edges[i]"}})],1)})):t._e(),t._v(" "),t.isDeploy?t._e():r("edge-modal",{attrs:{"is-deploy":t.isDeploy,vertices:t.vertices,edge:t.edgeModal.edge,"project-id":t.projectId},on:{update:t.resetRow,close:function(e){return t.$emit("update:isAllVertexUnselected",!0)}},model:{value:t.modal.show,callback:function(e){t.$set(t.modal,"show",e)},expression:"modal.show"}})],2)}),[],!1,null,null,null).exports;var Ge=r(5872);function ze(t){return ze="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ze(t)}function Ve(){Ve=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function c(t,e,r,n){var o=e&&e.prototype instanceof d?e:d,i=Object.create(o.prototype),a=new C(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return L()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var s=b(a,r);if(s){if(s===u)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=l(t,e,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===u)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}(t,r,a),i}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var u={};function d(){}function h(){}function f(){}var p={};s(p,o,(function(){return this}));var m=Object.getPrototypeOf,v=m&&m(m(k([])));v&&v!==e&&r.call(v,o)&&(p=v);var g=f.prototype=d.prototype=Object.create(p);function y(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function _(t,e){function n(o,i,a,s){var c=l(t[o],t,i);if("throw"!==c.type){var u=c.arg,d=u.value;return d&&"object"==ze(d)&&r.call(d,"__await")?e.resolve(d.__await).then((function(t){n("next",t,a,s)}),(function(t){n("throw",t,a,s)})):e.resolve(d).then((function(t){u.value=t,a(u)}),(function(t){return n("throw",t,a,s)}))}s(c.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function b(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,b(t,e),"throw"===e.method))return u;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var n=l(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,u;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,u):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,u)}function x(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function w(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function C(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(x,this),this.reset(!0)}function k(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:L}}function L(){return{value:void 0,done:!0}}return h.prototype=f,s(g,"constructor",f),s(f,"constructor",h),h.displayName=s(f,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===h||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,f):(t.__proto__=f,s(t,a,"GeneratorFunction")),t.prototype=Object.create(g),t},t.awrap=function(t){return{__await:t}},y(_.prototype),s(_.prototype,i,(function(){return this})),t.AsyncIterator=_,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new _(c(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},y(g),s(g,a,"Generator"),s(g,o,(function(){return this})),s(g,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=k,C.prototype={constructor:C,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(w),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=r.call(i,"catchLoc"),c=r.call(i,"finallyLoc");if(s&&c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,u):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),u},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),w(r),u}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;w(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:k(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),u}},t}function Ze(t,e,r,n,o,i,a){try{var s=t[i](a),c=s.value}catch(t){return void r(t)}s.done?e(c):Promise.resolve(c).then(n,o)}const Be={name:"MqttCommandButton",props:{title:String,disabled:{type:Boolean,default:!1},mqttCommandTypeId:Number,laserDetection:[String,Number],x:Number,y:Number,x2:Number,y2:Number,vehicleId:String,deviceName:String,uuid:String,theta:Number,unit:String,regionMgmtId:Number,rootElementClass:String,elementType:{type:String,default:"button"},elementClass:String,elementStyle:String,action:String},computed:{form:function(){return{mqtt_command_type_id:this.mqttCommandTypeId,laser_detection:this.laserDetection,vehicle_id:this.vehicleId,x:this.x,y:this.y,x2:this.x2,y2:this.y2,device_name:this.deviceName,uuid:this.uuid,theta:this.theta,unit:this.unit,region_mgmt_id:this.regionMgmtId,action:this.action}}},data:function(){return{sending:!1}},methods:{submit:function(){var t,e=this;return(t=Ve().mark((function t(){var r,n,i;return Ve().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.getPureForm(e.form),t.prev=1,e.sending=!0,t.next=5,o().post("/api/mqttCommands",r);case 5:if(0!=(n=(n=t.sent).data).status){t.next=14;break}return i=n.data,4!=e.mqttCommandTypeId&&e.$toast.success({title:"成功訊息",message:"命令發送成功！"}),e.sending=!1,t.abrupt("return",i.mqttCommand);case 14:if(-12!=n.status){t.next=18;break}return alert("請先前往載具管理設定AMDR車輛！"),e.sending=!1,t.abrupt("return",null);case 18:t.next=25;break;case 20:t.prev=20,t.t0=t.catch(1),e.$emit("reset"),e.sending=!1,e.guestRedirectHome(t.t0);case 25:case"end":return t.stop()}}),t,null,[[1,20]])})),function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){Ze(i,n,o,a,s,"next",t)}function s(t){Ze(i,n,o,a,s,"throw",t)}a(void 0)}))})()}}};var He=r(1428),Ue={insert:"head",singleton:!1};L()(He.Z,Ue);He.Z.locals;const Ye=(0,m.Z)(Be,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{class:t.rootElementClass},["button"==t.elementType?r("button",{class:t.elementClass,style:t.elementStyle,attrs:{title:t.title,disabled:t.disabled||t.sending},on:{click:function(e){return t.$emit("click")}}},[t._t("default")],2):"a"==t.elementType?r("a",{class:{elementClass:!0,disabled:t.disabled||t.sending},style:t.elementStyle,attrs:{href:"javascript:void(0)",title:t.title},on:{click:function(e){return t.$emit("click")}}},[t._t("default")],2):t._e()])}),[],!1,null,"8ebac2ac",null).exports;function We(t){return We="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},We(t)}function Xe(){Xe=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function c(t,e,r,n){var o=e&&e.prototype instanceof d?e:d,i=Object.create(o.prototype),a=new C(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return L()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var s=b(a,r);if(s){if(s===u)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=l(t,e,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===u)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}(t,r,a),i}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var u={};function d(){}function h(){}function f(){}var p={};s(p,o,(function(){return this}));var m=Object.getPrototypeOf,v=m&&m(m(k([])));v&&v!==e&&r.call(v,o)&&(p=v);var g=f.prototype=d.prototype=Object.create(p);function y(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function _(t,e){function n(o,i,a,s){var c=l(t[o],t,i);if("throw"!==c.type){var u=c.arg,d=u.value;return d&&"object"==We(d)&&r.call(d,"__await")?e.resolve(d.__await).then((function(t){n("next",t,a,s)}),(function(t){n("throw",t,a,s)})):e.resolve(d).then((function(t){u.value=t,a(u)}),(function(t){return n("throw",t,a,s)}))}s(c.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function b(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,b(t,e),"throw"===e.method))return u;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var n=l(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,u;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,u):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,u)}function x(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function w(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function C(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(x,this),this.reset(!0)}function k(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:L}}function L(){return{value:void 0,done:!0}}return h.prototype=f,s(g,"constructor",f),s(f,"constructor",h),h.displayName=s(f,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===h||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,f):(t.__proto__=f,s(t,a,"GeneratorFunction")),t.prototype=Object.create(g),t},t.awrap=function(t){return{__await:t}},y(_.prototype),s(_.prototype,i,(function(){return this})),t.AsyncIterator=_,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new _(c(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},y(g),s(g,a,"Generator"),s(g,o,(function(){return this})),s(g,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=k,C.prototype={constructor:C,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(w),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=r.call(i,"catchLoc"),c=r.call(i,"finallyLoc");if(s&&c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,u):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),u},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),w(r),u}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;w(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:k(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),u}},t}function Qe(t,e,r,n,o,i,a){try{var s=t[i](a),c=s.value}catch(t){return void r(t)}s.done?e(c):Promise.resolve(c).then(n,o)}function Ke(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){Qe(i,n,o,a,s,"next",t)}function s(t){Qe(i,n,o,a,s,"throw",t)}a(void 0)}))}}const Je={name:"MqttCommandModal",$_veeValidate:{validator:"new"},components:{ClipLoader:h.Z,ToggleButton:Tt.ToggleButton},props:{value:{type:Boolean,default:!1},cId:{type:String,default:null}},watch:{value:function(t){this.showModal=t}},data:function(){return{loading:!0,sending:!1,showModal:this.value,form:{}}},created:function(){this.resetForm()},methods:{onShowModal:function(){var t=this;return Ke(Xe().mark((function e(){return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.resetForm(),t.loading=!1;case 2:case"end":return e.stop()}}),e)})))()},onHideModal:function(){this.resetForm(),this.$emit("input",!1)},submit:function(){var t=this;return Ke(Xe().mark((function e(){return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.validate();case 3:if(e.sent){e.next=6;break}return e.abrupt("return");case 6:t.$emit("submit",t.form),t.showModal=!1,e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),t.guestRedirectHome(e.t0);case 13:t.sending=!1;case 14:case"end":return e.stop()}}),e,null,[[0,10]])})))()},resetForm:function(){this.form={x:0,y:0,theta:0,laser_detection:"off",laser_detection_toggle_value:!1},this.resetFormValidate()}}};const tr=(0,m.Z)(Je,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("modal",{attrs:{size:"sm",footer:!1,backdrop:!1,"append-to-body":!0,keyboard:!1},on:{show:t.onShowModal,hide:t.onHideModal},model:{value:t.showModal,callback:function(e){t.showModal=e},expression:"showModal"}},[r("div",{attrs:{slot:"title"},slot:"title"},[t._v("編輯命令屬性")]),t._v(" "),r("div",{attrs:{slot:"default"},slot:"default"},[t.loading?t._e():r("form",{staticClass:"form-horizontal",attrs:{novalidate:""},on:{submit:function(e){return e.preventDefault(),t.submit.apply(null,arguments)}}},[r("div",{staticClass:"form-group"},[r("label",{staticClass:"col-md-4 control-label"},[t._v("x"),r("span",{staticClass:"is-danger"},[t._v(" *")])]),t._v(" "),r("div",{staticClass:"col-md-8"},[r("div",{staticClass:"input-group"},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.form.x,expression:"form.x"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"form-control",attrs:{type:"number",name:"x",placeholder:"請填寫座標x"},domProps:{value:t.form.x},on:{input:function(e){e.target.composing||t.$set(t.form,"x",e.target.value)}}}),t._v(" "),r("div",{staticClass:"input-group-addon"},[t._v("m")])]),t._v(" "),r("span",{directives:[{name:"show",rawName:"v-show",value:t.errors.first("x"),expression:"errors.first('x')"}],staticClass:"help is-danger"},[t._v("請填寫座標x")])])]),t._v(" "),r("div",{staticClass:"form-group"},[r("label",{staticClass:"col-md-4 control-label"},[t._v("y"),r("span",{staticClass:"is-danger"},[t._v(" *")])]),t._v(" "),r("div",{staticClass:"col-md-8"},[r("div",{staticClass:"input-group"},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.form.y,expression:"form.y"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"form-control",attrs:{type:"number",name:"y",placeholder:"請填寫座標y"},domProps:{value:t.form.y},on:{input:function(e){e.target.composing||t.$set(t.form,"y",e.target.value)}}}),t._v(" "),r("div",{staticClass:"input-group-addon"},[t._v("m")])]),t._v(" "),r("span",{directives:[{name:"show",rawName:"v-show",value:t.errors.first("y"),expression:"errors.first('y')"}],staticClass:"help is-danger"},[t._v("請填寫座標y")])])]),t._v(" "),r("div",{staticClass:"form-group"},[r("label",{staticClass:"col-md-4 control-label"},[t._v("theta"),r("span",{staticClass:"is-danger"},[t._v(" *")])]),t._v(" "),r("div",{staticClass:"col-md-8"},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.form.theta,expression:"form.theta"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"form-control",attrs:{type:"number",name:"theta",placeholder:"請填寫角度"},domProps:{value:t.form.theta},on:{input:function(e){e.target.composing||t.$set(t.form,"theta",e.target.value)}}}),t._v(" "),r("span",{directives:[{name:"show",rawName:"v-show",value:t.errors.first("theta"),expression:"errors.first('theta')"}],staticClass:"help is-danger"},[t._v("請填寫角度")])])]),t._v(" "),r("div",{staticClass:"form-group"},[r("label",{staticClass:"col-md-4 control-label"},[t._v("偵測  ")]),t._v(" "),r("div",{staticClass:"col-md-8"},[r("p",{staticClass:"form-control-static"},[r("toggle-button",{attrs:{sync:!0},on:{change:function(e){t.form.laser_detection=t.form.laser_detection_toggle_value?"on":"off"}},model:{value:t.form.laser_detection_toggle_value,callback:function(e){t.$set(t.form,"laser_detection_toggle_value",e)},expression:"form.laser_detection_toggle_value"}})],1)])]),t._v(" "),r("div",{staticClass:"text-right"},[r("button",{staticClass:"btn btn-light-green",attrs:{disabled:t.sending}},[t._v("送出")]),t._v(" "),r("button",{staticClass:"btn btn-default",attrs:{type:"button"},on:{click:function(e){t.showModal=!1}}},[t._v("取消")])])]),t._v(" "),t.loading?r("clip-loader",{staticClass:"loading",attrs:{color:"gray",size:"30px"}}):t._e()],1)])}),[],!1,null,null,null).exports;function er(t){return er="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},er(t)}function rr(){rr=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function c(t,e,r,n){var o=e&&e.prototype instanceof d?e:d,i=Object.create(o.prototype),a=new C(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return L()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var s=b(a,r);if(s){if(s===u)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=l(t,e,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===u)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}(t,r,a),i}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var u={};function d(){}function h(){}function f(){}var p={};s(p,o,(function(){return this}));var m=Object.getPrototypeOf,v=m&&m(m(k([])));v&&v!==e&&r.call(v,o)&&(p=v);var g=f.prototype=d.prototype=Object.create(p);function y(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function _(t,e){function n(o,i,a,s){var c=l(t[o],t,i);if("throw"!==c.type){var u=c.arg,d=u.value;return d&&"object"==er(d)&&r.call(d,"__await")?e.resolve(d.__await).then((function(t){n("next",t,a,s)}),(function(t){n("throw",t,a,s)})):e.resolve(d).then((function(t){u.value=t,a(u)}),(function(t){return n("throw",t,a,s)}))}s(c.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function b(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,b(t,e),"throw"===e.method))return u;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var n=l(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,u;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,u):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,u)}function x(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function w(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function C(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(x,this),this.reset(!0)}function k(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:L}}function L(){return{value:void 0,done:!0}}return h.prototype=f,s(g,"constructor",f),s(f,"constructor",h),h.displayName=s(f,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===h||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,f):(t.__proto__=f,s(t,a,"GeneratorFunction")),t.prototype=Object.create(g),t},t.awrap=function(t){return{__await:t}},y(_.prototype),s(_.prototype,i,(function(){return this})),t.AsyncIterator=_,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new _(c(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},y(g),s(g,a,"Generator"),s(g,o,(function(){return this})),s(g,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=k,C.prototype={constructor:C,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(w),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=r.call(i,"catchLoc"),c=r.call(i,"finallyLoc");if(s&&c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,u):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),u},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),w(r),u}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;w(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:k(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),u}},t}function nr(t,e,r,n,o,i,a){try{var s=t[i](a),c=s.value}catch(t){return void r(t)}s.done?e(c):Promise.resolve(c).then(n,o)}const or={name:"DustView",props:{vehicleId:{type:String}},watch:{vehicleId:function(){this.fetchData()}},data:function(){return{loading:!0,laserDust:null}},created:function(){this.fetchData();var t=this;window.Echo.private("laserDusts").listen("LaserDustCreated",(function(e){var r=e.laserDust;t.vehicleId==r.vehicle_id&&(t.laserDust=r)}))},destroyed:function(){window.Echo.leave("laserDusts")},methods:{fetchData:function(){var t,e=this;return(t=rr().mark((function t(){var r,n;return rr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.loading=!0,t.prev=1,t.next=4,o().get("/api/laserDusts",{params:{vehicle_id:e.vehicleId}});case 4:0==(r=(r=t.sent).data).status&&((n=r.data).laserDusts.length>0?e.laserDust=n.laserDusts[0]:e.laserDust=null),t.next=13;break;case 9:return t.prev=9,t.t0=t.catch(1),t.next=13,e.guestRedirectHome(t.t0);case 13:e.loading=!1;case 14:case"end":return t.stop()}}),t,null,[[1,9]])})),function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){nr(i,n,o,a,s,"next",t)}function s(t){nr(i,n,o,a,s,"throw",t)}a(void 0)}))})()}}};var ir=r(8155),ar={insert:"head",singleton:!1};L()(ir.Z,ar);ir.Z.locals;const sr=(0,m.Z)(or,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return t.laserDust?r("div",{staticClass:"dust-value"},[t.laserDust.val_1?r("div",[t._v(" Particles > 0.3μm/0.1L   air: "+t._s(t.laserDust.val_1))]):t._e(),t._v(" "),t.laserDust.val_2?r("div",[t._v(" Particles > 0.5μm/0.1L   air: "+t._s(t.laserDust.val_2))]):t._e(),t._v(" "),t.laserDust.val_3?r("div",[t._v(" Particles > 1.0μm/0.1L   air: "+t._s(t.laserDust.val_3))]):t._e(),t._v(" "),t.laserDust.val_4?r("div",[t._v(" Particles > 2.5μm/0.1L   air: "+t._s(t.laserDust.val_4))]):t._e(),t._v(" "),t.laserDust.val_5?r("div",[t._v(" Particles > 5.0μm/0.1L   air: "+t._s(t.laserDust.val_5))]):t._e(),t._v(" "),t.laserDust.val_6?r("div",[t._v(" Particles > 10.0μm/0.1L air: "+t._s(t.laserDust.val_6))]):t._e()]):t._e()}),[],!1,null,"0f24063b",null).exports;var cr,lr,ur,dr=r(5234),hr=r(8944),fr=r(9755);function pr(t){return pr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},pr(t)}function mr(){mr=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function c(t,e,r,n){var o=e&&e.prototype instanceof d?e:d,i=Object.create(o.prototype),a=new C(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return L()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var s=b(a,r);if(s){if(s===u)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=l(t,e,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===u)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}(t,r,a),i}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var u={};function d(){}function h(){}function f(){}var p={};s(p,o,(function(){return this}));var m=Object.getPrototypeOf,v=m&&m(m(k([])));v&&v!==e&&r.call(v,o)&&(p=v);var g=f.prototype=d.prototype=Object.create(p);function y(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function _(t,e){function n(o,i,a,s){var c=l(t[o],t,i);if("throw"!==c.type){var u=c.arg,d=u.value;return d&&"object"==pr(d)&&r.call(d,"__await")?e.resolve(d.__await).then((function(t){n("next",t,a,s)}),(function(t){n("throw",t,a,s)})):e.resolve(d).then((function(t){u.value=t,a(u)}),(function(t){return n("throw",t,a,s)}))}s(c.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function b(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,b(t,e),"throw"===e.method))return u;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var n=l(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,u;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,u):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,u)}function x(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function w(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function C(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(x,this),this.reset(!0)}function k(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:L}}function L(){return{value:void 0,done:!0}}return h.prototype=f,s(g,"constructor",f),s(f,"constructor",h),h.displayName=s(f,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===h||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,f):(t.__proto__=f,s(t,a,"GeneratorFunction")),t.prototype=Object.create(g),t},t.awrap=function(t){return{__await:t}},y(_.prototype),s(_.prototype,i,(function(){return this})),t.AsyncIterator=_,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new _(c(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},y(g),s(g,a,"Generator"),s(g,o,(function(){return this})),s(g,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=k,C.prototype={constructor:C,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(w),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=r.call(i,"catchLoc"),c=r.call(i,"finallyLoc");if(s&&c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,u):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),u},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),w(r),u}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;w(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:k(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),u}},t}function vr(t,e,r,n,o,i,a){try{var s=t[i](a),c=s.value}catch(t){return void r(t)}s.done?e(c):Promise.resolve(c).then(n,o)}function gr(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){vr(i,n,o,a,s,"next",t)}function s(t){vr(i,n,o,a,s,"throw",t)}a(void 0)}))}}var yr,_r,br,xr=function(){cr=!1},wr=function(){cr||alert("請選擇站點！")};const Cr={name:"RegionMgmtListPage",components:{LocationModal:hr.Z,LocationListView:dr.Z,LaserDustView:sr,MqttCommandModal:tr,MqttCommandButton:Ye,VehicleMgmtListSelect:ot.Z,VehicleMgmtListView:Ge.Z,EdgeModal:Vt,EdgeListView:Re,VertexListModal:Me,VertexModal:fe,VertexListView:ke,VertexPoint:J,VertexTypeSelect:Z,ProjectListSelect:y.Z,RegionMgmtListCollapseSelect:q,RegionMgmtModal:M},computed:{updatedAt:function(){return this.form&&this.form.updated_at?l()(this.form.updated_at).format("YYYYMMDDHHmmss"):""},vehicleMgmt:function(){var t=this,e=a().find(this.vehicleMgmts,(function(e){return e.vehicle_id==t.vehicleId}));return e?(e.mqtt_command||(e.mqtt_command=this.emptyMqttCommand()),e):this.emptyVehicleMgmt()},mqttCommand:function(){return this.vehicleMgmt&&this.vehicleMgmt.mqtt_command?this.vehicleMgmt.mqtt_command:this.emptyMqttCommand()},mqttCommandSendCommand:function(){return this.mqttCommand&&this.mqttCommand.send_command?JSON.parse(this.mqttCommand.send_command):this.emptyMqttCommandSendCommand()},urlState:function(){var t="?is_deploy=".concat(this.isDeploy);return this.form.project_id&&(t+="&project_id=".concat(this.form.project_id),this.form.id&&(t+="&region_mgmt_id=".concat(this.form.id))),t},isDeploy:function(){return this.$route.query.is_deploy?parseInt(this.$route.query.is_deploy):1},sendForm:function(){return{vertices:a().map(this.form.vertices,(function(t){return delete t.is_selected,delete t.is_nearby,delete t.nearby_vertex_length,delete t.vertex_type,delete t.is_show,t})),edges:a().map(this.form.edges,(function(t){return delete t.x1,delete t.y1,delete t.dragging_x1,delete t.dragging_y1,delete t.x2,delete t.y2,delete t.dragging_x2,delete t.dragging_y2,delete t.degrees,delete t.length,delete t.xMid,delete t.yMid,t})),locations:a().map(this.form.locations,(function(t){return t}))}},newRegionMd5:function(){var t=s.md5.create();return t.update(JSON.stringify(this.sendForm)),t.hex()},unsaved:function(){return!this.isDeploy&&this.oldRegionMd5&&this.oldRegionMd5!=this.newRegionMd5},imgNotFound:function(){return this.isDeploy?!this.form.is_exist_background:!this.form.is_exist_preview_background},isFloor:function(){return!!this.form.floor_region_mgmt_id},allowVertexTypeId:function(){return"cad"==this.mapType?4:null},roomName:function(){return this.form&&this.form.room_environment&&this.form.room_environment.room_name?this.form.room_environment.room_name:null}},beforeRouteLeave:function(t,e,r){this.unsaved?confirm("資料尚未儲存，確定要離開此畫面？")&&r():r()},watch:{"form.id":{handler:function(t,e){var r=this;return gr(mr().mark((function n(){var o;return mr().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r.hideVertexAndEdge=null==t,r.vertexModal.show&&(r.vertexModal.show=!1,r.vertexModal.id=null),r.locationModal.show&&(r.locationModal.show=!1,r.locationModal.id=null),window.history.replaceState(null,null,r.urlState),(o=Object.assign({},r.$route)).fullPath="".concat(r.$route.path).concat(r.urlState),o.params={is_deploy:r.isDeploy,project_id:r.form.project_id,region_mgmt_id:r.form.id},r.$router.history.cb(o),localStorage.redirect=r.$route.fullPath,n.next=11,r.fetchData(e);case 11:case"end":return n.stop()}}),n)})))()}},scale:function(t){this.locked=t<1,this.resizeContentHeight()},locked:function(t){t&&(this.showBlackMask=!1)},"vertexModal.show":{handler:function(t){this.isDeploy&&t&&(this.showRegion=!1,this.edgeModal.show=!1)},deep:!0},"locationModal.show":{handler:function(t){this.isDeploy&&t&&(this.showRegion=!1,this.edgeModal.show=!1)},deep:!0},"edgeModal.show":{handler:function(t){this.isDeploy&&t&&(this.showRegion=!1,this.vertexModal.show=!1,this.locationModal.show=!1)},deep:!0},vehicleId:function(){this.showBlackMask=!1,this.showBlackMaskMsg=!1}},data:function(){return{loading:!1,sending:!1,form:{id:this.$route.query.region_mgmt_id?parseInt(this.$route.query.region_mgmt_id):null,region:null,project_id:this.$route.query.project_id?parseInt(this.$route.query.project_id):null,vertices:[],locations:[],edges:[],mm:0,resolution:0,img_width:0,img_height:0,updated_at:null,origin_x:null,origin_y:null,origin_x_px:null,origin_y_px:null,mqtt_command:{command_id:null},project:{name:null}},regionMgmts:[],modal:{id:null,show:!1},selectedVertexIds:[],isAllVertexUnselected:!1,dragVertexPos:{x:-1,y:-1,vertex_id:null},resetVertexPosList:[],dragEdgePos:{x:-1,y:-1},nearbyVertex:null,nearbyLocation:null,scale:1,edgeModal:{show:!1,vertices:[],edge:null},vertexModal:{show:!1,id:null,nearbyVertices:[]},vertexListModal:{show:!1,vertices:[]},locationModal:{show:!1,id:null,nearbyVertices:[]},showRegion:!1,hideVertexAndEdge:!1,deleteVertexId:null,vertexTypeId:null,locked:!1,showBlackMask:!1,showBlackMaskMsg:!1,searchVertex:null,vertexLoading:!1,edgeLoading:!1,oldRegionMd5:null,vehicleMgmts:[],vehicleId:null,mqttCmdModal:{show:!1},cleanStatus:{},mapType:"radar"}},created:function(){var t=this,e=this;this.$route.query.region_mgmt_id&&(this.fetchData(),this.fetchCleanStatusData(),window.Echo.private("rabbitmq").listen("MqttCommandUpdated",(function(r){var n=r.mqttCommand,o=JSON.parse(n.receive_command),i=a().findIndex(e.vehicleMgmts,(function(t){return t.vehicle_id==n.vehicle_id}));if(o)switch(o.typename){case"on_vehicle_update_afs_path":if(!n.vehicle_mgmt||!n.vehicle_mgmt.clean_area||!n.vehicle_mgmt.clean_area.turning_points)return;e.$set(e.vehicleMgmts[i],"clean_area",n.vehicle_mgmt.clean_area),e.$set(e.vehicleMgmts[i].clean_area,"routes",[]);for(var s=1;s<e.vehicleMgmts[i].clean_area.turning_points.length;s++)e.vehicleMgmts[i].clean_area.routes.push({start:e.vehicleMgmts[i].clean_area.turning_points[s-1],end:e.vehicleMgmts[i].clean_area.turning_points[s]});e.showBlackMask=!1,e.showBlackMaskMsg=!1;break;case"on_transfer_completed":case"on_vehicle_discharged":if(-1==i)return;e.vehicleMgmts[i].stoppable_second=n.stoppable_second,e.vehicleMgmts[i].mqtt_command=e.emptyMqttCommand(),e.vehicleMgmts[i].mqtt_command.remain_stop_second=n.stoppable_second+1,e.vehicleMgmts[i].clean_area=null,e.$nextTick((function(){e.vehicleMgmts[i].theta=null}));break;case"set_door_completed":e.vehicleMgmts[i].mqtt_command=e.emptyMqttCommand(),t.$toast.success({title:"成功訊息",message:"自動門設定完成"});break;case"set_cylinder_completed":e.vehicleMgmts[i].mqtt_command=e.emptyMqttCommand(),t.$toast.success({title:"成功訊息",message:"電動缸設定完成"})}})),window.Echo.private("cleanStatuses").listen("CleanStatusUpdated",(function(t){var r=t.cleanStatus;r.cleanstation_ID==e.cleanStatus.cleanstation_ID&&(e.cleanStatus=r)}))),window.onbeforeunload=function(t){if(e.unsaved)return t.preventDefault(),t.returnValue="",""}},mounted:function(){var t=this;new(d())(fr("html"),(function(){t.resizeContentHeight()}))},destroyed:function(){window.Echo.leave("regionMgmts.display.".concat(this.form.id)),window.Echo.leave("rabbitmq"),window.Echo.leave("cleanStatuses")},methods:{fetchData:function(){var t=arguments,e=this;return gr(mr().mark((function r(){var n,i,a,s,c;return mr().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(n=t.length>0&&void 0!==t[0]?t[0]:null,e.isDeploy?n&&window.Echo.leave("regionMgmts.".concat(n)):e.$store.commit("UPDATE_REGION_MGMT_ID",e.form.id),e.form.id){r.next=7;break}return e.resetForm(),e.form.is_exist_preview_background=!1,e.form.is_exist_background=!1,r.abrupt("return");case 7:return e.oldRegionMd5=e.newRegionMd5,i=e,e.loading=!0,r.prev=10,r.next=13,o().get("/api/regionMgmts/".concat(e.form.id));case 13:if(0!=(a=(a=r.sent).data).status){r.next=30;break}if(s=a.data,c=s.regionMgmt,e.form.id==c.id){r.next=20;break}return r.abrupt("return");case 20:c.mm=parseInt(c.mm),c.project_id=parseInt(c.project_id),c.edit_user=null,c.project||(c.project={name:null}),e.form=c,e.locked=e.scale<1,e.showBlackMask=!1,e.isDeploy&&(n&&window.Echo.leave("regionMgmts.".concat(n)),window.Echo.private("regionMgmts.".concat(e.form.id)).listen("RegionMgmtUpdated",(function(t){i.fetchData(),i.$nextTick((function(){i.$refs.vehicles&&i.$refs.vehicles.fetchData()}))}))),e.isFloor?e.mapType="radar":e.form.floors&&(e.mapType="cad"),e.$nextTick(gr(mr().mark((function t(){return mr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("radar"!=i.mapType){t.next=5;break}return t.next=3,Promise.all([i.$refs.vertices.fetchData(),i.$refs.edges.fetchData()]);case 3:t.next=8;break;case 5:if("cad"!=i.mapType){t.next=8;break}return t.next=8,Promise.all([i.$refs.locations.fetchData(),i.$refs.edges.fetchData()]);case 8:i.oldRegionMd5=i.newRegionMd5,i.sending=!1,i.loading=!1;case 11:case"end":return t.stop()}}),t)}))));case 30:r.next=35;break;case 32:r.prev=32,r.t0=r.catch(10),e.guestRedirectHome(r.t0);case 35:e.loading=!1,e.$nextTick((function(){i.slider()}));case 37:case"end":return r.stop()}}),r,null,[[10,32]])})))()},showModal:function(t){this.unsaved?confirm("尚未儲存，確定要更新區域？")&&(this.modal.id=t,this.modal.show=!0):(this.modal.id=t,this.modal.show=!0)},resetForm:function(){this.form={id:null,region:null,project_id:null,vertices:[],locations:[],edges:[],mm:0,resolution:0,img_width:0,img_height:0,updated_at:null,origin_x:null,origin_y:null,origin_x_px:null,origin_y_px:null,origin_start_direction:1,is_exist_preview_background:!1,is_exist_background:!1,project:{name:null},deploy_background_file_md5:null,undeploy_background_file_md5:null,deploy_route_file_md5:null,undeploy_route_file_md5:null},this.oldRegionMd5=null,this.showBlackMask=!1,this.showBlackMaskMsg=!1},checkVertexPosition:function(t){if(this.form.project_id&&this.form.id)if(this.isDeploy||!this.locked)if("cad"!=this.mapType||4==this.vertexTypeId)if("radar"==this.mapType){var e=this,r=[],n=[],o=a().find(this.vertexTypes,(function(t){return t.id==e.vertexTypeId}));o&&(r=o.vertex_configuration_types,n=this.initDefaultVertexConfigurations(r)),this.vertexModal={show:!0,vertex:{id:null,region_mgmt_id:this.form.id,tag:null,vertex_type_id:this.vertexTypeId,vertex_type:{vertex_configuration_types:r},x:this.imgCoordToQuadrantCoordX(this.form.resolution,t.x,this.form.origin_x),y:this.imgCoordToQuadrantCoordY(this.form.resolution,t.y,this.form.img_height,this.form.origin_y,this.form.origin_start_direction),x_px:t.x,y_px:t.y,z:0,enable:1,vertex_configurations:n,region_mgmt:{project_id:this.form.project_id,resolution:this.form.resolution,origin_x:this.form.origin_x,img_height:this.form.img_height,origin_y:this.form.origin_y,origin_start_direction:this.form.origin_start_direction},undeploy_location:{name:null},edges:[]},nearbyVertices:[]}}else"cad"==this.mapType&&(this.locationModal={show:!0,location:{id:null,build:this.form.project?this.form.project.name:null,floors:this.form.floors?this.form.floors:null,room:this.roomName,vertex_id:null,vertex_name:null,device_name:null,copy_id:null,x:null,y:null,x_px:t.x,y_px:t.y},nearbyVertices:[]});else this.$toast.error({title:"無法新增站點",message:"CAD圖僅限新增「工作站」"});else this.$toast.error({title:"無法新增站點",message:"請先解除鎖定"});else this.$toast.error({title:"無法新增站點",message:"請先選擇區域"})},initDefaultVertexConfigurations:function(t){for(var e=this,r=a().filter(t,(function(t){return 1==t.is_default})),n=[],o=function(o){var i=r[o].vertex_configuration_column.name,s=a().find(t,(function(t){return t.vertex_configuration_column.name==i}));n.push({id:e.generateUUID(),type:i,data:null,vertex_configuration_type:s||null})},i=0;i<r.length;i++)o(i);return n},scaleMap:function(t){t?this.scale+=.1:this.scale-=.1},deleteEdges:function(){var t=this;return gr(mr().mark((function e(){return mr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(confirm("確定要清除所有的軌道？")){e.next=2;break}return e.abrupt("return");case 2:t.form.edges=[];case 3:case"end":return e.stop()}}),e)})))()},onMouseUp:function(){alert("請拖曳icon以創建站點！")},deleteRegion:function(){var t=this;return gr(mr().mark((function e(){return mr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(confirm("確定要刪除「".concat(t.form.region,"」?"))){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,o().delete("/api/regionMgmts/".concat(t.form.id));case 5:0==e.sent.data.status&&(t.$toast.success({title:"成功訊息",message:"刪除成功"}),t.regionMgmts=a().filter(t.regionMgmts,(function(e){return e.id!=t.form.id})),t.form.id=null),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),t.guestRedirectHome(e.t0);case 13:case"end":return e.stop()}}),e,null,[[2,10]])})))()},resizeContentHeight:function(){var t=document.getElementById("region"),e=document.getElementById("imgMap"),r=document.getElementsByClassName("div-region");if(e){var n=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth;r.length>0&&(r[0].style.width=e.width+"px",r[0].style.height=e.height+"px",r[0].style.transform="scale(".concat(this.scale,",").concat(this.scale,")")),e.width*this.scale<n?this.isDeploy&&(this.vertexModal.show||this.locationModal.show)&&n-452<e.width*this.scale?t.style.width=e.width*this.scale-(e.width-(n-452))+"px":t.style.width=e.width*this.scale+"px":this.isDeploy&&(this.vertexModal.show||this.locationModal.show)?t.style.width=n-452+"px":t.style.width=n+"px";var o=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight;e.height*this.scale<o-106?t.style.height=e.height*this.scale+"px":t.style.height=o-106+"px"}},slider:function(){var t,e,r,n,o=!1,i=document.getElementById("region");i&&(i.addEventListener("mousedown",(function(a){"location-point"!=a.target.className&&"vertex-point"!=a.target.className&&"edge-point"!=a.target.className&&"ui-widget-content ui-draggable ui-draggable-handle"!=a.target.className&&(o=!0,i.classList.add("active"),t=a.pageX,e=a.pageY-i.offsetTop,r=i.scrollLeft,n=i.scrollTop)})),i.addEventListener("mouseleave",(function(){o=!1,i.classList.remove("active")})),i.addEventListener("mouseup",(function(){o=!1,i.classList.remove("active")})),i.addEventListener("mousemove",(function(a){if(a.preventDefault(),o){var s=a.pageX-i.offsetLeft-t;i.scrollLeft=r-s;var c=a.pageY-i.offsetTop-e;i.scrollTop=n-c}})))},openNewWidow:function(t,e,r){var n="/".concat(r),o=void 0!==window.screenLeft?window.screenLeft:window.screenX,i=void 0!==window.screenTop?window.screenTop:window.screenY,a=window.innerWidth?window.innerWidth:document.documentElement.clientWidth?document.documentElement.clientWidth:screen.width,s=window.innerHeight?window.innerHeight:document.documentElement.clientHeight?document.documentElement.clientHeight:screen.height,c=a/window.screen.availWidth,l=(a-t)/2/c+o,u=(s-e)/2/c+i,d=window.open(n,"狀態顯示","scrollbars=yes,width=".concat(t/c,",height=").concat(e/c,",top=").concat(u,",left=").concat(l));window.focus&&d.focus()},submit:function(){var t=arguments,e=this;return gr(mr().mark((function r(){var n,i,a,s;return mr().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n=t.length>0&&void 0!==t[0]?t[0]:e.form.id,e.sending=!0,r.prev=2,i=null,r.next=6,o().patch("/api/regionMgmts/".concat(n),e.sendForm);case 6:if(0!=(i=(i=r.sent).data).status){r.next=29;break}if(e.$toast.success({title:"成功訊息",message:"儲存成功！"}),a=i.data,"radar"!=e.mapType){r.next=20;break}if(s=a.regionMgmt,e.form.undeploy_route_file_md5=s.undeploy_route_file_md5,e.form.updated_at=s.updated_at,e.imgNotFound){r.next=18;break}return r.next=18,Promise.all([e.$refs.vertices.fetchData(),e.$refs.edges.fetchData()]);case 18:r.next=24;break;case 20:if("cad"!=e.mapType){r.next=24;break}if(e.imgNotFound){r.next=24;break}return r.next=24,Promise.all([e.$refs.locations.fetchData(),e.$refs.edges.fetchData()]);case 24:e.showBlackMask=!1,e.showBlackMaskMsg=!1,e.oldRegionMd5=e.newRegionMd5,r.next=30;break;case 29:-9==i.status&&(e.vertexListModal.vertices=i.data,e.vertexListModal.show=!0);case 30:r.next=35;break;case 32:r.prev=32,r.t0=r.catch(2),e.guestRedirectHome(r.t0);case 35:e.sending=!1;case 36:case"end":return r.stop()}}),r,null,[[2,32]])})))()},resetRegion:function(t){window.history.replaceState(null,null,this.urlState);var e=Object.assign({},this.$route);e.fullPath="".concat(this.$route.path).concat(this.urlState),e.params={is_deploy:this.isDeploy,project_id:this.form.project_id,region_mgmt_id:this.form.id},this.$router.history.cb(e),this.form.project_id=t.project_id,this.form.id=t.id,this.form.id==t.id&&this.fetchData()},onChangeMapType:function(t){var e=this;return gr(mr().mark((function r(){var n;return mr().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!e.unsaved){r.next=3;break}if(confirm("資料尚未儲存，確定要切換地圖類型？")){r.next=3;break}return r.abrupt("return");case 3:if(e.loading=!0,e.vertexModal.show=!1,e.vertexModal.id=null,e.locationModal.show=!1,e.locationModal.id=null,e.mapType=t,e.form.id){r.next=11;break}return r.abrupt("return");case 11:n=e,e.$nextTick(gr(mr().mark((function e(){return mr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("radar"!=t){e.next=5;break}return e.next=3,Promise.all([n.$refs.vertices.fetchData(),n.$refs.edges.fetchData()]);case 3:e.next=8;break;case 5:if("cad"!=t){e.next=8;break}return e.next=8,Promise.all([n.$refs.locations.fetchData(),n.$refs.edges.fetchData()]);case 8:n.oldRegionMd5=n.newRegionMd5,n.loading=!1;case 10:case"end":return e.stop()}}),e)}))));case 13:case"end":return r.stop()}}),r)})))()},updateEdge:function(t){var e=a().findIndex(this.form.edges,(function(e){return t.id==e.id}));this.form.edges[e].enable=t.enable},onProjectChange:function(){var t=this;return gr(mr().mark((function e(){return mr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.form.id){e.next=2;break}return e.abrupt("return");case 2:if("radar"!=t.mapType){e.next=7;break}return e.next=5,Promise.all([t.$refs.vertices.fetchData(),t.$refs.edges.fetchData()]);case 5:e.next=10;break;case 7:if("cad"!=t.mapType){e.next=10;break}return e.next=10,Promise.all([t.$refs.locations.fetchData(),t.$refs.edges.fetchData()]);case 10:t.oldRegionMd5=t.newRegionMd5;case 11:case"end":return e.stop()}}),e)})))()},fetchCleanStatusData:function(){var t=this;return gr(mr().mark((function e(){var r,n;return mr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.loading=!0,e.prev=1,e.next=4,o().get("/api/cleanStatuses/clean001");case 4:0==(r=(r=e.sent).data).status&&(n=r.data,t.cleanStatus=n.cleanStatus),e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(1),e.next=13,t.guestRedirectHome(e.t0);case 13:t.loading=!1;case 14:case"end":return e.stop()}}),e,null,[[1,9]])})))()},generateGoal:function(t,e,r,n,o){var i=document.getElementById("imgMap"),s=this,c=a().findIndex(this.vehicleMgmts,(function(t){return t.vehicle_id==s.vehicleId}));this.vehicleMgmts[c].mqtt_command=a().cloneDeep(this.emptyMqttCommand()),this.vehicleMgmts[c].mqtt_command.mqtt_command_type_id=n,this.vehicleMgmts[c].mqtt_command.laser_detection=r,this.vehicleMgmts=a().cloneDeep(this.vehicleMgmts),br=setInterval((function(){s.vehicleMgmts[c].mqtt_command.remain_stop_second-=1,0==s.vehicleMgmts[c].mqtt_command.remain_stop_second&&(s.vehicleMgmts[c].mqtt_command.stop_disabled=!1,clearInterval(br))}),1e3),this.mqttCommand.sending=!0,_r=function(){var r=gr(mr().mark((function r(n){return mr().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:e?null===s.mqttCommand.start_goal_x_px&&null===s.mqttCommand.start_goal_y_px?(s.vehicleMgmts[c].mqtt_command.start_goal_x_px=n.offsetX,s.vehicleMgmts[c].mqtt_command.start_goal_y_px=n.offsetY,i.removeEventListener("mousemove",yr)):null===s.mqttCommand.end_goal_x_px&&null===s.mqttCommand.end_goal_y_px&&(s.vehicleMgmts[c].mqtt_command.end_goal_x_px=n.offsetX,s.vehicleMgmts[c].mqtt_command.end_goal_y_px=n.offsetY,i.removeEventListener("click",_r),s.showBlackMask=!0,s.showBlackMaskMsg=!0,s.$nextTick(gr(mr().mark((function e(){var r;return mr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.submit();case 2:r=e.sent,s.vehicleMgmts[c].clean_area?(s.vehicleMgmts[c].clean_area.start_goal_x_px=s.mqttCommand.start_goal_x_px,s.vehicleMgmts[c].clean_area.start_goal_y_px=s.mqttCommand.start_goal_y_px,s.vehicleMgmts[c].clean_area.end_goal_x_px=s.mqttCommand.end_goal_x_px,s.vehicleMgmts[c].clean_area.end_goal_y_px=s.mqttCommand.end_goal_y_px):s.$set(s.vehicleMgmts[c],"clean_area",{start_goal_x_px:s.mqttCommand.start_goal_x_px,start_goal_y_px:s.mqttCommand.start_goal_y_px,end_goal_x_px:s.mqttCommand.end_goal_x_px,end_goal_y_px:s.mqttCommand.end_goal_y_px}),s.vehicleMgmts[c].mqtt_command.start_goal_x_px=null,s.vehicleMgmts[c].mqtt_command.start_goal_y_px=null,s.vehicleMgmts[c].mqtt_command.end_goal_x_px=null,s.vehicleMgmts[c].mqtt_command.end_goal_y_px=null,r?(s.vehicleMgmts[c].mqtt_command.command_id=r.command_id,s.vehicleMgmts[c].mqtt_command.mqtt_command_type_id=r.mqtt_command_type_id,s.vehicleMgmts[c].mqtt_command.laser_detection=r.laser_detection):(s.showBlackMask=!1,s.showBlackMaskMsg=!1);case 9:case"end":return e.stop()}}),e)}))))):null===s.mqttCommand.goal_x_px&&null===s.mqttCommand.goal_y_px&&(s.vehicleMgmts[c].mqtt_command.goal_x_px=n.offsetX,s.vehicleMgmts[c].mqtt_command.goal_y_px=n.offsetY,i.removeEventListener("mousemove",yr),i.removeEventListener("click",_r),s.$nextTick(gr(mr().mark((function e(){var r;return mr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.submit();case 2:r=e.sent,s.vehicleMgmts[c].mqtt_command.sending=!1,s.vehicleMgmts[c].mqtt_command.goal_x_px=null,s.vehicleMgmts[c].mqtt_command.goal_y_px=null,r&&(s.vehicleMgmts[c].mqtt_command.command_id=r.command_id,s.vehicleMgmts[c].mqtt_command.mqtt_command_type_id=r.mqtt_command_type_id,s.vehicleMgmts[c].mqtt_command.laser_detection=r.laser_detection);case 7:case"end":return e.stop()}}),e)})))));case 1:case"end":return r.stop()}}),r)})));return function(t){return r.apply(this,arguments)}}(),yr=function(){var t=gr(mr().mark((function t(e){var r;return mr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=s.calculateDegrees(e.layerX,e.layerY,s.vehicleMgmts[c].position_x_px,s.vehicleMgmts[c].position_y_px),s.vehicleMgmts[c].theta=r-180,s.vehicleMgmts[c].vehicle_id!=s.vehicleId&&(i.removeEventListener("mousemove",yr),i.removeEventListener("click",_r),clearInterval(br),s.vehicleMgmts[c].mqtt_command=null,s.vehicleMgmts[c].theta=null);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),o?(this.vehicleMgmts[c].mqtt_command.goal_x_px=parseFloat(o.x),this.vehicleMgmts[c].mqtt_command.goal_y_px=parseFloat(o.y),this.vehicleMgmts[c].mqtt_command.theta=parseInt(o.theta),this.vehicleMgmts[c].mqtt_command.laser_detection=o.laser_detection,this.$nextTick(gr(mr().mark((function e(){var r;return mr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.submit();case 2:r=e.sent,s.vehicleMgmts[c].mqtt_command.sending=!1,s.vehicleMgmts[c].mqtt_command.goal_x_px=null,s.vehicleMgmts[c].mqtt_command.goal_y_px=null,r&&(s.vehicleMgmts[c].mqtt_command.command_id=r.command_id,s.vehicleMgmts[c].mqtt_command.mqtt_command_type_id=r.mqtt_command_type_id);case 7:case"end":return e.stop()}}),e)}))))):(i.addEventListener("click",_r),i.addEventListener("mousemove",yr))},selectVertex:function(t){var e=this;this.isAllVertexUnselected=!0;var r=a().findIndex(this.vehicleMgmts,(function(t){return t.vehicle_id==e.vehicleId}));this.vehicleMgmts[r].mqtt_command=a().cloneDeep(this.emptyMqttCommand()),this.vehicleMgmts[r].mqtt_command.mqtt_command_type_id=3,this.vehicleMgmts[r].mqtt_command.sending=!0,br=setInterval((function(){e.vehicleMgmts[r].mqtt_command.remain_stop_second-=1,0==e.vehicleMgmts[r].mqtt_command.remain_stop_second&&(e.vehicleMgmts[r].mqtt_command.stop_disabled=!1,clearInterval(br))}),1e3);var n=document.getElementById("imgMap");lr=this.$watch("selectedVertexIds",(function(o){if(0!=o.length){var i=o[0],s=a().find(e.form.vertices,(function(t){return t.id==i}));if(s){var c=a().find(s.vertex_configurations,(function(t){return"device_name"==t.type}));if(!c)return e.isAllVertexUnselected=!0,void alert("該站點沒有設立設備名稱，請重新選擇！");e.vehicleMgmts[r].mqtt_command.device_name=c.data,e.$nextTick(gr(mr().mark((function o(){var i;return mr().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,t.submit();case 2:i=o.sent,e.vehicleMgmts[r].mqtt_command.sending=!1,i&&(e.vehicleMgmts[r].mqtt_command.command_id=i.command_id,e.vehicleMgmts[r].mqtt_command.mqtt_command_type_id=i.mqtt_command_type_id,e.vehicleMgmts[r].mqtt_command.laser_detection=i.laser_detection),lr(),e.vehicleMgmts[r].mqtt_command.device_name=null,e.isAllVertexUnselected=!0,n.removeEventListener("mousedown",xr),n.removeEventListener("mousemove",ur),n.removeEventListener("mouseup",wr);case 11:case"end":return o.stop()}}),o)}))))}}})),ur=function(){if(e.vehicleMgmts[r].vehicle_id!=e.vehicleId){var t=document.getElementById("imgMap");t.removeEventListener("mousedown",xr),t.removeEventListener("mousemove",ur),t.removeEventListener("mouseup",wr),lr&&lr(),clearInterval(br),e.vehicleMgmts[r].mqtt_command=null}cr=!0},n.addEventListener("mousedown",xr),n.addEventListener("mousemove",ur),n.addEventListener("mouseup",wr)},directSubmit:function(t){var e=this;return gr(mr().mark((function r(){var n,o,i,s;return mr().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(n=e,-1!=(o=a().findIndex(e.vehicleMgmts,(function(t){return t.vehicle_id==n.vehicleId})))){r.next=4;break}return r.abrupt("return");case 4:if(e.vehicleMgmts[o].mqtt_command.sending=!0,7!=t.form.mqtt_command_type_id){r.next=13;break}if(!e.vehicleMgmts[o].mqtt_command.command_id){r.next=10;break}return e.vehicleMgmts[o].mqtt_command.command_id=null,r.next=10,t.submit();case 10:e.reset(),r.next=24;break;case 13:if(![43,44].contains(t.form.mqtt_command_type_id)){r.next=21;break}return r.next=16,t.submit();case 16:i=r.sent,-1!=(s=a().findIndex(e.vehicleMgmts,{vehicle_id:e.vehicleId}))&&(e.vehicleMgmts[s].mqtt_command=i),r.next=24;break;case 21:return r.next=23,t.submit();case 23:setTimeout((function(){n.reset()}),5e3);case 24:case"end":return r.stop()}}),r)})))()},stopCharge:function(t){var e=this;return gr(mr().mark((function r(){var n,o,i;return mr().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n=e,o=a().findIndex(e.vehicleMgmts,(function(t){return t.vehicle_id==n.vehicleId})),e.vehicleMgmts[o].mqtt_command.sending=!0,e.vehicleMgmts[o].mqtt_command.mqtt_command_type_id=6,e.vehicleMgmts[o].mqtt_command.command_id=null,r.next=7,t.submit();case 7:i=r.sent,setTimeout((function(){n.vehicleMgmts[o].mqtt_command.sending=!1}),5e3),i&&(n.vehicleMgmts[o].mqtt_command.command_id=i.command_id,n.vehicleMgmts[o].mqtt_command.mqtt_command_type_id=i.mqtt_command_type_id);case 10:case"end":return r.stop()}}),r)})))()},emptyVehicleMgmt:function(){return{vehicle_id:null,stoppable_second:5,chargeable:!0,vehicle_status:{battery_status:null},mqtt_command:this.emptyMqttCommand()}},emptyMqttCommandSendCommand:function(){return{data:{action:null}}},emptyMqttCommand:function(){var t=this,e=a().findIndex(this.vehicleMgmts,(function(e){return e.vehicle_id==t.vehicleId})),r=null;return-1!=e&&(r=this.vehicleMgmts[e]),{sending:!1,command_id:null,command_type_id:null,laser_detection:0,device_name:null,start_goal_x_px:null,start_goal_y_px:null,end_goal_x_px:null,end_goal_y_px:null,goal_x_px:null,goal_y_px:null,stop_disabled:!0,remain_stop_second:r&&r.stoppable_second?r.stoppable_second+1:6}},reset:function(){var t=this,e=a().findIndex(this.vehicleMgmts,(function(e){return e.vehicle_id==t.vehicleId}));if(-1!=e){var r=a().cloneDeep(this.emptyMqttCommand());r.remain_stop_second=0,this.$set(this.vehicleMgmts[e],"mqtt_command",r),this.vehicleMgmts[e].clean_area=null,this.vehicleMgmts[e].theta=null,this.showBlackMask=!1,this.showBlackMaskMsg=!1,this.isAllVertexUnselected=!0;var n=document.getElementById("imgMap");n.removeEventListener("mousedown",xr),n.removeEventListener("mousemove",ur),n.removeEventListener("mouseup",wr),lr&&lr(),n.removeEventListener("mousemove",yr),n.removeEventListener("click",_r),clearInterval(br)}},onImageLoad:function(){this.resizeContentHeight(),this.slider()},submitLocation:function(){var t=this;return gr(mr().mark((function e(){var r;return mr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.sending=!0,r=a().map(t.sendForm.locations,(function(t){return t.id.toString().contains("-")&&(t.id=null),t})),e.prev=2,null,e.next=6,o().patch("/api/locations/batch",{locations:r});case 6:0==e.sent.data.status&&(t.$toast.success({title:"成功訊息",message:"儲存成功！"}),t.showBlackMask=!1,t.showBlackMaskMsg=!1,t.oldRegionMd5=t.newRegionMd5),e.next=15;break;case 11:return e.prev=11,e.t0=e.catch(2),e.next=15,t.guestRedirectHome(e.t0);case 15:t.sending=!1;case 16:case"end":return e.stop()}}),e,null,[[2,11]])})))()}}};var kr=r(6818),Lr={insert:"head",singleton:!1};L()(kr.Z,Lr);kr.Z.locals;const Sr=(0,m.Z)(Cr,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"container-fluid"},[r("div",{staticClass:"region-area"},[r("div",{ref:"region",attrs:{id:"region"}},[t.form.project.name&&t.form.id?r("div",{staticClass:"div-region",staticStyle:{"-webkit-transform-origin":"0 0"}},["radar"==t.mapType?r("img",{attrs:{id:"imgMap",src:"/images/"+t.form.project.name+"/background_"+t.form.region+"_preview.png?v="+t.updatedAt,alt:"地圖"},on:{load:t.onImageLoad}}):"cad"==t.mapType?r("img",{attrs:{id:"imgMap",src:"/images/"+t.form.project.name+"/cad_"+t.form.region+".png?v="+t.updatedAt,alt:"地圖"},on:{load:t.onImageLoad}}):t._e(),t._v(" "),t.isDeploy?[r("div",{directives:[{name:"show",rawName:"v-show",value:t.mqttCommand.start_goal_x_px&&t.mqttCommand.start_goal_y_px,expression:"mqttCommand.start_goal_x_px && mqttCommand.start_goal_y_px"}],staticClass:"goal",style:"top: "+(t.mqttCommand.start_goal_y_px-5)+"px; left: "+(t.mqttCommand.start_goal_x_px-5)+"px"}),t._v(" "),r("div",{directives:[{name:"show",rawName:"v-show",value:t.mqttCommand.end_goal_x_px&&t.mqttCommand.end_goal_y_px,expression:"mqttCommand.end_goal_x_px && mqttCommand.end_goal_y_px"}],staticClass:"goal",style:"top: "+(t.mqttCommand.end_goal_y_px-5)+"px; left: "+(t.mqttCommand.end_goal_x_px-5)+"px"}),t._v(" "),r("div",{directives:[{name:"show",rawName:"v-show",value:t.mqttCommand.goal_x_px&&t.mqttCommand.goal_y_px,expression:"mqttCommand.goal_x_px && mqttCommand.goal_y_px"}],staticClass:"goal",style:"top: "+(t.mqttCommand.goal_y_px-5)+"px; left: "+(t.mqttCommand.goal_x_px-5)+"px"})]:t._e(),t._v(" "),t.form.origin_x_px&&t.form.origin_y_px?r("div",{staticClass:"origin-x-y",style:"top: "+(t.form.origin_y_px-5)+"px; left: "+(t.form.origin_x_px-5)+"px"}):t._e(),t._v(" "),t.isDeploy?r("vehicle-mgmt-list-view",{attrs:{"region-mgmt-id":t.form.id,"show-vehicle-points":!0},model:{value:t.vehicleMgmts,callback:function(e){t.vehicleMgmts=e},expression:"vehicleMgmts"}}):t._e(),t._v(" "),"radar"==t.mapType?r("vertex-list-view",{directives:[{name:"show",rawName:"v-show",value:!t.hideVertexAndEdge,expression:"!hideVertexAndEdge"}],ref:"vertices",attrs:{"region-mgmt-id":t.form.id,"selected-ids":t.selectedVertexIds,"is-all-unselected":t.isAllVertexUnselected,"drag-pos":t.dragVertexPos,"drag-edge-pos":t.dragEdgePos,"nearby-vertex":t.nearbyVertex,modal:t.vertexModal,scale:t.scale,"delete-id":t.deleteVertexId,"region-mgmt":t.form,"search-vertex":t.searchVertex,disabled:t.locked,"is-deploy":t.isDeploy,loading:t.vertexLoading,"map-type":t.mapType},on:{"update:selectedIds":function(e){t.selectedVertexIds=e},"update:selected-ids":function(e){t.selectedVertexIds=e},"update:isAllUnselected":function(e){t.isAllVertexUnselected=e},"update:is-all-unselected":function(e){t.isAllVertexUnselected=e},"update:dragPos":function(e){t.dragVertexPos=e},"update:drag-pos":function(e){t.dragVertexPos=e},"update:nearbyVertex":function(e){t.nearbyVertex=e},"update:nearby-vertex":function(e){t.nearbyVertex=e},"update:modal":function(e){t.vertexModal=e},"update:deleteId":function(e){t.deleteVertexId=e},"update:delete-id":function(e){t.deleteVertexId=e},"update:loading":function(e){t.vertexLoading=e}},model:{value:t.form.vertices,callback:function(e){t.$set(t.form,"vertices",e)},expression:"form.vertices"}}):"cad"==t.mapType?r("location-list-view",{directives:[{name:"show",rawName:"v-show",value:!t.hideVertexAndEdge,expression:"!hideVertexAndEdge"}],ref:"locations",attrs:{"region-mgmt-id":t.form.id,"selected-ids":t.selectedVertexIds,"is-all-unselected":t.isAllVertexUnselected,"drag-pos":t.dragVertexPos,"drag-edge-pos":t.dragEdgePos,"nearby-location":t.nearbyLocation,modal:t.locationModal,scale:t.scale,"delete-id":t.deleteVertexId,"region-mgmt":t.form,"search-location":t.searchVertex,disabled:t.locked,"is-deploy":t.isDeploy,loading:t.vertexLoading,"map-type":t.mapType},on:{"update:selectedIds":function(e){t.selectedVertexIds=e},"update:selected-ids":function(e){t.selectedVertexIds=e},"update:isAllUnselected":function(e){t.isAllVertexUnselected=e},"update:is-all-unselected":function(e){t.isAllVertexUnselected=e},"update:dragPos":function(e){t.dragVertexPos=e},"update:drag-pos":function(e){t.dragVertexPos=e},"update:nearbyLocation":function(e){t.nearbyLocation=e},"update:nearby-location":function(e){t.nearbyLocation=e},"update:modal":function(e){t.locationModal=e},"update:deleteId":function(e){t.deleteVertexId=e},"update:delete-id":function(e){t.deleteVertexId=e},"update:loading":function(e){t.vertexLoading=e}},model:{value:t.form.locations,callback:function(e){t.$set(t.form,"locations",e)},expression:"form.locations"}}):t._e(),t._v(" "),r("edge-list-view",{directives:[{name:"show",rawName:"v-show",value:!t.hideVertexAndEdge,expression:"!hideVertexAndEdge"}],ref:"edges",attrs:{"project-id":t.form.project_id,"region-mgmt-id":t.form.id,"drag-pos":t.dragEdgePos,"drag-vertex-pos":t.dragVertexPos,"reset-vertex-pos-list":t.resetVertexPosList,"selected-vertex-ids":t.selectedVertexIds,"is-all-vertex-unselected":t.isAllVertexUnselected,"nearby-vertex":t.nearbyVertex,"delete-vertex-id":t.deleteVertexId,scale:t.scale,disabled:t.locked,"is-deploy":t.isDeploy,loading:t.edgeLoading,modal:t.edgeModal,vertices:t.form.vertices,"vehicle-mgmts":t.vehicleMgmts,"map-type":t.mapType},on:{"update:dragPos":function(e){t.dragEdgePos=e},"update:drag-pos":function(e){t.dragEdgePos=e},"update:selectedVertexIds":function(e){t.selectedVertexIds=e},"update:selected-vertex-ids":function(e){t.selectedVertexIds=e},"update:isAllVertexUnselected":function(e){t.isAllVertexUnselected=e},"update:is-all-vertex-unselected":function(e){t.isAllVertexUnselected=e},"update:loading":function(e){t.edgeLoading=e},"update:modal":function(e){t.edgeModal=e}},model:{value:t.form.edges,callback:function(e){t.$set(t.form,"edges",e)},expression:"form.edges"}})],2):t._e()]),t._v(" "),r("div",{staticClass:"container-left-top"},[r("button",{directives:[{name:"show",rawName:"v-show",value:!t.isDeploy,expression:"!isDeploy"}],staticClass:"btn btn-lock",attrs:{disabled:t.scale<1||!(t.form.project_id&&t.form.id)},on:{click:function(e){t.locked=!t.locked}}},[r("img",{attrs:{src:t.locked?"/img/icon-locked.png":"/img/icon-unlock.png",alt:"鎖定狀態",height:"22"}}),t._v(" "),r("span",{staticClass:"pull-right",staticStyle:{"font-size":"13pt"}},[t._v(t._s(t.locked?" 已鎖定":" 未鎖定"))])])]),t._v(" "),r("div",{staticClass:"container-right-top"},[r("div",{staticClass:"form-inline"},[t.isDeploy?t._e():["radar"==t.mapType?r("button",{staticClass:"btn btn-light-green shadow",class:{"animation-fade":t.showBlackMask},attrs:{type:"button",disabled:t.sending||!(t.form.project_id&&t.form.id)||t.oldRegionMd5==t.newRegionMd5||t.loading||t.vertexLoading||t.edgeLoading},on:{click:function(e){return t.submit(t.form.id)}}},[t._v("儲存")]):"cad"==t.mapType?r("button",{staticClass:"btn btn-light-green shadow",class:{"animation-fade":t.showBlackMask},attrs:{type:"button",disabled:t.sending||!(t.form.project_id&&t.form.id)||t.oldRegionMd5==t.newRegionMd5||t.loading||t.vertexLoading||t.edgeLoading},on:{click:function(e){return t.submitLocation()}}},[t._v("儲存")]):t._e()],t._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:t.searchVertex,expression:"searchVertex"}],staticClass:"shadow form-control",staticStyle:{"max-width":"120px"},attrs:{placeholder:"搜尋站點",disabled:!t.form.id},domProps:{value:t.searchVertex},on:{input:function(e){e.target.composing||(t.searchVertex=e.target.value)}}}),t._v(" "),t.isDeploy?t._e():r("div",{staticClass:"dropdown",staticStyle:{display:"inline-block"}},[r("button",{staticClass:"btn btn-default shadow dropdown-toggle",attrs:{type:"button",id:"dropdownMenuExport","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"true",disabled:!t.form.id}},[t._v("\n                        匯出\n                        "),r("span",{staticClass:"caret"})]),t._v(" "),r("ul",{staticClass:"dropdown-menu",attrs:{"aria-labelledby":"dropdownMenuExport"}},[r("li",[r("a",{attrs:{href:"/"+t.form.project_id+"/graph_"+t.form.id+".json",target:"_blank"}},[t._v("下載 Graph.json")])])])]),t._v(" "),r("button",{staticClass:"btn shadow",class:{"btn-default":t.hideVertexAndEdge,"btn-light-green":!t.hideVertexAndEdge},staticStyle:{display:"inline-block"},attrs:{type:"button",title:"地圖路線"},on:{click:function(e){t.hideVertexAndEdge=!t.hideVertexAndEdge}}},[t._v("\n                    地圖路線\n                ")]),t._v(" "),r("div",{staticClass:"btn-group shadow",staticStyle:{display:"inline-block"},attrs:{role:"group"}},[r("button",{staticClass:"btn btn-default",attrs:{disabled:t.scale>=3},on:{click:function(e){return t.scaleMap(!0)}}},[t._v("+")]),t._v(" "),r("button",{staticClass:"btn btn-default",on:{click:function(e){t.scale=1}}},[t._v(t._s(parseInt(100*t.scale))+"%")]),t._v(" "),r("button",{staticClass:"btn btn-default",attrs:{disabled:t.scale<=0},on:{click:function(e){return t.scaleMap(!1)}}},[t._v("-")])]),t._v(" "),t.roomName?r("div",{staticClass:"room-name-block shadow"},[r("span",{staticClass:"room-name-title"},[t._v("房間名稱：")]),t._v(" "),r("span",{staticClass:"room-name"},[t._v(t._s(t.roomName))])]):t._e()],2)]),t._v(" "),t.isDeploy&&t.form.id?r("div",{staticClass:"container-tag"},[r("div",{staticClass:"tag-self",attrs:{title:"停車位狀態"},on:{click:function(e){return t.openNewWidow(1e3,300,"parkingLotMgmts/window")}}},[t._v("停車位狀態")]),t._v(" "),r("div",{staticClass:"tag-self",attrs:{title:"車輛狀態列表"},on:{click:function(e){return t.openNewWidow(1e3,300,"vehicleMgmts/window")}}},[t._v("車輛狀態列表")]),t._v(" "),r("div",{staticClass:"tag-self",staticStyle:{width:"160px"},attrs:{title:"清潔區域狀態列表"},on:{click:function(e){return t.openNewWidow(1e3,300,"cleanAreas/window")}}},[t._v("清潔區域狀態列表")]),t._v(" "),r("div",{staticClass:"tag-self",attrs:{title:"電梯狀態列表"},on:{click:function(e){return t.openNewWidow(1e3,300,"elevatorMgmts/window")}}},[t._v("電梯狀態列表")]),t._v(" "),r("div",{staticClass:"tag-self",attrs:{title:"任務歷史紀錄"},on:{click:function(e){return t.openNewWidow(1e3,300,"mqttCommands/window")}}},[t._v("任務歷史紀錄")])]):t._e(),t._v(" "),t.form.id&&t.form.project_id&&t.isFloor?r("div",{staticClass:"btn-group btn-group-sm bottom-bar-map-type"},[r("button",{staticClass:"btn btn-default",class:{active:"radar"==t.mapType},attrs:{type:"button",disabled:t.imgNotFound},on:{click:function(e){return t.onChangeMapType("radar")}}},[t._v("雷達圖")]),t._v(" "),r("button",{staticClass:"btn btn-default",class:{active:"cad"==t.mapType},attrs:{type:"button",disabled:!t.form.is_exist_cad},on:{click:function(e){return t.onChangeMapType("cad")}}},[t._v("CAD圖")])]):t._e(),t._v(" "),r("div",{staticClass:"container-bottom"},[r("div",{staticClass:"row bottom-bar"},[r("div",{staticClass:"col-xs-4 text-left"},[t.isDeploy||"cad"==t.mapType?t._e():r("button",{staticClass:"btn btn-clean-all-edge",attrs:{title:"清除所有軌道"},on:{click:t.deleteEdges}},[r("i",{staticClass:"glyphicon glyphicon-trash",staticStyle:{"font-size":"10pt"}}),t._v("\n                        清除所有軌道\n                    ")]),t._v(" "),t.form.id?r("div",{staticClass:"file-md5"},[t._v("\n                        graph: "+t._s(t.isDeploy?t.form.deploy_background_file_md5:t.form.undeploy_background_file_md5)),r("br"),t._v("\n                        route: "+t._s(t.isDeploy?t.form.deploy_route_file_md5:t.form.undeploy_route_file_md5)+"\n                    ")]):t._e(),t._v(" "),t.form.id&&t.isDeploy&&t.cleanStatus&&t.isFloor?r("div",{staticClass:"clean-station-status"},[t._v("\n                        自淨站(自動門): "+t._s("open"==t.cleanStatus.door_status?"已開門":"已關門")),r("br"),t._v("\n                        自淨站(電動缸): "+t._s("stretch"==t.cleanStatus.cylinder_status?"已伸出":"已縮回")+"\n                    ")]):t._e()]),t._v(" "),r("div",{staticClass:"col-xs-8 text-right"},[t.form.id?[r("div",{staticClass:"scale-refer-block"},[r("div",{staticClass:"scale-refer",staticStyle:{width:"70px"}}),t._v(" "),r("span",{staticStyle:{color:"#5c9b6c",margin:"0 14px 0 0"}},[t._v(t._s((t.form.mm?parseInt(t.form.mm)/1e3*70/t.scale:18.52081/t.scale).toFixed(0))+" m<米>")])])]:t._e(),t._v(" "),t.isDeploy&&t.isFloor?[r("vehicle-mgmt-list-select",{staticClass:"vehicle-mgmt-list-select",attrs:{disabled:!t.form.id},model:{value:t.vehicleId,callback:function(e){t.vehicleId=e},expression:"vehicleId"}}),t._v(" "),t.vehicleMgmt.vehicle_status&&t.vehicleMgmt.vehicle_status.battery_status?r("span",{staticClass:"battery"},[t._v("電量：\n                            "+t._s(t.vehicleMgmt.vehicle_status.battery_status)+"\n                        ")]):t._e(),t._v(" "),r("div",{staticClass:"dropup"},[r("button",{staticClass:"btn btn-light-green toolbar-btn dropdown-toggle",style:"background: "+([43,44].contains(t.mqttCommand.mqtt_command_type_id)?"orange":""),attrs:{type:"button",id:"cleanStationDropUpMenu","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false",disabled:!t.vehicleId||t.mqttCommand.sending||!!t.mqttCommand.command_id}},[43==t.mqttCommand.mqtt_command_type_id&&"stretch"==t.mqttCommandSendCommand.data.action?[r("i",{staticClass:"fa fa-long-arrow-right"}),t._v(" 伸出電動缸\n                                ")]:43==t.mqttCommand.mqtt_command_type_id&&"retract"==t.mqttCommandSendCommand.data.action?[r("i",{staticClass:"fa fa-long-arrow-left"}),t._v(" 縮回電動缸\n                                ")]:44==t.mqttCommand.mqtt_command_type_id&&"open"==t.mqttCommandSendCommand.data.action?[r("i",{staticClass:"fa fa-window-maximize",staticStyle:{width:"16px"}}),t._v(" 開門\n                                ")]:44==t.mqttCommand.mqtt_command_type_id&&"close"==t.mqttCommandSendCommand.data.action?[r("i",{staticClass:"fa fa-window-close",staticStyle:{width:"16px"}}),t._v(" 關門\n                                ")]:[r("i",{staticClass:"fa fa-recycle",staticStyle:{width:"16px"}}),t._v(" 自淨站\n                                ")],t._v(" "),r("span",{staticClass:"caret"})],2),t._v(" "),r("ul",{staticClass:"dropdown-menu",attrs:{"aria-labelledby":"cleanStationDropUpMenu"}},[r("li",[r("mqtt-command-button",{ref:"mqtt43Stretch",attrs:{"element-type":"a","element-style":43==t.mqttCommand.mqtt_command_type_id?"background: orange; color: white;":"",title:"伸出電動缸",action:"stretch","vehicle-id":t.vehicleId,"mqtt-command-type-id":43,"region-mgmt-id":t.form.id,disabled:!t.vehicleId||t.mqttCommand.sending||!!t.mqttCommand.command_id},on:{click:function(e){return t.directSubmit(t.$refs.mqtt43Stretch)},reset:t.reset}},[r("i",{staticClass:"fa fa-long-arrow-right",staticStyle:{width:"16px"}}),t._v(" 伸出電動缸\n                                    ")])],1),t._v(" "),r("li",[r("mqtt-command-button",{ref:"mqtt43Retract",attrs:{"element-type":"a","element-style":43==t.mqttCommand.mqtt_command_type_id?"background: orange; color: white;":"",title:"縮回電動缸",action:"retract","vehicle-id":t.vehicleId,"mqtt-command-type-id":43,"region-mgmt-id":t.form.id,disabled:!t.vehicleId||t.mqttCommand.sending||!!t.mqttCommand.command_id},on:{click:function(e){return t.directSubmit(t.$refs.mqtt43Retract)},reset:t.reset}},[r("i",{staticClass:"fa fa-long-arrow-left",staticStyle:{width:"16px"}}),t._v(" 縮回電動缸\n                                    ")])],1),t._v(" "),r("li",[r("mqtt-command-button",{ref:"mqtt44Open",attrs:{"element-type":"a","element-style":44==t.mqttCommand.mqtt_command_type_id?"background: orange; color: white;":"",title:"開門",action:"open","vehicle-id":t.vehicleId,"mqtt-command-type-id":44,"region-mgmt-id":t.form.id,disabled:!t.vehicleId||t.mqttCommand.sending||!!t.mqttCommand.command_id},on:{click:function(e){return t.directSubmit(t.$refs.mqtt44Open)},reset:t.reset}},[r("i",{staticClass:"fa fa-window-maximize",staticStyle:{width:"16px"}}),t._v(" 開門\n                                    ")])],1),t._v(" "),r("li",[r("mqtt-command-button",{ref:"mqtt44Close",attrs:{"element-type":"a","element-style":44==t.mqttCommand.mqtt_command_type_id?"background: orange; color: white;":"",title:"關門",action:"close","vehicle-id":t.vehicleId,"mqtt-command-type-id":44,"region-mgmt-id":t.form.id,disabled:!t.vehicleId||t.mqttCommand.sending||!!t.mqttCommand.command_id},on:{click:function(e){return t.directSubmit(t.$refs.mqtt44Close)},reset:t.reset}},[r("i",{staticClass:"fa fa-window-close",staticStyle:{width:"16px"}}),t._v(" 關門\n                                    ")])],1)])]),t._v(" "),r("div",{staticClass:"dropup"},[r("button",{staticClass:"btn btn-light-green toolbar-btn dropdown-toggle",style:"background: "+(2==t.mqttCommand.mqtt_command_type_id||4==t.mqttCommand.mqtt_command_type_id||13==t.mqttCommand.mqtt_command_type_id?"orange":""),attrs:{type:"button",id:"cleanDropUpMenu","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false",disabled:!t.vehicleId||t.mqttCommand.sending||!!t.mqttCommand.command_id}},[2==t.mqttCommand.mqtt_command_type_id?[r("i",{staticClass:"glyphicon glyphicon-search"}),t._v(" 偵測\n                                ")]:4==t.mqttCommand.mqtt_command_type_id&&1==t.mqttCommand.laser_detection?[r("i",{staticClass:"fa fa-paint-brush",staticStyle:{width:"16px"}}),t._v(" 清掃 +\n                                    "),r("i",{staticClass:"glyphicon glyphicon-search"}),t._v(" 偵測\n                                ")]:13==t.mqttCommand.mqtt_command_type_id?[r("i",{staticClass:"fa fa-paint-brush",staticStyle:{width:"16px"}}),t._v(" 全域清掃\n                                ")]:[r("i",{staticClass:"fa fa-paint-brush",staticStyle:{width:"16px"}}),t._v(" 清掃")],t._v(" "),r("span",{staticClass:"caret"})],2),t._v(" "),r("ul",{staticClass:"dropdown-menu",attrs:{"aria-labelledby":"cleanDropUpMenu"}},[r("li",[r("mqtt-command-button",{ref:"mqtt4on",attrs:{"element-type":"a","element-style":4==t.mqttCommand.mqtt_command_type_id&&1==t.mqttCommand.laser_detection?"background: orange; color: white;":"",title:"清掃+偵測","laser-detection":"on","vehicle-id":t.vehicleId,"mqtt-command-type-id":4,x:t.mqttCommand.start_goal_x_px,y:t.mqttCommand.start_goal_y_px,x2:t.mqttCommand.end_goal_x_px,y2:t.mqttCommand.end_goal_y_px,"region-mgmt-id":t.form.id,disabled:!t.vehicleId||t.mqttCommand.sending||!!t.mqttCommand.command_id},on:{click:function(e){return t.generateGoal(t.$refs.mqtt4on,!0,1,4)},reset:t.reset}},[r("i",{staticClass:"fa fa-paint-brush",staticStyle:{width:"16px"}}),t._v(" 清掃 +\n                                        "),r("i",{staticClass:"glyphicon glyphicon-search"}),t._v(" 偵測\n                                    ")])],1),t._v(" "),r("li",[r("mqtt-command-button",{ref:"mqtt4off",attrs:{"element-type":"a","element-style":4==t.mqttCommand.mqtt_command_type_id&&0===t.mqttCommand.laser_detection?"background: orange; color: white;":"",title:"清掃","vehicle-id":t.vehicleId,"mqtt-command-type-id":4,x:t.mqttCommand.start_goal_x_px,y:t.mqttCommand.start_goal_y_px,x2:t.mqttCommand.end_goal_x_px,y2:t.mqttCommand.end_goal_y_px,"region-mgmt-id":t.form.id,disabled:!t.vehicleId||t.mqttCommand.sending||!!t.mqttCommand.command_id},on:{click:function(e){return t.generateGoal(t.$refs.mqtt4off,!0,0,4)},reset:t.reset}},[r("i",{staticClass:"fa fa-paint-brush",staticStyle:{width:"16px"}}),t._v(" 清掃\n                                    ")])],1),t._v(" "),r("li",[r("mqtt-command-button",{ref:"mqtt2",attrs:{"element-type":"a","element-style":2==t.mqttCommand.mqtt_command_type_id&&1==t.mqttCommand.laser_detection?"background: orange; color: white;":"",title:"偵測","vehicle-id":t.vehicleId,"laser-detection":"on","mqtt-command-type-id":2,x:t.mqttCommand.goal_x_px,y:t.mqttCommand.goal_y_px,"region-mgmt-id":t.form.id,disabled:!t.vehicleId||t.mqttCommand.sending||!!t.mqttCommand.command_id},on:{click:function(e){return t.generateGoal(t.$refs.mqtt2,!1,1,2)},reset:t.reset}},[r("i",{staticClass:"glyphicon glyphicon-search"}),t._v(" 偵測\n                                    ")])],1)])]),t._v(" "),t.vehicleMgmt.chargeable?[r("div",{staticClass:"dropup"},[r("button",{staticClass:"btn btn-light-green toolbar-btn dropdown-toggle",style:"background: "+(5==t.mqttCommand.mqtt_command_type_id||6==t.mqttCommand.mqtt_command_type_id?"orange":""),attrs:{type:"button",id:"chargeDropUpMenu","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false",disabled:!t.vehicleId||t.mqttCommand.sending||!!t.mqttCommand.command_id}},[6==t.mqttCommand.mqtt_command_type_id?[t._m(0),t._v("  停止充電\n                                    ")]:[r("i",{staticClass:"fa fa-bolt",staticStyle:{width:"16px"}}),t._v(" 充電")],t._v(" "),r("span",{staticClass:"caret"})],2),t._v(" "),r("ul",{staticClass:"dropdown-menu",attrs:{"aria-labelledby":"chargeDropUpMenu"}},[r("li",[r("mqtt-command-button",{ref:"mqtt5",attrs:{"element-type":"a","element-style":5==t.mqttCommand.mqtt_command_type_id?"background: orange; color: white;":"",title:"充電","vehicle-id":t.vehicleId,"mqtt-command-type-id":5,x:t.mqttCommand.goal_x_px,y:t.mqttCommand.goal_y_px,"region-mgmt-id":t.form.id,disabled:!t.vehicleId||t.mqttCommand.sending||!!t.mqttCommand.command_id},on:{click:function(e){return t.generateGoal(t.$refs.mqtt5,!1,0,5)},reset:t.reset}},[r("i",{staticClass:"fa fa-bolt",staticStyle:{width:"16px"}}),t._v(" 充電\n                                        ")])],1),t._v(" "),r("li",[r("mqtt-command-button",{ref:"mqtt6",attrs:{"element-type":"a","element-style":6==t.mqttCommand.mqtt_command_type_id?"background: orange; color: white;":"",title:"停止充電","vehicle-id":t.vehicleId,"mqtt-command-type-id":6,"region-mgmt-id":t.form.id,disabled:!t.vehicleId||t.mqttCommand.sending||!!t.mqttCommand.command_id},on:{click:function(e){return t.stopCharge(t.$refs.mqtt6)}}},[r("i",{staticClass:"fa fa-bolt",staticStyle:{position:"relative",width:"16px"}},[r("i",{staticClass:"fa fa-remove",staticStyle:{position:"absolute",top:"6px",left:"10px","font-size":"8px"}})]),t._v("  停止充電\n                                        ")])],1)])])]:t._e(),t._v(" "),r("mqtt-command-button",{ref:"mqtt2off",attrs:{"root-element-class":"inline-block","element-class":"btn btn-light-green init-btn","element-style":"background: "+(11==t.mqttCommand.mqtt_command_type_id?"orange":""),title:"移動","vehicle-id":t.vehicleId,"laser-detection":t.mqttCommand.laser_detection,"mqtt-command-type-id":11,x:t.mqttCommand.goal_x_px,y:t.mqttCommand.goal_y_px,"region-mgmt-id":t.form.id,theta:t.mqttCommand.theta,unit:"m",disabled:!t.vehicleId||t.mqttCommand.sending||!!t.mqttCommand.command_id},on:{click:function(e){t.mqttCmdModal.show=!0},reset:t.reset}},[r("i",{staticClass:"glyphicon glyphicon-move"}),t._v(" 移動\n                        ")]),t._v(" "),r("mqtt-command-button",{ref:"mqtt3",attrs:{"root-element-class":"inline-block","element-class":"btn btn-light-green init-btn","element-style":"background: "+(3==t.mqttCommand.mqtt_command_type_id?"orange":""),title:"補水","vehicle-id":t.vehicleId,"mqtt-command-type-id":3,"device-name":t.mqttCommand.device_name,"region-mgmt-id":t.form.id,disabled:!t.vehicleId||t.mqttCommand.sending||!!t.mqttCommand.command_id},on:{click:function(e){return t.selectVertex(t.$refs.mqtt3)},reset:t.reset}},[r("i",{staticClass:"glyphicon glyphicon-tint"}),t._v(" 補水\n                        ")]),t._v(" "),r("mqtt-command-button",{ref:"mqtt12",attrs:{"root-element-class":"inline-block","element-class":"btn btn-light-green init-btn",title:"重設","vehicle-id":t.vehicleId,"mqtt-command-type-id":12,"region-mgmt-id":t.form.id,disabled:!t.vehicleId||t.mqttCommand.sending||!!t.mqttCommand.command_id},on:{click:function(e){return t.directSubmit(t.$refs.mqtt12)}}},[r("i",{staticClass:"glyphicon glyphicon-refresh"}),t._v(" 重設\n                        ")]),t._v(" "),r("mqtt-command-button",{ref:"mqtt7",attrs:{"root-element-class":"inline-block","element-class":"btn btn-light-green init-btn",title:"停止","vehicle-id":t.vehicleId,"mqtt-command-type-id":7,uuid:t.mqttCommand.command_id,"region-mgmt-id":t.form.id,disabled:t.mqttCommand.stop_disabled},on:{click:function(e){return t.directSubmit(t.$refs.mqtt7)}}},[r("i",{staticClass:"glyphicon glyphicon-ban-circle"}),t._v(" 停止\n                            "),t.mqttCommand.remain_stop_second>0&&t.mqttCommand.remain_stop_second<t.vehicleMgmt.stoppable_second+1?[t._v("\n                                ("+t._s(t.mqttCommand.remain_stop_second)+")\n                            ")]:t._e()],2)]:[r("div",{staticClass:"div-background"},[r("vertex-type-select",{staticClass:"list-select",staticStyle:{width:"164px"},attrs:{title:"請選擇站點類型",defaultText:"請選擇","vertex-type-id":t.allowVertexTypeId},model:{value:t.vertexTypeId,callback:function(e){t.vertexTypeId=e},expression:"vertexTypeId"}})],1),t._v(" "),t.vertexTypeId?r("vertex-point",{staticClass:"vertex-point-container",attrs:{vertexTypeId:t.vertexTypeId,scale:t.scale},on:{stop:t.checkVertexPosition,mouseup:t.onMouseUp}}):t._e()]],2)])]),t._v(" "),r("div",{staticClass:"container-right",class:t.showRegion?"":"container-right-collapsed",style:t.showRegion?"z-index: 2":"z-index: 1"},[r("div",{staticClass:"region-tag",class:t.showRegion?"":"burner-collapsed",on:{click:function(e){t.showRegion=!t.showRegion}}},[t._v("\n                "+t._s(t.showRegion?" >":" <")+"區域名稱\n            ")]),t._v(" "),r("div",{staticClass:"col-md-12 project-list"},[r("div",{staticClass:"text-center project-list-title"},[t._v("專案區域列表")]),t._v(" "),r("project-list-select",{attrs:{"is-deploy":t.isDeploy,disabled:!(!t.isDeploy||!t.form.project_id)},on:{change:t.onProjectChange},model:{value:t.form.project_id,callback:function(e){t.$set(t.form,"project_id",e)},expression:"form.project_id"}}),t._v(" "),r("div",{staticClass:"region-floor-room-collapse-select"},[t.form.project_id?r("region-mgmt-list-collapse-select",{attrs:{"project-id":t.form.project_id,"is-deploy":t.isDeploy,"enable-confirm":t.unsaved},on:{"update:projectId":function(e){return t.$set(t.form,"project_id",e)},"update:project-id":function(e){return t.$set(t.form,"project_id",e)}},model:{value:t.form.id,callback:function(e){t.$set(t.form,"id",e)},expression:"form.id"}}):t._e()],1)],1),t._v(" "),t.isDeploy?t._e():[r("div",{staticClass:"region-operate"},[r("div",{staticClass:"col-md-12 text-center"},[r("button",{staticClass:"btn btn-light-green",attrs:{title:"更新區域",disabled:!t.form.id},on:{click:function(e){return t.showModal(t.form.id)}}},[r("i",{staticClass:"glyphicon glyphicon-pencil"}),t._v(" 更新\n                        ")]),t._v(" "),r("button",{staticClass:"btn btn-light-green",attrs:{title:"刪除區域",disabled:!t.form.id},on:{click:t.deleteRegion}},[r("i",{staticClass:"glyphicon glyphicon-trash"}),t._v(" 刪除\n                        ")]),t._v(" "),r("button",{staticClass:"btn btn-light-green",attrs:{title:"新增區域"},on:{click:function(e){return t.showModal(null)}}},[r("i",{staticClass:"glyphicon glyphicon-upload"}),t._v(" 新增\n                        ")])]),t._v(" "),r("div",{staticClass:"clearfix"})])]],2),t._v(" "),t.isDeploy?r("div",{staticClass:"container-right-display",class:t.vertexModal.show||t.locationModal.show?"":"container-right-display-collapsed",style:t.vertexModal.show||t.locationModal.show?"z-index: 2":"z-index: 1"},[r("div",{staticClass:"show-info",style:t.vertexModal.show||t.locationModal.show?"":"right: -40px",on:{click:function(e){t.vertexModal.id?t.vertexModal.show=!t.vertexModal.show:t.locationModal.id?t.locationModal.show=!t.locationModal.show:t.vertexModal.show=t.locationModal.show=!1}}},[t._v("\n                "+t._s(t.vertexModal.show||t.locationModal.show?" >":" <")+"站點資訊\n            ")]),t._v(" "),"radar"==t.mapType?r("vertex-modal",{attrs:{vertex:t.vertexModal.vertex,"nearby-vertices":t.vertexModal.nearbyVertices,"region-mgmt-id":t.form.id,"is-deploy":t.isDeploy},on:{"update:vertex":function(e){return t.$set(t.vertexModal,"vertex",e)}},model:{value:t.vertexModal.show,callback:function(e){t.$set(t.vertexModal,"show",e)},expression:"vertexModal.show"}}):"cad"==t.mapType?r("location-modal",{attrs:{location:t.locationModal.location,"nearby-vertices":t.locationModal.nearbyVertices,room:t.roomName,"is-deploy":t.isDeploy},on:{"update:location":function(e){return t.$set(t.locationModal,"location",e)}},model:{value:t.locationModal.show,callback:function(e){t.$set(t.locationModal,"show",e)},expression:"locationModal.show"}}):t._e()],1):t._e(),t._v(" "),t.isDeploy?r("div",{staticClass:"container-right-display",class:t.edgeModal.show?"":"container-right-display-collapsed",style:t.edgeModal.show?"z-index: 2":"z-index: 1"},[r("div",{staticClass:"show-info",style:t.edgeModal.show?"":"right: -40px",on:{click:function(e){t.edgeModal.show=!t.edgeModal.show}}},[t._v("\n                "+t._s(t.edgeModal.show?" >":" <")+"軌道資訊\n            ")]),t._v(" "),r("edge-modal",{attrs:{edge:t.edgeModal.edge,"is-deploy":t.isDeploy,vertices:t.edgeModal.vertices},on:{update:t.updateEdge},model:{value:t.edgeModal.show,callback:function(e){t.$set(t.edgeModal,"show",e)},expression:"edgeModal.show"}})],1):t._e(),t._v(" "),r("mqtt-command-modal",{on:{submit:function(e){return t.generateGoal(t.$refs.mqtt2off,!1,t.$refs.mqtt2off.form.laser_detection,t.$refs.mqtt2off.form.mqtt_command_type_id,e)}},model:{value:t.mqttCmdModal.show,callback:function(e){t.$set(t.mqttCmdModal,"show",e)},expression:"mqttCmdModal.show"}}),t._v(" "),t.showBlackMask?r("div",{staticClass:"view-mask"},[t.showBlackMaskMsg?r("div",{staticClass:"route-planing"},[t._v("路線規劃中，請稍候......")]):t._e()]):t._e(),t._v(" "),t.vertexModal.show&&t.locationModal.show||!t.isDeploy||!t.isFloor?t._e():r("div",{staticClass:"dust-view"},[r("laser-dust-view",{attrs:{"vehicle-id":t.vehicleId}})],1)],1),t._v(" "),r("region-mgmt-modal",{attrs:{rid:t.modal.id},on:{update:t.resetRegion},model:{value:t.modal.show,callback:function(e){t.$set(t.modal,"show",e)},expression:"modal.show"}}),t._v(" "),r("vertex-list-modal",{attrs:{vertices:t.vertexListModal.vertices},scopedSlots:t._u([{key:"head",fn:function(){return[r("th",{staticClass:"text-center",staticStyle:{width:"130px"}},[t._v(" 區域")]),t._v(" "),r("th",{staticClass:"text-center",staticStyle:{width:"130px"}},[t._v(" 站點名稱")]),t._v(" "),r("th",[t._v("原因")])]},proxy:!0},{key:"body",fn:function(e){return[r("tr",[r("td",{staticClass:"text-center"},[t._v("\n                    "+t._s(e.vertex.region_mgmt.region)+"\n                ")]),t._v(" "),r("td",{staticClass:"text-center"},[t._v("\n                    "+t._s(e.vertex.name)+"\n                ")]),t._v(" "),r("td",{staticClass:"red"},[t._v("站點已出現在其他區域")])])]}}]),model:{value:t.vertexListModal.show,callback:function(e){t.$set(t.vertexListModal,"show",e)},expression:"vertexListModal.show"}})],1)}),[function(){var t=this.$createElement,e=this._self._c||t;return e("i",{staticClass:"fa fa-bolt",staticStyle:{position:"relative",width:"16px"}},[e("i",{staticClass:"fa fa-remove",staticStyle:{position:"absolute",top:"6px",left:"10px","font-size":"8px"}})])}],!1,null,"5ba4cb27",null).exports},9014:(t,e,r)=>{"use strict";r.d(e,{Z:()=>y});var n=r(6486),o=r.n(n),i=r(9755),a=r.n(i),s=r(9669),c=r.n(s),l=r(629);function u(t){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},u(t)}function d(){d=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function c(t,e,r,n){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new L(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return E()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var s=w(a,r);if(s){if(s===h)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=l(t,e,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===h)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}(t,r,a),i}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var h={};function f(){}function p(){}function m(){}var v={};s(v,o,(function(){return this}));var g=Object.getPrototypeOf,y=g&&g(g(S([])));y&&y!==e&&r.call(y,o)&&(v=y);var _=m.prototype=f.prototype=Object.create(v);function b(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function x(t,e){function n(o,i,a,s){var c=l(t[o],t,i);if("throw"!==c.type){var d=c.arg,h=d.value;return h&&"object"==u(h)&&r.call(h,"__await")?e.resolve(h.__await).then((function(t){n("next",t,a,s)}),(function(t){n("throw",t,a,s)})):e.resolve(h).then((function(t){d.value=t,a(d)}),(function(t){return n("throw",t,a,s)}))}s(c.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return h;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return h}var n=l(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,h;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,h):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,h)}function C(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function k(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function L(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(C,this),this.reset(!0)}function S(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:E}}function E(){return{value:void 0,done:!0}}return p.prototype=m,s(_,"constructor",m),s(m,"constructor",p),p.displayName=s(m,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,m):(t.__proto__=m,s(t,a,"GeneratorFunction")),t.prototype=Object.create(_),t},t.awrap=function(t){return{__await:t}},b(x.prototype),s(x.prototype,i,(function(){return this})),t.AsyncIterator=x,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new x(c(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},b(_),s(_,a,"Generator"),s(_,o,(function(){return this})),s(_,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=S,L.prototype={constructor:L,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(k),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=r.call(i,"catchLoc"),c=r.call(i,"finallyLoc");if(s&&c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,h):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),k(r),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;k(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:S(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),h}},t}function h(t,e,r,n,o,i,a){try{var s=t[i](a),c=s.value}catch(t){return void r(t)}s.done?e(c):Promise.resolve(c).then(n,o)}function f(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){h(i,n,o,a,s,"next",t)}function s(t){h(i,n,o,a,s,"throw",t)}a(void 0)}))}}function p(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function m(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?p(Object(r),!0).forEach((function(e){v(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):p(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function v(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}const g={name:"RegionMgmtListSelect",props:{value:{type:[Array,Number,String]},disabled:{type:Boolean,default:!1},placeholder:{type:String,default:"請選擇"},multiple:{type:Boolean,default:!1},color:{type:String,default:"theme-blue"},defaultText:{type:String,default:function(){return"請選擇區域"}},singleSelect2:{type:Boolean,default:!1},minNumForSearch:{type:Number,default:-1},projectId:{type:Number,default:null},excludeRegion:{type:Number,default:null},selectStyle:{type:String,default:"width: 100%"},isFloor:{type:Number,default:null}},computed:m(m({},(0,l.rn)({userId:function(t){return t.user.user.id}})),{},{filterRegionMgmts:function(){var t=this;return o().filter(this.regionMgmts,(function(e){return e.id!=t.excludeRegion}))}}),watch:{value:function(t){this.multiple?(this.init(),a()(this.$refs.select2).select2("data",o().map(t,(function(t){return t.id}))),this.refresh()):this.singleSelect2?(this.init(),a()(this.$refs.select2).select2("data",[t]),this.refresh()):(this.regionMgmtId=t,this.fetchData())},regionMgmtId:function(t){this.$emit("input",t),this.$emit("change")},projectId:function(t){var e=this;return f(d().mark((function r(){return d().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(t){r.next=5;break}e.regionMgmtId=null,e.regionMgmts=[],r.next=9;break;case 5:return e.loading=!0,r.next=8,e.fetchData();case 8:e.loading=!1;case 9:(e.singleSelect2||e.multiple)&&e.refresh();case 10:case"end":return r.stop()}}),r)})))()}},data:function(){return{regionMgmts:[],regionMgmtId:this.value,loading:!1}},mounted:function(){var t=this;return f(d().mark((function e(){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.projectId&&t.multiple){e.next=5;break}return e.next=3,t.fetchData();case 3:return t.refresh(),e.abrupt("return");case 5:return t.loading=!0,e.next=8,t.fetchData();case 8:t.loading=!1,(t.multiple||t.singleSelect2)&&(t.init(),t.setSelect2Val());case 10:case"end":return e.stop()}}),e)})))()},methods:{init:function(){var t=a()(this.$refs.select2),e=this;t.select2({minimumResultsForSearch:e.minNumForSearch,closeOnSelect:!this.multiple,language:{noResults:function(){return"查無資料"}}}),t.on("select2:select",(function(t){e.setVal()})),t.on("select2:unselect",(function(t){e.setVal()}))},fetchData:function(){var t=this;return f(d().mark((function e(){var r,n,i;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,c().get("/api/regionMgmts",{params:{project_id:t.projectId,is_floor:t.isFloor}});case 3:0==(r=(r=e.sent).data).status&&(n=r.data,t.regionMgmts=n.regionMgmts,t.regionMgmtId?t.regionMgmts.length>0?t.multiple?t.regionMgmtId=t.value:(i=t,o().find(t.regionMgmts,(function(t){return t.id==i.regionMgmtId}))||(t.regionMgmtId=t.regionMgmts[0].id)):t.multiple?t.regionMgmtId=[]:t.regionMgmtId=null:t.multiple||(t.regionMgmtId=t.value)),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),t.guestRedirectHome(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))()},setSelect2Val:function(){var t=this;this.$nextTick((function(){t.multiple&&!t.singleSelect2?a()(t.$refs.select2).val(o().map(t.value,(function(t){return t.id}))):a()(t.$refs.select2).val([t.value]),a()(t.$refs.select2).trigger("change")}))},setVal:function(){var t=a()(this.$refs.select2).select2("data");this.multiple?this.$emit("input",o().map(t,(function(t){return t}))):this.$emit("input",t[0].id)},refresh:function(){a()(this.$refs.select2).val(null).trigger("change"),this.init(),this.setSelect2Val()}}};const y=(0,r(1900).Z)(g,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return t.multiple||t.singleSelect2?r("div",{class:[t.color]},[r("select",{ref:"select2",staticClass:"form-control select2",style:t.selectStyle,attrs:{multiple:t.multiple,"data-placeholder":t.placeholder,disabled:t.disabled||t.loading}},t._l(t.filterRegionMgmts,(function(e){return r("option",{domProps:{value:e.id}},[t._v("\n            "+t._s(e.region)+"\n        ")])})),0)]):r("select",{directives:[{name:"model",rawName:"v-model",value:t.regionMgmtId,expression:"regionMgmtId"}],staticClass:"form-control",attrs:{disabled:t.disabled},on:{change:function(e){var r=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.regionMgmtId=e.target.multiple?r:r[0]}}},[r("option",{domProps:{value:null}},[t._v(t._s(t.defaultText))]),t._v(" "),t._l(t.filterRegionMgmts,(function(e){return r("option",{domProps:{value:e.id}},[t._v("\n        "+t._s(e.region)+"\n    ")])}))],2)}),[],!1,null,null,null).exports},8682:(t,e,r)=>{"use strict";r.d(e,{Z:()=>v});var n=r(9669),o=r.n(n),i=r(6486),a=r.n(i);function s(t){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},s(t)}function c(){c=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function l(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,r){return t[e]=r}}function u(t,e,r,n){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new L(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return E()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var s=w(a,r);if(s){if(s===h)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=d(t,e,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===h)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}(t,r,a),i}function d(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var h={};function f(){}function p(){}function m(){}var v={};l(v,o,(function(){return this}));var g=Object.getPrototypeOf,y=g&&g(g(S([])));y&&y!==e&&r.call(y,o)&&(v=y);var _=m.prototype=f.prototype=Object.create(v);function b(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function x(t,e){function n(o,i,a,c){var l=d(t[o],t,i);if("throw"!==l.type){var u=l.arg,h=u.value;return h&&"object"==s(h)&&r.call(h,"__await")?e.resolve(h.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(h).then((function(t){u.value=t,a(u)}),(function(t){return n("throw",t,a,c)}))}c(l.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return h;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return h}var n=d(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,h;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,h):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,h)}function C(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function k(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function L(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(C,this),this.reset(!0)}function S(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:E}}function E(){return{value:void 0,done:!0}}return p.prototype=m,l(_,"constructor",m),l(m,"constructor",p),p.displayName=l(m,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,m):(t.__proto__=m,l(t,a,"GeneratorFunction")),t.prototype=Object.create(_),t},t.awrap=function(t){return{__await:t}},b(x.prototype),l(x.prototype,i,(function(){return this})),t.AsyncIterator=x,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new x(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},b(_),l(_,a,"Generator"),l(_,o,(function(){return this})),l(_,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=S,L.prototype={constructor:L,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(k),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=r.call(i,"catchLoc"),c=r.call(i,"finallyLoc");if(s&&c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,h):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),k(r),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;k(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:S(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),h}},t}function l(t,e,r,n,o,i,a){try{var s=t[i](a),c=s.value}catch(t){return void r(t)}s.done?e(c):Promise.resolve(c).then(n,o)}function u(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){l(i,n,o,a,s,"next",t)}function s(t){l(i,n,o,a,s,"throw",t)}a(void 0)}))}}const d={name:"RegionMgmtPage",components:{LocationListView:r(5234).Z},computed:{roomName:function(){return this.regionMgmt&&this.regionMgmt.room_environment&&this.regionMgmt.room_environment.room_name?this.regionMgmt.room_environment.room_name:null}},data:function(){return{regionMgmtId:this.$route.params.id?parseInt(this.$route.params.id):null,regionMgmt:null,locations:null,microOrganismModal:{show:!1},microOrganism:null,acceptanceGrades:[],pollutionConditions:[],scale:1}},mounted:function(){var t=this;return u(c().mark((function e(){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.regionMgmtId){e.next=5;break}return e.next=3,Promise.all([t.fetchData(),t.fetchAcceptanceGradesData(),t.fetchPollutionConditionData()]);case 3:return e.next=5,t.$refs.locations.fetchData();case 5:t.slider(),t.subScribe();case 7:case"end":return e.stop()}}),e)})))()},beforeDestroy:function(){this.unSubscribe()},methods:{fetchData:function(){var t=this;return u(c().mark((function e(){var r,n;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.loading=!0,e.prev=1,e.next=4,o().get("/api/regionMgmts/".concat(t.regionMgmtId));case 4:0==(r=(r=e.sent).data).status&&(n=r.data,t.regionMgmt=n.regionMgmt),e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(1),e.next=13,t.guestRedirectHome(e.t0);case 13:t.loading=!1;case 14:case"end":return e.stop()}}),e,null,[[1,9]])})))()},fetchAcceptanceGradesData:function(){var t=this;return u(c().mark((function e(){var r,n;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.loading=!0,e.prev=1,e.next=4,o().get("/api/acceptanceGrades",{params:{region_mgmt_id:t.regionMgmtId}});case 4:0==(r=(r=e.sent).data).status&&(n=r.data,t.acceptanceGrades=n.acceptanceGrades),e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(1),e.next=13,t.guestRedirectHome(e.t0);case 13:t.loading=!1;case 14:case"end":return e.stop()}}),e,null,[[1,9]])})))()},fetchPollutionConditionData:function(){var t=this;return u(c().mark((function e(){var r,n,i;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.loading=!0,e.prev=1,e.next=4,o().get("/api/pollutionConditions");case 4:0==(r=(r=e.sent).data).status&&(n=r.data,t.pollutionConditions=[],i=["action","warn","general","normal"],a().forEach(i,(function(e){var r=a().find(n.pollutionConditions,{name:e});r&&t.pollutionConditions.push(r)}))),e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(1),e.next=13,t.guestRedirectHome(e.t0);case 13:t.loading=!1;case 14:case"end":return e.stop()}}),e,null,[[1,9]])})))()},slider:function(){var t,e,r,n,o=!1,i=document.getElementById("baseMap");i&&(i.addEventListener("mousedown",(function(a){a.target.className.contains("micro-organism")||"ui-widget-content ui-draggable ui-draggable-handle"==a.target.className||a.target.classList.contains("disable-drag")||(o=!0,i.classList.add("active"),t=a.pageX,e=a.pageY-i.offsetTop,r=i.scrollLeft,n=i.scrollTop)})),i.addEventListener("mouseleave",(function(){o=!1,i.classList.remove("active")})),i.addEventListener("mouseup",(function(){o=!1,i.classList.remove("active")})),i.addEventListener("mousemove",(function(a){if(a.preventDefault(),o){var s=a.pageX-i.offsetLeft-t;i.scrollLeft=r-s;var c=a.pageY-i.offsetTop-e;i.scrollTop=n-c}})))},showMicroOrganism:function(t){t&&t.device_name&&(this.microOrganism=t),this.microOrganism?t&&t.device_name?this.microOrganismModal.show=!0:this.microOrganismModal.show=!this.microOrganismModal.show:alert("請雙擊微生物。")},subScribe:function(){var t=this;window.Echo.private("pollutionConditions").listen("PollutionConditionUpdated",(function(e){var r=e.pollutionCondition,n=a().findIndex(t.pollutionConditions,{id:r.id});-1!=n&&t.pollutionConditions.splice(n,1,r)}))},unSubscribe:function(){window.Echo.leave("pollutionConditions")},scaleMap:function(t){t?this.scale+=.1:this.scale-=.1}}};var h=r(3379),f=r.n(h),p=r(809),m={insert:"head",singleton:!1};f()(p.Z,m);p.Z.locals;const v=(0,r(1900).Z)(d,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"region",attrs:{id:"region"}},[t.regionMgmt?r("div",{staticClass:"base-map",style:"scale: "+t.scale,attrs:{id:"baseMap"}},[r("img",{attrs:{src:"/images/"+t.regionMgmt.project.name+"/cad_"+t.regionMgmt.region+".png",alt:"",draggable:"false"}}),t._v(" "),r("location-list-view",{ref:"locations",attrs:{"map-type":"cad","view-type":"pollution","region-mgmt":t.regionMgmt,"region-mgmt-id":t.regionMgmt.id,"is-deploy":1,"acceptance-grades":t.acceptanceGrades,"pollution-conditions":t.pollutionConditions,scale:t.scale},on:{dbclick:t.showMicroOrganism},model:{value:t.locations,callback:function(e){t.locations=e},expression:"locations"}})],1):t._e(),t._v(" "),r("div",{staticClass:"micro-organism-legend"},[t._m(0),t._v(" "),r("div",[t._l(t.pollutionConditions,(function(e){return[r("span",[r("i",{staticClass:"fa fa-square",style:"color: "+e.color,attrs:{"aria-hidden":"true"}}),t._v(" "+t._s(e.display_name))])]}))],2)]),t._v(" "),r("div",{staticClass:"room-name-block"},[r("router-link",{staticClass:"back-btn",attrs:{to:"/floorRegionMgmts/1"}},[t._v("<返回")]),t._v(" "),r("span",{staticClass:"room-name-title"},[t._v("現在位置：")]),t._v(" "),r("span",{staticClass:"room-name"},[t._v(t._s(t.roomName?t.roomName:"尚無房間名稱"))]),t._v("\n         \n        "),r("div",{staticClass:"btn-group shadow",staticStyle:{display:"inline-block"},attrs:{role:"group"}},[r("button",{staticClass:"btn btn-default",attrs:{disabled:t.scale>=3},on:{click:function(e){return t.scaleMap(!0)}}},[t._v("+")]),t._v(" "),r("button",{staticClass:"btn btn-default",on:{click:function(e){t.scale=1}}},[t._v(t._s(parseInt(100*t.scale))+"%")]),t._v(" "),r("button",{staticClass:"btn btn-default",attrs:{disabled:t.scale<=0},on:{click:function(e){return t.scaleMap(!1)}}},[t._v("-")])])],1),t._v(" "),r("div",{staticClass:"micro-organism",class:t.microOrganismModal.show?"":"micro-organism-collapsed"},[r("div",{staticClass:"micro-organism-tag",class:t.microOrganism&&t.microOrganismModal.show?"":"tag-collapsed",on:{click:t.showMicroOrganism}},[t._v("\n            "+t._s(t.microOrganismModal.show?" >":" <")+"微生物資訊\n        ")]),t._v(" "),r("div",{staticClass:"micro-organism-info"},[t.microOrganism?r("form",{staticClass:"form-horizontal",attrs:{novalidate:""}},[r("div",{staticClass:"form-group"},[r("label",{staticClass:"col-md-4 control-label"},[t._v("時間")]),t._v(" "),r("div",{staticClass:"col-md-8"},[r("p",{staticClass:"form-control-static"},[t._v(t._s(t._f("datetime")(t.microOrganism.Time)))])])]),t._v(" "),r("div",{staticClass:"form-group"},[r("label",{staticClass:"col-md-4 control-label"},[t._v("位置")]),t._v(" "),r("div",{staticClass:"col-md-8"},[r("p",{staticClass:"form-control-static"},[t._v(t._s(t.microOrganism.device_name))])])]),t._v(" "),r("div",{staticClass:"form-group"},[r("label",{staticClass:"col-md-4 control-label"},[t._v("座標")]),t._v(" "),r("div",{staticClass:"col-md-8"},[r("p",{staticClass:"form-control-static"},[r("span",{staticStyle:{"font-weight":"bold"}},[t._v("X: ")]),t._v(t._s(t.microOrganism.location.x_px))]),t._v(" "),r("p",{staticClass:"form-control-static"},[r("span",{staticStyle:{"font-weight":"bold"}},[t._v("Y: ")]),t._v(t._s(t.microOrganism.location.y_px))])])]),t._v(" "),r("div",{staticClass:"form-group"},[r("label",{staticClass:"col-md-4 control-label"},[t._v("微生物類別")]),t._v(" "),r("div",{staticClass:"col-md-8"},[r("p",{staticClass:"form-control-static"},["suspended"==t.microOrganism.organism_kind?r("span",[t._v("懸浮微生物")]):"falling"==t.microOrganism.organism_kind?r("span",[t._v("落下微生物")]):"contact"==t.microOrganism.organism_kind?r("span",[t._v("接觸微生物")]):"microparticle_dot_5"==t.microOrganism.organism_kind?r("span",[t._v("微粒子(0.5µm)")]):"microparticle_5"==t.microOrganism.organism_kind?r("span",[t._v("微粒子(5µm)")]):t._e()])])]),t._v(" "),r("div",{staticClass:"form-group"},[r("label",{staticClass:"col-md-4 control-label"},[t._v("微生物數據")]),t._v(" "),r("div",{staticClass:"col-md-8"},[r("p",{staticClass:"form-control-static"},[t._v(t._s(t.microOrganism.organism_value))])])]),t._v(" "),r("div",{staticClass:"form-group"},[r("label",{staticClass:"col-md-4 control-label"},[t._v("房間名稱")]),t._v(" "),r("div",{staticClass:"col-md-8"},[r("p",{staticClass:"form-control-static"},[t._v(t._s(t.microOrganism.room_name))])])])]):t._e()])])])}),[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("span",[r("i",{staticClass:"fa fa-play fa-fw fa-rotate-270",attrs:{"aria-hidden":"true"}}),t._v(" 懸浮微生物")]),t._v(" "),r("span",[r("i",{staticClass:"fa fa-square fa-fw",attrs:{"aria-hidden":"true"}}),t._v(" 落下微生物")]),t._v(" "),r("span",[r("i",{staticClass:"fa fa-circle fa-fw",attrs:{"aria-hidden":"true"}}),t._v(" 接觸微生物")]),t._v(" "),r("span",[r("i",{staticClass:"fa fa-star fa-fw",attrs:{"aria-hidden":"true"}}),t._v(" 微粒子(5µm)")]),t._v(" "),r("span",[r("i",{staticClass:"fa fa-square fa-fw fa-rotate-45",attrs:{"aria-hidden":"true"}}),t._v(" 微粒子(0.5µm)")])])}],!1,null,"16962b0f",null).exports},1434:(t,e,r)=>{"use strict";r.d(e,{Z:()=>j});var n=r(629),o=(r(381),r(9669)),i=r.n(o),a=r(6486),s=r.n(a),c=r(9038),l=r(6011),u=r(9755),d=r.n(u);function h(t){return h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},h(t)}function f(){f=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function c(t,e,r,n){var o=e&&e.prototype instanceof d?e:d,i=Object.create(o.prototype),a=new L(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return E()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var s=w(a,r);if(s){if(s===u)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=l(t,e,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===u)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}(t,r,a),i}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var u={};function d(){}function p(){}function m(){}var v={};s(v,o,(function(){return this}));var g=Object.getPrototypeOf,y=g&&g(g(S([])));y&&y!==e&&r.call(y,o)&&(v=y);var _=m.prototype=d.prototype=Object.create(v);function b(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function x(t,e){function n(o,i,a,s){var c=l(t[o],t,i);if("throw"!==c.type){var u=c.arg,d=u.value;return d&&"object"==h(d)&&r.call(d,"__await")?e.resolve(d.__await).then((function(t){n("next",t,a,s)}),(function(t){n("throw",t,a,s)})):e.resolve(d).then((function(t){u.value=t,a(u)}),(function(t){return n("throw",t,a,s)}))}s(c.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return u;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var n=l(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,u;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,u):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,u)}function C(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function k(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function L(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(C,this),this.reset(!0)}function S(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:E}}function E(){return{value:void 0,done:!0}}return p.prototype=m,s(_,"constructor",m),s(m,"constructor",p),p.displayName=s(m,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,m):(t.__proto__=m,s(t,a,"GeneratorFunction")),t.prototype=Object.create(_),t},t.awrap=function(t){return{__await:t}},b(x.prototype),s(x.prototype,i,(function(){return this})),t.AsyncIterator=x,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new x(c(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},b(_),s(_,a,"Generator"),s(_,o,(function(){return this})),s(_,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=S,L.prototype={constructor:L,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(k),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=r.call(i,"catchLoc"),c=r.call(i,"finallyLoc");if(s&&c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,u):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),u},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),k(r),u}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;k(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:S(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),u}},t}function p(t,e,r,n,o,i,a){try{var s=t[i](a),c=s.value}catch(t){return void r(t)}s.done?e(c):Promise.resolve(c).then(n,o)}function m(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){p(i,n,o,a,s,"next",t)}function s(t){p(i,n,o,a,s,"throw",t)}a(void 0)}))}}const v={name:"MapListSelect",props:{value:{type:[String,Array]},valueColumn:{type:String,default:"guid"},optionColumn:{type:String,default:"name"},disabled:{type:Boolean,default:!1},placeholder:{type:String,default:"請選擇"},color:{type:String,default:"theme-blue"},multiple:{type:Boolean,default:!1},items:{type:Array,default:function(){return null}},selectId:String,selectClass:String,selectStyle:String,selectWidth:{type:String,default:"auto"},allowClear:{type:Boolean,default:!1}},watch:{value:function(t){this.multiple?d()(this.$refs.select2).select2("data",s().map(t,(function(t){return t}))):d()(this.$refs.select2).select2("data",[t]),this.refresh()},items:function(t){var e=this;return m(f().mark((function r(){return f().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(null!==t){r.next=5;break}return r.next=3,e.fetchData();case 3:r.next=6;break;case 5:e.maps=t;case 6:e.setSelect2Val(),e.init();case 8:case"end":return r.stop()}}),r)})))()}},data:function(){return{loading:!1,maps:[]}},created:function(){var t=this;return m(f().mark((function e(){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==t.items){e.next=5;break}return e.next=3,t.fetchData();case 3:e.next=6;break;case 5:t.maps=t.items;case 6:t.setSelect2Val();case 7:case"end":return e.stop()}}),e)})))()},mounted:function(){this.init()},methods:{init:function(){var t=d()(this.$refs.select2),e=this;t.select2({allowClear:this.allowClear,closeOnSelect:!this.multiple,dropdownAutoWidth:!0,language:{noResults:function(){return"查無選項"}},minimumResultsForSearch:-1,width:this.selectWidth}),t.on("select2:select",(function(t){e.setVal()})),t.on("select2:unselect",(function(t){e.setVal()}))},fetchData:function(){var t=this;return m(f().mark((function e(){var r,n;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.loading=!0,e.prev=1,e.next=4,i().get("/api/maps",{params:{pagination:0}});case 4:0==(r=(r=e.sent).data).status&&(n=r.data,t.maps=n.maps),e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(1),e.next=13,t.guestRedirectHome(e.t0);case 13:return e.prev=13,t.loading=!1,e.finish(13);case 16:case"end":return e.stop()}}),e,null,[[1,9,13,16]])})))()},setSelect2Val:function(){var t=this;this.$nextTick((function(){t.multiple?d()(t.$refs.select2).val(s().map(t.value,(function(t){return t}))):d()(t.$refs.select2).val([t.value]),d()(t.$refs.select2).trigger("change")}))},setVal:function(){var t=d()(this.$refs.select2).select2("data");this.multiple?this.$emit("input",s().map(t,(function(t){return t.id}))):t.length>0?this.$emit("input",t[0].id):this.$emit("input",null),this.$emit("change")},refresh:function(){d()(this.$refs.select2).val(null).trigger("change"),d()(this.$refs.select2).select2("destroy"),this.init(),this.setSelect2Val()}}};var g=r(1900);const y=(0,g.Z)(v,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{class:[t.color]},[r("select",{ref:"select2",class:t.selectClass,style:t.selectStyle,attrs:{id:t.selectId,"data-placeholder":t.placeholder,multiple:t.multiple,disabled:t.disabled||t.loading}},t._l(t.maps,(function(e){return r("option",{domProps:{value:e[t.valueColumn]}},[t._v("\n            "+t._s(e[t.optionColumn])+"\n        ")])})),0)])}),[],!1,null,null,null).exports;var _=r(6875);function b(t){return b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},b(t)}function x(){x=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function c(t,e,r,n){var o=e&&e.prototype instanceof d?e:d,i=Object.create(o.prototype),a=new L(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return E()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var s=w(a,r);if(s){if(s===u)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=l(t,e,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===u)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}(t,r,a),i}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var u={};function d(){}function h(){}function f(){}var p={};s(p,o,(function(){return this}));var m=Object.getPrototypeOf,v=m&&m(m(S([])));v&&v!==e&&r.call(v,o)&&(p=v);var g=f.prototype=d.prototype=Object.create(p);function y(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function _(t,e){function n(o,i,a,s){var c=l(t[o],t,i);if("throw"!==c.type){var u=c.arg,d=u.value;return d&&"object"==b(d)&&r.call(d,"__await")?e.resolve(d.__await).then((function(t){n("next",t,a,s)}),(function(t){n("throw",t,a,s)})):e.resolve(d).then((function(t){u.value=t,a(u)}),(function(t){return n("throw",t,a,s)}))}s(c.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return u;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var n=l(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,u;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,u):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,u)}function C(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function k(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function L(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(C,this),this.reset(!0)}function S(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:E}}function E(){return{value:void 0,done:!0}}return h.prototype=f,s(g,"constructor",f),s(f,"constructor",h),h.displayName=s(f,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===h||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,f):(t.__proto__=f,s(t,a,"GeneratorFunction")),t.prototype=Object.create(g),t},t.awrap=function(t){return{__await:t}},y(_.prototype),s(_.prototype,i,(function(){return this})),t.AsyncIterator=_,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new _(c(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},y(g),s(g,a,"Generator"),s(g,o,(function(){return this})),s(g,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=S,L.prototype={constructor:L,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(k),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=r.call(i,"catchLoc"),c=r.call(i,"finallyLoc");if(s&&c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,u):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),u},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),k(r),u}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;k(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:S(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),u}},t}function w(t,e,r,n,o,i,a){try{var s=t[i](a),c=s.value}catch(t){return void r(t)}s.done?e(c):Promise.resolve(c).then(n,o)}function C(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function k(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?C(Object(r),!0).forEach((function(e){L(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):C(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function L(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}const S={name:"RemoteManagementSystemStatusListPage",components:{RemoteManagementSystemStatusListView:r(3789).Z,Datetimepicker:_.Z,MapListSelect:y,Reload:l.Z,ClipLoader:c.Z},computed:k(k({},(0,n.Se)({device:"device/device"})),{},{landmark:function(){return this.remoteManagementSystemStatus&&this.remoteManagementSystemStatus.location&&this.remoteManagementSystemStatus.location.device_name?"前往採樣點[".concat(this.remoteManagementSystemStatus.location.device_name,"]"):"前往採樣點"},statusATime:function(){if(!this.remoteManagementSystemStatus)return 0;var t=(this.remoteManagementSystemStatus||{}).status_A_time,e=void 0===t?0:t;return null!=e?e:0},statusBTime:function(){if(!this.remoteManagementSystemStatus)return 0;var t=(this.remoteManagementSystemStatus||{}).status_B_time,e=void 0===t?0:t;return null!=e?e:0},statusCTime:function(){if(!this.remoteManagementSystemStatus)return 0;var t=(this.remoteManagementSystemStatus||{}).status_C_time,e=void 0===t?0:t;return null!=e?e:0},statusBCTime:function(){if(!this.remoteManagementSystemStatus)return 0;var t=this.remoteManagementSystemStatus||{},e=t.status_B_time,r=void 0===e?0:e,n=t.status_C_time;return r+(void 0===n?0:n)},statusDTime:function(){if(!this.remoteManagementSystemStatus)return 0;var t=(this.remoteManagementSystemStatus||{}).status_D_time,e=void 0===t?0:t;return null!=e?e:0},statusETime:function(){if(!this.remoteManagementSystemStatus)return 0;var t=(this.remoteManagementSystemStatus||{}).status_E_time,e=void 0===t?0:t;return null!=e?e:0},statusFTime:function(){if(!this.remoteManagementSystemStatus)return 0;var t=(this.remoteManagementSystemStatus||{}).status_F_time,e=void 0===t?0:t;return null!=e?e:0},isParticleWatching:function(){var t=!1;return this.remoteManagementSystemStatus&&this.remoteManagementSystemStatus.location&&(t=!s().find(this.remoteManagementSystemStatus.particles,(function(t){return!t.organism_value}))),this.device&&this.device.mir_status&&["B","C","D"].contains(this.device.mir_status.current_status)&&!t},exportUrl:function(){var t="/remoteManagementSystemStatuses.xlsx",e=[],r=this.getPureForm(this.form);return r.page&&delete r.page,s().forOwn(r,(function(t,r){s().isArray(t)?s().forEach(t,(function(t){e.push("".concat(r,"[]=").concat(t))})):e.push("".concat(r,"=").concat(t))})),e.length>0&&(t+="?",t+=e.join("&")),t}}),data:function(){return{loading:!0,showReload:!1,remoteManagementSystemStatuses:[],form:{map_id:null},delayTimer:null,missionQueue:null,remoteManagementSystemStatus:null}},created:function(){this.fetchData(),this.subscribeRemoteManagementSystemStatuses()},methods:{fetchData:function(){var t,e=this;return(t=x().mark((function t(){var r,n;return x().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.loading=!0,t.prev=1,t.next=4,i().get("/api/remote-management-system-statuses",{params:e.form});case 4:0==(r=(r=t.sent).data).status?(n=r.data,e.remoteManagementSystemStatuses=n.remoteManagementSystemStatuses,e.missionQueue=n.missionQueue,e.remoteManagementSystemStatus=n.remoteManagementSystemStatus):-21==r.status&&(e.showReload=!0),t.next=13;break;case 9:return t.prev=9,t.t0=t.catch(1),t.next=13,e.guestRedirectHome(t.t0);case 13:return t.prev=13,e.loading=!1,t.finish(13);case 16:case"end":return t.stop()}}),t,null,[[1,9,13,16]])})),function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){w(i,n,o,a,s,"next",t)}function s(t){w(i,n,o,a,s,"throw",t)}a(void 0)}))})()},delay:function(t,e){clearTimeout(this.delayTimer),this.delayTimer=setTimeout((function(){t.apply()}),e||0)},subscribeRemoteManagementSystemStatuses:function(){var t=this;window.Echo.private("remoteManagementSystemStatuses").listen("RemoteManagementSystemStatusCreated",(function(e){var r=s().cloneDeep(e.remoteManagementSystemStatus);(t.remoteManagementSystemStatuses.length>0?t.remoteManagementSystemStatuses[0].mission_queue_id:null)!==r.mission_queue_id?t.remoteManagementSystemStatuses=[r]:(t.remoteManagementSystemStatuses.push(r),t.remoteManagementSystemStatuses.length>10&&t.remoteManagementSystemStatuses.splice(0,1)),t.remoteManagementSystemStatus=r})).listen("RemoteManagementSystemStatusUpdated",(function(e){var r=s().cloneDeep(e.remoteManagementSystemStatus);if((t.remoteManagementSystemStatuses.length>0?t.remoteManagementSystemStatuses[0].mission_queue_id:null)!==r.mission_queue_id)t.remoteManagementSystemStatuses=[r];else{var n=s().findIndex(t.remoteManagementSystemStatuses,(function(t){return t.id==r.id}));-1!==n&&t.remoteManagementSystemStatuses.splice(n,1,r)}t.remoteManagementSystemStatus=r})).listen("MissionQueueCreated",(function(e){t.missionQueue=s().cloneDeep(e.missionQueue),t.remoteManagementSystemStatuses=[]})).listen("MissionQueueUpdated",(function(e){var r=s().cloneDeep(e.missionQueue);t.missionQueue&&t.missionQueue.id!=r.id||(t.missionQueue=r)}))},getLargestSecondMark:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=s().maxBy(t,"second_mark");return e&&e.second_mark?e.second_mark:0}}};var E=r(3379),M=r.n(E),O=r(5568),P={insert:"head",singleton:!1};M()(O.Z,P);O.Z.locals;const j=(0,g.Z)(S,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("section",{staticClass:"content-header clearfix"},[r("span",[t._v("採樣任務進度")]),t._v(" "),r("div",{staticClass:"location-select-div"},[r("MapListSelect",{attrs:{placeholder:"請選擇房間","select-style":"min-width: 140px;"},on:{change:function(e){t.delay((function(){t.fetchData()}),200)}},model:{value:t.form.map_id,callback:function(e){t.$set(t.form,"map_id",e)},expression:"form.map_id"}})],1),t._v(" "),r("div",{staticClass:"title-right-block"},[r("router-link",{staticClass:"btn btn-light-green op-btn",attrs:{to:t.exportUrl,target:"_blank",type:"button"}},[r("i",{staticClass:"glyphicon glyphicon-export"}),t._v(" 匯出\n            ")])],1)]),t._v(" "),r("section",{staticClass:"content"},[r("div",{staticClass:"col-xs-12"},[r("div",{staticClass:"box"},[r("div",{staticClass:"box-body"},[t.loading?r("clip-loader",{staticClass:"loading",attrs:{color:"gray",size:"30px"}}):r("div",[r("table",{staticClass:"flow-chart-remote-management-system"},[r("tbody",[r("tr",[r("td",{staticClass:"text-center"},[r("div",{staticClass:"label-node",class:{"breathing-effect":t.device&&(!t.device.mir_status||!t.device.mir_status.current_status)}},[t._v("啟動")])]),t._v(" "),t._m(0),t._v(" "),r("td",{staticClass:"text-center"},[r("div",{staticClass:"label-node",class:{"breathing-effect":t.device&&t.device.mir_status&&"A"==t.device.mir_status.current_status}},[t._v(t._s(t.landmark)+"\n                                        "),r("div",{staticClass:"second"},[t._v(t._s(t.statusATime)+"S")])])]),t._v(" "),t._m(1),t._v(" "),r("td",{staticClass:"text-center"},[r("div",{staticClass:"label-node",class:{"breathing-effect":t.device&&t.device.mir_status&&("B"==t.device.mir_status.current_status||"C"==t.device.mir_status.current_status)}},[t._v("採樣準備\n                                        "),r("div",{staticClass:"second"},[t._v(t._s(t.statusBCTime)+"S")])])]),t._v(" "),t._m(2),t._v(" "),r("td",{staticClass:"text-center"},[r("div",{staticClass:"label-node",class:{"breathing-effect":t.device&&t.device.mir_status&&"D"==t.device.mir_status.current_status}},[t._v("空氣採樣\n                                        "),r("div",{staticClass:"second"},[t._v(t._s(t.statusDTime)+"S")])])]),t._v(" "),t._m(3),t._v(" "),r("td",{staticClass:"text-center"},[r("div",{staticClass:"label-node",class:{"breathing-effect":t.device&&t.device.mir_status&&"E"==t.device.mir_status.current_status}},[t._v("培養皿回收\n                                        "),r("div",{staticClass:"second"},[t._v(t._s(t.statusETime)+"S")])])]),t._v(" "),t._m(4),t._v(" "),r("td",{staticClass:"text-center"},[r("div",{staticClass:"label-node",class:{"breathing-effect":t.device&&t.device.mir_status&&"F"==t.device.mir_status.current_status}},[t._v("回HOME\n                                        "),r("div",{staticClass:"second"},[t._v(t._s(t.statusFTime)+"S")])])])]),t._v(" "),t._m(5),t._v(" "),r("tr",[r("td"),t._v(" "),r("td"),t._v(" "),r("td"),t._v(" "),r("td"),t._v(" "),r("td",{staticClass:"text-center"},[r("div",{staticClass:"label-node",class:{"breathing-effect":t.device&&t.device.mir_status&&"B"==t.device.mir_status.current_status}},[t._v("培養皿讀碼\n                                        "),r("div",{staticClass:"second"},[t._v(t._s(t.statusBTime)+"S")])])]),t._v(" "),r("td"),t._v(" "),r("td"),t._v(" "),r("td"),t._v(" "),r("td"),t._v(" "),r("td"),t._v(" "),r("td")]),t._v(" "),t._m(6),t._v(" "),r("tr",[r("td"),t._v(" "),r("td"),t._v(" "),r("td"),t._v(" "),r("td"),t._v(" "),r("td",{staticClass:"text-center"},[r("div",{staticClass:"label-node",class:{"breathing-effect":t.device&&t.device.mir_status&&"C"==t.device.mir_status.current_status}},[t._v("新培養皿交換\n                                        "),r("div",{staticClass:"second"},[t._v(t._s(t.statusCTime)+"S")])])]),t._v(" "),r("td"),t._v(" "),r("td"),t._v(" "),r("td"),t._v(" "),r("td"),t._v(" "),r("td"),t._v(" "),r("td")])])]),t._v(" "),t.showReload?r("reload",{on:{click:function(e){t.showReload=!1,t.fetchData()}}}):r("remote-management-system-status-list-view",{staticStyle:{"margin-top":"20px"},attrs:{"remote-management-system-statuses":t.remoteManagementSystemStatuses,"mission-queue":t.missionQueue}})],1)],1)])]),t._v(" "),r("div",{staticClass:"col-xs-6"},[r("div",{staticClass:"box"},[r("div",{staticClass:"box-header"},[r("h3",{staticClass:"box-title"},[t._v("微生物數據\n                        "),t.device&&t.device.mir_status&&"B"==t.device.mir_status.current_status?[t._v("（掃碼中）")]:t._e(),t._v(" "),t.device&&t.device.mir_status&&"D"==t.device.mir_status.current_status?[t._v("（抽氣中）")]:t._e()],2)]),t._v(" "),r("div",{staticClass:"box-body"},[r("table",{staticClass:"table table-striped table-hover"},[r("tbody",[r("tr",[r("td",{staticStyle:{width:"220px"}},[t._v("房間編號 / Landmark / x:y")]),t._v(" "),r("td",[t.remoteManagementSystemStatus&&t.remoteManagementSystemStatus.location?[t._v("\n                                    "+t._s(t.remoteManagementSystemStatus.location.map?t.remoteManagementSystemStatus.location.map.guid:null)),r("br"),t._v("\n                                    "+t._s(t.remoteManagementSystemStatus.location.device_name)),r("br"),t._v("\n                                    "+t._s(t.remoteManagementSystemStatus.location.x)+":"+t._s(t.remoteManagementSystemStatus.location.y)+"\n                                ")]:t._e()],2)]),t._v(" "),r("tr",[r("td",[t._v("微生物採樣值")]),t._v(" "),r("td",[t.remoteManagementSystemStatus?t._l(t.remoteManagementSystemStatus.micro_organisms,(function(e){return r("div",[t._v("\n                                        "+t._s(e.organism_kind_name)+"："+t._s(e.organism_value)+"\n                                    ")])})):t._e()],2)]),t._v(" "),r("tr",[r("td",[t._v("條形碼")]),t._v(" "),r("td",[t.remoteManagementSystemStatus&&t.remoteManagementSystemStatus.location?[t._v(t._s(t.remoteManagementSystemStatus.location.bar_code))]:t._e()],2)]),t._v(" "),r("tr",[r("td",[t._v("微生物採樣時間")]),t._v(" "),r("td",[t.remoteManagementSystemStatus&&t.remoteManagementSystemStatus.micro_organisms.length>0?[t.remoteManagementSystemStatus.micro_organisms[0].Time?r("span",[t._v(t._s(t._f("datetime")(t.remoteManagementSystemStatus.micro_organisms[0].Time)))]):t._e()]:t._e()],2)]),t._v(" "),r("tr",[r("td",[t._v("紀錄時間")]),t._v(" "),r("td",[t.remoteManagementSystemStatus&&t.remoteManagementSystemStatus.micro_organisms.length>0?[t.remoteManagementSystemStatus.micro_organisms[0].created_at?r("span",[t._v(t._s(t._f("datetime")(t.remoteManagementSystemStatus.micro_organisms[0].created_at)))]):t._e()]:t._e()],2)]),t._v(" "),r("tr",[r("td",[t._v("抽氣量平均值(L/S)")]),t._v(" "),r("td",[t.remoteManagementSystemStatus&&t.remoteManagementSystemStatus.location?t._l(t.remoteManagementSystemStatus.gas_samplings,(function(e){return r("div",[t._v(t._s(e.second_mark)+"S："+t._s(e.average_volume))])})):t._e()],2)]),t._v(" "),r("tr",[r("td",[t._v("抽氣量累計值(L/S)")]),t._v(" "),r("td",[t.remoteManagementSystemStatus&&t.remoteManagementSystemStatus.location?t._l(t.remoteManagementSystemStatus.gas_samplings,(function(e){return r("div",[t._v(t._s(e.second_mark)+"S："+t._s(e.cumulative_volume))])})):t._e()],2)]),t._v(" "),r("tr",[r("td",[t._v("抽氣時間(S)")]),t._v(" "),r("td",[t.remoteManagementSystemStatus&&t.remoteManagementSystemStatus.location?[t._v("\n                                    "+t._s(t.getLargestSecondMark(t.remoteManagementSystemStatus.gas_samplings))+"S\n                                ")]:t._e()],2)])])])])])]),t._v(" "),r("div",{staticClass:"col-xs-6"},[r("div",{staticClass:"box"},[r("div",{staticClass:"box-header"},[r("h3",{staticClass:"box-title"},[t._v("微粒子數據\n                        "),t.isParticleWatching?[t._v("（監控中）")]:t._e()],2)]),t._v(" "),r("div",{staticClass:"box-body"},[r("table",{staticClass:"table table-striped table-hover"},[r("tbody",[r("tr",[r("td",{staticStyle:{width:"220px"}},[t._v("房間編號 / Landmark / x:y")]),t._v(" "),r("td",[t.remoteManagementSystemStatus&&t.remoteManagementSystemStatus.location?[t._v("\n                                    "+t._s(t.remoteManagementSystemStatus.location.map?t.remoteManagementSystemStatus.location.map.guid:null)),r("br"),t._v("\n                                    "+t._s(t.remoteManagementSystemStatus.location.device_name)),r("br"),t._v("\n                                    "+t._s(t.remoteManagementSystemStatus.location.x)+":"+t._s(t.remoteManagementSystemStatus.location.y)+"\n                                ")]:t._e()],2)]),t._v(" "),r("tr",[r("td",[t._v("微粒子採樣值")]),t._v(" "),r("td",[t.remoteManagementSystemStatus?t._l(t.remoteManagementSystemStatus.particles,(function(e){return r("div",[t._v("\n                                        "+t._s(e.organism_kind_name)+"："+t._s(e.organism_value)+"\n                                    ")])})):t._e()],2)]),t._v(" "),r("tr",[r("td",[t._v("微粒子採樣時間")]),t._v(" "),r("td",[t.remoteManagementSystemStatus&&t.remoteManagementSystemStatus.particles.length>0?[t.remoteManagementSystemStatus.particles[0].Time?r("span",[t._v(t._s(t._f("datetime")(t.remoteManagementSystemStatus.particles[0].Time)))]):t._e()]:t._e()],2)])])])])])]),t._v(" "),r("div",{staticClass:"clearfix"})])])}),[function(){var t=this.$createElement,e=this._self._c||t;return e("td",{staticClass:"text-center arrow-gap"},[e("i",{staticClass:"fa fa-long-arrow-right",attrs:{"aria-hidden":"true"}})])},function(){var t=this.$createElement,e=this._self._c||t;return e("td",{staticClass:"text-center arrow-gap"},[e("i",{staticClass:"fa fa-long-arrow-right",attrs:{"aria-hidden":"true"}})])},function(){var t=this.$createElement,e=this._self._c||t;return e("td",{staticClass:"text-center arrow-gap"},[e("i",{staticClass:"fa fa-long-arrow-right",attrs:{"aria-hidden":"true"}})])},function(){var t=this.$createElement,e=this._self._c||t;return e("td",{staticClass:"text-center arrow-gap"},[e("i",{staticClass:"fa fa-long-arrow-right",attrs:{"aria-hidden":"true"}})])},function(){var t=this.$createElement,e=this._self._c||t;return e("td",{staticClass:"text-center arrow-gap"},[e("i",{staticClass:"fa fa-long-arrow-right",attrs:{"aria-hidden":"true"}})])},function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("tr",[r("td"),t._v(" "),r("td"),t._v(" "),r("td"),t._v(" "),r("td"),t._v(" "),r("td",{staticClass:"text-center arrow-gap"},[r("i",{staticClass:"fa fa-long-arrow-down",attrs:{"aria-hidden":"true"}})]),t._v(" "),r("td"),t._v(" "),r("td"),t._v(" "),r("td"),t._v(" "),r("td"),t._v(" "),r("td"),t._v(" "),r("td")])},function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("tr",[r("td"),t._v(" "),r("td"),t._v(" "),r("td"),t._v(" "),r("td"),t._v(" "),r("td",{staticClass:"text-center arrow-gap"},[r("i",{staticClass:"fa fa-long-arrow-down",attrs:{"aria-hidden":"true"}})]),t._v(" "),r("td"),t._v(" "),r("td"),t._v(" "),r("td"),t._v(" "),r("td"),t._v(" "),r("td"),t._v(" "),r("td")])}],!1,null,"495cfd99",null).exports},3789:(t,e,r)=>{"use strict";r.d(e,{Z:()=>c});const n={name:"RemoteManagementSystemStatusListView",props:{remoteManagementSystemStatuses:Array,missionQueue:Object},computed:{totalTimeSum:function(){return this.remoteManagementSystemStatuses.reduce((function(t,e){var r=parseFloat(e.total_time);return t+(isNaN(r)?0:r)}),0)}}};var o=r(3379),i=r.n(o),a=r(6437),s={insert:"head",singleton:!1};i()(a.Z,s);a.Z.locals;const c=(0,r(1900).Z)(n,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"remote-management-system-status-table"},[r("table",{staticClass:"table table-bordered table-striped table-hover break-table"},[t._m(0),t._v(" "),r("tbody",[t.missionQueue.start_location?r("tr",[r("td",{staticClass:"centered nowrap",attrs:{"data-title":"時間"}},[t.missionQueue.started?r("span",[t._v(t._s(t._f("date")(t.missionQueue.started))),r("br"),t._v(t._s(t._f("time")(t.missionQueue.started)))]):t._e()]),t._v(" "),r("td",{staticClass:"centered",attrs:{"data-title":"動作"}},[t._v("任務開始")]),t._v(" "),r("td",{staticClass:"centered",attrs:{"data-title":"結果"}},[t.missionQueue.started?[r("span",{staticClass:"text-success"},[t._v("成功")])]:[r("span",{staticClass:"text-danger"},[t._v("失敗")])]],2),t._v(" "),r("td",{staticClass:"centered",attrs:{"data-title":"房間"}},[t._v(t._s(t.missionQueue.start_location.room))]),t._v(" "),r("td",{staticClass:"centered",attrs:{"data-title":"地圖"}},[t._v(t._s(t.missionQueue.start_location.map?t.missionQueue.start_location.map.name:null))]),t._v(" "),r("td",{staticClass:"centered nowrap",attrs:{"data-title":"座標 (x, y)"}},[t._v(t._s("("+(t.missionQueue.start_location.x?t.missionQueue.start_location.x:"?")+", "+(t.missionQueue.start_location.y?t.missionQueue.start_location.y:"?")+")"))]),t._v(" "),r("td",{staticClass:"centered nowrap",attrs:{"data-title":"條碼"}},[t._v("-")]),t._v(" "),r("td",{staticClass:"centered nowrap",attrs:{"data-title":"總計時數"}},[t._v("-")]),t._v(" "),r("td",{staticClass:"centered",attrs:{"data-title":"AMR到達點(A)"}},[t._v("-")]),t._v(" "),r("td",{staticClass:"centered",attrs:{"data-title":"培養皿掃碼(B)"}},[t._v("-")]),t._v(" "),r("td",{staticClass:"centered",attrs:{"data-title":"置入空氣採樣口(C)"}},[t._v("-")]),t._v(" "),r("td",{staticClass:"centered",attrs:{"data-title":"空氣採樣開始(D)"}},[t._v("-")]),t._v(" "),r("td",{staticClass:"centered",attrs:{"data-title":"培養皿歸位(E)"}},[t._v("-")]),t._v(" "),r("td",{staticClass:"centered",attrs:{"data-title":"AMR歸位(F)"}},[t._v("-")])]):t._e(),t._v(" "),t.remoteManagementSystemStatuses.length>0?t._l(t.remoteManagementSystemStatuses,(function(e){return r("tr",[r("td",{staticClass:"centered nowrap",attrs:{"data-title":"時間"}},[t._v("\n                    "+t._s(t._f("date")(e.start_time))),r("br"),t._v(t._s(t._f("time")(e.start_time))+"\n                ")]),t._v(" "),r("td",{staticClass:"centered",attrs:{"data-title":"動作"}},[t._v(t._s(e.location?e.location.device_name:null))]),t._v(" "),r("td",{staticClass:"centered",attrs:{"data-title":"結果"}},[-1==e.result?[r("span",{staticClass:"text-danger"},[t._v("失敗")])]:0==e.result?[r("span",[t._v("進行中")])]:1==e.result?[r("span",{staticClass:"text-success"},[t._v("成功")])]:t._e()],2),t._v(" "),r("td",{staticClass:"centered",attrs:{"data-title":"房間"}},[t._v(t._s(e.location?e.location.room:null))]),t._v(" "),r("td",{staticClass:"centered",attrs:{"data-title":"地圖"}},[t._v(t._s(e.location&&e.location.map?e.location.map.name:null))]),t._v(" "),r("td",{staticClass:"centered nowrap",attrs:{"data-title":"座標 (x, y)"}},[t._v(t._s(e.location?"("+e.location.x+", "+e.location.y+")":null))]),t._v(" "),r("td",{staticClass:"centered nowrap",attrs:{"data-title":"條碼"}},[t._v(t._s(e.location?e.location.bar_code:null))]),t._v(" "),r("td",{staticClass:"centered nowrap",attrs:{"data-title":"總計時數"}},[t._v("-")]),t._v(" "),r("td",{staticClass:"centered",attrs:{"data-title":"AMR到達點(A)"}},[t._v(t._s(e.status_A_time?e.status_A_time+"S":null))]),t._v(" "),r("td",{staticClass:"centered",attrs:{"data-title":"培養皿掃碼(B)"}},[t._v(t._s(e.status_B_time?e.status_B_time+"S":null))]),t._v(" "),r("td",{staticClass:"centered",attrs:{"data-title":"置入空氣採樣口(C)"}},[t._v(t._s(e.status_C_time?e.status_C_time+"S":null))]),t._v(" "),r("td",{staticClass:"centered",attrs:{"data-title":"空氣採樣開始(D)"}},[t._v(t._s(e.status_D_time?e.status_D_time+"S":null))]),t._v(" "),r("td",{staticClass:"centered",attrs:{"data-title":"培養皿歸位(E)"}},[t._v(t._s(e.status_E_time?e.status_E_time+"S":null))]),t._v(" "),r("td",{staticClass:"centered",attrs:{"data-title":"AMR歸位(F)"}},[t._v(t._s(e.status_F_time?e.status_F_time+"S":null))])])})):r("tr",[r("td",{staticClass:"centered",attrs:{colspan:"14"}},[t._v("暫無資料")])]),t._v(" "),t.missionQueue.end_location?r("tr",[r("td",{staticClass:"centered nowrap",attrs:{"data-title":"時間"}},[t.missionQueue.finished?r("span",[t._v(t._s(t._f("date")(t.missionQueue.finished))),r("br"),t._v(t._s(t._f("time")(t.missionQueue.finished)))]):t._e()]),t._v(" "),r("td",{staticClass:"centered",attrs:{"data-title":"動作"}},[t._v("任務停止")]),t._v(" "),t._m(1),t._v(" "),r("td",{staticClass:"centered",attrs:{"data-title":"房間"}},[t._v(t._s(t.missionQueue.end_location.room))]),t._v(" "),r("td",{staticClass:"centered",attrs:{"data-title":"地圖"}},[t._v(t._s(t.missionQueue.end_location.map?t.missionQueue.end_location.map.name:null))]),t._v(" "),r("td",{staticClass:"centered nowrap",attrs:{"data-title":"座標 (x, y)"}},[t._v(t._s("("+(t.missionQueue.end_location.x?t.missionQueue.end_location.x:"?")+", "+(t.missionQueue.end_location.y?t.missionQueue.end_location.y:"?")+")"))]),t._v(" "),r("td",{staticClass:"centered nowrap",attrs:{"data-title":"條碼"}},[t._v("-")]),t._v(" "),r("td",{staticClass:"centered nowrap",attrs:{"data-title":"總計時數"}},[t._v(t._s(t.totalTimeSum)+"S")]),t._v(" "),r("td",{staticClass:"centered",attrs:{"data-title":"AMR到達點(A)"}},[t._v("-")]),t._v(" "),r("td",{staticClass:"centered",attrs:{"data-title":"培養皿掃碼(B)"}},[t._v("-")]),t._v(" "),r("td",{staticClass:"centered",attrs:{"data-title":"置入空氣採樣口(C)"}},[t._v("-")]),t._v(" "),r("td",{staticClass:"centered",attrs:{"data-title":"空氣採樣開始(D)"}},[t._v("-")]),t._v(" "),r("td",{staticClass:"centered",attrs:{"data-title":"培養皿歸位(E)"}},[t._v("-")]),t._v(" "),r("td",{staticClass:"centered",attrs:{"data-title":"AMR歸位(F)"}},[t._v("-")])]):t._e()],2)])])}),[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("thead",[r("tr",[r("th",{staticClass:"hide-td text-center"},[t._v("時間")]),t._v(" "),r("th",{staticClass:"hide-td text-center"},[t._v("動作")]),t._v(" "),r("th",{staticClass:"hide-td text-center"},[t._v("結果")]),t._v(" "),r("th",{staticClass:"hide-td text-center",staticStyle:{"min-width":"152px"}},[t._v("房間")]),t._v(" "),r("th",{staticClass:"hide-td text-center",staticStyle:{"min-width":"152px"}},[t._v("地圖")]),t._v(" "),r("th",{staticClass:"hide-td text-center"},[t._v("座標 (x, y)")]),t._v(" "),r("th",{staticClass:"hide-td text-center"},[t._v("條碼")]),t._v(" "),r("th",{staticClass:"hide-td text-center"},[t._v("總計時數")]),t._v(" "),r("th",{staticClass:"hide-td text-center"},[t._v("AMR到達點(A)")]),t._v(" "),r("th",{staticClass:"hide-td text-center"},[t._v("培養皿掃碼(B)")]),t._v(" "),r("th",{staticClass:"hide-td text-center"},[t._v("置入空氣採樣口(C)")]),t._v(" "),r("th",{staticClass:"hide-td text-center"},[t._v("空氣採樣開始(D)")]),t._v(" "),r("th",{staticClass:"hide-td text-center"},[t._v("培養皿歸位(E)")]),t._v(" "),r("th",{staticClass:"hide-td text-center"},[t._v("AMR歸位(F)")])])])},function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("td",{staticClass:"centered",attrs:{"data-title":"結果"}},[r("span",{staticClass:"text-success"},[t._v("成功")])])}],!1,null,"5632fe8a",null).exports},1748:(t,e,r)=>{"use strict";r.d(e,{Z:()=>p});var n=r(6486),o=r.n(n),i=r(9669),a=r.n(i),s=r(9755),c=r.n(s);function l(t){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},l(t)}function u(){u=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function c(t,e,r,n){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new L(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return E()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var s=w(a,r);if(s){if(s===h)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=d(t,e,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===h)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}(t,r,a),i}function d(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var h={};function f(){}function p(){}function m(){}var v={};s(v,o,(function(){return this}));var g=Object.getPrototypeOf,y=g&&g(g(S([])));y&&y!==e&&r.call(y,o)&&(v=y);var _=m.prototype=f.prototype=Object.create(v);function b(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function x(t,e){function n(o,i,a,s){var c=d(t[o],t,i);if("throw"!==c.type){var u=c.arg,h=u.value;return h&&"object"==l(h)&&r.call(h,"__await")?e.resolve(h.__await).then((function(t){n("next",t,a,s)}),(function(t){n("throw",t,a,s)})):e.resolve(h).then((function(t){u.value=t,a(u)}),(function(t){return n("throw",t,a,s)}))}s(c.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return h;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return h}var n=d(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,h;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,h):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,h)}function C(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function k(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function L(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(C,this),this.reset(!0)}function S(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:E}}function E(){return{value:void 0,done:!0}}return p.prototype=m,s(_,"constructor",m),s(m,"constructor",p),p.displayName=s(m,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,m):(t.__proto__=m,s(t,a,"GeneratorFunction")),t.prototype=Object.create(_),t},t.awrap=function(t){return{__await:t}},b(x.prototype),s(x.prototype,i,(function(){return this})),t.AsyncIterator=x,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new x(c(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},b(_),s(_,a,"Generator"),s(_,o,(function(){return this})),s(_,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=S,L.prototype={constructor:L,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(k),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=r.call(i,"catchLoc"),c=r.call(i,"finallyLoc");if(s&&c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,h):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),k(r),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;k(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:S(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),h}},t}function d(t,e,r,n,o,i,a){try{var s=t[i](a),c=s.value}catch(t){return void r(t)}s.done?e(c):Promise.resolve(c).then(n,o)}function h(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){d(i,n,o,a,s,"next",t)}function s(t){d(i,n,o,a,s,"throw",t)}a(void 0)}))}}const f={name:"RoomEnvironmentSelect",props:{value:{type:[String,Array],default:null},valueColumn:{type:String,default:"room_name"},optionColumn:{type:String,default:"room_name"},disabled:{type:Boolean,default:!1},placeholder:{type:String,default:"請選擇"},color:{type:String,default:"theme-blue"},multiple:{type:Boolean,default:!1},items:{type:Array,default:null},id:String,selectClass:String,selectStyle:String,regionMgmtId:{type:Number,default:null},locations:{type:Array,default:function(){return[]}}},watch:{value:function(t){this.multiple?c()(this.$refs.select2).select2("data",o().map(t,(function(t){return t}))):c()(this.$refs.select2).select2("data",[t]),this.refresh()},items:function(t){this.roomEnvironments=t,this.setSelect2Val(),this.init(),this.regionMgmtId&&this.getLocationsByRegionMgmtId(this.regionMgmtId)},regionMgmtId:function(t){t&&this.getLocationsByRegionMgmtId(t)}},data:function(){return{roomEnvironments:[]}},created:function(){var t=this;return h(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==t.items){e.next=5;break}return e.next=3,t.fetchData();case 3:e.next=6;break;case 5:t.roomEnvironments=t.items;case 6:t.setSelect2Val(),t.value&&t.getLocationsByValue(t.value),t.regionMgmtId&&t.getLocationsByRegionMgmtId(t.regionMgmtId);case 9:case"end":return e.stop()}}),e)})))()},mounted:function(){this.init()},methods:{init:function(){var t=c()(this.$refs.select2),e=this;t.select2({minimumResultsForSearch:-1,allowClear:!0,closeOnSelect:!this.multiple,language:{noResults:function(){return"查無選項"}}}),t.on("select2:select",(function(t){e.setVal()})),t.on("select2:unselect",(function(t){e.setVal()}))},fetchData:function(){var t=this;return h(u().mark((function e(){var r,n;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,a().get("/api/roomEnvironments");case 3:0==(r=(r=e.sent).data).status&&(n=r.data,t.roomEnvironments=n.roomEnvironments,t.$emit("update:roomEnvironments",t.roomEnvironments)),e.next=12;break;case 8:return e.prev=8,e.t0=e.catch(0),e.next=12,t.guestRedirectHome(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,8]])})))()},setSelect2Val:function(){var t=this;this.$nextTick((function(){t.multiple?c()(t.$refs.select2).val(o().map(t.value,(function(t){return t}))):c()(t.$refs.select2).val([t.value]),c()(t.$refs.select2).trigger("change")}))},setVal:function(){var t=c()(this.$refs.select2).select2("data");this.multiple?this.$emit("input",o().map(t,(function(t){return t.id}))):t.length>0?(this.$emit("input",t[0].id),this.getLocationsByValue(t[0].id)):(this.$emit("input",null),this.getLocationsByValue(null)),this.$emit("change")},refresh:function(){c()(this.$refs.select2).val(null).trigger("change"),c()(this.$refs.select2).select2("destroy"),this.init(),this.setSelect2Val()},getLocationsByValue:function(t){var e=o().find(this.roomEnvironments,[this.valueColumn,t]);e?(this.$emit("update:regionMgmtId",e.region_mgmt_id),this.$emit("update:locations",e.locations)):(this.$emit("update:regionMgmtId",null),this.$emit("update:locations",[]))},getLocationsByRegionMgmtId:function(t){var e=this,r=o().find(this.roomEnvironments,(function(e){return e.region_mgmt_id==t}));r?this.$emit("update:locations",r.locations):this.$emit("update:locations",[]);var n=this;n.multiple||this.$nextTick((function(){c()(n.$refs.select2).val([r?r[e.valueColumn]:null]),c()(n.$refs.select2).trigger("change"),n.init()}))}}};const p=(0,r(1900).Z)(f,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{class:[t.color]},[r("select",{ref:"select2",class:t.selectClass,style:t.selectStyle,attrs:{id:t.id,"data-placeholder":t.placeholder,multiple:t.multiple,disabled:t.disabled}},t._l(t.roomEnvironments,(function(e){return r("option",{domProps:{value:e[t.valueColumn]}},[t._v("\n            "+t._s(e[t.optionColumn])+"\n        ")])})),0)])}),[],!1,null,null,null).exports},4790:(t,e,r)=>{"use strict";r.d(e,{Z:()=>c});const n={name:"RoomEnvironmentView",props:{value:{type:Object},xPx:Number,yPx:Number,roomName:{type:String,default:""},microOrganism:{type:Object,default:function(){}}},watch:{value:function(t){t&&(this.roomEnvironment=t)}},mounted:function(){this.value&&(this.roomEnvironment=this.value)},data:function(){return{roomEnvironment:{temperature:0,humidity:0,pressure_difference:0}}}};var o=r(3379),i=r.n(o),a=r(4359),s={insert:"head",singleton:!1};i()(a.Z,s);a.Z.locals;const c=(0,r(1900).Z)(n,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"room-environment-view",style:"top: "+(t.yPx?t.yPx:-200)+"px; left: "+(t.xPx?t.xPx:-200)+"px",on:{click:function(e){return t.$emit("click")}}},[t.microOrganism?r("p",{style:"color: "+(t.microOrganism.color?t.microOrganism.color:"#AEAEAE")},[t._v(t._s(t.microOrganism.score>100?"已超標":"未超標")+"\n        "),"suspended"==t.microOrganism.organism_kind?r("i",{staticClass:"fa fa-play fa-fw fa-rotate-270",attrs:{"aria-hidden":"true"}}):"falling"==t.microOrganism.organism_kind?r("i",{staticClass:"fa fa-square fa-fw",attrs:{"aria-hidden":"true"}}):"contact"==t.microOrganism.organism_kind?r("i",{staticClass:"fa fa-circle fa-fw",attrs:{"aria-hidden":"true"}}):"microparticle_5"==t.microOrganism.organism_kind?r("i",{staticClass:"fa fa-star fa-fw",attrs:{"aria-hidden":"true"}}):"microparticle_dot_5"==t.microOrganism.organism_kind?r("i",{staticClass:"fa fa-square fa-fw fa-rotate-45",attrs:{"aria-hidden":"true"}}):t._e()]):t._e(),t._v(" "),t._m(0)])}),[function(){var t=this.$createElement,e=this._self._c||t;return e("p",[e("i",{staticClass:"fa fa-sign-in"})])}],!1,null,"65ee6f1e",null).exports},2273:(t,e,r)=>{"use strict";r.d(e,{Z:()=>j});var n=r(6486),o=r.n(n),i=r(9669),a=r.n(i),s=r(9038),c=r(381),l=r.n(c),u=r(7446),d=r(2059),h=r(9010);function f(t){return f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},f(t)}function p(){p=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function c(t,e,r,n){var o=e&&e.prototype instanceof d?e:d,i=Object.create(o.prototype),a=new L(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return E()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var s=w(a,r);if(s){if(s===u)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=l(t,e,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===u)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}(t,r,a),i}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var u={};function d(){}function h(){}function m(){}var v={};s(v,o,(function(){return this}));var g=Object.getPrototypeOf,y=g&&g(g(S([])));y&&y!==e&&r.call(y,o)&&(v=y);var _=m.prototype=d.prototype=Object.create(v);function b(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function x(t,e){function n(o,i,a,s){var c=l(t[o],t,i);if("throw"!==c.type){var u=c.arg,d=u.value;return d&&"object"==f(d)&&r.call(d,"__await")?e.resolve(d.__await).then((function(t){n("next",t,a,s)}),(function(t){n("throw",t,a,s)})):e.resolve(d).then((function(t){u.value=t,a(u)}),(function(t){return n("throw",t,a,s)}))}s(c.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return u;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var n=l(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,u;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,u):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,u)}function C(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function k(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function L(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(C,this),this.reset(!0)}function S(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:E}}function E(){return{value:void 0,done:!0}}return h.prototype=m,s(_,"constructor",m),s(m,"constructor",h),h.displayName=s(m,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===h||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,m):(t.__proto__=m,s(t,a,"GeneratorFunction")),t.prototype=Object.create(_),t},t.awrap=function(t){return{__await:t}},b(x.prototype),s(x.prototype,i,(function(){return this})),t.AsyncIterator=x,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new x(c(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},b(_),s(_,a,"Generator"),s(_,o,(function(){return this})),s(_,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=S,L.prototype={constructor:L,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(k),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=r.call(i,"catchLoc"),c=r.call(i,"finallyLoc");if(s&&c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,u):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),u},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),k(r),u}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;k(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:S(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),u}},t}function m(t,e,r,n,o,i,a){try{var s=t[i](a),c=s.value}catch(t){return void r(t)}s.done?e(c):Promise.resolve(c).then(n,o)}function v(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){m(i,n,o,a,s,"next",t)}function s(t){m(i,n,o,a,s,"throw",t)}a(void 0)}))}}const g={name:"ScheduledMissionModal",$_veeValidate:{validator:"new"},components:{ClipLoader:s.Z,VehicleMgmtListSelect:u.Z,VertexListSelect:d.Z,ToggleButton:h.ToggleButton},props:{value:{type:Boolean,default:!1}},computed:{thisYear:function(){return parseInt(l()().format("YYYY"))}},watch:{value:function(t){this.showModal=t},systemIds:function(t){var e=[];o().forEach(t,(function(t){e.push(t.vehicle_id)})),this.form.system_id=e},"form.mqtt_command_type_id":{handler:function(t){38==t&&39==t||(this.vertexName=null),this.resetFormValidate()},deep:!0},vertexName:function(t){var e=[];t&&e.push({typename:"vertex_name",data:t}),this.form.parameter=e}},data:function(){return{loading:!0,sending:!1,showModal:this.value,form:{},systemIds:[],missionTypes:[{value:36,display_name:"go breaking"},{value:37,display_name:"breaking completed"},{value:38,display_name:"go charge"},{value:39,display_name:"go injection"},{value:41,display_name:"go sweep"},{value:42,display_name:"go location"}],vertexName:null,goal1:{x:null,y:null},goal2:{x:null,y:null},laserDetection:{toggle:!1,value:"off"},theta:null}},created:function(){this.resetForm(),this.resetFormValidate()},methods:{onShowModal:function(){var t=this;return v(p().mark((function e(){return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.resetForm(),t.resetFormValidate(),t.loading=!1;case 3:case"end":return e.stop()}}),e)})))()},onHideModal:function(){this.resetForm(),this.resetFormValidate(),this.$emit("input",!1)},submit:function(){var t=this;return v(p().mark((function e(){var r,n,i;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return 0==(r=o().pickBy(t.form,o().identity())).system_id.length&&r.system_id.push("acs"),e.prev=2,e.next=5,t.validate();case 5:if(e.sent){e.next=8;break}return e.abrupt("return");case 8:return 41==t.form.mqtt_command_type_id&&((n={}).start_goal={x:t.goal1.x,y:t.goal1.y},n.end_goal={x:t.goal2.x,y:t.goal2.y},n.laser_detection=t.laserDetection.value,t.form.parameter=[],t.form.parameter.push(n)),42==t.form.mqtt_command_type_id&&((i={}).goal={x:t.goal1.x,y:t.goal1.y,theta:t.theta},i.laser_detection=t.laserDetection.value,t.form.parameter=[],t.form.parameter.push(i)),e.abrupt("return");case 14:0==e.sent.data.status&&(t.$toast.success({title:"成功訊息",message:"命令發送成功"}),t.$emit("update"),t.showModal=!1),e.next=22;break;case 19:e.prev=19,e.t0=e.catch(2),t.guestRedirectHome(e.t0);case 22:t.sending=!1;case 23:case"end":return e.stop()}}),e,null,[[2,19]])})))()},resetForm:function(){this.form={mqtt_command_type_id:null,system_id:[],years:"*",month:"*",week:"*",day:"*",hours:"*",minutes:"*",parameter:[]},this.systemIds=[]},chineseWeek:function(t){var e="";return 1==t?e="一":2==t?e="二":3==t?e="三":4==t?e="四":5==t?e="五":6==t?e="六":7==t&&(e="日"),e}}};var y=r(3379),_=r.n(y),b=r(6579),x={insert:"head",singleton:!1};_()(b.Z,x);b.Z.locals;var w=r(1900);const C=(0,w.Z)(g,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("modal",{attrs:{footer:!1,backdrop:!1,"append-to-body":!0,keyboard:!1},on:{show:t.onShowModal,hide:t.onHideModal},model:{value:t.showModal,callback:function(e){t.showModal=e},expression:"showModal"}},[r("div",{attrs:{slot:"title"},slot:"title"},[t._v("創建排程")]),t._v(" "),r("div",{attrs:{slot:"default"},slot:"default"},[t.loading?r("clip-loader",{staticClass:"loading",attrs:{color:"gray",size:"30px"}}):r("form",{staticClass:"form-horizontal",attrs:{novalidate:""},on:{submit:function(e){return e.preventDefault(),t.submit.apply(null,arguments)}}},[r("div",{staticClass:"form-group"},[r("label",{staticClass:"col-md-3 control-label"},[t._v("任務類型"),r("span",{staticClass:"is-danger"},[t._v(" *")])]),t._v(" "),r("div",{staticClass:"col-md-9"},[r("select",{directives:[{name:"model",rawName:"v-model",value:t.form.mqtt_command_type_id,expression:"form.mqtt_command_type_id"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"form-control",style:"color: "+(t.form.mqtt_command_type_id?"":"#a9a9a9"),attrs:{name:"mqtt_command_type_id"},on:{change:function(e){var r=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(t.form,"mqtt_command_type_id",e.target.multiple?r:r[0])}}},[r("option",{domProps:{value:null}},[t._v("請選擇任務類型")]),t._v(" "),t._l(t.missionTypes,(function(e){return r("option",{domProps:{value:e.value}},[t._v(t._s(e.display_name))])}))],2),t._v(" "),r("span",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("mqtt_command_type_id:required"),expression:"errors.has('mqtt_command_type_id:required')"}],staticClass:"help is-danger"},[t._v("請選擇任務類型")])])]),t._v(" "),36==t.form.mqtt_command_type_id||37==t.form.mqtt_command_type_id||38==t.form.mqtt_command_type_id||39==t.form.mqtt_command_type_id?r("div",{staticClass:"form-group"},[r("label",{staticClass:"col-md-3 control-label"},[t._v("車輛"),r("span",{staticClass:"is-danger"},[t._v(" *")])]),t._v(" "),r("div",{staticClass:"col-md-9"},[r("vehicle-mgmt-list-select",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{name:"system_id",placeholder:"請選擇車輛",multiple:!0},model:{value:t.systemIds,callback:function(e){t.systemIds=e},expression:"systemIds"}}),t._v(" "),r("span",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("system_id:required"),expression:"errors.has('system_id:required')"}],staticClass:"help is-danger"},[t._v("請選擇車輛")])],1)]):t._e(),t._v(" "),38==t.form.mqtt_command_type_id||39==t.form.mqtt_command_type_id?r("div",{staticClass:"form-group"},[r("label",{staticClass:"col-md-3 control-label"},[t._v("站點名稱"),r("span",{staticClass:"is-danger"},[t._v(" *")])]),t._v(" "),r("div",{staticClass:"col-md-9"},[r("vertex-list-select",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{"value-column":"name",name:"vertexName"},model:{value:t.vertexName,callback:function(e){t.vertexName=e},expression:"vertexName"}}),t._v(" "),r("span",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("vertexName:required"),expression:"errors.has('vertexName:required')"}],staticClass:"help is-danger"},[t._v("請選擇站點名稱")])],1)]):t._e(),t._v(" "),41==t.form.mqtt_command_type_id||42==t.form.mqtt_command_type_id?[r("div",{staticClass:"form-group"},[r("label",{staticClass:"col-md-3 control-label"},[t._v("起點座標X"),r("span",{staticClass:"is-danger"},[t._v(" *")])]),t._v(" "),r("div",{staticClass:"col-md-9"},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.goal1.x,expression:"goal1.x"},{name:"validate",rawName:"v-validate",value:"required|decimal",expression:"'required|decimal'"}],staticClass:"form-control",attrs:{name:"goal1X"},domProps:{value:t.goal1.x},on:{input:function(e){e.target.composing||t.$set(t.goal1,"x",e.target.value)}}}),t._v(" "),r("span",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("goal1X:required"),expression:"errors.has('goal1X:required')"}],staticClass:"help is-danger"},[t._v("起點座標X")]),t._v(" "),r("span",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("goal1X:decimal"),expression:"errors.has('goal1X:decimal')"}],staticClass:"help is-danger"},[t._v("請填寫數字")])])]),t._v(" "),r("div",{staticClass:"form-group"},[r("label",{staticClass:"col-md-3 control-label"},[t._v("起點座標Y"),r("span",{staticClass:"is-danger"},[t._v(" *")])]),t._v(" "),r("div",{staticClass:"col-md-9"},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.goal1.y,expression:"goal1.y"},{name:"validate",rawName:"v-validate",value:"required|decimal",expression:"'required|decimal'"}],staticClass:"form-control",attrs:{name:"goal1Y"},domProps:{value:t.goal1.y},on:{input:function(e){e.target.composing||t.$set(t.goal1,"y",e.target.value)}}}),t._v(" "),r("span",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("goal1Y:required"),expression:"errors.has('goal1Y:required')"}],staticClass:"help is-danger"},[t._v("起點座標Y")]),t._v(" "),r("span",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("goal1Y:decimal"),expression:"errors.has('goal1Y:decimal')"}],staticClass:"help is-danger"},[t._v("請填寫數字")])])])]:t._e(),t._v(" "),41==t.form.mqtt_command_type_id?[r("div",{staticClass:"form-group"},[r("label",{staticClass:"col-md-3 control-label"},[t._v("終點座標X"),r("span",{staticClass:"is-danger"},[t._v(" *")])]),t._v(" "),r("div",{staticClass:"col-md-9"},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.goal2.x,expression:"goal2.x"},{name:"validate",rawName:"v-validate",value:"required|decimal",expression:"'required|decimal'"}],staticClass:"form-control",attrs:{name:"goal2X"},domProps:{value:t.goal2.x},on:{input:function(e){e.target.composing||t.$set(t.goal2,"x",e.target.value)}}}),t._v(" "),r("span",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("goal2X:required"),expression:"errors.has('goal2X:required')"}],staticClass:"help is-danger"},[t._v("終點座標Y")]),t._v(" "),r("span",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("goal2X:decimal"),expression:"errors.has('goal2X:decimal')"}],staticClass:"help is-danger"},[t._v("請填寫數字")])])]),t._v(" "),r("div",{staticClass:"form-group"},[r("label",{staticClass:"col-md-3 control-label"},[t._v("終點座標Y"),r("span",{staticClass:"is-danger"},[t._v(" *")])]),t._v(" "),r("div",{staticClass:"col-md-9"},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.goal2.y,expression:"goal2.y"},{name:"validate",rawName:"v-validate",value:"required|decimal",expression:"'required|decimal'"}],staticClass:"form-control",attrs:{name:"goal2Y"},domProps:{value:t.goal2.y},on:{input:function(e){e.target.composing||t.$set(t.goal2,"y",e.target.value)}}}),t._v(" "),r("span",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("goal2Y:required"),expression:"errors.has('goal2Y:required')"}],staticClass:"help is-danger"},[t._v("終點座標Y")]),t._v(" "),r("span",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("goal2Y:decimal"),expression:"errors.has('goal2Y:decimal')"}],staticClass:"help is-danger"},[t._v("請填寫數字")])])])]:t._e(),t._v(" "),42==t.form.mqtt_command_type_id?[r("div",{staticClass:"form-group"},[r("label",{staticClass:"col-md-3 control-label"},[t._v("角度"),r("span",{staticClass:"is-danger"},[t._v(" *")])]),t._v(" "),r("div",{staticClass:"col-md-9"},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.theta,expression:"theta"},{name:"validate",rawName:"v-validate",value:"required|decimal:0|min_value:-360|max_value:360",expression:"'required|decimal:0|min_value:-360|max_value:360'"}],staticClass:"form-control",attrs:{name:"theta"},domProps:{value:t.theta},on:{input:function(e){e.target.composing||(t.theta=e.target.value)}}}),t._v(" "),r("span",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("theta:required"),expression:"errors.has('theta:required')"}],staticClass:"help is-danger"},[t._v("角度")]),t._v(" "),r("span",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("theta:decimal"),expression:"errors.has('theta:decimal')"}],staticClass:"help is-danger"},[t._v("請填寫整數")]),t._v(" "),r("span",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("theta:min_value")||t.errors.has("theta:max_value"),expression:"errors.has('theta:min_value') || errors.has('theta:max_value')"}],staticClass:"help is-danger"},[t._v("請填寫合理角度")])])])]:t._e(),t._v(" "),41==t.form.mqtt_command_type_id||42==t.form.mqtt_command_type_id?[r("div",{staticClass:"form-group"},[r("label",{staticClass:"col-md-3 control-label"},[t._v("偵測"),r("span",{staticClass:"is-danger"},[t._v("   ")])]),t._v(" "),r("div",{staticClass:"col-md-9"},[r("toggle-button",{attrs:{sync:!0},on:{change:function(e){t.laserDetection.value=t.laserDetection.toggle?"on":"off"}},model:{value:t.laserDetection.toggle,callback:function(e){t.$set(t.laserDetection,"toggle",e)},expression:"laserDetection.toggle"}})],1)])]:t._e(),t._v(" "),r("div",{staticClass:"form-group"},[r("label",{staticClass:"col-md-3 control-label"},[t._v("時間"),r("span",{staticClass:"is-danger"},[t._v("   ")])]),t._v(" "),r("div",{staticClass:"col-md-9 schedule-time"},[r("select",{directives:[{name:"model",rawName:"v-model",value:t.form.years,expression:"form.years"}],staticClass:"date-time-selector",staticStyle:{"min-width":"78px"},style:"color: "+(t.form.years?"":"#a9a9a9"),on:{change:function(e){var r=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(t.form,"years",e.target.multiple?r:r[0])}}},[r("option",{attrs:{value:"*"}},[t._v("年")]),t._v(" "),t._l(3,(function(e,n){return r("option",{domProps:{value:(t.thisYear+n).toString()}},[t._v(t._s(t.thisYear+n))])}))],2),t._v(" "),r("select",{directives:[{name:"model",rawName:"v-model",value:t.form.month,expression:"form.month"}],staticClass:"date-time-selector",style:"color: "+(t.form.month?"":"#a9a9a9"),on:{change:function(e){var r=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(t.form,"month",e.target.multiple?r:r[0])}}},[r("option",{attrs:{value:"*"}},[t._v("月")]),t._v(" "),t._l(12,(function(e){return r("option",{domProps:{value:e.toString()}},[t._v(t._s(e))])}))],2),t._v(" "),r("select",{directives:[{name:"model",rawName:"v-model",value:t.form.day,expression:"form.day"}],staticClass:"date-time-selector",style:"color: "+(t.form.day?"":"#a9a9a9"),on:{change:function(e){var r=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(t.form,"day",e.target.multiple?r:r[0])}}},[r("option",{attrs:{value:"*"}},[t._v("日")]),t._v(" "),t._l(31,(function(e){return r("option",{domProps:{value:e.toString()}},[t._v(t._s(e))])}))],2),t._v(" "),r("select",{directives:[{name:"model",rawName:"v-model",value:t.form.week,expression:"form.week"}],staticClass:"date-time-selector",staticStyle:{"min-width":"78px"},style:"color: "+(t.form.week?"":"#a9a9a9"),on:{change:function(e){var r=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(t.form,"week",e.target.multiple?r:r[0])}}},[r("option",{attrs:{value:"*"}},[t._v("星期")]),t._v(" "),t._l(7,(function(e){return r("option",{domProps:{value:e.toString()}},[t._v("星期"+t._s(t.chineseWeek(e)))])}))],2),t._v(" "),r("select",{directives:[{name:"model",rawName:"v-model",value:t.form.hours,expression:"form.hours"}],staticClass:"date-time-selector",style:"color: "+(t.form.hours?"":"#a9a9a9"),on:{change:function(e){var r=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(t.form,"hours",e.target.multiple?r:r[0])}}},[r("option",{attrs:{value:"*"}},[t._v("時")]),t._v(" "),t._l(24,(function(e,n){return r("option",{domProps:{value:n<10?"0"+n:n.toString()}},[t._v(t._s(n<10?"0"+n:n))])}))],2),t._v(" "),r("select",{directives:[{name:"model",rawName:"v-model",value:t.form.minutes,expression:"form.minutes"}],staticClass:"date-time-selector",style:"color: "+(t.form.minutes?"":"#a9a9a9"),on:{change:function(e){var r=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(t.form,"minutes",e.target.multiple?r:r[0])}}},[r("option",{attrs:{value:"*"}},[t._v("分")]),t._v(" "),t._l(60,(function(e,n){return r("option",{domProps:{value:n<10?"0"+n:n.toString()}},[t._v(t._s(n<10?"0"+n:n))])}))],2)])]),t._v(" "),r("div",{staticClass:"text-right"},[r("button",{staticClass:"btn btn-light-green",attrs:{disabled:t.sending}},[t._v("送出")]),t._v(" "),r("button",{staticClass:"btn btn-default",attrs:{type:"button"},on:{click:function(e){t.showModal=!1}}},[t._v("取消")])])],2)],1)])}),[],!1,null,"303c46dc",null).exports;function k(t){return k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},k(t)}function L(){L=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function c(t,e,r,n){var o=e&&e.prototype instanceof d?e:d,i=Object.create(o.prototype),a=new C(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return E()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var s=b(a,r);if(s){if(s===u)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=l(t,e,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===u)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}(t,r,a),i}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var u={};function d(){}function h(){}function f(){}var p={};s(p,o,(function(){return this}));var m=Object.getPrototypeOf,v=m&&m(m(S([])));v&&v!==e&&r.call(v,o)&&(p=v);var g=f.prototype=d.prototype=Object.create(p);function y(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function _(t,e){function n(o,i,a,s){var c=l(t[o],t,i);if("throw"!==c.type){var u=c.arg,d=u.value;return d&&"object"==k(d)&&r.call(d,"__await")?e.resolve(d.__await).then((function(t){n("next",t,a,s)}),(function(t){n("throw",t,a,s)})):e.resolve(d).then((function(t){u.value=t,a(u)}),(function(t){return n("throw",t,a,s)}))}s(c.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function b(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,b(t,e),"throw"===e.method))return u;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var n=l(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,u;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,u):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,u)}function x(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function w(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function C(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(x,this),this.reset(!0)}function S(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:E}}function E(){return{value:void 0,done:!0}}return h.prototype=f,s(g,"constructor",f),s(f,"constructor",h),h.displayName=s(f,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===h||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,f):(t.__proto__=f,s(t,a,"GeneratorFunction")),t.prototype=Object.create(g),t},t.awrap=function(t){return{__await:t}},y(_.prototype),s(_.prototype,i,(function(){return this})),t.AsyncIterator=_,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new _(c(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},y(g),s(g,a,"Generator"),s(g,o,(function(){return this})),s(g,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=S,C.prototype={constructor:C,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(w),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=r.call(i,"catchLoc"),c=r.call(i,"finallyLoc");if(s&&c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,u):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),u},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),w(r),u}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;w(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:S(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),u}},t}function S(t,e,r,n,o,i,a){try{var s=t[i](a),c=s.value}catch(t){return void r(t)}s.done?e(c):Promise.resolve(c).then(n,o)}function E(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){S(i,n,o,a,s,"next",t)}function s(t){S(i,n,o,a,s,"throw",t)}a(void 0)}))}}const M={name:"ScheduledMissionListPage",components:{SortButton:r(1739).Z,ClipLoader:s.Z,ScheduledMissionModal:C},data:function(){return{loading:!1,scheduledMissions:[],pagination:{last_page:1,current_page:this.$route.query.page?parseInt(this.$route.query.page):1},modal:{show:!1},form:{mission_id:this.$route.query.mission_id?this.$route.query.mission_id:null,order_by:this.$route.query.order_by?this.$route.query.order_by:null,direction:this.$route.query.direction?this.$route.query.direction:null},systemIdSortType:null,timeSortType:null}},created:function(){this.fetchData(),this.initSortButton()},methods:{fetchData:function(){var t=this;return E(L().mark((function e(){var r,n;return L().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.loading=!0,e.prev=1,e.next=4,a().get("/api/scheduledMissions",{params:{page:t.pagination.current_page,mission_id:t.form.mission_id,order_by:t.form.order_by,direction:t.form.direction}});case 4:0==(r=(r=e.sent).data).status&&(n=r.data,t.scheduledMissions=n.scheduledMissions,n.pagination&&(t.pagination=n.pagination)),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),t.guestRedirectHome(e.t0);case 12:t.loading=!1;case 13:case"end":return e.stop()}}),e,null,[[1,9]])})))()},deleteRow:function(t){var e=this;return E(L().mark((function r(){return L().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(confirm("確定要刪除任務編號「".concat(t,"」？"))){r.next=2;break}return r.abrupt("return");case 2:return r.prev=2,r.next=5,a().post("/api/mqttCommands",{mqtt_command_type_id:40,mission_id:t});case 5:0==r.sent.data.status&&(e.$toast.success({title:"成功訊息",message:"已送出命令"}),e.scheduledMissions=o().filter(e.scheduledMissions,(function(e){return e.mission_id!=t}))),r.next=13;break;case 10:r.prev=10,r.t0=r.catch(2),e.guestRedirectHome(r.t0);case 13:case"end":return r.stop()}}),r,null,[[2,10]])})))()},changePage:function(t){var e=o().cloneDeep(this.form);e.page=t;var r=this.getPureForm(e);this.$router.push({path:"/scheduledMissions",query:r})},changeSortType:function(t,e){switch(t){case"system_id":this.systemIdSortType=e,this.timeSortType=null;break;case"time":this.systemIdSortType=null,this.timeSortType=e;break;default:return}t&&e?(this.form.order_by=t,this.form.direction=e):(this.form.order_by=null,this.form.direction=null),this.changePage(1)},initSortButton:function(){switch(this.$route.query.order_by){case"system_id":this.systemIdSortType=this.$route.query.direction;break;case"time":this.timeSortType=this.$route.query.direction}},chineseNumber:function(t){var e="";return 1==t?e="一":2==t?e="二":3==t?e="三":4==t?e="四":5==t?e="五":6==t?e="六":7==t&&(e="日"),e}}};var O=r(3076),P={insert:"head",singleton:!1};_()(O.Z,P);O.Z.locals;const j=(0,w.Z)(M,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("section",{staticClass:"content-header clearfix list-page-title"},[r("span",[t._v("排程任務 ")]),t._v(" "),r("button",{staticClass:"btn btn-light-green op-btn",on:{click:function(e){t.modal.show=!0}}},[r("i",{staticClass:"fa fa-plus",attrs:{"aria-hidden":"true"}}),t._v(" 創建排程任務\n        ")])]),t._v(" "),r("section",{staticClass:"content"},[r("div",{staticClass:"row"},[r("div",{staticClass:"col-xs-12"},[r("div",{staticClass:"box"},[r("div",{staticClass:"box-body"},[t.loading?t._e():r("div",[r("table",{staticClass:"table table-bordered table-hover break-table"},[r("thead",[r("tr",{staticClass:"table-head"},[r("th",{staticClass:"text-center"},[t._v("任務編號")]),t._v(" "),r("th",{staticClass:"text-center"},[t._v("任務類型")]),t._v(" "),r("th",{staticClass:"text-center"},[t._v("車輛ID\n                                        "),r("sort-button",{attrs:{column:"system_id"},on:{change:t.changeSortType},model:{value:t.systemIdSortType,callback:function(e){t.systemIdSortType=e},expression:"systemIdSortType"}})],1),t._v(" "),r("th",{staticClass:"text-center"},[t._v("時間\n                                        "),r("sort-button",{attrs:{column:"time"},on:{change:t.changeSortType},model:{value:t.timeSortType,callback:function(e){t.timeSortType=e},expression:"timeSortType"}})],1),t._v(" "),r("th",{staticClass:"text-center"},[t._v("參數")]),t._v(" "),r("th",{staticClass:"text-center"},[t._v("創建日期")]),t._v(" "),r("th",{staticClass:"text-center"},[t._v("操作")])])]),t._v(" "),r("tbody",t._l(t.scheduledMissions,(function(e,n){return r("tr",{class:[n%2==0?"tr-gray":""]},[r("td",{staticClass:"text-center",attrs:{"data-title":"任務編號"}},[t._v(t._s(e.mission_id))]),t._v(" "),r("td",{staticClass:"text-center",attrs:{"data-title":"任務類型"}},[t._v(t._s(e.mission_type))]),t._v(" "),r("td",{staticClass:"text-center",attrs:{"data-title":"車輛ID"}},[t._v(t._s(e.system_id))]),t._v(" "),r("td",{staticClass:"text-center",attrs:{"data-title":"時間"}},[t._v("\n                                        "+t._s(e.years?e.years:"年")+"年"+t._s(e.month?e.month:"每")+"月"+t._s(e.day?e.day:"每")+"日"+t._s(e.week?"每週"+t.chineseNumber(e.week):"")+t._s(e.hours?e.hours+"點":"每小時")+t._s(e.minutes?e.minutes+"分":"每分鐘")+"\n                                    ")]),t._v(" "),r("td",{staticClass:"text-center",attrs:{"data-title":"參數"}},[t._v(t._s(e.parameter))]),t._v(" "),r("td",{staticClass:"text-center",attrs:{"data-title":"創建日期"}},[t._v(t._s(t._f("datetime")(e.create_ts)))]),t._v(" "),r("td",{staticClass:"text-center",attrs:{"data-title":"操作"}},[r("button",{staticClass:"btn btn-delete btn-sm",attrs:{title:"刪除"},on:{click:function(r){return t.deleteRow(e.mission_id)}}},[r("i",{staticClass:"glyphicon glyphicon-trash"}),t._v("\n                                            刪除\n                                        ")])])])})),0)]),t._v(" "),r("div",{staticClass:"text-center"},[r("pagination",{attrs:{size:"sm","direction-links":!1,"boundary-links":!0,"total-page":t.pagination.last_page,"max-size":10},on:{change:function(e){return t.changePage(t.pagination.current_page)}},model:{value:t.pagination.current_page,callback:function(e){t.$set(t.pagination,"current_page",e)},expression:"pagination.current_page"}})],1)]),t._v(" "),t.loading?r("clip-loader",{staticClass:"loading",attrs:{color:"gray",size:"30px"}}):t._e()],1)])])])]),t._v(" "),r("scheduled-mission-modal",{on:{update:t.fetchData},model:{value:t.modal.show,callback:function(e){t.$set(t.modal,"show",e)},expression:"modal.show"}})],1)}),[],!1,null,"6a30b578",null).exports},7238:(t,e,r)=>{"use strict";r.d(e,{Z:()=>E});var n=r(9669),o=r.n(n),i=r(629),a=r(4554);function s(t){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},s(t)}function c(){c=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function l(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,r){return t[e]=r}}function u(t,e,r,n){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new L(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return E()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var s=w(a,r);if(s){if(s===h)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=d(t,e,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===h)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}(t,r,a),i}function d(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var h={};function f(){}function p(){}function m(){}var v={};l(v,o,(function(){return this}));var g=Object.getPrototypeOf,y=g&&g(g(S([])));y&&y!==e&&r.call(y,o)&&(v=y);var _=m.prototype=f.prototype=Object.create(v);function b(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function x(t,e){function n(o,i,a,c){var l=d(t[o],t,i);if("throw"!==l.type){var u=l.arg,h=u.value;return h&&"object"==s(h)&&r.call(h,"__await")?e.resolve(h.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(h).then((function(t){u.value=t,a(u)}),(function(t){return n("throw",t,a,c)}))}c(l.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return h;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return h}var n=d(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,h;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,h):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,h)}function C(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function k(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function L(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(C,this),this.reset(!0)}function S(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:E}}function E(){return{value:void 0,done:!0}}return p.prototype=m,l(_,"constructor",m),l(m,"constructor",p),p.displayName=l(m,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,m):(t.__proto__=m,l(t,a,"GeneratorFunction")),t.prototype=Object.create(_),t},t.awrap=function(t){return{__await:t}},b(x.prototype),l(x.prototype,i,(function(){return this})),t.AsyncIterator=x,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new x(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},b(_),l(_,a,"Generator"),l(_,o,(function(){return this})),l(_,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=S,L.prototype={constructor:L,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(k),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=r.call(i,"catchLoc"),c=r.call(i,"finallyLoc");if(s&&c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,h):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),k(r),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;k(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:S(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),h}},t}function l(t,e,r,n,o,i,a){try{var s=t[i](a),c=s.value}catch(t){return void r(t)}s.done?e(c):Promise.resolve(c).then(n,o)}function u(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function d(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}const h={name:"LoginModal",$_veeValidate:{validator:"new"},props:{regionId:{type:Number,default:1}},computed:function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?u(Object(r),!0).forEach((function(e){d(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({},(0,i.Se)({roles:"user/roles",permissions:"user/permissions"})),data:function(){return{sending:!1,form:{account:null,password:null},errMsg:null,hasError:!1}},methods:{submit:function(){var t,e=this;return(t=c().mark((function t(){var r,n,i;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.validate();case 3:if(t.sent){t.next=6;break}return t.abrupt("return");case 6:return e.sending=!0,t.next=9,o().post("/login",e.form);case 9:if(r=t.sent,0!=(n=r.data).status){t.next=39;break}return n=n.data,t.next=15,e.syncCsrfToken();case 15:return t.next=17,e.syncUser();case 17:if(window.Echo=new a.Z({broadcaster:"socket.io",host:"".concat(window.location.hostname,":").concat(window.echoPort)}),!e.regionId){t.next=23;break}return t.next=21,e.$router.push("/regionMgmts/".concat(e.regionId));case 21:t.next=37;break;case 23:if(!localStorage.redirect){t.next=30;break}return i=localStorage.redirect,delete localStorage.redirect,t.next=28,e.$router.push(i);case 28:t.next=37;break;case 30:if(!e.permissions.contains("user-role-manage")){t.next=35;break}return t.next=33,e.$router.push("/users");case 33:t.next=37;break;case 35:return t.next=37,e.$router.push("/regionMgmts?is_deploy=1");case 37:t.next=40;break;case 39:-1==n.status?(e.errMsg="目前此帳號沒綁定任何身份，請聯繫管理者！",e.hasError=!0):-2==n.status&&(e.errMsg="該帳號權限未開通或已被禁止登入！",e.hasError=!0);case 40:t.next=47;break;case 42:t.prev=42,t.t0=t.catch(0),"422"==t.t0.response.status&&(e.errMsg="請檢查輸入的帳號密碼是否正確",e.hasError=!0),e.guestRedirectHome(t.t0);case 47:e.sending=!1;case 48:case"end":return t.stop()}}),t,null,[[0,42]])})),function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){l(i,n,o,a,s,"next",t)}function s(t){l(i,n,o,a,s,"throw",t)}a(void 0)}))})()}}};var f=r(3379),p=r.n(f),m=r(2171),v={insert:"head",singleton:!1};p()(m.Z,v);m.Z.locals;var g=r(1900);const y=(0,g.Z)(h,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"login-box"},[r("i",{staticClass:"fa fa-times-circle fa-lg close-btn",attrs:{title:"關閉"},on:{click:function(e){return t.$emit("input",!1)}}}),t._v(" "),t._m(0),t._v(" "),r("div",{staticClass:"login-box-body"},[r("p",{staticClass:"login-box-msg"},[t._v("登入")]),t._v(" "),r("form",{attrs:{novalidate:""},on:{submit:function(e){return e.preventDefault(),t.submit.apply(null,arguments)}}},[r("div",{staticClass:"form-group"},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.form.account,expression:"form.account"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"form-control input-frame",attrs:{placeholder:"請填寫帳號",name:"account"},domProps:{value:t.form.account},on:{input:function(e){e.target.composing||t.$set(t.form,"account",e.target.value)}}})]),t._v(" "),r("div",{staticClass:"text-left"},[r("span",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("account:required"),expression:"errors.has('account:required')"}],staticClass:"help is-danger text-left"},[t._v("帳號不能留空")])]),t._v(" "),r("div",{staticClass:"form-group"},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.form.password,expression:"form.password"},{name:"validate",rawName:"v-validate",value:"required|min:8",expression:"'required|min:8'"}],staticClass:"form-control input-frame",attrs:{type:"password",placeholder:"請填寫密碼",name:"password"},domProps:{value:t.form.password},on:{input:function(e){e.target.composing||t.$set(t.form,"password",e.target.value)}}})]),t._v(" "),r("div",{staticClass:"text-left"},[r("span",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("password:required"),expression:"errors.has('password:required')"}],staticClass:"help is-danger"},[t._v("密碼不能留空")]),t._v(" "),r("span",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("password:min"),expression:"errors.has('password:min')"}],staticClass:"help is-danger"},[t._v("密碼至少需填8碼")])]),t._v(" "),r("div",{staticClass:"text-left"},[r("span",{directives:[{name:"show",rawName:"v-show",value:t.hasError,expression:"hasError"}],staticClass:"help is-danger"},[t._v(t._s(t.errMsg))])]),t._v(" "),r("div",{staticClass:"col-xs-12 login-button-row"},[r("button",{staticClass:"btn btn-light-green btn-lg",attrs:{disabled:t.sending}},[t._v("\n                    登 入\n                ")])]),t._v(" "),r("div",{staticClass:"clearfix"})])])])}),[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"login-box-title"},[r("img",{attrs:{src:"/img/itri-logo.png",alt:"ITRILogo"}}),t._v(" "),r("span",[t._v("工業技術研究院生醫與醫材研究所")])])}],!1,null,"3e34a54e",null).exports;var _=r(3381),b=r(7293);function x(t){return x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},x(t)}function w(){w=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function c(t,e,r,n){var o=e&&e.prototype instanceof d?e:d,i=Object.create(o.prototype),a=new L(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return E()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var s=b(a,r);if(s){if(s===u)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=l(t,e,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===u)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}(t,r,a),i}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var u={};function d(){}function h(){}function f(){}var p={};s(p,o,(function(){return this}));var m=Object.getPrototypeOf,v=m&&m(m(S([])));v&&v!==e&&r.call(v,o)&&(p=v);var g=f.prototype=d.prototype=Object.create(p);function y(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function _(t,e){function n(o,i,a,s){var c=l(t[o],t,i);if("throw"!==c.type){var u=c.arg,d=u.value;return d&&"object"==x(d)&&r.call(d,"__await")?e.resolve(d.__await).then((function(t){n("next",t,a,s)}),(function(t){n("throw",t,a,s)})):e.resolve(d).then((function(t){u.value=t,a(u)}),(function(t){return n("throw",t,a,s)}))}s(c.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function b(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,b(t,e),"throw"===e.method))return u;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var n=l(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,u;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,u):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,u)}function C(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function k(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function L(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(C,this),this.reset(!0)}function S(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:E}}function E(){return{value:void 0,done:!0}}return h.prototype=f,s(g,"constructor",f),s(f,"constructor",h),h.displayName=s(f,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===h||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,f):(t.__proto__=f,s(t,a,"GeneratorFunction")),t.prototype=Object.create(g),t},t.awrap=function(t){return{__await:t}},y(_.prototype),s(_.prototype,i,(function(){return this})),t.AsyncIterator=_,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new _(c(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},y(g),s(g,a,"Generator"),s(g,o,(function(){return this})),s(g,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=S,L.prototype={constructor:L,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(k),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=r.call(i,"catchLoc"),c=r.call(i,"finallyLoc");if(s&&c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,u):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),u},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),k(r),u}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;k(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:S(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),u}},t}function C(t,e,r,n,o,i,a){try{var s=t[i](a),c=s.value}catch(t){return void r(t)}s.done?e(c):Promise.resolve(c).then(n,o)}const k={name:"LoginPage",components:{ProjectListSelect:r(130).Z,FloorRegionMgmtListCollapseSelect:b.Z,FloorRegionView:_.Z,LoginModal:y},data:function(){return{regionId:null,showLoginModal:!1,showRegion:!1,form:{}}},created:function(){this.form.id&&this.fetchData()},methods:{needLogin:function(t){this.regionId=t,this.showLoginModal=!0},fetchData:function(){var t,e=this;return(t=w().mark((function t(){var r,n;return w().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.loading=!0,t.prev=1,t.next=4,o().get("/api/regionMgmts/".concat(e.form.id));case 4:0==(r=(r=t.sent).data).status&&(n=r.data,e.form=n.regionMgmt),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),e.guestRedirectHome(t.t0);case 12:e.loading=!1;case 13:case"end":return t.stop()}}),t,null,[[1,9]])})),function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){C(i,n,o,a,s,"next",t)}function s(t){C(i,n,o,a,s,"throw",t)}a(void 0)}))})()}}};var L=r(5137),S={insert:"head",singleton:!1};p()(L.Z,S);L.Z.locals;const E=(0,g.Z)(k,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("button",{staticClass:"btn btn-light-green op-btn login-btn",attrs:{type:"button"},on:{click:function(e){t.showLoginModal=!0}}},[r("i",{staticClass:"fa fa-sign-in"}),t._v(" 登入\n    ")]),t._v(" "),r("floor-region-view",{on:{needLogin:t.needLogin}}),t._v(" "),r("div",{staticClass:"container-right",class:t.showRegion?"":"container-right-collapsed",style:t.showRegion?"z-index: 2":"z-index: 1"},[r("div",{staticClass:"region-tag",class:t.showRegion?"":"burner-collapsed",on:{click:function(e){t.showRegion=!t.showRegion}}},[t._v("\n            "+t._s(t.showRegion?" >":" <")+"區域名稱\n        ")]),t._v(" "),r("div",{staticClass:"col-md-12 project-list"},[r("div",{staticClass:"text-center project-list-title"},[t._v("專案區域列表")]),t._v(" "),r("project-list-select",{attrs:{"is-deploy":1,disabled:!!t.form.project_id},model:{value:t.form.project_id,callback:function(e){t.$set(t.form,"project_id",e)},expression:"form.project_id"}}),t._v(" "),r("div",{staticClass:"region-floor-room-collapse-select"},[r("floor-region-mgmt-list-collapse-select",{attrs:{"project-id":t.form.project_id,"is-deploy":1,"is-select-first":!0},on:{"update:projectId":function(e){return t.$set(t.form,"project_id",e)},"update:project-id":function(e){return t.$set(t.form,"project_id",e)},change:t.fetchData},model:{value:t.form.id,callback:function(e){t.$set(t.form,"id",e)},expression:"form.id"}})],1)],1)]),t._v(" "),r("div",{staticClass:"login"},[t.showLoginModal?r("LoginModal",{attrs:{"region-id":t.regionId},model:{value:t.showLoginModal,callback:function(e){t.showLoginModal=e},expression:"showLoginModal"}}):t._e()],1),t._v(" "),r("div",{staticClass:"bottom-row"})],1)}),[],!1,null,"2ca6e38a",null).exports},3071:(t,e,r)=>{"use strict";r.d(e,{Z:()=>rt});var n=r(629),o=r(9038),i=r(6486),a=r.n(i),s=r(9669),c=r.n(s);function l(t){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},l(t)}function u(){u=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function c(t,e,r,n){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new L(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return E()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var s=w(a,r);if(s){if(s===h)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=d(t,e,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===h)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}(t,r,a),i}function d(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var h={};function f(){}function p(){}function m(){}var v={};s(v,o,(function(){return this}));var g=Object.getPrototypeOf,y=g&&g(g(S([])));y&&y!==e&&r.call(y,o)&&(v=y);var _=m.prototype=f.prototype=Object.create(v);function b(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function x(t,e){function n(o,i,a,s){var c=d(t[o],t,i);if("throw"!==c.type){var u=c.arg,h=u.value;return h&&"object"==l(h)&&r.call(h,"__await")?e.resolve(h.__await).then((function(t){n("next",t,a,s)}),(function(t){n("throw",t,a,s)})):e.resolve(h).then((function(t){u.value=t,a(u)}),(function(t){return n("throw",t,a,s)}))}s(c.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return h;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return h}var n=d(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,h;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,h):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,h)}function C(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function k(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function L(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(C,this),this.reset(!0)}function S(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:E}}function E(){return{value:void 0,done:!0}}return p.prototype=m,s(_,"constructor",m),s(m,"constructor",p),p.displayName=s(m,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,m):(t.__proto__=m,s(t,a,"GeneratorFunction")),t.prototype=Object.create(_),t},t.awrap=function(t){return{__await:t}},b(x.prototype),s(x.prototype,i,(function(){return this})),t.AsyncIterator=x,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new x(c(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},b(_),s(_,a,"Generator"),s(_,o,(function(){return this})),s(_,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=S,L.prototype={constructor:L,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(k),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=r.call(i,"catchLoc"),c=r.call(i,"finallyLoc");if(s&&c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,h):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),k(r),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;k(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:S(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),h}},t}function d(t,e,r,n,o,i,a){try{var s=t[i](a),c=s.value}catch(t){return void r(t)}s.done?e(c):Promise.resolve(c).then(n,o)}const h={name:"RoleListSelect",props:{value:{type:Number}},watch:{roleId:function(t){this.$emit("input",t)},value:function(t){this.roleId=t}},data:function(){return{roleId:this.value,roles:[]}},created:function(){this.roleId=this.value,this.fetchData()},methods:{fetchData:function(){var t,e=this;return(t=u().mark((function t(){var r,n;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.loading=!0,t.prev=1,t.next=4,c().get("/api/roles");case 4:0==(r=(r=t.sent).data).status&&(n=r.data,e.roles=n.roles),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),e.guestRedirectHome(t.t0);case 12:case"end":return t.stop()}}),t,null,[[1,9]])})),function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){d(i,n,o,a,s,"next",t)}function s(t){d(i,n,o,a,s,"throw",t)}a(void 0)}))})()}}};var f=r(1900);const p=(0,f.Z)(h,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("select",{directives:[{name:"model",rawName:"v-model",value:t.roleId,expression:"roleId"}],staticClass:"form-control",attrs:{name:"roleId"},on:{change:function(e){var r=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.roleId=e.target.multiple?r:r[0]}}},[r("option",{domProps:{value:null}},[t._v("請選擇")]),t._v(" "),t._l(t.roles,(function(e){return r("option",{domProps:{value:e.id}},[t._v(t._s(e.display_name))])}))],2)}),[],!1,null,null,null).exports;var m=r(9014),v=r(7446);function g(t){return g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},g(t)}function y(){y=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function c(t,e,r,n){var o=e&&e.prototype instanceof d?e:d,i=Object.create(o.prototype),a=new L(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return E()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var s=w(a,r);if(s){if(s===u)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=l(t,e,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===u)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}(t,r,a),i}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var u={};function d(){}function h(){}function f(){}var p={};s(p,o,(function(){return this}));var m=Object.getPrototypeOf,v=m&&m(m(S([])));v&&v!==e&&r.call(v,o)&&(p=v);var _=f.prototype=d.prototype=Object.create(p);function b(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function x(t,e){function n(o,i,a,s){var c=l(t[o],t,i);if("throw"!==c.type){var u=c.arg,d=u.value;return d&&"object"==g(d)&&r.call(d,"__await")?e.resolve(d.__await).then((function(t){n("next",t,a,s)}),(function(t){n("throw",t,a,s)})):e.resolve(d).then((function(t){u.value=t,a(u)}),(function(t){return n("throw",t,a,s)}))}s(c.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return u;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var n=l(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,u;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,u):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,u)}function C(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function k(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function L(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(C,this),this.reset(!0)}function S(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:E}}function E(){return{value:void 0,done:!0}}return h.prototype=f,s(_,"constructor",f),s(f,"constructor",h),h.displayName=s(f,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===h||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,f):(t.__proto__=f,s(t,a,"GeneratorFunction")),t.prototype=Object.create(_),t},t.awrap=function(t){return{__await:t}},b(x.prototype),s(x.prototype,i,(function(){return this})),t.AsyncIterator=x,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new x(c(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},b(_),s(_,a,"Generator"),s(_,o,(function(){return this})),s(_,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=S,L.prototype={constructor:L,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(k),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=r.call(i,"catchLoc"),c=r.call(i,"finallyLoc");if(s&&c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,u):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),u},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),k(r),u}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;k(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:S(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),u}},t}function _(t,e,r,n,o,i,a){try{var s=t[i](a),c=s.value}catch(t){return void r(t)}s.done?e(c):Promise.resolve(c).then(n,o)}function b(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){_(i,n,o,a,s,"next",t)}function s(t){_(i,n,o,a,s,"throw",t)}a(void 0)}))}}const x={name:"UserModal",$_veeValidate:{validator:"new"},components:{ClipLoader:o.Z,RoleListSelect:p,RegionMgmtListSelect:m.Z,VehicleMgmtListSelect:v.Z},props:{value:{type:Boolean,default:!1},uid:{type:[String,Number]},showProfile:{type:Boolean,default:!1},showPassword:{type:Boolean,default:!1}},watch:{value:function(t){this.showModal=t}},data:function(){return{loading:!0,sending:!1,showModal:this.value,form:{},showAccountRepeatMsg:!1}},created:function(){this.resetForm()},methods:{fetchData:function(){var t=this;return b(y().mark((function e(){var r,n,o;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,c().get("/api/users/".concat(t.uid));case 3:0==(r=(r=e.sent).data).status&&(n=r.data,0==(o=n.user).roles.length&&o.roles.push({id:4,name:"operate"}),t.form=o),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),t.guestRedirectHome(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))()},onShowModal:function(){var t=this;return b(y().mark((function e(){return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.resetForm(),!t.uid){e.next=5;break}return t.loading=!0,e.next=5,t.fetchData();case 5:t.loading=!1;case 6:case"end":return e.stop()}}),e)})))()},onHideModal:function(){this.resetForm(),this.$emit("input",!1)},submit:function(){var t=this;return b(y().mark((function e(){var r,n;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.validate();case 3:if(e.sent){e.next=6;break}return e.abrupt("return");case 6:if(t.sending=!0,r=null,t.uid){e.next=14;break}return e.next=11,c().post("/api/users",t.form);case 11:r=e.sent,e.next=17;break;case 14:return e.next=16,c().patch("/api/users/".concat(t.uid),t.form);case 16:r=e.sent;case 17:0==(r=r.data).status?(n=r.data,t.form=n.user,t.$toast.success({title:"成功訊息",message:"".concat(t.uid?"修改":"創建","成功")}),t.$emit("update",t.form),t.showModal=!1):-3==r.status&&(t.showAccountRepeatMsg=!0,t.scrollTo("account")),e.next=25;break;case 21:return e.prev=21,e.t0=e.catch(0),e.next=25,t.guestRedirectHome(e.t0);case 25:t.sending=!1;case 26:case"end":return e.stop()}}),e,null,[[0,21]])})))()},resetForm:function(){this.form={id:null,account:null,password:null,password_confirmation:null,enable:1,roles:[{id:null}]},this.showAccountRepeatMsg=!1,this.resetFormValidate()}}};var w=r(3379),C=r.n(w),k=r(7379),L={insert:"head",singleton:!1};C()(k.Z,L);k.Z.locals;function S(t){return S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},S(t)}function E(){E=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function c(t,e,r,n){var o=e&&e.prototype instanceof d?e:d,i=Object.create(o.prototype),a=new C(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return L()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var s=b(a,r);if(s){if(s===u)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=l(t,e,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===u)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}(t,r,a),i}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var u={};function d(){}function h(){}function f(){}var p={};s(p,o,(function(){return this}));var m=Object.getPrototypeOf,v=m&&m(m(k([])));v&&v!==e&&r.call(v,o)&&(p=v);var g=f.prototype=d.prototype=Object.create(p);function y(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function _(t,e){function n(o,i,a,s){var c=l(t[o],t,i);if("throw"!==c.type){var u=c.arg,d=u.value;return d&&"object"==S(d)&&r.call(d,"__await")?e.resolve(d.__await).then((function(t){n("next",t,a,s)}),(function(t){n("throw",t,a,s)})):e.resolve(d).then((function(t){u.value=t,a(u)}),(function(t){return n("throw",t,a,s)}))}s(c.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function b(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,b(t,e),"throw"===e.method))return u;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var n=l(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,u;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,u):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,u)}function x(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function w(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function C(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(x,this),this.reset(!0)}function k(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:L}}function L(){return{value:void 0,done:!0}}return h.prototype=f,s(g,"constructor",f),s(f,"constructor",h),h.displayName=s(f,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===h||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,f):(t.__proto__=f,s(t,a,"GeneratorFunction")),t.prototype=Object.create(g),t},t.awrap=function(t){return{__await:t}},y(_.prototype),s(_.prototype,i,(function(){return this})),t.AsyncIterator=_,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new _(c(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},y(g),s(g,a,"Generator"),s(g,o,(function(){return this})),s(g,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=k,C.prototype={constructor:C,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(w),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=r.call(i,"catchLoc"),c=r.call(i,"finallyLoc");if(s&&c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,u):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),u},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),w(r),u}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;w(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:k(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),u}},t}function M(t,e,r,n,o,i,a){try{var s=t[i](a),c=s.value}catch(t){return void r(t)}s.done?e(c):Promise.resolve(c).then(n,o)}function O(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){M(i,n,o,a,s,"next",t)}function s(t){M(i,n,o,a,s,"throw",t)}a(void 0)}))}}function P(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function j(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}const N={name:"UserListView",components:{UserModal:(0,f.Z)(x,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("modal",{attrs:{footer:!1,backdrop:!1,"append-to-body":!0,keyboard:!1},on:{show:t.onShowModal,hide:t.onHideModal},model:{value:t.showModal,callback:function(e){t.showModal=e},expression:"showModal"}},[r("div",{attrs:{slot:"title"},slot:"title"},[t.form.id?t.showPassword?[t._v("修改密碼")]:[t._v("修改個資")]:[t._v("創建帳號")]],2),t._v(" "),r("div",{attrs:{slot:"default"},slot:"default"},[t.loading?t._e():r("form",{staticClass:"form-horizontal",attrs:{novalidate:""},on:{submit:function(e){return e.preventDefault(),t.submit.apply(null,arguments)}}},[t.showProfile?[t.form.id?r("div",{staticClass:"form-group"},[r("label",{staticClass:"col-md-3 control-label"},[t._v("編號  ")]),t._v(" "),r("div",{staticClass:"col-md-9"},[t._v(t._s(t.form.id))])]):t._e(),t._v(" "),r("div",{staticClass:"form-group"},[r("label",{staticClass:"col-md-3 control-label"},[t._v("身份"),r("span",{staticClass:"is-danger"},[t._v(" *")])]),t._v(" "),r("div",{staticClass:"col-md-9"},[r("role-list-select",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{name:"role_id"},model:{value:t.form.roles[0].id,callback:function(e){t.$set(t.form.roles[0],"id",e)},expression:"form.roles[0].id"}}),t._v(" "),r("span",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("role_id:required"),expression:"errors.has('role_id:required')"}],staticClass:"help is-danger"},[t._v("請選擇身份")])],1)]),t._v(" "),r("div",{staticClass:"form-group"},[r("label",{staticClass:"col-md-3 control-label"},[t._v("啟用狀態")]),t._v(" "),r("div",{staticClass:"col-md-9"},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.form.enable,expression:"form.enable"}],attrs:{name:"enable",type:"checkbox"},domProps:{checked:Array.isArray(t.form.enable)?t._i(t.form.enable,null)>-1:t.form.enable},on:{change:function(e){var r=t.form.enable,n=e.target,o=!!n.checked;if(Array.isArray(r)){var i=t._i(r,null);n.checked?i<0&&t.$set(t.form,"enable",r.concat([null])):i>-1&&t.$set(t.form,"enable",r.slice(0,i).concat(r.slice(i+1)))}else t.$set(t.form,"enable",o)}}})])])]:t._e(),t._v(" "),t.showProfile&&t.showPassword?r("hr"):t._e(),t._v(" "),t.showPassword?[r("div",{staticClass:"form-group"},[r("label",{staticClass:"col-md-3 control-label"},[t._v("帳號"),t.form.id?t._e():r("span",{staticClass:"is-danger"},[t._v(" *")])]),t._v(" "),r("div",{staticClass:"col-md-9"},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.form.account,expression:"form.account"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"form-control",attrs:{name:"account",placeholder:"請填寫帳號",disabled:t.form.id},domProps:{value:t.form.account},on:{input:[function(e){e.target.composing||t.$set(t.form,"account",e.target.value)},function(e){t.showAccountRepeatMsg=!1}]}}),t._v(" "),r("span",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("account:required"),expression:"errors.has('account:required')"}],staticClass:"help is-danger"},[t._v("請填寫帳號")]),t._v(" "),r("span",{directives:[{name:"show",rawName:"v-show",value:t.showAccountRepeatMsg,expression:"showAccountRepeatMsg"}],staticClass:"help is-danger"},[t._v("已有使用者使用這組帳號！")])])]),t._v(" "),r("div",{staticClass:"form-group"},[r("label",{staticClass:"col-md-3 control-label"},[t._v("密碼"),t.form.id?t._e():r("span",{staticClass:"is-danger"},[t._v(" *")])]),t._v(" "),r("div",{staticClass:"col-md-9"},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.form.password,expression:"form.password"},{name:"validate",rawName:"v-validate",value:"required|min:8|max:20",expression:"'required|min:8|max:20'"}],ref:"password",staticClass:"form-control",attrs:{type:"password",name:"password",placeholder:"請填寫8~20碼之間"},domProps:{value:t.form.password},on:{input:function(e){e.target.composing||t.$set(t.form,"password",e.target.value)}}}),t._v(" "),r("span",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("password:required"),expression:"errors.has('password:required')"}],staticClass:"help is-danger"},[t._v("請填寫密碼")]),t._v(" "),r("span",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("password:min"),expression:"errors.has('password:min')"}],staticClass:"help is-danger"},[t._v("請填寫8~20碼之間")]),t._v(" "),r("span",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("password:max"),expression:"errors.has('password:max')"}],staticClass:"help is-danger"},[t._v("請填寫8~20碼之間")])])]),t._v(" "),r("div",{staticClass:"form-group"},[r("label",{staticClass:"col-md-3 control-label"},[t._v("確認密碼"),t.form.id?t._e():r("span",{staticClass:"is-danger"},[t._v(" *")])]),t._v(" "),r("div",{staticClass:"col-md-9"},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.form.password_confirmation,expression:"form.password_confirmation"},{name:"validate",rawName:"v-validate",value:"required|confirmed:password",expression:"'required|confirmed:password'"}],staticClass:"form-control",attrs:{type:"password",name:"password_confirmation",placeholder:"請填寫8~20碼之間"},domProps:{value:t.form.password_confirmation},on:{input:function(e){e.target.composing||t.$set(t.form,"password_confirmation",e.target.value)}}}),t._v(" "),r("span",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("password_confirmation:required"),expression:"errors.has('password_confirmation:required')"}],staticClass:"help is-danger"},[t._v("請填寫確認密碼")]),t._v(" "),r("span",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("password_confirmation:confirmed"),expression:"errors.has('password_confirmation:confirmed')"}],staticClass:"help is-danger"},[t._v("請與密碼一致")])])])]:t._e(),t._v(" "),r("div",{staticClass:"text-right"},[r("button",{staticClass:"btn btn-light-green",attrs:{disabled:t.sending}},[t._v("送出")]),t._v(" "),r("button",{staticClass:"btn btn-default",attrs:{type:"button"},on:{click:function(e){t.showModal=!1}}},[t._v("取消")])])],2),t._v(" "),t.loading?r("clip-loader",{staticClass:"loading",attrs:{color:"gray",size:"30px"}}):t._e()],1)])}),[],!1,null,"028fd0f4",null).exports,ClipLoader:o.Z},computed:function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?P(Object(r),!0).forEach((function(e){j(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):P(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({},(0,n.Se)({LoginUser:"user/user"})),props:{userModal:{type:Object,default:function(){return{id:null,show:!1,showProfile:!0,showPassword:!0}}}},watch:{userModal:{handler:function(t){t.show&&this.showModal(t.id,t.showProfile,t.showPassword)},deep:!0},modal:{handler:function(){this.$emit("update:userModal",this.modal)},deep:!0}},data:function(){return{loading:!1,sending:!1,users:[],pagination:{last_page:1,current_page:this.$route.query.page?parseInt(this.$route.query.page):1},modal:{id:null,show:!1,showProfile:!0,showPassword:!0},form:{account:null,enable:null},regionMgmts:[],draggedItem:null}},created:function(){this.fetchData(),this.fetchRegionMgmtData()},methods:{fetchData:function(){var t=this;return O(E().mark((function e(){var r,n;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.loading=!0,e.prev=1,e.next=4,c().get("/api/users",{params:{page:t.pagination.current_page,account:t.form.account,enable:t.form.enable}});case 4:0==(r=(r=e.sent).data).status&&(n=r.data,t.users=a().map(n.users,(function(t){return t.selected=0,0==t.roles.length&&t.roles.push({id:4,display_name:"operator"}),t})),t.pagination=n.pagination),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),t.guestRedirectHome(e.t0);case 12:t.loading=!1;case 13:case"end":return e.stop()}}),e,null,[[1,9]])})))()},fetchRegionMgmtData:function(){var t=this;return O(E().mark((function e(){var r,n;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.loading=!0,e.prev=1,e.next=4,c().get("/api/regionMgmts",{params:{all:1}});case 4:0==(r=(r=e.sent).data).status&&(n=r.data,t.regionMgmts=n.regionMgmts),e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(1),e.next=13,t.guestRedirectHome(e.t0);case 13:t.loading=!1;case 14:case"end":return e.stop()}}),e,null,[[1,9]])})))()},showModal:function(t,e,r){this.modal.id=t,this.modal.showProfile=e,this.modal.showPassword=r,this.modal.show=!0},resetRow:function(t){var e=a().findIndex(this.users,(function(e){return e.id==t.id}));-1==e?this.users.splice(0,0,t):this.users[e]=t},deleteRow:function(t){var e=this;return O(E().mark((function r(){return E().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(e.LoginUser.id!=t.id){r.next=2;break}return r.abrupt("return");case 2:if(confirm("確定要刪除「".concat(t.name,"」?"))){r.next=4;break}return r.abrupt("return");case 4:return r.prev=4,r.next=7,c().delete("/api/users/".concat(t.id));case 7:0==r.sent.data.status&&(e.$toast.success({title:"成功訊息",message:"刪除成功"}),e.users=a().filter(e.users,(function(e){return e.id!=t.id}))),r.next=16;break;case 12:return r.prev=12,r.t0=r.catch(4),r.next=16,e.guestRedirectHome(r.t0);case 16:case"end":return r.stop()}}),r,null,[[4,12]])})))()},updateRow:function(t){var e=this;return O(E().mark((function r(){return E().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,e.sending=!0,r.next=4,c().patch("/api/users/".concat(t.id),t);case 4:0!=r.sent.data.status&&e.$toast.error({title:"錯誤訊息",message:"資料尚未儲存！"}),r.next=13;break;case 9:return r.prev=9,r.t0=r.catch(0),r.next=13,e.guestRedirectHome(r.t0);case 13:e.sending=!1;case 14:case"end":return r.stop()}}),r,null,[[0,9]])})))()},dragStart:function(t){this.draggedItem=this.regionMgmts[t]},dragEnd:function(){this.draggedItem=null},dragOver:function(t){t.preventDefault(),t.stopPropagation(),t.cancelBubble=!0},drop:function(t,e){a().find(this.users[t][e],{id:this.draggedItem.id})||(this.users[t][e].push(this.draggedItem),this.updateRow(this.users[t]))},deleteRegion:function(t,e,r){this.sending||(t||0==t)&&(this.users[t][e].splice(r,1),this.updateRow(this.users[t]))},selectAllRegion:function(t,e){this.sending||(t||0==t)&&(this.users[t][e]=a().cloneDeep(this.regionMgmts),this.updateRow(this.users[t]))}}};var T=r(6042),$={insert:"head",singleton:!1};C()(T.Z,$);T.Z.locals;const I=(0,f.Z)(N,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"row"},[t.loading?t._e():r("div",{staticClass:"col-xs-10 table-block"},[r("table",{staticClass:"table table-bordered table-hover break-table"},[r("thead",{staticClass:"table-head"},[r("tr",[r("th",{staticClass:"hide-td no-wrap text-center"},[t._v(t._s(t.$t("id")))]),t._v(" "),r("th",{staticClass:"hide-td no-wrap"},[t._v(t._s(t.$t("account")))]),t._v(" "),r("th",{staticClass:"hide-td no-wrap"},[t._v(t._s(t.$t("role")))]),t._v(" "),r("th",{staticClass:"hide-td no-wrap"},[t._v("管理區域")]),t._v(" "),r("th",{staticClass:"hide-td no-wrap"},[t._v("監看區域")]),t._v(" "),r("th",{staticClass:"hide-td no-wrap text-center"},[t._v(t._s(t.$t("enable")))]),t._v(" "),r("th",{staticClass:"hide-td no-wrap"},[t._v(t._s(t.$t("createdAt")))]),t._v(" "),r("th",{staticClass:"hide-td no-wrap"},[t._v(t._s(t.$t("updatedAt")))]),t._v(" "),r("th",{staticClass:"hide-td no-wrap text-center th-operate"},[t._v(t._s(t.$t("operate")))])])]),t._v(" "),r("tbody",[r("tr",[r("td",{staticStyle:{"line-height":"5px"},attrs:{colspan:"8"}},[r("span",{staticClass:"red font-bold",staticStyle:{"font-size":"8pt"}},[t._v("\n                                            "+t._s(t.$t("PEATITSF"))+"\n                                        ")])])]),t._v(" "),r("tr",[r("td",{staticClass:"hide-td no-wrap text-center"}),t._v(" "),r("td",{staticClass:"th-search-text",attrs:{"data-title":t.$t("account")}},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.form.account,expression:"form.account"}],staticClass:"form-control",attrs:{placeholder:t.$t("search")},domProps:{value:t.form.account},on:{keypress:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.fetchData.apply(null,arguments)},input:function(e){e.target.composing||t.$set(t.form,"account",e.target.value)}}})]),t._v(" "),r("td",{staticClass:"hide-td"}),t._v(" "),r("td",{staticClass:"hide-td"}),t._v(" "),r("td",{staticClass:"hide-td"}),t._v(" "),r("td",{staticClass:"th-search-enable",attrs:{"data-title":t.$t("enable")}},[r("select",{directives:[{name:"model",rawName:"v-model",value:t.form.enable,expression:"form.enable"}],staticClass:"form-control",on:{change:[function(e){var r=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(t.form,"enable",e.target.multiple?r:r[0])},t.fetchData]}},[r("option",{domProps:{value:null}},[t._v(t._s(t.$t("all")))]),t._v(" "),r("option",{attrs:{value:"1"}},[t._v(t._s(t.$t("enabled")))]),t._v(" "),r("option",{attrs:{value:"0"}},[t._v(t._s(t.$t("disabled")))])])]),t._v(" "),r("td",{staticClass:"hide-td"}),t._v(" "),r("td",{staticClass:"hide-td"}),t._v(" "),r("td",{staticClass:"hide-td"})]),t._v(" "),t._l(t.users,(function(e,n){return r("tr",{class:[n%2==0?"tr-gray":""]},[r("td",{staticClass:"no-wrap vertical-middle text-center",attrs:{"data-title":t.$t("id")}},[t._v(t._s(e.id))]),t._v(" "),r("td",{staticClass:"no-wrap vertical-middle",attrs:{"data-title":t.$t("account")}},[t._v(t._s(e.account))]),t._v(" "),r("td",{staticClass:"no-wrap vertical-middle",attrs:{"data-title":t.$t("role")}},[t._v(t._s(e.roles[0].display_name))]),t._v(" "),r("td",{attrs:{"data-title":"管理區域"},on:{dragover:function(e){return t.dragOver(e)},drop:function(e){return t.drop(n,"write_region_mgmts")}}},[r("div",[r("button",{staticClass:"btn btn-default btn-sm op-btn",attrs:{type:"button",disabled:t.sending},on:{click:function(e){return t.selectAllRegion(n,"write_region_mgmts")}}},[r("i",{staticClass:"fa fa-check-square-o",attrs:{"aria-hidden":"true"}}),t._v("\n                            全選\n                        ")])]),t._v(" "),r("div",{staticClass:"region-label-div"},t._l(e.write_region_mgmts,(function(e,o){return r("div",{key:e.id,staticClass:"label label-success region-label"},[t._v(t._s(e.region)+"\n                            "),r("i",{staticClass:"fa fa-times-circle region-label-close-btn",class:{"cursor-disable":t.sending},on:{click:function(e){return t.deleteRegion(n,"write_region_mgmts",o)}}})])})),0)]),t._v(" "),r("td",{attrs:{"data-title":"監看區域"},on:{dragover:function(e){return t.dragOver(e)},drop:function(e){return t.drop(n,"read_region_mgmts")}}},[r("div",[r("button",{staticClass:"btn btn-default btn-sm op-btn",attrs:{type:"button",disabled:t.sending},on:{click:function(e){return t.selectAllRegion(n,"read_region_mgmts")}}},[r("i",{staticClass:"fa fa-check-square-o",attrs:{"aria-hidden":"true"}}),t._v("\n                            全選\n                        ")])]),t._v(" "),r("div",{staticClass:"region-label-div"},t._l(e.read_region_mgmts,(function(e,o){return r("div",{key:e.id,staticClass:"label label-success region-label"},[t._v(t._s(e.region)+"\n                            "),r("i",{staticClass:"fa fa-times-circle region-label-close-btn",class:{"cursor-disable":t.sending},on:{click:function(e){return t.deleteRegion(n,"read_region_mgmts",o)}}})])})),0)]),t._v(" "),r("td",{staticClass:"no-wrap vertical-middle text-center",class:[e.enable?"green":"red"],attrs:{"data-title":t.$t("enable")}},[t._v("\n                    "+t._s(e.enable?t.$t("enabled"):t.$t("disabled"))+"\n                ")]),t._v(" "),r("td",{staticClass:"no-wrap vertical-middle",attrs:{"data-title":t.$t("createdAt")}},[t._v(t._s(t._f("datetime")(e.created_at)))]),t._v(" "),r("td",{staticClass:"no-wrap vertical-middle",attrs:{"data-title":t.$t("updatedAt")}},[t._v(t._s(t._f("datetime")(e.updated_at)))]),t._v(" "),r("td",{staticClass:"no-wrap vertical-middle text-center",attrs:{"data-title":t.$t("operate")}},[r("div",{staticClass:"dropdown"},[t._m(0,!0),t._v(" "),r("ul",{staticClass:"dropdown-menu",attrs:{"aria-labelledby":"dropdownMenuOperate"}},[r("li",[r("a",{attrs:{href:"javascript:void(0)",title:"修改個資"},on:{click:function(r){return t.showModal(e.id,!0,!1)}}},[r("i",{staticClass:"glyphicon glyphicon-pencil"}),t._v("\n                                    "+t._s(t.$t("editData")))])]),t._v(" "),r("li",[r("a",{attrs:{href:"javascript:void(0)",title:"修改密碼"},on:{click:function(r){return t.showModal(e.id,!1,!0)}}},[r("i",{staticClass:"glyphicon glyphicon-lock"}),t._v("\n                                    "+t._s(t.$t("editPassword")))])]),t._v(" "),r("li",{class:{disabled:t.LoginUser.id==e.id}},[r("a",{attrs:{href:"javascript:void(0)",title:"刪除"},on:{click:function(r){return t.deleteRow(e)}}},[r("i",{staticClass:"glyphicon glyphicon-trash"}),t._v("\n                                    "+t._s(t.$t("delete")))])])])])])])}))],2)])]),t._v(" "),r("div",{staticClass:"col-xs-2"},[r("h3",{staticClass:"region-title"},[t._v("區域：")]),t._v(" "),r("ul",{staticClass:"region-list"},t._l(t.regionMgmts,(function(e,n){return r("li",{key:e.id,staticClass:"region-item",class:{"cursor-disable":t.sending},attrs:{draggable:!t.sending},on:{dragstart:function(e){return t.dragStart(n)},dragend:t.dragEnd}},[t._v(t._s(e.region)+"\n            ")])})),0)]),t._v(" "),r("div",{staticClass:"col-xs-10"},[r("div",{staticClass:"text-center"},[r("pagination",{attrs:{"direction-links":!1,"boundary-links":!0,size:"sm","total-page":t.pagination.last_page,"max-size":10},on:{change:t.fetchData},model:{value:t.pagination.current_page,callback:function(e){t.$set(t.pagination,"current_page",e)},expression:"pagination.current_page"}})],1)]),t._v(" "),t.loading?r("clip-loader",{staticClass:"loading",attrs:{color:"gray",size:"30px"}}):t._e(),t._v(" "),r("user-modal",{attrs:{uid:t.modal.id,"show-profile":t.modal.showProfile,"show-password":t.modal.showPassword},on:{update:t.resetRow,refresh:t.fetchData},model:{value:t.modal.show,callback:function(e){t.$set(t.modal,"show",e)},expression:"modal.show"}})],1)}),[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("button",{staticClass:"btn btn-default dropdown-toggle",attrs:{type:"button",id:"dropdownMenuOperate","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"true"}},[t._v("\n                            操作\n                            "),r("span",{staticClass:"caret"})])}],!1,null,"35c51619",null).exports;var D=r(8495);function A(t){return A="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},A(t)}function F(){F=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function c(t,e,r,n){var o=e&&e.prototype instanceof d?e:d,i=Object.create(o.prototype),a=new C(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return L()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var s=b(a,r);if(s){if(s===u)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=l(t,e,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===u)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}(t,r,a),i}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var u={};function d(){}function h(){}function f(){}var p={};s(p,o,(function(){return this}));var m=Object.getPrototypeOf,v=m&&m(m(k([])));v&&v!==e&&r.call(v,o)&&(p=v);var g=f.prototype=d.prototype=Object.create(p);function y(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function _(t,e){function n(o,i,a,s){var c=l(t[o],t,i);if("throw"!==c.type){var u=c.arg,d=u.value;return d&&"object"==A(d)&&r.call(d,"__await")?e.resolve(d.__await).then((function(t){n("next",t,a,s)}),(function(t){n("throw",t,a,s)})):e.resolve(d).then((function(t){u.value=t,a(u)}),(function(t){return n("throw",t,a,s)}))}s(c.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function b(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,b(t,e),"throw"===e.method))return u;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var n=l(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,u;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,u):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,u)}function x(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function w(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function C(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(x,this),this.reset(!0)}function k(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:L}}function L(){return{value:void 0,done:!0}}return h.prototype=f,s(g,"constructor",f),s(f,"constructor",h),h.displayName=s(f,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===h||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,f):(t.__proto__=f,s(t,a,"GeneratorFunction")),t.prototype=Object.create(g),t},t.awrap=function(t){return{__await:t}},y(_.prototype),s(_.prototype,i,(function(){return this})),t.AsyncIterator=_,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new _(c(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},y(g),s(g,a,"Generator"),s(g,o,(function(){return this})),s(g,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=k,C.prototype={constructor:C,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(w),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=r.call(i,"catchLoc"),c=r.call(i,"finallyLoc");if(s&&c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,u):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),u},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),w(r),u}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;w(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:k(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),u}},t}function q(t,e,r,n,o,i,a){try{var s=t[i](a),c=s.value}catch(t){return void r(t)}s.done?e(c):Promise.resolve(c).then(n,o)}function R(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){q(i,n,o,a,s,"next",t)}function s(t){q(i,n,o,a,s,"throw",t)}a(void 0)}))}}const G={name:"RolePagePermissionModal",components:{ClipLoader:o.Z},computed:{selectAll:{get:function(){return this.form.permissions.length==this.pagePermissions.length},set:function(t){this.form.permissions=t?a().map(this.pagePermissions,(function(t){return{id:t.id}})):[]}}},props:{value:{type:Boolean,default:!1},roleId:{type:Number,default:null},permissions:{type:Array,default:function(){return[]}},pagePermissions:{type:Array,default:function(){return[]}}},watch:{value:function(t){this.showModal=t},roleId:function(t){this.form.role_id=t},permissions:function(t){this.form.permissions=t}},data:function(){return{loading:!0,sending:!1,showModal:this.value,form:{}}},created:function(){this.resetForm()},methods:{onShowModal:function(){var t=this;return R(F().mark((function e(){var r;return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=t,t.$nextTick((function(){r.form.role_id=r.roleId,r.form.permissions=r.permissions})),t.loading=!1;case 3:case"end":return e.stop()}}),e)})))()},onHideModal:function(){this.resetForm(),this.$emit("input",!1)},submit:function(){var t=this;return R(F().mark((function e(){return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{t.sending=!0,t.$emit("update",t.form),t.$emit("input",!1)}catch(e){t.guestRedirectHome(e)}t.sending=!1;case 2:case"end":return e.stop()}}),e)})))()},resetForm:function(){this.form={role_id:null,permissions:[]}}}};var z=r(7605),V={insert:"head",singleton:!1};C()(z.Z,V);z.Z.locals;function Z(t){return Z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Z(t)}function B(){B=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function c(t,e,r,n){var o=e&&e.prototype instanceof d?e:d,i=Object.create(o.prototype),a=new C(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return L()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var s=b(a,r);if(s){if(s===u)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=l(t,e,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===u)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}(t,r,a),i}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var u={};function d(){}function h(){}function f(){}var p={};s(p,o,(function(){return this}));var m=Object.getPrototypeOf,v=m&&m(m(k([])));v&&v!==e&&r.call(v,o)&&(p=v);var g=f.prototype=d.prototype=Object.create(p);function y(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function _(t,e){function n(o,i,a,s){var c=l(t[o],t,i);if("throw"!==c.type){var u=c.arg,d=u.value;return d&&"object"==Z(d)&&r.call(d,"__await")?e.resolve(d.__await).then((function(t){n("next",t,a,s)}),(function(t){n("throw",t,a,s)})):e.resolve(d).then((function(t){u.value=t,a(u)}),(function(t){return n("throw",t,a,s)}))}s(c.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function b(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,b(t,e),"throw"===e.method))return u;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var n=l(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,u;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,u):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,u)}function x(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function w(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function C(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(x,this),this.reset(!0)}function k(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:L}}function L(){return{value:void 0,done:!0}}return h.prototype=f,s(g,"constructor",f),s(f,"constructor",h),h.displayName=s(f,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===h||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,f):(t.__proto__=f,s(t,a,"GeneratorFunction")),t.prototype=Object.create(g),t},t.awrap=function(t){return{__await:t}},y(_.prototype),s(_.prototype,i,(function(){return this})),t.AsyncIterator=_,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new _(c(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},y(g),s(g,a,"Generator"),s(g,o,(function(){return this})),s(g,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=k,C.prototype={constructor:C,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(w),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=r.call(i,"catchLoc"),c=r.call(i,"finallyLoc");if(s&&c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,u):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),u},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),w(r),u}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;w(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:k(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),u}},t}function H(t,e,r,n,o,i,a){try{var s=t[i](a),c=s.value}catch(t){return void r(t)}s.done?e(c):Promise.resolve(c).then(n,o)}function U(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){H(i,n,o,a,s,"next",t)}function s(t){H(i,n,o,a,s,"throw",t)}a(void 0)}))}}const Y={name:"RoleListView",components:{RolePagePermissionModal:(0,f.Z)(G,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("modal",{attrs:{footer:!1,backdrop:!1,"append-to-body":!0,keyboard:!1},on:{show:t.onShowModal,hide:t.onHideModal},model:{value:t.showModal,callback:function(e){t.showModal=e},expression:"showModal"}},[r("div",{attrs:{slot:"title"},slot:"title"},[t._v("編輯頁面權限")]),t._v(" "),r("div",{attrs:{slot:"default"},slot:"default"},[t.loading?r("clip-loader",{staticClass:"loading",attrs:{color:"gray",size:"30px"}}):r("form",{staticClass:"form-horizontal",attrs:{novalidate:""},on:{submit:function(e){return e.preventDefault(),t.submit.apply(null,arguments)}}},[t._l(t.pagePermissions,(function(e,n){return r("div",{staticClass:"col-md-6"},[r("div",{staticClass:"form-group"},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.form.permissions,expression:"form.permissions"}],attrs:{type:"checkbox",id:"permission_"+e.id},domProps:{value:{id:t.pagePermissions[n].id},checked:Array.isArray(t.form.permissions)?t._i(t.form.permissions,{id:t.pagePermissions[n].id})>-1:t.form.permissions},on:{change:function(e){var r=t.form.permissions,o=e.target,i=!!o.checked;if(Array.isArray(r)){var a={id:t.pagePermissions[n].id},s=t._i(r,a);o.checked?s<0&&t.$set(t.form,"permissions",r.concat([a])):s>-1&&t.$set(t.form,"permissions",r.slice(0,s).concat(r.slice(s+1)))}else t.$set(t.form,"permissions",i)}}}),t._v(" "),r("label",{staticClass:"control-label",attrs:{for:"permission_"+e.id}},[t._v(t._s(e.display_name))])])])})),t._v(" "),r("div",{staticClass:"text-right"},[r("div",{staticClass:"select-all-div"},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.selectAll,expression:"selectAll"}],staticClass:"select-all-input",attrs:{id:"select_all_permission",type:"checkbox"},domProps:{checked:Array.isArray(t.selectAll)?t._i(t.selectAll,null)>-1:t.selectAll},on:{change:function(e){var r=t.selectAll,n=e.target,o=!!n.checked;if(Array.isArray(r)){var i=t._i(r,null);n.checked?i<0&&(t.selectAll=r.concat([null])):i>-1&&(t.selectAll=r.slice(0,i).concat(r.slice(i+1)))}else t.selectAll=o}}}),t._v(" "),r("label",{staticClass:"select-all-label",attrs:{for:"select_all_permission"}},[t._v("全選")])]),t._v(" "),r("div",{staticClass:"divider"}),t._v(" "),r("button",{staticClass:"btn btn-light-green",attrs:{disabled:t.sending},on:{click:t.submit}},[t._v("完成")]),t._v(" "),r("button",{staticClass:"btn btn-default",attrs:{type:"button"},on:{click:function(e){t.showModal=!1}}},[t._v("取消")])])],2)],1)])}),[],!1,null,"44b3b04c",null).exports,ClipLoader:o.Z},inject:["$validator"],props:{roleMode:{type:String,default:"read"}},computed:{newMd5:function(){var t=D.md5.create();return t.update(JSON.stringify(this.roles)),t.hex()},pushBtnColspan:function(){return a().isArray(this.permissions)&&this.permissions.length>0?4+Math.ceil(this.permissions.length/2):4},pagePermissions:function(){return a().filter(this.permissions,(function(t){return!t.description}))},pagePermissionIds:function(){var t=a().filter(this.permissions,(function(t){return!t.description}));return a().map(t,(function(t){return t.id}))}},watch:{roleMode:function(t){switch(t){case"edit":this.mode=t;break;case"read":this.onClickCancelEditBtn()}},mode:function(t){this.$emit("update:roleMode",t)}},data:function(){return{loading:!1,sending:!1,mode:"read",roles:[],permissions:[],oldMd5:null,rolePagePermissionModal:{show:!1,role_id:null,permissions:[]}}},created:function(){this.fetchData()},methods:{fetchData:function(){var t=this;return U(B().mark((function e(){var r,n;return B().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.loading=!0,e.prev=1,e.next=4,c().get("/api/roles");case 4:0==(r=(r=e.sent).data).status&&(n=r.data,t.roles=a().map(n.roles,(function(t){return a().isArray(t.permissions)&&t.permissions.length>0?t.permissions=a().map(t.permissions,(function(t){return{id:t.id}})):t.permissions=[],t})),t.permissions=n.permissions),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),t.guestRedirectHome(e.t0);case 12:t.oldMd5=t.newMd5,t.loading=!1;case 14:case"end":return e.stop()}}),e,null,[[1,9]])})))()},pushRow:function(){if(this.roles.length>=20)alert("數量已達上限，無法繼續新增。");else{var t=a().minBy(this.roles,"id"),e=-1;t&&t.id<0&&(e=t.id-1),this.roles.push({id:e,name:null,display_name:null,description:null,permissions:[]})}},deleteRow:function(t){var e=this;return U(B().mark((function r(){return B().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(confirm("確定要刪除".concat(t.id>0?" ID:"+t.id+" ":"","此筆資料？"))){r.next=2;break}return r.abrupt("return");case 2:if(!(t.id>0)){r.next=18;break}return r.prev=3,e.sending=!0,r.next=7,c().delete("/api/roles/".concat(t.id));case 7:0==r.sent.data.status&&(e.$toast.success({title:"成功訊息",message:"刪除成功"}),e.roles=a().filter(e.roles,(function(e){return e.id!=t.id}))),r.next=15;break;case 12:r.prev=12,r.t0=r.catch(3),e.guestRedirectHome(r.t0);case 15:e.sending=!1,r.next=19;break;case 18:t.id<0&&(e.$toast.success({title:"成功訊息",message:"刪除成功"}),e.roles=a().filter(e.roles,(function(e){return e.id!=t.id})));case 19:case"end":return r.stop()}}),r,null,[[3,12]])})))()},updateRow:function(t){var e=this;if(t.role_id){var r=a().findIndex(this.roles,(function(e){return e.id==t.role_id}));-1!=r&&(this.roles[r].permissions=a().filter(this.roles[r].permissions,(function(t){return!e.pagePermissionIds.contains(t.id)})),a().forEach(t.permissions,(function(t){e.roles[r].permissions.push(t)})))}},submit:function(){var t=this;return U(B().mark((function e(){var r,n,o;return B().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.validate();case 3:if(e.sent){e.next=6;break}return e.abrupt("return");case 6:return r=a().map(t.roles,(function(t){return t.id<0&&(t.id=null),t})),t.sending=!0,e.next=10,c().patch("/api/roles",{roles:r});case 10:if(0!=(n=(n=e.sent).data).status){e.next=18;break}return o=n.data,t.roles=a().cloneDeep(o.roles),e.next=17,t.syncUser();case 17:t.$toast.success({title:"成功訊息",message:"儲存成功"});case 18:e.next=23;break;case 20:e.prev=20,e.t0=e.catch(0),t.guestRedirectHome(e.t0);case 23:t.mode="read",t.oldMd5=t.newMd5,t.sending=!1;case 26:case"end":return e.stop()}}),e,null,[[0,20]])})))()},checkIsSaved:function(){return!(this.oldMd5!=this.newMd5&&!confirm("資料尚未儲存，確定要切換？"))},onClickCancelEditBtn:function(){this.checkIsSaved()&&(this.mode="read",this.fetchData())},getIsContains:function(t,e,r){return!!a().find(t,function(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}({},r,e))},whenReadPermissionChanged:function(t,e,r){t.target.checked||(this.roles[e].permissions=a().filter(this.roles[e].permissions,(function(t){return t.id!=r})))},showRolePagePermissionModal:function(t){var e=this;this.rolePagePermissionModal.role_id=t.id,this.rolePagePermissionModal.permissions=a().filter(t.permissions,(function(t){return e.pagePermissionIds.contains(t.id)})),this.rolePagePermissionModal.show=!0}}};var W=r(5390),X={insert:"head",singleton:!1};C()(W.Z,X);W.Z.locals;function Q(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function K(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}const J={name:"UserListPage",components:{RoleListView:(0,f.Z)(Y,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[t.loading?t._e():r("div",[r("table",{staticClass:"table table-bordered table-hover break-table"},[r("thead",[r("tr",{staticClass:"table-head"},[r("th",{staticClass:"text-center hide-td"},[t._v("ID")]),t._v(" "),r("th",{staticClass:"hide-td"},[t._v("群組")]),t._v(" "),r("th",{staticClass:"hide-td"},[t._v("描述")]),t._v(" "),t._l(t.permissions,(function(e,n){return[n%2==0&&e.description?r("th",{key:e.id,staticClass:"hide-td"},[t._v(t._s(e.display_name))]):t._e()]})),t._v(" "),"edit"==t.mode?r("th",{staticClass:"text-center vertical-middle hide-td",attrs:{rowspan:"3"}},[t._v("操作")]):t._e()],2)]),t._v(" "),r("tbody",[t._l(t.roles,(function(e,n){return r("tr",{key:e.id},[r("td",{staticClass:"text-center vertical-middle",attrs:{"data-title":"ID"}},[e.id>0?[t._v(t._s(e.id))]:t._e()],2),t._v(" "),r("td",{attrs:{"data-title":"群組"}},["edit"==t.mode?[r("input",{directives:[{name:"model",rawName:"v-model",value:e.name,expression:"role.name"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"form-control",attrs:{type:"text",name:"role_name_"+e.id},domProps:{value:e.name},on:{input:function(r){r.target.composing||t.$set(e,"name",r.target.value)}}}),t._v(" "),r("span",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("role_name_"+e.id+":required"),expression:"errors.has(`role_name_${role.id}:required`)"}],staticClass:"help is-danger text-left"},[t._v("請填寫群組")])]:[t._v(t._s(e.name))]],2),t._v(" "),r("td",{attrs:{"data-title":"描述"}},["edit"==t.mode?[r("input",{directives:[{name:"model",rawName:"v-model",value:e.description,expression:"role.description"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:e.description},on:{input:function(r){r.target.composing||t.$set(e,"description",r.target.value)}}})]:[t._v(t._s(e.description))]],2),t._v(" "),t._l(t.permissions,(function(o,i){return[i%2==0&&o.description?r("td",{key:o.id,attrs:{"data-title":o.display_name}},["edit"==t.mode?[r("input",{directives:[{name:"model",rawName:"v-model",value:e.permissions,expression:"role.permissions"}],staticClass:"inline-block",attrs:{type:"checkbox",id:t.permissions[i].name+"_"+e.id},domProps:{value:{id:t.permissions[i].id},checked:Array.isArray(e.permissions)?t._i(e.permissions,{id:t.permissions[i].id})>-1:e.permissions},on:{change:[function(r){var n=e.permissions,o=r.target,a=!!o.checked;if(Array.isArray(n)){var s={id:t.permissions[i].id},c=t._i(n,s);o.checked?c<0&&t.$set(e,"permissions",n.concat([s])):c>-1&&t.$set(e,"permissions",n.slice(0,c).concat(n.slice(c+1)))}else t.$set(e,"permissions",a)},function(e){return t.whenReadPermissionChanged(e,n,t.permissions[i+1].id)}]}}),t._v(" "),r("label",{attrs:{for:t.permissions[i].name+"_"+e.id}},[t._v(t._s(t.permissions[i].description))]),t._v(" "),i+1<t.permissions.length?[r("input",{directives:[{name:"model",rawName:"v-model",value:e.permissions,expression:"role.permissions"}],staticClass:"inline-block",attrs:{type:"checkbox",id:t.permissions[i+1].name+"_"+e.id,disabled:!t.getIsContains(e.permissions,t.permissions[i].id,"id")},domProps:{value:{id:t.permissions[i+1].id},checked:Array.isArray(e.permissions)?t._i(e.permissions,{id:t.permissions[i+1].id})>-1:e.permissions},on:{change:function(r){var n=e.permissions,o=r.target,a=!!o.checked;if(Array.isArray(n)){var s={id:t.permissions[i+1].id},c=t._i(n,s);o.checked?c<0&&t.$set(e,"permissions",n.concat([s])):c>-1&&t.$set(e,"permissions",n.slice(0,c).concat(n.slice(c+1)))}else t.$set(e,"permissions",a)}}}),t._v(" "),r("label",{attrs:{for:t.permissions[i+1].name+"_"+e.id}},[t._v(t._s(t.permissions[i+1].description))])]:t._e()]:[t._l(e.permissions,(function(e){return[e.id==t.permissions[i].id?r("span",[t._v(t._s(t.permissions[i].description))]):i+1<t.permissions.length&&e.id==t.permissions[i+1].id?r("span",[t._v(" / "+t._s(t.permissions[i+1].description))]):t._e()]}))]],2):t._e()]})),t._v(" "),"edit"==t.mode?r("td",{staticClass:"text-center vertical-middle",attrs:{"data-title":"操作"}},[r("button",{staticClass:"btn btn-light-green op-btn",attrs:{type:"button",title:"編輯頁面權限"},on:{click:function(r){return t.showRolePagePermissionModal(e)}}},[r("i",{staticClass:"glyphicon glyphicon-pencil"}),t._v(" 編輯頁面權限\n                    ")]),t._v(" "),r("button",{staticClass:"btn btn-delete op-btn",attrs:{type:"button",title:"刪除"},on:{click:function(r){return t.deleteRow(e)}}},[r("i",{staticClass:"glyphicon glyphicon-trash"}),t._v(" 刪除\n                    ")])]):t._e()],2)})),t._v(" "),"edit"==t.mode?r("tr",[r("td",{staticClass:"text-center push-btn",attrs:{colspan:t.pushBtnColspan},on:{click:t.pushRow}},[r("i",{staticClass:"fa fa-plus-circle fa-2x vertical-middle"})])]):t._e()],2)]),t._v(" "),r("div",{staticClass:"text-right"},["edit"==t.mode?r("button",{staticClass:"btn btn-light-green op-btn",attrs:{type:"button",disabled:t.sending},on:{click:t.submit}},[r("i",{staticClass:"fa fa-floppy-o"}),t._v(" 儲存\n            ")]):t._e()])]),t._v(" "),t.loading?r("clip-loader",{staticClass:"loading",attrs:{color:"gray",size:"30px"}}):t._e(),t._v(" "),r("role-page-permission-modal",{attrs:{"role-id":t.rolePagePermissionModal.role_id,permissions:t.rolePagePermissionModal.permissions,"page-permissions":t.pagePermissions},on:{update:t.updateRow},model:{value:t.rolePagePermissionModal.show,callback:function(e){t.$set(t.rolePagePermissionModal,"show",e)},expression:"rolePagePermissionModal.show"}})],1)}),[],!1,null,"1d9af6c4",null).exports,UserListView:I,ClipLoader:o.Z},computed:function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Q(Object(r),!0).forEach((function(e){K(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Q(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({},(0,n.Se)({LoginUser:"user/user"})),data:function(){return{tabIdx:0,modal:{id:null,show:!1,showProfile:!0,showPassword:!0},roleMode:"read"}},methods:{showModal:function(t,e,r){this.modal.id=t,this.modal.showProfile=e,this.modal.showPassword=r,this.modal.show=!0},refreshData:function(t){0==t?this.$refs.userList.fetchData():1==t&&this.$refs.roleList.fetchData()}}};var tt=r(5292),et={insert:"head",singleton:!1};C()(tt.Z,et);tt.Z.locals;const rt=(0,f.Z)(J,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("section",{staticClass:"content-header clearfix"},[0==t.tabIdx?[t._v(t._s(t.$t("AAPM"))+" \n            "),r("button",{staticClass:"btn btn-light-green op-btn",attrs:{title:"創建使用者"},on:{click:function(e){return t.showModal(null,!0,!0)}}},[r("img",{staticClass:"icon-user",attrs:{src:"/img/icon-create-user.png"}}),t._v(" "+t._s(t.$t("createUser"))+"\n            ")])]:1==t.tabIdx?[t._v("群組管理 \n            "),"edit"!=t.roleMode?r("button",{staticClass:"btn btn-light-green op-btn",on:{click:function(e){t.roleMode="edit"}}},[r("i",{staticClass:"fa fa-pencil",attrs:{"aria-hidden":"true"}}),t._v(" 編輯\n            ")]):"edit"==t.roleMode?r("button",{staticClass:"btn btn-delete op-btn",on:{click:function(e){t.roleMode="read"}}},[r("i",{staticClass:"fa fa-times-circle",attrs:{"aria-hidden":"true"}}),t._v(" 取消編輯\n            ")]):t._e()]:t._e()],2),t._v(" "),r("section",{staticClass:"content"},[r("div",{staticClass:"row"},[r("div",{staticClass:"col-xs-12"},[r("div",{staticClass:"box"},[r("div",{staticClass:"box-body"},[r("tabs",{on:{change:t.refreshData},model:{value:t.tabIdx,callback:function(e){t.tabIdx=e},expression:"tabIdx"}},[r("tab",{attrs:{title:"帳號管理"}},[r("user-list-view",{ref:"userList",attrs:{"user-modal":t.modal},on:{"update:userModal":function(e){t.modal=e},"update:user-modal":function(e){t.modal=e}}})],1),t._v(" "),r("tab",{attrs:{title:"群組管理"}},[r("role-list-view",{ref:"roleList",attrs:{"role-mode":t.roleMode},on:{"update:roleMode":function(e){t.roleMode=e},"update:role-mode":function(e){t.roleMode=e}}})],1)],1)],1)])])])])])}),[],!1,null,"9cb6fb46",null).exports},7099:(t,e,r)=>{"use strict";r.d(e,{Z:()=>o});const n={name:"VehicleMgmtListPage",components:{VehicleMgmtListView:r(5872).Z},props:{tableFontSize:{type:Number,default:null},showStatus:{type:Boolean,default:!1},showEditBtn:{type:Boolean,default:!1}}};const o=(0,r(1900).Z)(n,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("section",{staticClass:"content-header clearfix"},[t.$route.query.region_mgmt_id?r("span",{staticStyle:{color:"black"}},[t._v("車輛狀態列表")]):r("span",[t._v("AMDR管理")])]),t._v(" "),r("section",{staticClass:"content"},[r("div",{staticClass:"row"},[r("div",{staticClass:"col-xs-12"},[r("vehicle-mgmt-list-view",{attrs:{"table-font-size":t.tableFontSize,"show-status":t.showStatus,"show-edit-btn":t.showEditBtn}})],1)])])])}),[],!1,null,null,null).exports},7446:(t,e,r)=>{"use strict";r.d(e,{Z:()=>p});var n=r(6486),o=r.n(n),i=r(9755),a=r.n(i),s=r(9669),c=r.n(s);function l(t){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},l(t)}function u(){u=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function c(t,e,r,n){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new L(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return E()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var s=w(a,r);if(s){if(s===h)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=d(t,e,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===h)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}(t,r,a),i}function d(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var h={};function f(){}function p(){}function m(){}var v={};s(v,o,(function(){return this}));var g=Object.getPrototypeOf,y=g&&g(g(S([])));y&&y!==e&&r.call(y,o)&&(v=y);var _=m.prototype=f.prototype=Object.create(v);function b(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function x(t,e){function n(o,i,a,s){var c=d(t[o],t,i);if("throw"!==c.type){var u=c.arg,h=u.value;return h&&"object"==l(h)&&r.call(h,"__await")?e.resolve(h.__await).then((function(t){n("next",t,a,s)}),(function(t){n("throw",t,a,s)})):e.resolve(h).then((function(t){u.value=t,a(u)}),(function(t){return n("throw",t,a,s)}))}s(c.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return h;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return h}var n=d(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,h;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,h):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,h)}function C(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function k(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function L(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(C,this),this.reset(!0)}function S(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:E}}function E(){return{value:void 0,done:!0}}return p.prototype=m,s(_,"constructor",m),s(m,"constructor",p),p.displayName=s(m,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,m):(t.__proto__=m,s(t,a,"GeneratorFunction")),t.prototype=Object.create(_),t},t.awrap=function(t){return{__await:t}},b(x.prototype),s(x.prototype,i,(function(){return this})),t.AsyncIterator=x,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new x(c(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},b(_),s(_,a,"Generator"),s(_,o,(function(){return this})),s(_,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=S,L.prototype={constructor:L,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(k),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=r.call(i,"catchLoc"),c=r.call(i,"finallyLoc");if(s&&c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,h):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),k(r),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;k(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:S(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),h}},t}function d(t,e,r,n,o,i,a){try{var s=t[i](a),c=s.value}catch(t){return void r(t)}s.done?e(c):Promise.resolve(c).then(n,o)}function h(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){d(i,n,o,a,s,"next",t)}function s(t){d(i,n,o,a,s,"throw",t)}a(void 0)}))}}const f={name:"VehicleMgmtListSelect",props:{value:{type:[Array,String]},disabled:{type:Boolean,default:!1},placeholder:{type:String,default:"請選擇AMDR車輛"},color:{type:String,default:"theme-blue"},multiple:{type:Boolean,default:!1},items:{type:Array,default:function(){return null}},regionMgmtId:{type:Number,default:null}},watch:{value:function(t){this.multiple?a()(this.$refs.select2).select2("data",o().map(t,(function(t){return t.vehicle_id}))):a()(this.$refs.select2).select2("data",[t]),this.refresh()}},data:function(){return{vehicleMgmts:[]}},created:function(){var t=this;return h(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==t.items){e.next=5;break}return e.next=3,t.fetchData();case 3:e.next=6;break;case 5:t.vehicleMgmts=t.items;case 6:t.setSelect2Val();case 7:case"end":return e.stop()}}),e)})))()},mounted:function(){this.init()},methods:{init:function(){var t=a()(this.$refs.select2),e=this;t.select2({minimumResultsForSearch:-1,allowClear:!0,closeOnSelect:!this.multiple}),t.on("select2:select",(function(t){e.setVal()})),t.on("select2:unselect",(function(t){e.setVal()}))},fetchData:function(){var t=this;return h(u().mark((function e(){var r,n;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.loading=!0,e.prev=1,e.next=4,c().get("/api/vehicleMgmts",{params:{region_mgmt_id:t.regionMgmtId}});case 4:0==(r=(r=e.sent).data).status&&(n=r.data,t.vehicleMgmts=n.vehicleMgmts),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),t.guestRedirectHome(e.t0);case 12:case"end":return e.stop()}}),e,null,[[1,9]])})))()},setSelect2Val:function(){var t=this;this.$nextTick((function(){t.multiple?a()(t.$refs.select2).val(o().map(t.value,(function(t){return t.vehicle_id}))):a()(t.$refs.select2).val([t.value]),a()(t.$refs.select2).trigger("change")}))},setVal:function(){var t=a()(this.$refs.select2).select2("data");this.multiple?this.$emit("input",o().map(t,(function(t){return{vehicle_id:t.id}}))):t.length>0?(this.$emit("input",t[0].id),this.$emit("update:selected",o().find(this.vehicleMgmts,(function(e){return e.vehicle_id==t[0].id})))):(this.$emit("input",null),this.$emit("update:selected",null)),this.$emit("change")},refresh:function(){a()(this.$refs.select2).val(null).trigger("change"),a()(this.$refs.select2).select2("destroy"),this.init(),this.setSelect2Val()}}};const p=(0,r(1900).Z)(f,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{class:[t.color]},[r("select",{ref:"select2",staticClass:"form-control select2",staticStyle:{width:"100%"},attrs:{multiple:t.multiple,"data-placeholder":t.placeholder,disabled:t.disabled}},t._l(t.vehicleMgmts,(function(e){return r("option",{domProps:{value:e.vehicle_id}},[t._v("\n            "+t._s(e.vehicle_id)+"\n        ")])})),0)])}),[],!1,null,null,null).exports},5872:(t,e,r)=>{"use strict";r.d(e,{Z:()=>D});var n=r(6486),o=r.n(n),i=r(9669),a=r.n(i),s=r(9038);const c={name:"VehicleMgmtView",props:{value:Object,index:{type:Number},regionMgmtId:Number},watch:{value:function(t,e){t.animation=t.vehicle_id==e.vehicle_id;var r=this.vehicleMgmt;if(this.vehicleMgmt=t,r.vehicle_id!=t.vehicle_id){window.Echo.leave("vehicleMgmts.".concat(r.vehicle_id));var n=this;setTimeout((function(){n.subscribe()}),500)}}},data:function(){return{vehicleMgmt:this.value}},created:function(){this.subscribe(),this.vehicleMgmt&&(this.vehicleMgmt.animation=!0)},destroyed:function(){this.vehicleMgmt&&window.Echo.leaveChannel("vehicleMgmts.".concat(this.vehicleMgmt.vehicle_id))},methods:{subscribe:function(){var t=this;window.Echo.private("vehicleMgmts.".concat(this.vehicleMgmt.vehicle_id)).listen("VehicleMgmtUpdated",(function(e){var r=e.vehicleMgmt;t.vehicleMgmt.animation=document.hasFocus(),t.vehicleMgmt.position_x=r.position_x,t.vehicleMgmt.position_y=r.position_y,t.vehicleMgmt.position_x_px=r.position_x_px,t.vehicleMgmt.position_y_px=r.position_y_px,t.vehicleMgmt.theta=r.theta,t.vehicleMgmt.vehicle_status=r.vehicle_status}))}}};var l=r(3379),u=r.n(l),d=r(4317),h={insert:"head",singleton:!1};u()(d.Z,h);d.Z.locals;var f=r(1900);const p=(0,f.Z)(c,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return t.vehicleMgmt?r("div",{staticClass:"vehicle-mgmt-point",style:"top: "+(t.vehicleMgmt.position_y_px-1)+"px;\n              left: "+(t.vehicleMgmt.position_x_px-1)+"px;\n              background-color: "+t.vehicleMgmt.color+"80;\n              transition: "+(t.vehicleMgmt.animation?"all 1000ms ease":"")+";",attrs:{title:t.vehicleMgmt.vehicle_id}},[null===t.vehicleMgmt.theta?r("img",{staticStyle:{width:"17px",height:"17px"},attrs:{src:"/img/icon-clean-robot-transparent.png?v=202302151731",alt:""}}):r("img",{style:"transform: rotate("+t.vehicleMgmt.theta+"deg); width: 50px; transform-origin: 9.6px; position: absolute; top: -28px; left: -1px",attrs:{src:"/img/icon-clean-robot-directional-transparent.png?v=202302151731",alt:"robot"}})]):t._e()}),[],!1,null,"d46af4dc",null).exports;function m(t){return m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},m(t)}function v(){v=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function c(t,e,r,n){var o=e&&e.prototype instanceof d?e:d,i=Object.create(o.prototype),a=new L(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return E()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var s=w(a,r);if(s){if(s===u)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=l(t,e,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===u)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}(t,r,a),i}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var u={};function d(){}function h(){}function f(){}var p={};s(p,o,(function(){return this}));var g=Object.getPrototypeOf,y=g&&g(g(S([])));y&&y!==e&&r.call(y,o)&&(p=y);var _=f.prototype=d.prototype=Object.create(p);function b(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function x(t,e){function n(o,i,a,s){var c=l(t[o],t,i);if("throw"!==c.type){var u=c.arg,d=u.value;return d&&"object"==m(d)&&r.call(d,"__await")?e.resolve(d.__await).then((function(t){n("next",t,a,s)}),(function(t){n("throw",t,a,s)})):e.resolve(d).then((function(t){u.value=t,a(u)}),(function(t){return n("throw",t,a,s)}))}s(c.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return u;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var n=l(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,u;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,u):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,u)}function C(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function k(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function L(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(C,this),this.reset(!0)}function S(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:E}}function E(){return{value:void 0,done:!0}}return h.prototype=f,s(_,"constructor",f),s(f,"constructor",h),h.displayName=s(f,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===h||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,f):(t.__proto__=f,s(t,a,"GeneratorFunction")),t.prototype=Object.create(_),t},t.awrap=function(t){return{__await:t}},b(x.prototype),s(x.prototype,i,(function(){return this})),t.AsyncIterator=x,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new x(c(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},b(_),s(_,a,"Generator"),s(_,o,(function(){return this})),s(_,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=S,L.prototype={constructor:L,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(k),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=r.call(i,"catchLoc"),c=r.call(i,"finallyLoc");if(s&&c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,u):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),u},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),k(r),u}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;k(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:S(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),u}},t}function g(t,e,r,n,o,i,a){try{var s=t[i](a),c=s.value}catch(t){return void r(t)}s.done?e(c):Promise.resolve(c).then(n,o)}const y={name:"VehicleMgmtTrView",props:{value:{type:Object},index:{type:Number},showStatus:{type:Boolean,default:!1},showEditBtn:{type:Boolean,default:!1}},watch:{value:function(t){t.animation=!0,this.vehicleMgmt=t}},created:function(){var t=this;this.vehicleMgmt.animation=!0,window.Echo.private("vehicleMgmts.".concat(this.vehicleMgmt.vehicle_id)).listen("VehicleMgmtUpdated",(function(e){t.vehicleMgmt.animation=document.hasFocus();var r=e.vehicleMgmt;t.vehicleMgmt.position_x=r.position_x,t.vehicleMgmt.position_y=r.position_y,t.vehicleMgmt.theta=r.theta,t.vehicleMgmt.vehicle_status=r.vehicle_status}))},beforeDestroy:function(){window.Echo.leave("vehicleMgmts.".concat(this.vehicleMgmt.vehicle_id))},data:function(){return{vehicleMgmt:this.value}},methods:{submit:function(t){var e,r=this;return(e=v().mark((function e(){return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r.sending=!0,e.next=4,a().patch("/api/vehicleMgmts/".concat(t.vehicle_id),t);case 4:0==e.sent.data.status&&r.$toast.success({title:"成功訊息",message:"更新成功！"}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),r.guestRedirectHome(e.t0);case 12:r.sending=!1;case 13:case"end":return e.stop()}}),e,null,[[0,9]])})),function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(t){g(i,n,o,a,s,"next",t)}function s(t){g(i,n,o,a,s,"throw",t)}a(void 0)}))})()}}};var _=r(1668),b={insert:"head",singleton:!1};u()(_.Z,b);_.Z.locals;const x=(0,f.Z)(y,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("tr",{class:{"tr-gray":t.index%2==1}},[r("td",{staticClass:"text-center",attrs:{"data-title":"車輛編號"}},[t._v(t._s(t.vehicleMgmt.vehicle_id))]),t._v(" "),r("td",{staticClass:"text-center",attrs:{"data-title":"載貨物種類"}},[t._v(t._s(t.vehicleMgmt.carrier_class))]),t._v(" "),r("td",{staticClass:"text-center",attrs:{"data-title":"車輛MAC"}},[t._v(t._s(t.vehicleMgmt.macaddr))]),t._v(" "),r("td",{staticClass:"text-center",attrs:{"data-title":"車輛IP"}},[t._v(t._s(t.vehicleMgmt.ipaddr))]),t._v(" "),t.showStatus?[r("td",{staticClass:"text-center",attrs:{"data-title":"車輛位置"}},[t.vehicleMgmt.vehicle_status?[t._v("\n                "+t._s(t.vehicleMgmt.vehicle_status.vehicle_location)+"\n            ")]:t._e()],2),t._v(" "),r("td",{attrs:{"data-title":"車輛狀態"}},[t.vehicleMgmt.vehicle_status?[t.vehicleMgmt.vehicle_status.water_box_status?r("div",[t._v("water box："+t._s(t.vehicleMgmt.vehicle_status.water_box_status))]):t._e(),t._v(" "),t.vehicleMgmt.vehicle_status.spray_status?r("div",[t._v("spray："+t._s(t.vehicleMgmt.vehicle_status.spray_status))]):t._e(),t._v(" "),t.vehicleMgmt.vehicle_status.mopping_motor_status?r("div",[t._v("mopping motor："+t._s(t.vehicleMgmt.vehicle_status.mopping_motor_status))]):t._e(),t._v(" "),t.vehicleMgmt.vehicle_status.air_laser_sensor_status?r("div",[t._v("air laser sensor："+t._s(t.vehicleMgmt.vehicle_status.air_laser_sensor_status))]):t._e(),t._v(" "),t.vehicleMgmt.vehicle_status.depth_camera_status?r("div",[t._v("depth camera："+t._s(t.vehicleMgmt.vehicle_status.depth_camera_status))]):t._e(),t._v(" "),t.vehicleMgmt.vehicle_status.pipe_import_status?r("div",[t._v("pipe import："+t._s(t.vehicleMgmt.vehicle_status.pipe_import_status))]):t._e(),t._v(" "),t.vehicleMgmt.vehicle_status.sweep_mode_status?r("div",[t._v("sweep mode："+t._s(t.vehicleMgmt.vehicle_status.sweep_mode_status))]):t._e()]:t._e()],2),t._v(" "),t.vehicleMgmt.vehicle_status?r("td",{staticClass:"text-center",attrs:{"data-title":"接收時間"}},[t._v(t._s(t.vehicleMgmt.vehicle_status.update_ts))]):r("td",{staticClass:"text-center",attrs:{"data-title":"接收時間"}},[t._v(t._s(null))])]:t._e(),t._v(" "),t.showEditBtn?[r("td",{staticClass:"text-center",attrs:{"data-title":"操作"}},[r("div",{staticClass:"text-right",staticStyle:{display:"inline-block"}},[r("label",{staticStyle:{"vertical-align":"bottom"},attrs:{for:"vehicle_id"}},[t._v(t._s(t.vehicleMgmt.color))]),t._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:t.vehicleMgmt.color,expression:"vehicleMgmt.color"}],attrs:{id:"vehicle_id",type:"color"},domProps:{value:t.vehicleMgmt.color},on:{input:function(e){e.target.composing||t.$set(t.vehicleMgmt,"color",e.target.value)}}})]),t._v(" "),r("div",{staticClass:"text-left",staticStyle:{display:"inline-block","vertical-align":"top"}},[r("button",{staticClass:"btn btn-light-green btn-xs",attrs:{title:"儲存"},on:{click:function(e){return t.submit(t.vehicleMgmt)}}},[r("i",{staticClass:"glyphicon glyphicon-pencil"}),t._v("\n                    儲存\n                ")])])])]:t._e()],2)}),[],!1,null,"5c4fe72c",null).exports;const w={name:"DrawPoint",props:{value:{type:Object,default:function(){return null}},scale:{type:Number,default:1},disabled:{type:Boolean,default:!1}},watch:{value:function(t){this.vertex=t}},computed:{},data:function(){return{vertex:this.value}},created:function(){this.value?this.vertex=o().cloneDeep(this.value):this.vertex={id:null,x_px:0,y_px:0}},methods:{}};var C=r(8276),k={insert:"head",singleton:!1};u()(C.Z,k);C.Z.locals;const L=(0,f.Z)(w,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return t.vertex?r("div",[r("div",{style:"position: absolute; top: "+t.vertex.y_px+"px; left: "+t.vertex.x_px+"px; width: 15px; height: 15px; background: #FFFF88; border-radius: 50%; border: 3px #545c51 solid;"})]):t._e()}),[],!1,null,"ae8558f8",null).exports;const S={name:"DrawLine",props:{value:{type:Object,default:function(){return null}},scale:{type:Number},disabled:{type:Boolean,default:!1}},watch:{value:function(){this.resetForm()}},data:function(){return{edge:null}},created:function(){this.resetForm()},methods:{setView:function(t){t=this.degToXY(this.edge.start.x_px,this.edge.start.y_px,20,this.edge.end.x_px,this.edge.end.y_px,8),this.edge.x1=t.x+3,this.edge.y1=t.y+1,t=this.degToXY(this.edge.end.x_px,this.edge.end.y_px,20,this.edge.start.x_px,this.edge.start.y_px,8),this.edge.x2=t.x,this.edge.y2=t.y+1,this.edge.degrees=this.calculateDegrees(this.edge.x1,this.edge.y1,this.edge.x2,this.edge.y2),this.edge.length=Math.sqrt((this.edge.x1-this.edge.x2)*(this.edge.x1-this.edge.x2)+(this.edge.y1-this.edge.y2)*(this.edge.y1-this.edge.y2))+12,this.edge.xMid=(this.edge.x1+this.edge.x2)/2+2,this.edge.yMid=(this.edge.y1+this.edge.y2)/2},degToXY:function(t,e,r,n,o,i){var a=this.calculateDegrees(t,e,n,o),s=this.disabled?12:14,c=(r-i)/2,l=a/180*Math.PI;return{x:t+=c+s*Math.cos(l),y:e+=c+s*Math.sin(l)}},resetForm:function(){var t=this.value,e=this.degToXY(t.start.x_px,t.start.y_px,14,t.end.x_px,t.end.y_px,8);t.x1=e.x,t.y1=e.y+2.25,e=this.degToXY(t.end.x_px,t.end.y_px,14,t.start.x_px,t.start.y_px,8),t.x2=e.x,t.y2=e.y+2.25,t.degrees=this.calculateDegrees(t.start.x_px,t.start.y_px,t.end.x_px,t.end.y_px),t.length=Math.sqrt((t.x1-t.x2)*(t.x1-t.x2)+(t.y1-t.y2)*(t.y1-t.y2))+16,t.xMid=(t.x1+t.x2)/2+4.5,t.yMid=(t.y1+t.y2)/2,this.edge=o().clone(t)}}};var E=r(1904),M={insert:"head",singleton:!1};u()(E.Z,M);E.Z.locals;function O(t){return O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},O(t)}function P(){P=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function c(t,e,r,n){var o=e&&e.prototype instanceof d?e:d,i=Object.create(o.prototype),a=new C(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return L()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var s=b(a,r);if(s){if(s===u)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=l(t,e,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===u)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}(t,r,a),i}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var u={};function d(){}function h(){}function f(){}var p={};s(p,o,(function(){return this}));var m=Object.getPrototypeOf,v=m&&m(m(k([])));v&&v!==e&&r.call(v,o)&&(p=v);var g=f.prototype=d.prototype=Object.create(p);function y(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function _(t,e){function n(o,i,a,s){var c=l(t[o],t,i);if("throw"!==c.type){var u=c.arg,d=u.value;return d&&"object"==O(d)&&r.call(d,"__await")?e.resolve(d.__await).then((function(t){n("next",t,a,s)}),(function(t){n("throw",t,a,s)})):e.resolve(d).then((function(t){u.value=t,a(u)}),(function(t){return n("throw",t,a,s)}))}s(c.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function b(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,b(t,e),"throw"===e.method))return u;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var n=l(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,u;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,u):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,u)}function x(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function w(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function C(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(x,this),this.reset(!0)}function k(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:L}}function L(){return{value:void 0,done:!0}}return h.prototype=f,s(g,"constructor",f),s(f,"constructor",h),h.displayName=s(f,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===h||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,f):(t.__proto__=f,s(t,a,"GeneratorFunction")),t.prototype=Object.create(g),t},t.awrap=function(t){return{__await:t}},y(_.prototype),s(_.prototype,i,(function(){return this})),t.AsyncIterator=_,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new _(c(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},y(g),s(g,a,"Generator"),s(g,o,(function(){return this})),s(g,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=k,C.prototype={constructor:C,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(w),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=r.call(i,"catchLoc"),c=r.call(i,"finallyLoc");if(s&&c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,u):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),u},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),w(r),u}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;w(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:k(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),u}},t}function j(t,e,r,n,o,i,a){try{var s=t[i](a),c=s.value}catch(t){return void r(t)}s.done?e(c):Promise.resolve(c).then(n,o)}function N(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){j(i,n,o,a,s,"next",t)}function s(t){j(i,n,o,a,s,"throw",t)}a(void 0)}))}}const T={name:"VehicleMgmtListView",components:{DrawLine:(0,f.Z)(S,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return t.edge?r("div",[r("div",{staticClass:"edge-line",class:{"edge-line-disabled":t.disabled},style:"position: absolute; top: "+t.edge.yMid+"px; left: "+(t.edge.xMid-t.edge.length/2)+"px; transform: rotate("+t.edge.degrees+"deg); width: "+t.edge.length+"px;"})]):t._e()}),[],!1,null,"49a65384",null).exports,DrawPoint:L,ClipLoader:s.Z,VehicleMgmtView:p,VehicleMgmtTrView:x},props:{value:{type:Array},tableFontSize:{type:Number,default:null},showStatus:{type:Boolean,default:!1},showEditBtn:{type:Boolean,default:!1},showVehiclePoints:{type:Boolean,default:!1},regionMgmtId:Number,mapType:{type:String,default:"radar"},scale:{type:Number,default:1}},watch:{value:function(t){this.vehicleMgmts=t}},data:function(){return{loading:!1,vehicleMgmts:[],selectedVehicle:[]}},created:function(){var t=this;return N(P().mark((function e(){var r;return P().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.fetchData();case 2:r=t,window.Echo.private("vehicleMgmts").listen("VehicleStatusUpdated",(function(t){var e=o().cloneDeep(t.vehicleStatus),n=o().cloneDeep(e.vehicle_mgmt);delete e.vehicle_mgmt,n.vehicle_status=e;var i=o().findIndex(r.vehicleMgmts,(function(t){return t.vehicle_id==n.vehicle_id}));if(n.clean_area&&n.clean_area.turning_points){n.clean_area.routes=[];for(var a=1;a<n.clean_area.turning_points.length;a++)n.clean_area.routes.push({start:n.clean_area.turning_points[a-1],end:n.clean_area.turning_points[a]})}-1!=i&&(n.mqtt_command&&(n.mqtt_command.remain_stop_second=r.vehicleMgmts[i].mqtt_command.remain_stop_second),r.vehicleMgmts.splice(i,1,n),r.$emit("input",r.vehicleMgmts))}));case 4:case"end":return e.stop()}}),e)})))()},destroyed:function(){window.Echo.leave("vehicleMgmts")},methods:{fetchData:function(){var t=this;return N(P().mark((function e(){var r,n;return P().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.loading=!0,e.prev=1,e.next=4,a().get("/api/vehicleMgmts");case 4:0==(r=(r=e.sent).data).status&&(n=r.data,t.vehicleMgmts=o().map(n.vehicleMgmts,(function(t){if(t.selected=0,t.animation=!1,t.mqtt_command&&(t.mqtt_command.sending=!1,t.mqtt_command.stop_disabled=!1,t.mqtt_command.remain_stop_second=t.stoppable_second+1),t.clean_area&&o().isArray(t.clean_area.turning_points)){t.clean_area.routes=[];for(var e=1;e<t.clean_area.turning_points.length;e++)t.clean_area.routes.push({start:t.clean_area.turning_points[e-1],end:t.clean_area.turning_points[e]})}return t})),t.$emit("input",t.vehicleMgmts)),e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(1),e.next=13,t.guestRedirectHome(e.t0);case 13:t.loading=!1;case 14:case"end":return e.stop()}}),e,null,[[1,9]])})))()},deleteVehicle:function(t){this.vehicleMgmts=o().filter(this.vehicleMgmts,(function(e){return e.vehicle_id!=t})),this.$emit("input",this.vehicleMgmts)}}};var $=r(4357),I={insert:"head",singleton:!1};u()($.Z,I);$.Z.locals;const D=(0,f.Z)(T,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[t.showVehiclePoints?[t._l(t.vehicleMgmts,(function(e,n){return[e.vehicle_status?[r("vehicle-mgmt-view",{directives:[{name:"show",rawName:"v-show",value:e.vehicle_status.region_mgmt&&e.vehicle_status.region_mgmt.id==t.regionMgmtId,expression:"vehicleMgmt.vehicle_status.region_mgmt && vehicleMgmt.vehicle_status.region_mgmt.id == regionMgmtId"}],attrs:{"region-mgmt-id":t.regionMgmtId},on:{delete:function(e){return t.deleteVehicle(t.vehicleMgmts[n].vehicle_id)}},model:{value:t.vehicleMgmts[n],callback:function(e){t.$set(t.vehicleMgmts,n,e)},expression:"vehicleMgmts[index]"}}),t._v(" "),e.clean_area&&e.clean_area.region_mgmt_id==t.regionMgmtId?[r("div",{staticClass:"clean-area",style:"\n                        top: "+(e.clean_area.start_goal_y_px<e.clean_area.end_goal_y_px?e.clean_area.start_goal_y_px:e.clean_area.end_goal_y_px)+"px;\n                        left: "+(e.clean_area.start_goal_x_px<e.clean_area.end_goal_x_px?e.clean_area.start_goal_x_px:e.clean_area.end_goal_x_px)+"px;\n                        height: "+t.abs(e.clean_area.start_goal_y_px-e.clean_area.end_goal_y_px)+"px;\n                        width: "+t.abs(e.clean_area.start_goal_x_px-e.clean_area.end_goal_x_px)+"px;"}),t._v(" "),t._l(e.clean_area.routes,(function(n,o){return r("draw-line",{key:"cleanRoute_"+o,attrs:{scale:t.scale},model:{value:e.clean_area.routes[o],callback:function(r){t.$set(e.clean_area.routes,o,r)},expression:"vehicleMgmt.clean_area.routes[i]"}})})),t._v(" "),t._l(e.clean_area.turning_points,(function(n,o){return r("draw-point",{key:"inflectionPoint_"+o,attrs:{scale:t.scale},model:{value:e.clean_area.turning_points[o],callback:function(r){t.$set(e.clean_area.turning_points,o,r)},expression:"vehicleMgmt.clean_area.turning_points[i]"}})}))]:t._e()]:t._e()]}))]:[r("div",{staticClass:"box"},[r("div",{staticClass:"box-body"},[t.loading?t._e():r("div",[r("table",{staticClass:"table table-bordered table-hover break-table",style:"font-size: "+t.tableFontSize+"px"},[r("thead",{staticClass:"table-head"},[t.showStatus?r("tr",[r("th",{staticClass:"text-center hide-td",attrs:{colspan:"4"}},[t._v("車輛資訊")]),t._v(" "),r("th",{staticClass:"text-center hide-td",attrs:{colspan:"3"}},[t._v("即時狀態")])]):t._e(),t._v(" "),r("tr",[r("th",{staticClass:"text-center hide-td"},[t._v("車輛編號")]),t._v(" "),r("th",{staticClass:"text-center hide-td"},[t._v("載貨物種類")]),t._v(" "),r("th",{staticClass:"text-center hide-td"},[t._v("車輛MAC")]),t._v(" "),r("th",{staticClass:"text-center hide-td"},[t._v("車輛IP")]),t._v(" "),t.showStatus?[r("th",{staticClass:"text-center hide-td"},[t._v("車輛位置")]),t._v(" "),r("th",{staticClass:"text-center hide-td"},[t._v("車輛狀態")]),t._v(" "),r("th",{staticClass:"text-center hide-td"},[t._v("接收時間")])]:t._e(),t._v(" "),t.showEditBtn?r("th",{staticClass:"text-center hide-td",attrs:{colspan:t.showStatus?1:2}},[t._v("操作")]):t._e()],2)]),t._v(" "),r("tbody",[t._l(t.vehicleMgmts,(function(e,n){return[r("vehicle-mgmt-tr-view",{attrs:{index:n,"show-status":t.showStatus,"show-edit-btn":t.showEditBtn},model:{value:t.vehicleMgmts[n],callback:function(e){t.$set(t.vehicleMgmts,n,e)},expression:"vehicleMgmts[index]"}})]}))],2)])]),t._v(" "),t.loading?r("clip-loader",{staticClass:"loading",attrs:{color:"gray",size:"30px"}}):t._e()],1)])]],2)}),[],!1,null,"384a1380",null).exports},2059:(t,e,r)=>{"use strict";r.d(e,{Z:()=>p});var n=r(6486),o=r.n(n),i=r(9755),a=r.n(i),s=r(9669),c=r.n(s);function l(t){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},l(t)}function u(){u=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function c(t,e,r,n){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new L(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return E()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var s=w(a,r);if(s){if(s===h)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=d(t,e,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===h)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}(t,r,a),i}function d(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var h={};function f(){}function p(){}function m(){}var v={};s(v,o,(function(){return this}));var g=Object.getPrototypeOf,y=g&&g(g(S([])));y&&y!==e&&r.call(y,o)&&(v=y);var _=m.prototype=f.prototype=Object.create(v);function b(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function x(t,e){function n(o,i,a,s){var c=d(t[o],t,i);if("throw"!==c.type){var u=c.arg,h=u.value;return h&&"object"==l(h)&&r.call(h,"__await")?e.resolve(h.__await).then((function(t){n("next",t,a,s)}),(function(t){n("throw",t,a,s)})):e.resolve(h).then((function(t){u.value=t,a(u)}),(function(t){return n("throw",t,a,s)}))}s(c.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return h;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return h}var n=d(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,h;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,h):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,h)}function C(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function k(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function L(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(C,this),this.reset(!0)}function S(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:E}}function E(){return{value:void 0,done:!0}}return p.prototype=m,s(_,"constructor",m),s(m,"constructor",p),p.displayName=s(m,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,m):(t.__proto__=m,s(t,a,"GeneratorFunction")),t.prototype=Object.create(_),t},t.awrap=function(t){return{__await:t}},b(x.prototype),s(x.prototype,i,(function(){return this})),t.AsyncIterator=x,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new x(c(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},b(_),s(_,a,"Generator"),s(_,o,(function(){return this})),s(_,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=S,L.prototype={constructor:L,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(k),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=r.call(i,"catchLoc"),c=r.call(i,"finallyLoc");if(s&&c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,h):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),k(r),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;k(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:S(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),h}},t}function d(t,e,r,n,o,i,a){try{var s=t[i](a),c=s.value}catch(t){return void r(t)}s.done?e(c):Promise.resolve(c).then(n,o)}function h(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){d(i,n,o,a,s,"next",t)}function s(t){d(i,n,o,a,s,"throw",t)}a(void 0)}))}}const f={name:"VertexListSelect",props:{value:{type:[Number,String,Object,Array]},disabled:{type:Boolean,default:!1},placeholder:{type:String,default:"請選擇"},multiple:{type:Boolean,default:!1},color:{type:String,default:"theme-blue"},allowClear:{type:Boolean,default:!1},regionMgmtId:[Number,String],filterValueColumns:{type:Array,default:function(){return[]}},valueColumn:{type:String,default:"id"},showDeviceName:{type:Boolean,default:!1},vertexTypeId:{type:Number},isDeploy:{type:Number,default:null},items:{type:Array,default:function(){return[]}}},computed:{filterVertices:function(){var t=this;return o().filter(this.vertices,(function(e){return!t.filterValueColumns.contains(e[t.valueColumn])}))},showValue:function(){var t=this;return!o().find(this.vertices,(function(e){return e[t.valueColumn]==t.value}))},vertexName:function(){var t=this,e=o().find(this.vertices,(function(e){return e[t.valueColumn]==t.value}));return e?e.name:this.value}},watch:{value:function(t){var e=this;this.multiple?a()(this.$refs.select2).select2("data",o().map(t,(function(t){return t[e.valueColumn]}))):a()(this.$refs.select2).select2("data",[t]);var r=o().find(this.vertices,(function(r){return r[e.valueColumn]==t}));r?this.$emit("update:vertexName",r.name):this.$emit("update:vertexName",null),this.init(),this.setSelect2Val()},regionMgmtId:function(){var t=this;return h(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.items.length>0)){e.next=4;break}t.vertices=t.items,e.next=8;break;case 4:return t.loading=!0,e.next=7,t.fetchData();case 7:t.loading=!1;case 8:t.init(),t.setSelect2Val();case 10:case"end":return e.stop()}}),e)})))()},filterVertices:function(){this.init(),this.setSelect2Val()},items:function(t){this.vertices=t}},data:function(){return{vertices:[],loading:!1}},mounted:function(){var t=this;return h(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.items.length>0)){e.next=4;break}t.vertices=t.items,e.next=8;break;case 4:return t.loading=!0,e.next=7,t.fetchData();case 7:t.loading=!1;case 8:t.init(),t.setSelect2Val();case 10:case"end":return e.stop()}}),e)})))()},methods:{init:function(){var t=a()(this.$refs.select2),e=this;t.select2({minimumResultsForSearch:1,allowClear:e.allowClear,language:{noResults:function(){return"查無選項"}}}),t.on("select2:select",(function(t){e.setVal()})),t.on("select2:unselect",(function(t){e.setVal()}))},fetchData:function(){var t=this;return h(u().mark((function e(){var r,n,i,a;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,c().get("/api/vertices",{params:{region_mgmt_id:t.regionMgmtId,vertex_type_id:t.vertexTypeId,is_deploy:t.isDeploy}});case 3:0==(r=(r=e.sent).data).status&&(n=r.data,t.vertices=o().map(n.vertices,(function(t){var e=o().find(t.vertex_configurations,(function(t){return"device_name"==t.type}));return t.device_name=e?e.data:null,t})),i=t,(a=o().find(t.vertices,(function(t){return t[i.valueColumn]==i.value})))?t.$emit("update:vertexName",a.name):t.$emit("update:vertexName",null)),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),t.guestRedirectHome(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))()},setSelect2Val:function(){var t=this;this.$nextTick((function(){t.multiple?a()(t.$refs.select2).val(o().map(t.value,(function(e){return e[t.valueColumn]}))):a()(t.$refs.select2).val([t.value]),a()(t.$refs.select2).trigger("change")}))},setVal:function(){var t=a()(this.$refs.select2).select2("data"),e=this;if(this.multiple)this.$emit("input",o().map(t,(function(t){return"id"==e.valueColumn?{id:parseInt(t.id)}:{id:t.id}})));else if(0!=t.length)if("id"==this.valueColumn)this.$emit("input",parseInt(t[0].id));else{this.$emit("input",t[0].id);var r=this.getDeviceName(t[0].id);this.$emit("update:deviceName",r)}else this.$emit("input",null),this.$emit("update:deviceName",null)},getDeviceName:function(t){var e=this,r=o().find(this.vertices,(function(r){return r[e.valueColumn]==t})),n=o().find(r.vertex_configurations,(function(t){return"device_name"==t.type}));return n?n.data:null}}};const p=(0,r(1900).Z)(f,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{class:[t.color]},[r("select",{ref:"select2",staticClass:"form-control select2",staticStyle:{width:"100%"},attrs:{multiple:t.multiple,"data-placeholder":t.placeholder,disabled:t.disabled||t.loading}},[t._l(t.filterVertices,(function(e){return r("option",{domProps:{value:e[t.valueColumn]}},[t._v("\n            "+t._s(e.name?e.name:"此站點尚未設定站點名稱")+"\n            "),t.showDeviceName?[t._v("（"+t._s(e.device_name)+"）")]:t._e()],2)})),t._v(" "),t.value&&t.showValue&&!t.multiple?r("option",{domProps:{value:t.value}},[t._v("\n            "+t._s(t.vertexName)+"\n        ")]):t._e()],2)])}),[],!1,null,null,null).exports},1900:(t,e,r)=>{"use strict";function n(t,e,r,n,o,i,a,s){var c,l="function"==typeof t?t.options:t;if(e&&(l.render=e,l.staticRenderFns=r,l._compiled=!0),n&&(l.functional=!0),i&&(l._scopeId="data-v-"+i),a?(c=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),o&&o.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(a)},l._ssrRegister=c):o&&(c=s?function(){o.call(this,(l.functional?this.parent:this).$root.$options.shadowRoot)}:o),c)if(l.functional){l._injectStyles=c;var u=l.render;l.render=function(t,e){return c.call(e),u(t,e)}}else{var d=l.beforeCreate;l.beforeCreate=d?[].concat(d,c):[c]}return{exports:t,options:l}}r.d(e,{Z:()=>n})},6424:()=>{},5381:()=>{}},t=>{var e=e=>t(t.s=e);t.O(0,[555,418,170,5,113],(()=>(e(7696),e(5067))));t.O()}]);